{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\readbook-master2\\\\src\\\\pages\\\\BooksPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/pages/BooksPage.js\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport axios from \"axios\";\n\n/** ====== ENV & URL helpers ====== */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst RAW_BASE = process.env.REACT_APP_API_BASE_URL || \"\";\nconst BASE_URL = RAW_BASE.replace(/\\/+$/, \"\");\nconst withKeys = url => {\n  const key_identity = process.env.REACT_APP_API_KEY_IDENTITY;\n  const key_credential = process.env.REACT_APP_API_KEY_CREDENTIAL;\n  const sep = url.includes(\"?\") ? \"&\" : \"?\";\n  return `${url}${sep}key_identity=${key_identity}&key_credential=${key_credential}`;\n};\nconst api = path => withKeys(`${BASE_URL}${path.startsWith(\"/\") ? path : `/${path}`}`);\nconst fetchJsonWithProxies = async finalUrl => {\n  try {\n    const viaAllorigins = `https://api.allorigins.win/get?url=${encodeURIComponent(finalUrl)}`;\n    const r1 = await axios.get(viaAllorigins, {\n      timeout: 15000\n    });\n    return JSON.parse(r1.data.contents);\n  } catch {}\n  try {\n    const viaCodetabs = `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(finalUrl)}`;\n    const r2 = await axios.get(viaCodetabs, {\n      timeout: 15000\n    });\n    return r2.data;\n  } catch {}\n  const r3 = await axios.get(finalUrl, {\n    timeout: 15000\n  });\n  return r3.data;\n};\n\n/** ====== Small helpers ====== */\nconst titleOf = item => {\n  var _item$dctermsTitle, _item$dctermsTitle$;\n  return item[\"o:title\"] || ((_item$dctermsTitle = item[\"dcterms:title\"]) === null || _item$dctermsTitle === void 0 ? void 0 : (_item$dctermsTitle$ = _item$dctermsTitle[0]) === null || _item$dctermsTitle$ === void 0 ? void 0 : _item$dctermsTitle$[\"@value\"]) || \"ไม่มีชื่อเอกสาร\";\n};\nconst descOf = item => {\n  var _item$dctermsAbstrac, _item$dctermsAbstrac$, _item$dctermsDescrip, _item$dctermsDescrip$;\n  return ((_item$dctermsAbstrac = item[\"dcterms:abstract\"]) === null || _item$dctermsAbstrac === void 0 ? void 0 : (_item$dctermsAbstrac$ = _item$dctermsAbstrac[0]) === null || _item$dctermsAbstrac$ === void 0 ? void 0 : _item$dctermsAbstrac$[\"@value\"]) || ((_item$dctermsDescrip = item[\"dcterms:description\"]) === null || _item$dctermsDescrip === void 0 ? void 0 : (_item$dctermsDescrip$ = _item$dctermsDescrip[0]) === null || _item$dctermsDescrip$ === void 0 ? void 0 : _item$dctermsDescrip$[\"@value\"]) || \"\";\n};\nconst thumbOf = item => {\n  var _item$thumbnail_displ, _item$thumbnail_displ2, _item$thumbnail_displ3;\n  return (item === null || item === void 0 ? void 0 : (_item$thumbnail_displ = item.thumbnail_display_urls) === null || _item$thumbnail_displ === void 0 ? void 0 : _item$thumbnail_displ.large) || (item === null || item === void 0 ? void 0 : (_item$thumbnail_displ2 = item.thumbnail_display_urls) === null || _item$thumbnail_displ2 === void 0 ? void 0 : _item$thumbnail_displ2.medium) || (item === null || item === void 0 ? void 0 : (_item$thumbnail_displ3 = item.thumbnail_display_urls) === null || _item$thumbnail_displ3 === void 0 ? void 0 : _item$thumbnail_displ3.square) || null;\n};\nconst createdOf = item => {\n  var _item$oCreated;\n  const iso = item === null || item === void 0 ? void 0 : (_item$oCreated = item[\"o:created\"]) === null || _item$oCreated === void 0 ? void 0 : _item$oCreated[\"@value\"];\n  if (!iso) return \"-\";\n  const d = new Date(iso);\n  return d.toLocaleDateString(\"th-TH\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\"\n  });\n};\n\n/** ====== UI bits ====== */\nfunction Breadcrumb() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto px-4 sm:px-8 py-4 text-sm text-[#a36a46]\",\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"/\",\n      className: \"hover:underline\",\n      children: \"\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2B\\u0E25\\u0E31\\u0E01\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"mx-2\",\n      children: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n      children: \"\\u0E40\\u0E2D\\u0E01\\u0E2A\\u0E32\\u0E23\\u0E15\\u0E31\\u0E27\\u0E40\\u0E02\\u0E35\\u0E22\\u0E19\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 39\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_c = Breadcrumb;\nfunction FilterSection({\n  title,\n  values,\n  selected,\n  onToggle\n}) {\n  _s();\n  const [open, setOpen] = useState(true);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-[#d8653b] text-white rounded-md overflow-hidden mb-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setOpen(!open),\n      className: \"w-full flex items-center justify-between px-4 py-3 font-semibold\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"material-symbols-outlined\",\n        children: open ? \"expand_less\" : \"expand_more\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), open && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white text-[#5b4a3e] max-h-80 overflow-auto\",\n      children: values.map(v => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => onToggle(v.name),\n        className: `w-full flex items-center justify-between px-4 py-2 text-sm border-t border-[#f1e9de] hover:bg-[#fff7ef] ${selected.has(v.name) ? \"text-[#d8653b] font-semibold\" : \"\"}`,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"truncate\",\n          children: v.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ml-2\",\n          children: v.count\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, this)]\n      }, v.name, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n_s(FilterSection, \"dVkDIfRb5RN4FjtonjBYYwpg89o=\");\n_c2 = FilterSection;\nfunction BookCard({\n  item,\n  onOpen\n}) {\n  const title = titleOf(item);\n  const desc = descOf(item);\n  const thumb = thumbOf(item);\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: \"flex flex-col h-full bg-[#fffdf6] border border-[#f1e9de] rounded-md shadow-sm\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full bg-[#eee2d3]\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative w-full aspect-[4/3] flex items-center justify-center\",\n        children: thumb ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: thumb,\n          alt: title,\n          className: \"w-full h-full object-contain\",\n          loading: \"lazy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-full bg-gradient-to-br from-[#efe7db] to-[#faefe1]\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 flex flex-col gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-[#5b4a3e] font-semibold leading-snug\",\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xs text-[#a36a46]\",\n        children: [\"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07: \", createdOf(item)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-[#6c5b4a] line-clamp-3\",\n        children: desc\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onOpen(item),\n          className: \"inline-flex items-center gap-1 px-3 py-1.5 rounded bg-[#d8653b] text-white text-sm font-semibold hover:bg-[#c85a32]\",\n          children: [\"\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E2D\\u0E48\\u0E32\\u0E19 PDF\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"material-symbols-outlined text-base\",\n            children: \"picture_as_pdf\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n}\n_c3 = BookCard;\nfunction Pagination({\n  total,\n  page,\n  perPage,\n  onPage,\n  canGuessNext\n}) {\n  // หากรู้ total จะแสดงเลขหน้า, ถ้าไม่รู้ total ใช้ Prev/Next อย่างเดียว\n  if (total == null) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center gap-2 py-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"px-3 py-1.5 border border-[#f1e9de] rounded hover:bg-[#fff7ef]\",\n        onClick: () => onPage(Math.max(1, page - 1)),\n        disabled: page === 1,\n        children: \"<\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-sm text-[#8e6f5a]\",\n        children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E40\\u0E23\\u0E35\\u0E22\\u0E01\\u0E17\\u0E35\\u0E25\\u0E30\\u0E2B\\u0E19\\u0E49\\u0E32\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"px-3 py-1.5 border border-[#f1e9de] rounded hover:bg-[#fff7ef]\",\n        onClick: () => onPage(page + 1),\n        disabled: !canGuessNext,\n        children: \">\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this);\n  }\n  const pages = Math.max(1, Math.ceil(total / perPage));\n  const windowSize = 6;\n  let start = Math.max(1, page - 2);\n  let end = Math.min(pages, start + windowSize - 1);\n  if (end - start + 1 < windowSize) start = Math.max(1, end - windowSize + 1);\n  const nums = [];\n  for (let i = start; i <= end; i++) nums.push(i);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-center gap-2 py-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"px-3 py-1.5 border border-[#f1e9de] rounded hover:bg-[#fff7ef]\",\n      onClick: () => onPage(Math.max(1, page - 1)),\n      disabled: page === 1,\n      children: \"<\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), nums.map(n => /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `px-3 py-1.5 border rounded ${n === page ? \"bg-[#d8653b] border-[#d8653b] text-white\" : \"border-[#f1e9de] hover:bg-[#fff7ef]\"}`,\n      onClick: () => onPage(n),\n      children: n\n    }, n, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"px-3 py-1.5 border border-[#f1e9de] rounded hover:bg-[#fff7ef]\",\n      onClick: () => onPage(Math.min(pages, page + 1)),\n      disabled: page === pages,\n      children: \">\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 178,\n    columnNumber: 5\n  }, this);\n}\n\n/** ====== Server-side fetch helpers ====== */\n_c4 = Pagination;\nfunction buildItemsUrl({\n  q,\n  page,\n  perPage,\n  selected\n}) {\n  const u = new URL(`${BASE_URL}/items`);\n  if (q) u.searchParams.set(\"fulltext_search\", q.trim());\n  u.searchParams.set(\"page\", String(page));\n  u.searchParams.set(\"per_page\", String(perPage));\n  // เรียงลำดับตามวันที่สร้างใหม่สุด\n  u.searchParams.set(\"sort_by\", \"created\");\n  u.searchParams.set(\"sort_order\", \"desc\");\n\n  // property filters (หลายเงื่อนไข AND)\n  let i = 0;\n  const addProp = (prop, value) => {\n    u.searchParams.set(`property[${i}][property]`, prop);\n    u.searchParams.set(`property[${i}][type]`, \"eq\");\n    u.searchParams.set(`property[${i}][text]`, value);\n    i += 1;\n  };\n  // รองรับเลือกได้หลายค่าต่อกลุ่ม (Set)\n  selected.facetCat.forEach(v => addProp(\"dcterms:subject\", v));\n  selected.facetLang.forEach(v => addProp(\"dcterms:language\", v));\n  selected.facetSource.forEach(v => addProp(\"dcterms:source\", v));\n  return withKeys(u.toString());\n}\nasync function fetchItemsPage(params) {\n  const url = buildItemsUrl(params);\n\n  // พยายามยิงตรงเพื่ออ่าน headers (รู้ total)\n  try {\n    const res = await fetch(url);\n    const data = await res.json();\n    const headers = Object.fromEntries(res.headers.entries());\n    const total = Number(headers[\"omeka-total-results\"]) || Number(headers[\"total-results\"]) || Number(headers[\"x-total-results\"]) || (headers[\"content-range\"] ? Number((headers[\"content-range\"].split(\"/\")[1] || \"\").trim()) : NaN);\n    return {\n      data: Array.isArray(data) ? data : [],\n      total: Number.isFinite(total) ? total : null\n    };\n  } catch {\n    // fallback ผ่าน proxy: ได้ data แต่ไม่รู้ total\n    const data = await fetchJsonWithProxies(url);\n    return {\n      data: Array.isArray(data) ? data : [],\n      total: null\n    };\n  }\n}\n\n/** ====== หน้า Books (รวมหนังสือ) ====== */\nexport default function BooksPage() {\n  _s2();\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [err, setErr] = useState(\"\");\n  const [query, setQuery] = useState(\"\");\n\n  // filters (หลายตัวเลือก/กลุ่ม)\n  const [facetCat, setFacetCat] = useState(new Set()); // หัวเรื่อง/หมวด\n  const [facetLang, setFacetLang] = useState(new Set()); // ภาษา\n  const [facetSource, setFacetSource] = useState(new Set()); // แหล่งข้อมูล\n\n  // pagination (server-side)\n  const [page, setPage] = useState(1);\n  const perPage = 9;\n  const [total, setTotal] = useState(null); // ถ้า null แสดงว่าอ่าน header ไม่ได้\n\n  // โหลดรายการทุกครั้งที่ query/filters/page เปลี่ยน\n  useEffect(() => {\n    (async () => {\n      try {\n        setLoading(true);\n        const {\n          data,\n          total\n        } = await fetchItemsPage({\n          q: query,\n          page,\n          perPage,\n          selected: {\n            facetCat,\n            facetLang,\n            facetSource\n          }\n        });\n        setItems(data);\n        setTotal(total);\n        setErr(\"\");\n      } catch (e) {\n        setErr((e === null || e === void 0 ? void 0 : e.message) || \"โหลดข้อมูลไม่สำเร็จ\");\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, [query, page, perPage, facetCat, facetLang, facetSource]);\n\n  // สร้าง facets แบบ client-side (จากผลลัพธ์ที่โหลดมาในหน้านั้น)\n  const facets = useMemo(() => {\n    const catMap = new Map();\n    const langMap = new Map();\n    const srcMap = new Map();\n    for (const it of items) {\n      const cats = (it[\"dcterms:subject\"] || []).map(x => (x === null || x === void 0 ? void 0 : x[\"o:label\"]) || (x === null || x === void 0 ? void 0 : x[\"@value\"])).filter(Boolean) || [];\n      cats.forEach(c => catMap.set(c, (catMap.get(c) || 0) + 1));\n      const langs = (it[\"dcterms:language\"] || []).map(x => (x === null || x === void 0 ? void 0 : x[\"o:label\"]) || (x === null || x === void 0 ? void 0 : x[\"@value\"])).filter(Boolean) || [];\n      langs.forEach(l => langMap.set(l, (langMap.get(l) || 0) + 1));\n      const srcs = (it[\"dcterms:source\"] || []).map(x => (x === null || x === void 0 ? void 0 : x[\"o:label\"]) || (x === null || x === void 0 ? void 0 : x[\"@value\"])).filter(Boolean) || [];\n      srcs.forEach(s => srcMap.set(s, (srcMap.get(s) || 0) + 1));\n    }\n    const toList = m => Array.from(m.entries()).map(([name, count]) => ({\n      name,\n      count\n    })).sort((a, b) => b.count - a.count);\n    return {\n      categories: toList(catMap),\n      languages: toList(langMap),\n      sources: toList(srcMap)\n    };\n  }, [items]);\n\n  // สลับเลือกใน facet (หลายค่าได้)\n  const toggleSet = (set, setSet, name) => {\n    const next = new Set(set);\n    const key = (name || \"\").toLowerCase();\n    if (next.has(key)) next.delete(key);else next.add(key);\n    setSet(next);\n    setPage(1);\n  };\n  const openPDF = async item => {\n    try {\n      var _item$oPrimary_media;\n      // ดึง media แล้วเปิดลิงก์ original\n      const mediaId = item === null || item === void 0 ? void 0 : (_item$oPrimary_media = item[\"o:primary_media\"]) === null || _item$oPrimary_media === void 0 ? void 0 : _item$oPrimary_media[\"o:id\"];\n      if (!mediaId) throw new Error(\"ไม่พบไฟล์หลักของรายการนี้\");\n      const media = await fetchJsonWithProxies(api(`/media/${mediaId}`));\n      const url = media === null || media === void 0 ? void 0 : media[\"o:original_url\"];\n      if (!url) throw new Error(\"ไม่พบ URL ของไฟล์ PDF\");\n      window.open(url, \"_blank\");\n    } catch (e) {\n      alert((e === null || e === void 0 ? void 0 : e.message) || \"เปิดไฟล์ไม่สำเร็จ\");\n    }\n  };\n\n  // เดาว่ามีหน้าถัดไปได้ไหม (กรณีไม่รู้ total)\n  const guessHasNext = items.length === perPage;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-[#fbf6ed] text-[#5b4a3e]\",\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"relative w-full h-[360px] md:h-[420px] overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/assets/hero-books.jpg\",\n        alt: \"banner\",\n        className: \"absolute inset-0 w-full h-full object-cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 bg-black/20\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative z-10 h-full flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"flex w-[90%] max-w-2xl\",\n          onSubmit: e => {\n            e.preventDefault();\n            setPage(1);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            value: query,\n            onChange: e => setQuery(e.target.value),\n            className: \"flex-1 h-12 md:h-14 px-4 rounded-l-full bg-white/95 focus:outline-none\",\n            placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E40\\u0E2D\\u0E01\\u0E2A\\u0E32\\u0E23\\u0E15\\u0E31\\u0E27\\u0E40\\u0E02\\u0E35\\u0E22\\u0E19\\u2026\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"px-5 md:px-6 rounded-r-full bg-[#f08a24] text-white font-bold\",\n            children: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Breadcrumb, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl md:text-3xl text-center font-semibold text-[#5b4a3e]\",\n        children: \"\\u0E40\\u0E2D\\u0E01\\u0E2A\\u0E32\\u0E23\\u0E15\\u0E31\\u0E27\\u0E40\\u0E02\\u0E35\\u0E22\\u0E19\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 text-center text-sm text-[#8e6f5a]\",\n        children: total != null ? `พบผลลัพธ์ทั้งหมด ${total.toLocaleString(\"th-TH\")} รายการ` : `โหมดแบ่งหน้า (จำนวนรวมไม่ถูกเปิดเผยโดยเซิร์ฟเวอร์)`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-8 mt-6 grid grid-cols-1 lg:grid-cols-[280px,1fr] gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n        className: \"order-2 lg:order-1\",\n        children: [/*#__PURE__*/_jsxDEV(FilterSection, {\n          title: \"\\u0E2B\\u0E31\\u0E27\\u0E40\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07 / \\u0E2B\\u0E21\\u0E27\\u0E14\",\n          values: facets.categories,\n          selected: facetCat,\n          onToggle: name => toggleSet(facetCat, setFacetCat, name)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FilterSection, {\n          title: \"\\u0E20\\u0E32\\u0E29\\u0E32\",\n          values: facets.languages,\n          selected: facetLang,\n          onToggle: name => toggleSet(facetLang, setFacetLang, name)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FilterSection, {\n          title: \"\\u0E41\\u0E2B\\u0E25\\u0E48\\u0E07\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\",\n          values: facets.sources,\n          selected: facetSource,\n          onToggle: name => toggleSet(facetSource, setFacetSource, name)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"order-1 lg:order-2\",\n        children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-20 text-center\",\n          children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14\\u2026\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 13\n        }, this) : err ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-20 text-center text-red-600\",\n          children: [\"\\u0E40\\u0E01\\u0E34\\u0E14\\u0E02\\u0E49\\u0E2D\\u0E1C\\u0E34\\u0E14\\u0E1E\\u0E25\\u0E32\\u0E14: \", err]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 13\n        }, this) : items.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-20 text-center\",\n          children: \"\\u0E44\\u0E21\\u0E48\\u0E1E\\u0E1A\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E17\\u0E35\\u0E48\\u0E15\\u0E23\\u0E07\\u0E01\\u0E31\\u0E1A\\u0E40\\u0E07\\u0E37\\u0E48\\u0E2D\\u0E19\\u0E44\\u0E02\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6\",\n            children: items.map(it => /*#__PURE__*/_jsxDEV(BookCard, {\n              item: it,\n              onOpen: openPDF\n            }, it[\"o:id\"], false, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n            total: total,\n            page: page,\n            perPage: perPage,\n            onPage: p => setPage(p),\n            canGuessNext: guessHasNext\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 370,\n    columnNumber: 5\n  }, this);\n}\n_s2(BooksPage, \"g+eNuRqm73Q3k7L4z0ugMKJNmRQ=\");\n_c5 = BooksPage;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"Breadcrumb\");\n$RefreshReg$(_c2, \"FilterSection\");\n$RefreshReg$(_c3, \"BookCard\");\n$RefreshReg$(_c4, \"Pagination\");\n$RefreshReg$(_c5, \"BooksPage\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","RAW_BASE","process","env","REACT_APP_API_BASE_URL","BASE_URL","replace","withKeys","url","key_identity","REACT_APP_API_KEY_IDENTITY","key_credential","REACT_APP_API_KEY_CREDENTIAL","sep","includes","api","path","startsWith","fetchJsonWithProxies","finalUrl","viaAllorigins","encodeURIComponent","r1","get","timeout","JSON","parse","data","contents","viaCodetabs","r2","r3","titleOf","item","_item$dctermsTitle","_item$dctermsTitle$","descOf","_item$dctermsAbstrac","_item$dctermsAbstrac$","_item$dctermsDescrip","_item$dctermsDescrip$","thumbOf","_item$thumbnail_displ","_item$thumbnail_displ2","_item$thumbnail_displ3","thumbnail_display_urls","large","medium","square","createdOf","_item$oCreated","iso","d","Date","toLocaleDateString","year","month","day","Breadcrumb","className","children","href","fileName","_jsxFileName","lineNumber","columnNumber","_c","FilterSection","title","values","selected","onToggle","_s","open","setOpen","onClick","map","v","name","has","count","_c2","BookCard","onOpen","desc","thumb","src","alt","loading","_c3","Pagination","total","page","perPage","onPage","canGuessNext","Math","max","disabled","pages","ceil","windowSize","start","end","min","nums","i","push","n","_c4","buildItemsUrl","q","u","URL","searchParams","set","trim","String","addProp","prop","value","facetCat","forEach","facetLang","facetSource","toString","fetchItemsPage","params","res","fetch","json","headers","Object","fromEntries","entries","Number","split","NaN","Array","isArray","isFinite","BooksPage","_s2","items","setItems","setLoading","err","setErr","query","setQuery","setFacetCat","Set","setFacetLang","setFacetSource","setPage","setTotal","e","message","facets","catMap","Map","langMap","srcMap","it","cats","x","filter","Boolean","c","langs","l","srcs","s","toList","m","from","sort","a","b","categories","languages","sources","toggleSet","setSet","next","key","toLowerCase","delete","add","openPDF","_item$oPrimary_media","mediaId","Error","media","window","alert","guessHasNext","length","onSubmit","preventDefault","onChange","target","placeholder","type","toLocaleString","p","_c5","$RefreshReg$"],"sources":["C:/Users/Asus/Desktop/readbook-master2/src/pages/BooksPage.js"],"sourcesContent":["// src/pages/BooksPage.js\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\n/** ====== ENV & URL helpers ====== */\r\nconst RAW_BASE = process.env.REACT_APP_API_BASE_URL || \"\";\r\nconst BASE_URL = RAW_BASE.replace(/\\/+$/, \"\");\r\n\r\nconst withKeys = (url) => {\r\n  const key_identity = process.env.REACT_APP_API_KEY_IDENTITY;\r\n  const key_credential = process.env.REACT_APP_API_KEY_CREDENTIAL;\r\n  const sep = url.includes(\"?\") ? \"&\" : \"?\";\r\n  return `${url}${sep}key_identity=${key_identity}&key_credential=${key_credential}`;\r\n};\r\nconst api = (path) =>\r\n  withKeys(`${BASE_URL}${path.startsWith(\"/\") ? path : `/${path}`}`);\r\n\r\nconst fetchJsonWithProxies = async (finalUrl) => {\r\n  try {\r\n    const viaAllorigins = `https://api.allorigins.win/get?url=${encodeURIComponent(finalUrl)}`;\r\n    const r1 = await axios.get(viaAllorigins, { timeout: 15000 });\r\n    return JSON.parse(r1.data.contents);\r\n  } catch {}\r\n  try {\r\n    const viaCodetabs = `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(finalUrl)}`;\r\n    const r2 = await axios.get(viaCodetabs, { timeout: 15000 });\r\n    return r2.data;\r\n  } catch {}\r\n  const r3 = await axios.get(finalUrl, { timeout: 15000 });\r\n  return r3.data;\r\n};\r\n\r\n/** ====== Small helpers ====== */\r\nconst titleOf = (item) =>\r\n  item[\"o:title\"] || item[\"dcterms:title\"]?.[0]?.[\"@value\"] || \"ไม่มีชื่อเอกสาร\";\r\n\r\nconst descOf = (item) =>\r\n  item[\"dcterms:abstract\"]?.[0]?.[\"@value\"] ||\r\n  item[\"dcterms:description\"]?.[0]?.[\"@value\"] ||\r\n  \"\";\r\n\r\nconst thumbOf = (item) =>\r\n  item?.thumbnail_display_urls?.large ||\r\n  item?.thumbnail_display_urls?.medium ||\r\n  item?.thumbnail_display_urls?.square ||\r\n  null;\r\n\r\nconst createdOf = (item) => {\r\n  const iso = item?.[\"o:created\"]?.[\"@value\"];\r\n  if (!iso) return \"-\";\r\n  const d = new Date(iso);\r\n  return d.toLocaleDateString(\"th-TH\", {\r\n    year: \"numeric\",\r\n    month: \"long\",\r\n    day: \"numeric\",\r\n  });\r\n};\r\n\r\n/** ====== UI bits ====== */\r\nfunction Breadcrumb() {\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-8 py-4 text-sm text-[#a36a46]\">\r\n      <a href=\"/\" className=\"hover:underline\">หน้าหลัก</a>{\" \"}\r\n      <span className=\"mx-2\">/</span> <span>เอกสารตัวเขียน</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction FilterSection({ title, values, selected, onToggle }) {\r\n  const [open, setOpen] = useState(true);\r\n  return (\r\n    <div className=\"bg-[#d8653b] text-white rounded-md overflow-hidden mb-3\">\r\n      <button\r\n        onClick={() => setOpen(!open)}\r\n        className=\"w-full flex items-center justify-between px-4 py-3 font-semibold\"\r\n      >\r\n        <span>{title}</span>\r\n        <span className=\"material-symbols-outlined\">\r\n          {open ? \"expand_less\" : \"expand_more\"}\r\n        </span>\r\n      </button>\r\n      {open && (\r\n        <div className=\"bg-white text-[#5b4a3e] max-h-80 overflow-auto\">\r\n          {values.map((v) => (\r\n            <button\r\n              key={v.name}\r\n              onClick={() => onToggle(v.name)}\r\n              className={`w-full flex items-center justify-between px-4 py-2 text-sm border-t border-[#f1e9de] hover:bg-[#fff7ef] ${\r\n                selected.has(v.name) ? \"text-[#d8653b] font-semibold\" : \"\"\r\n              }`}\r\n            >\r\n              <span className=\"truncate\">{v.name}</span>\r\n              <span className=\"ml-2\">{v.count}</span>\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction BookCard({ item, onOpen }) {\r\n  const title = titleOf(item);\r\n  const desc = descOf(item);\r\n  const thumb = thumbOf(item);\r\n  return (\r\n    <article className=\"flex flex-col h-full bg-[#fffdf6] border border-[#f1e9de] rounded-md shadow-sm\">\r\n      <div className=\"w-full bg-[#eee2d3]\">\r\n        <div className=\"relative w-full aspect-[4/3] flex items-center justify-center\">\r\n          {thumb ? (\r\n            <img\r\n              src={thumb}\r\n              alt={title}\r\n              className=\"w-full h-full object-contain\"\r\n              loading=\"lazy\"\r\n            />\r\n          ) : (\r\n            <div className=\"w-full h-full bg-gradient-to-br from-[#efe7db] to-[#faefe1]\" />\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"p-4 flex flex-col gap-2\">\r\n        <h3 className=\"text-[#5b4a3e] font-semibold leading-snug\">{title}</h3>\r\n        <div className=\"text-xs text-[#a36a46]\">\r\n          วันที่สร้าง: {createdOf(item)}\r\n        </div>\r\n        <p className=\"text-sm text-[#6c5b4a] line-clamp-3\">{desc}</p>\r\n        <div className=\"mt-2\">\r\n          <button\r\n            onClick={() => onOpen(item)}\r\n            className=\"inline-flex items-center gap-1 px-3 py-1.5 rounded bg-[#d8653b] text-white text-sm font-semibold hover:bg-[#c85a32]\"\r\n          >\r\n            เปิดอ่าน PDF\r\n            <span className=\"material-symbols-outlined text-base\">\r\n              picture_as_pdf\r\n            </span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n\r\nfunction Pagination({ total, page, perPage, onPage, canGuessNext }) {\r\n  // หากรู้ total จะแสดงเลขหน้า, ถ้าไม่รู้ total ใช้ Prev/Next อย่างเดียว\r\n  if (total == null) {\r\n    return (\r\n      <div className=\"flex items-center justify-center gap-2 py-6\">\r\n        <button\r\n          className=\"px-3 py-1.5 border border-[#f1e9de] rounded hover:bg-[#fff7ef]\"\r\n          onClick={() => onPage(Math.max(1, page - 1))}\r\n          disabled={page === 1}\r\n        >\r\n          {\"<\"}\r\n        </button>\r\n        <span className=\"text-sm text-[#8e6f5a]\">กำลังเรียกทีละหน้า…</span>\r\n        <button\r\n          className=\"px-3 py-1.5 border border-[#f1e9de] rounded hover:bg-[#fff7ef]\"\r\n          onClick={() => onPage(page + 1)}\r\n          disabled={!canGuessNext}\r\n        >\r\n          {\">\"}\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const pages = Math.max(1, Math.ceil(total / perPage));\r\n  const windowSize = 6;\r\n  let start = Math.max(1, page - 2);\r\n  let end = Math.min(pages, start + windowSize - 1);\r\n  if (end - start + 1 < windowSize) start = Math.max(1, end - windowSize + 1);\r\n\r\n  const nums = [];\r\n  for (let i = start; i <= end; i++) nums.push(i);\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center gap-2 py-6\">\r\n      <button\r\n        className=\"px-3 py-1.5 border border-[#f1e9de] rounded hover:bg-[#fff7ef]\"\r\n        onClick={() => onPage(Math.max(1, page - 1))}\r\n        disabled={page === 1}\r\n      >\r\n        {\"<\"}\r\n      </button>\r\n      {nums.map((n) => (\r\n        <button\r\n          key={n}\r\n          className={`px-3 py-1.5 border rounded ${\r\n            n === page\r\n              ? \"bg-[#d8653b] border-[#d8653b] text-white\"\r\n              : \"border-[#f1e9de] hover:bg-[#fff7ef]\"\r\n          }`}\r\n          onClick={() => onPage(n)}\r\n        >\r\n          {n}\r\n        </button>\r\n      ))}\r\n      <button\r\n        className=\"px-3 py-1.5 border border-[#f1e9de] rounded hover:bg-[#fff7ef]\"\r\n        onClick={() => onPage(Math.min(pages, page + 1))}\r\n        disabled={page === pages}\r\n      >\r\n        {\">\"}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\n/** ====== Server-side fetch helpers ====== */\r\nfunction buildItemsUrl({ q, page, perPage, selected }) {\r\n  const u = new URL(`${BASE_URL}/items`);\r\n\r\n  if (q) u.searchParams.set(\"fulltext_search\", q.trim());\r\n  u.searchParams.set(\"page\", String(page));\r\n  u.searchParams.set(\"per_page\", String(perPage));\r\n  // เรียงลำดับตามวันที่สร้างใหม่สุด\r\n  u.searchParams.set(\"sort_by\", \"created\");\r\n  u.searchParams.set(\"sort_order\", \"desc\");\r\n\r\n  // property filters (หลายเงื่อนไข AND)\r\n  let i = 0;\r\n  const addProp = (prop, value) => {\r\n    u.searchParams.set(`property[${i}][property]`, prop);\r\n    u.searchParams.set(`property[${i}][type]`, \"eq\");\r\n    u.searchParams.set(`property[${i}][text]`, value);\r\n    i += 1;\r\n  };\r\n  // รองรับเลือกได้หลายค่าต่อกลุ่ม (Set)\r\n  selected.facetCat.forEach((v) => addProp(\"dcterms:subject\", v));\r\n  selected.facetLang.forEach((v) => addProp(\"dcterms:language\", v));\r\n  selected.facetSource.forEach((v) => addProp(\"dcterms:source\", v));\r\n\r\n  return withKeys(u.toString());\r\n}\r\n\r\nasync function fetchItemsPage(params) {\r\n  const url = buildItemsUrl(params);\r\n\r\n  // พยายามยิงตรงเพื่ออ่าน headers (รู้ total)\r\n  try {\r\n    const res = await fetch(url);\r\n    const data = await res.json();\r\n\r\n    const headers = Object.fromEntries(res.headers.entries());\r\n    const total =\r\n      Number(headers[\"omeka-total-results\"]) ||\r\n      Number(headers[\"total-results\"]) ||\r\n      Number(headers[\"x-total-results\"]) ||\r\n      (headers[\"content-range\"]\r\n        ? Number((headers[\"content-range\"].split(\"/\")[1] || \"\").trim())\r\n        : NaN);\r\n\r\n    return {\r\n      data: Array.isArray(data) ? data : [],\r\n      total: Number.isFinite(total) ? total : null,\r\n    };\r\n  } catch {\r\n    // fallback ผ่าน proxy: ได้ data แต่ไม่รู้ total\r\n    const data = await fetchJsonWithProxies(url);\r\n    return { data: Array.isArray(data) ? data : [], total: null };\r\n  }\r\n}\r\n\r\n/** ====== หน้า Books (รวมหนังสือ) ====== */\r\nexport default function BooksPage() {\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [err, setErr] = useState(\"\");\r\n  const [query, setQuery] = useState(\"\");\r\n\r\n  // filters (หลายตัวเลือก/กลุ่ม)\r\n  const [facetCat, setFacetCat] = useState(new Set());      // หัวเรื่อง/หมวด\r\n  const [facetLang, setFacetLang] = useState(new Set());    // ภาษา\r\n  const [facetSource, setFacetSource] = useState(new Set()); // แหล่งข้อมูล\r\n\r\n  // pagination (server-side)\r\n  const [page, setPage] = useState(1);\r\n  const perPage = 9;\r\n  const [total, setTotal] = useState(null); // ถ้า null แสดงว่าอ่าน header ไม่ได้\r\n\r\n  // โหลดรายการทุกครั้งที่ query/filters/page เปลี่ยน\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        setLoading(true);\r\n        const { data, total } = await fetchItemsPage({\r\n          q: query,\r\n          page,\r\n          perPage,\r\n          selected: { facetCat, facetLang, facetSource },\r\n        });\r\n        setItems(data);\r\n        setTotal(total);\r\n        setErr(\"\");\r\n      } catch (e) {\r\n        setErr(e?.message || \"โหลดข้อมูลไม่สำเร็จ\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, [query, page, perPage, facetCat, facetLang, facetSource]);\r\n\r\n  // สร้าง facets แบบ client-side (จากผลลัพธ์ที่โหลดมาในหน้านั้น)\r\n  const facets = useMemo(() => {\r\n    const catMap = new Map();\r\n    const langMap = new Map();\r\n    const srcMap = new Map();\r\n\r\n    for (const it of items) {\r\n      const cats =\r\n        (it[\"dcterms:subject\"] || [])\r\n          .map((x) => x?.[\"o:label\"] || x?.[\"@value\"])\r\n          .filter(Boolean) || [];\r\n      cats.forEach((c) => catMap.set(c, (catMap.get(c) || 0) + 1));\r\n\r\n      const langs =\r\n        (it[\"dcterms:language\"] || [])\r\n          .map((x) => x?.[\"o:label\"] || x?.[\"@value\"])\r\n          .filter(Boolean) || [];\r\n      langs.forEach((l) => langMap.set(l, (langMap.get(l) || 0) + 1));\r\n\r\n      const srcs =\r\n        (it[\"dcterms:source\"] || [])\r\n          .map((x) => x?.[\"o:label\"] || x?.[\"@value\"])\r\n          .filter(Boolean) || [];\r\n      srcs.forEach((s) => srcMap.set(s, (srcMap.get(s) || 0) + 1));\r\n    }\r\n\r\n    const toList = (m) =>\r\n      Array.from(m.entries())\r\n        .map(([name, count]) => ({ name, count }))\r\n        .sort((a, b) => b.count - a.count);\r\n\r\n    return {\r\n      categories: toList(catMap),\r\n      languages: toList(langMap),\r\n      sources: toList(srcMap),\r\n    };\r\n  }, [items]);\r\n\r\n  // สลับเลือกใน facet (หลายค่าได้)\r\n  const toggleSet = (set, setSet, name) => {\r\n    const next = new Set(set);\r\n    const key = (name || \"\").toLowerCase();\r\n    if (next.has(key)) next.delete(key);\r\n    else next.add(key);\r\n    setSet(next);\r\n    setPage(1);\r\n  };\r\n\r\n  const openPDF = async (item) => {\r\n    try {\r\n      // ดึง media แล้วเปิดลิงก์ original\r\n      const mediaId = item?.[\"o:primary_media\"]?.[\"o:id\"];\r\n      if (!mediaId) throw new Error(\"ไม่พบไฟล์หลักของรายการนี้\");\r\n      const media = await fetchJsonWithProxies(api(`/media/${mediaId}`));\r\n      const url = media?.[\"o:original_url\"];\r\n      if (!url) throw new Error(\"ไม่พบ URL ของไฟล์ PDF\");\r\n      window.open(url, \"_blank\");\r\n    } catch (e) {\r\n      alert(e?.message || \"เปิดไฟล์ไม่สำเร็จ\");\r\n    }\r\n  };\r\n\r\n  // เดาว่ามีหน้าถัดไปได้ไหม (กรณีไม่รู้ total)\r\n  const guessHasNext = items.length === perPage;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#fbf6ed] text-[#5b4a3e]\">\r\n      {/* HERO + กล่องค้นหา */}\r\n      <section className=\"relative w-full h-[360px] md:h-[420px] overflow-hidden\">\r\n        <img\r\n          src=\"/assets/hero-books.jpg\"\r\n          alt=\"banner\"\r\n          className=\"absolute inset-0 w-full h-full object-cover\"\r\n        />\r\n        <div className=\"absolute inset-0 bg-black/20\" />\r\n        <div className=\"relative z-10 h-full flex items-center justify-center\">\r\n          <form\r\n            className=\"flex w-[90%] max-w-2xl\"\r\n            onSubmit={(e) => {\r\n              e.preventDefault();\r\n              setPage(1);\r\n            }}\r\n          >\r\n            <input\r\n              value={query}\r\n              onChange={(e) => setQuery(e.target.value)}\r\n              className=\"flex-1 h-12 md:h-14 px-4 rounded-l-full bg-white/95 focus:outline-none\"\r\n              placeholder=\"ค้นหาเอกสารตัวเขียน…\"\r\n            />\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-5 md:px-6 rounded-r-full bg-[#f08a24] text-white font-bold\"\r\n            >\r\n              ค้นหา\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </section>\r\n\r\n      <Breadcrumb />\r\n\r\n      {/* ชื่อหน้า + จำนวนผลลัพธ์ */}\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-8\">\r\n        <h1 className=\"text-2xl md:text-3xl text-center font-semibold text-[#5b4a3e]\">\r\n          เอกสารตัวเขียน\r\n        </h1>\r\n        <div className=\"mt-2 text-center text-sm text-[#8e6f5a]\">\r\n          {total != null\r\n            ? `พบผลลัพธ์ทั้งหมด ${total.toLocaleString(\"th-TH\")} รายการ`\r\n            : `โหมดแบ่งหน้า (จำนวนรวมไม่ถูกเปิดเผยโดยเซิร์ฟเวอร์)`}\r\n        </div>\r\n      </div>\r\n\r\n      {/* เนื้อหาหลัก: sidebar + grid */}\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-8 mt-6 grid grid-cols-1 lg:grid-cols-[280px,1fr] gap-6\">\r\n        {/* SIDEBAR */}\r\n        <aside className=\"order-2 lg:order-1\">\r\n          <FilterSection\r\n            title=\"หัวเรื่อง / หมวด\"\r\n            values={facets.categories}\r\n            selected={facetCat}\r\n            onToggle={(name) => toggleSet(facetCat, setFacetCat, name)}\r\n          />\r\n          <FilterSection\r\n            title=\"ภาษา\"\r\n            values={facets.languages}\r\n            selected={facetLang}\r\n            onToggle={(name) => toggleSet(facetLang, setFacetLang, name)}\r\n          />\r\n          <FilterSection\r\n            title=\"แหล่งข้อมูล\"\r\n            values={facets.sources}\r\n            selected={facetSource}\r\n            onToggle={(name) => toggleSet(facetSource, setFacetSource, name)}\r\n          />\r\n        </aside>\r\n\r\n        {/* GRID */}\r\n        <section className=\"order-1 lg:order-2\">\r\n          {loading ? (\r\n            <div className=\"py-20 text-center\">กำลังโหลด…</div>\r\n          ) : err ? (\r\n            <div className=\"py-20 text-center text-red-600\">\r\n              เกิดข้อผิดพลาด: {err}\r\n            </div>\r\n          ) : items.length === 0 ? (\r\n            <div className=\"py-20 text-center\">\r\n              ไม่พบรายการที่ตรงกับเงื่อนไข\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6\">\r\n                {items.map((it) => (\r\n                  <BookCard key={it[\"o:id\"]} item={it} onOpen={openPDF} />\r\n                ))}\r\n              </div>\r\n\r\n              <Pagination\r\n                total={total}\r\n                page={page}\r\n                perPage={perPage}\r\n                onPage={(p) => setPage(p)}\r\n                canGuessNext={guessHasNext}\r\n              />\r\n            </>\r\n          )}\r\n        </section>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}