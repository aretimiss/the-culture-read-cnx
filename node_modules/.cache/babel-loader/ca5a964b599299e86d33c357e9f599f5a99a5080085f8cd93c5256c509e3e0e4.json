{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\the-culture-read-cnx\\\\src\\\\pages\\\\BooksPage.js\",\n  _s = $RefreshSig$();\n// src/pages/BooksPage.jsx\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport SiteHeader from \"../components/SiteHeader\";\nimport Footer from \"../components/Footer\";\nimport BackToTop from \"../components/BackToTop\";\nimport BookCard from \"../components/BookCard\";\nimport { fetchItemsLite, fetchJsonWithProxies, withKeys, api } from \"../lib/omekaClient\";\nimport { titleOf, descOf } from \"../lib/textOf\"; // ใช้ fallback เดิมเป็นสำรอง\nimport { pickLang } from \"../lib/i18nPick\";\n\n/* ---------- helpers: เลือกภาษาที่ “เข้มงวดกว่า” ---------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst variantsFor = lang => {\n  const L = (lang || \"\").toLowerCase();\n  // แผนที่ภาษาที่เจอบ่อย (เพิ่มได้ตามที่คุณใช้ใน Omeka)\n  const map = {\n    th: [\"th\", \"tha\", \"th-th\"],\n    en: [\"en\", \"eng\", \"en-us\", \"en-gb\"],\n    lo: [\"lo\", \"lao\", \"lo-la\"],\n    tl: [\"tl\", \"tgl\", \"fil\", \"fil-ph\"],\n    zh: [\"zh\", \"zho\", \"zh-cn\", \"zh-hans\", \"zh-tw\", \"zh-hant\"]\n  };\n  // ถ้าไม่อยู่ใน map ให้ลอง [lang, lang-lang]\n  const generic = [L, `${L}-${L}`];\n  return map[L] || generic;\n};\nconst pickLangStrict = (multilangField, lang) => {\n  var _multilangField$;\n  // multilangField ควรเป็น array ของ { \"@value\": \"...\", \"@language\": \"en\" }\n  if (!Array.isArray(multilangField)) return \"\";\n  const prefs = variantsFor(lang);\n  // 1) exact match ตามลำดับความชอบ\n  for (const p of prefs) {\n    const hit = multilangField.find(x => ((x === null || x === void 0 ? void 0 : x[\"@language\"]) || \"\").toLowerCase() === p);\n    if (hit !== null && hit !== void 0 && hit[\"@value\"]) return hit[\"@value\"];\n  }\n  // 2) กวาดหาโค้ดภาษาที่ขึ้นต้นเหมือนกัน (เช่น en-* )\n  const base = (lang || \"\").toLowerCase();\n  const loose = multilangField.find(x => ((x === null || x === void 0 ? void 0 : x[\"@language\"]) || \"\").toLowerCase().startsWith(base));\n  if (loose !== null && loose !== void 0 && loose[\"@value\"]) return loose[\"@value\"];\n\n  // 3) ถ้าไม่เจอเลย ค่อย fallback ตัวแรก\n  return ((_multilangField$ = multilangField[0]) === null || _multilangField$ === void 0 ? void 0 : _multilangField$[\"@value\"]) || \"\";\n};\n\n/* ---------- UI ช่วย ๆ ---------- */\nconst ShelfBar = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"h-3 rounded-full bg-gradient-to-b from-[#e7d8c9] to-[#d9c1a9] shadow-inner\"\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 61,\n  columnNumber: 3\n}, this);\n_c = ShelfBar;\nconst ShelfTitle = ({\n  children\n}) => /*#__PURE__*/_jsxDEV(\"h2\", {\n  className: \"text-xl md:text-2xl font-extrabold tracking-wide text-[#5b4a3e] mb-3\",\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 65,\n  columnNumber: 3\n}, this);\n\n/* ===== Skeleton Loader ===== */\n_c2 = ShelfTitle;\nconst SkeletonLibrary = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"py-20 flex flex-col items-center gap-6 animate-pulse text-[#5b4a3e]\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-8 w-52 bg-[#e5d7ca]/50 rounded-full\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-6 w-72 bg-[#e5d7ca]/40 rounded-full\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-6 w-64 bg-[#e5d7ca]/30 rounded-full\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-10 px-4 w-full max-w-6xl\",\n    children: Array.from({\n      length: 8\n    }).map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"aspect-[3/4] bg-[#e5d7ca]/40 rounded-xl shadow-sm\"\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 72,\n  columnNumber: 3\n}, this);\n_c3 = SkeletonLibrary;\nexport default function BooksPage() {\n  _s();\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const [items, setItems] = useState([]);\n  const [err, setErr] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [query, setQuery] = useState(\"\");\n  const [activeSet, setActiveSet] = useState(\"all\");\n  const [setLabels, setSetLabels] = useState({});\n  const navigate = useNavigate();\n\n  /* 1) โหลดรายการหนังสือ (เมื่อภาษาเปลี่ยน) */\n  useEffect(() => {\n    (async () => {\n      try {\n        setLoading(true);\n        const data = await fetchItemsLite({\n          limit: 60,\n          sortBy: \"created\",\n          sortOrder: \"desc\"\n        });\n        setItems(Array.isArray(data) ? data : []);\n        setErr(\"\");\n      } catch (e) {\n        setErr((e === null || e === void 0 ? void 0 : e.message) || t(\"errors.loadFailed\", \"โหลดข้อมูลไม่สำเร็จ\"));\n      } finally {\n        setLoading(false);\n      }\n    })();\n    // เราต้องการให้รอบโหลดนี้เกิดเมื่อภาษาเปลี่ยน เพื่อเคลียร์ state/transition ให้ครบ\n  }, [i18n.language, t]);\n\n  /* 2) โหลด label ของคอลเลกชันตามภาษา (เข้มงวดเหมือนกัน) */\n  useEffect(() => {\n    (async () => {\n      try {\n        const ids = Array.from(new Set((Array.isArray(items) ? items : []).flatMap(it => (Array.isArray(it === null || it === void 0 ? void 0 : it[\"o:item_set\"]) ? it[\"o:item_set\"] : []).map(s => s === null || s === void 0 ? void 0 : s[\"o:id\"]).filter(Boolean))));\n        if (!ids.length) {\n          setSetLabels({});\n          return;\n        }\n        const pairs = await Promise.all(ids.map(async id => {\n          try {\n            const r = await fetchJsonWithProxies(withKeys(api(`/item_sets/${id}`)));\n            const strict = pickLangStrict(r === null || r === void 0 ? void 0 : r[\"dcterms:title\"], i18n.language);\n            const name = strict || (r === null || r === void 0 ? void 0 : r[\"o:title\"]) || `Collection #${id}`;\n            return [String(id), name];\n          } catch {\n            return [String(id), `Collection #${id}`];\n          }\n        }));\n        setSetLabels(Object.fromEntries(pairs));\n      } catch {\n        // ignore\n      }\n    })();\n  }, [items, i18n.language]);\n\n  /* Tabs หมวดหมู่ */\n  const categoryTabs = useMemo(() => {\n    const tabs = [{\n      id: \"all\",\n      label: t(\"filters.all\", \"ทั้งหมด\")\n    }];\n    const others = Object.entries(setLabels).map(([id, label]) => ({\n      id,\n      label\n    }));\n    return tabs.concat(others);\n  }, [setLabels, t]);\n\n  /* สร้างฟังก์ชันคืนค่าชื่อ/คำโปรยตามภาษาแบบเข้มงวด */\n  const displayTitle = it => pickLangStrict(it === null || it === void 0 ? void 0 : it[\"dcterms:title\"], i18n.language) || titleOf(it); // fallback เดิม\n\n  const displayDesc = it => pickLangStrict(it === null || it === void 0 ? void 0 : it[\"dcterms:description\"], i18n.language) || descOf(it) || \"\";\n\n  /* Filter รายการ — ค้นจากค่าตามภาษาปัจจุบันจริง ๆ */\n  const filtered = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    return items.filter(it => {\n      // ✅ ดึงชื่อ/คำโปรยตามภาษาปัจจุบัน\n      const title = (displayTitle(it) || \"\").toLowerCase();\n      const desc = (displayDesc(it) || \"\").toLowerCase();\n      const hit = !q || title.includes(q) || desc.includes(q);\n      if (!hit) return false;\n\n      // ✅ กรองหมวดหมู่ (คอลเลกชัน)\n      if (activeSet === \"all\") return true;\n      const sets = Array.isArray(it === null || it === void 0 ? void 0 : it[\"o:item_set\"]) ? it[\"o:item_set\"] : [];\n      return sets.some(s => String(s === null || s === void 0 ? void 0 : s[\"o:id\"]) === String(activeSet));\n    });\n  }, [items, query, activeSet, i18n.language]);\n\n  /* จัดกลุ่มชั้นวาง */\n  const groupedBySet = useMemo(() => {\n    if (activeSet !== \"all\") return {};\n    const groups = {};\n    filtered.forEach(it => {\n      const sets = Array.isArray(it === null || it === void 0 ? void 0 : it[\"o:item_set\"]) ? it[\"o:item_set\"] : [];\n      if (sets.length === 0) (groups[\"_none\"] ||= []).push(it);else {\n        sets.forEach(s => {\n          const key = String((s === null || s === void 0 ? void 0 : s[\"o:id\"]) || \"_none\");\n          (groups[key] ||= []).push(it);\n        });\n      }\n    });\n    return groups;\n  }, [filtered, activeSet]);\n  const singleShelfItems = useMemo(() => {\n    if (activeSet === \"all\") return [];\n    return filtered;\n  }, [filtered, activeSet]);\n  const openBook = item => {\n    const id = item === null || item === void 0 ? void 0 : item[\"o:id\"];\n    if (!id) return alert(t(\"errors.noId\", \"ไม่พบรหัสรายการ\"));\n    navigate(`/read/${id}`);\n  };\n\n  /* ==== UI ==== */\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-[#faf7f2] text-[#111518]\",\n    children: [/*#__PURE__*/_jsxDEV(SiteHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      mode: \"wait\",\n      children: loading ? /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0\n        },\n        animate: {\n          opacity: 1\n        },\n        exit: {\n          opacity: 0\n        },\n        transition: {\n          duration: 0.3\n        },\n        children: /*#__PURE__*/_jsxDEV(SkeletonLibrary, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this)\n      }, \"loading\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(motion.div, {\n        // บังคับ re-render UI ทั้งบล็อคเมื่อภาษาเปลี่ยน\n        initial: {\n          opacity: 0\n        },\n        animate: {\n          opacity: 1\n        },\n        exit: {\n          opacity: 0\n        },\n        transition: {\n          duration: 0.25\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"relative h-[46vh] min-h-[360px] w-full overflow-hidden\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 bg-center bg-cover\",\n            style: {\n              backgroundImage: \"url(/assets/banner.webp)\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 bg-[#fff1e6]/60\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative z-10 h-full flex flex-col items-center justify-center text-center px-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-4xl md:text-6xl font-extrabold tracking-wide text-[#5b4a3e] drop-shadow\",\n              children: t(\"books.title\", \"ห้องสมุด\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-3 max-w-2xl text-[#5b4a3e]/80\",\n              children: t(\"books.subtitle\", \"ค้นหาและเลือกดูหนังสือจากคอลเลกชันต่าง ๆ\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6 w-full max-w-xl\",\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: e => e.preventDefault(),\n                className: \"flex items-center rounded-2xl bg-white/90 ring-1 ring-black/10 shadow\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  value: query,\n                  onChange: e => setQuery(e.target.value),\n                  placeholder: t(\"search.placeholder\", \"ค้นหาชื่อหนังสือ / คำสำคัญ...\"),\n                  className: \"flex-1 px-4 py-3 rounded-2xl bg-transparent outline-none\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"px-5 py-3 font-semibold\",\n                  children: t(\"actions.search\", \"ค้นหา\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-7xl mx-auto px-4 sm:px-8 lg:px-12 mt-8 grid grid-cols-1 lg:grid-cols-4 gap-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n            className: \"lg:col-span-1\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sticky top-28 space-y-3 p-4 bg-white/70 backdrop-blur-md rounded-2xl shadow ring-1 ring-black/10\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-bold text-[#5b4a3e] mb-2\",\n                children: t(\"filters.category\", \"หมวดหมู่\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-col gap-2\",\n                children: categoryTabs.map(tab => /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setActiveSet(tab.id),\n                  className: `text-left px-3 py-2 rounded-lg text-sm md:text-base font-medium transition ${activeSet === tab.id ? \"bg-[#5b4a3e] text-white shadow\" : \"hover:bg-black/5 text-[#5b4a3e]\"}`,\n                  children: tab.label\n                }, tab.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n            className: \"lg:col-span-3\",\n            children: err ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-16 text-center text-red-600\",\n              children: err\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 19\n            }, this) : filtered.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-16 text-center\",\n              children: t(\"status.noResults\", \"ไม่พบหนังสือที่ตรงกับเงื่อนไข\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 19\n            }, this) : activeSet === \"all\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-12\",\n              children: [Object.entries(groupedBySet).filter(([key]) => key !== \"_none\").map(([key, group]) => /*#__PURE__*/_jsxDEV(\"section\", {\n                children: [/*#__PURE__*/_jsxDEV(ShelfTitle, {\n                  children: setLabels[key] || `${t(\"books.collection\", \"คอลเลกชัน\")} #${key}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 317,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-3\",\n                  children: group.map(it => /*#__PURE__*/_jsxDEV(BookCard, {\n                    item: it,\n                    onOpen: openBook\n                    /* ส่งชื่อ/คำโปรยที่เลือกตามภาษาแบบเข้มงวดเข้าไป */,\n                    titleOverride: displayTitle(it),\n                    descOverride: displayDesc(it)\n                  }, it[\"o:id\"], false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 322,\n                    columnNumber: 31\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(ShelfBar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 27\n                }, this)]\n              }, key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 25\n              }, this)), groupedBySet[\"_none\"] && /*#__PURE__*/_jsxDEV(\"section\", {\n                children: [/*#__PURE__*/_jsxDEV(ShelfTitle, {\n                  children: t(\"books.uncategorized\", \"ไม่ระบุหมวด\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-3\",\n                  children: groupedBySet[\"_none\"].map(it => /*#__PURE__*/_jsxDEV(BookCard, {\n                    item: it,\n                    onOpen: openBook,\n                    titleOverride: displayTitle(it),\n                    descOverride: displayDesc(it)\n                  }, it[\"o:id\"], false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(ShelfBar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"section\", {\n              className: \"space-y-4\",\n              children: [/*#__PURE__*/_jsxDEV(ShelfTitle, {\n                children: setLabels[String(activeSet)] || t(\"books.collection\", \"คอลเลกชัน\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-3\",\n                children: singleShelfItems.map(it => /*#__PURE__*/_jsxDEV(BookCard, {\n                  item: it,\n                  onOpen: openBook,\n                  titleOverride: displayTitle(it),\n                  descOverride: displayDesc(it)\n                }, it[\"o:id\"], false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(ShelfBar, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(BackToTop, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 13\n        }, this)]\n      }, i18n.language, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 5\n  }, this);\n}\n_s(BooksPage, \"Yki56LOd3FSjfd+xBzI2VKhB4xA=\", false, function () {\n  return [useTranslation, useNavigate];\n});\n_c4 = BooksPage;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"ShelfBar\");\n$RefreshReg$(_c2, \"ShelfTitle\");\n$RefreshReg$(_c3, \"SkeletonLibrary\");\n$RefreshReg$(_c4, \"BooksPage\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useNavigate","useTranslation","motion","AnimatePresence","SiteHeader","Footer","BackToTop","BookCard","fetchItemsLite","fetchJsonWithProxies","withKeys","api","titleOf","descOf","pickLang","jsxDEV","_jsxDEV","variantsFor","lang","L","toLowerCase","map","th","en","lo","tl","zh","generic","pickLangStrict","multilangField","_multilangField$","Array","isArray","prefs","p","hit","find","x","base","loose","startsWith","ShelfBar","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","ShelfTitle","children","_c2","SkeletonLibrary","from","length","_","i","_c3","BooksPage","_s","t","i18n","items","setItems","err","setErr","loading","setLoading","query","setQuery","activeSet","setActiveSet","setLabels","setSetLabels","navigate","data","limit","sortBy","sortOrder","e","message","language","ids","Set","flatMap","it","s","filter","Boolean","pairs","Promise","all","id","r","strict","name","String","Object","fromEntries","categoryTabs","tabs","label","others","entries","concat","displayTitle","displayDesc","filtered","q","trim","title","desc","includes","sets","some","groupedBySet","groups","forEach","push","key","singleShelfItems","openBook","item","alert","mode","div","initial","opacity","animate","exit","transition","duration","style","backgroundImage","onSubmit","preventDefault","value","onChange","target","placeholder","tab","onClick","group","onOpen","titleOverride","descOverride","_c4","$RefreshReg$"],"sources":["C:/Users/Asus/Desktop/the-culture-read-cnx/src/pages/BooksPage.js"],"sourcesContent":["// src/pages/BooksPage.jsx\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\nimport SiteHeader from \"../components/SiteHeader\";\r\nimport Footer from \"../components/Footer\";\r\nimport BackToTop from \"../components/BackToTop\";\r\nimport BookCard from \"../components/BookCard\";\r\n\r\nimport {\r\n  fetchItemsLite,\r\n  fetchJsonWithProxies,\r\n  withKeys,\r\n  api,\r\n} from \"../lib/omekaClient\";\r\nimport { titleOf, descOf } from \"../lib/textOf\"; // ใช้ fallback เดิมเป็นสำรอง\r\nimport { pickLang } from \"../lib/i18nPick\";\r\n\r\n/* ---------- helpers: เลือกภาษาที่ “เข้มงวดกว่า” ---------- */\r\nconst variantsFor = (lang) => {\r\n  const L = (lang || \"\").toLowerCase();\r\n  // แผนที่ภาษาที่เจอบ่อย (เพิ่มได้ตามที่คุณใช้ใน Omeka)\r\n  const map = {\r\n    th: [\"th\", \"tha\", \"th-th\"],\r\n    en: [\"en\", \"eng\", \"en-us\", \"en-gb\"],\r\n    lo: [\"lo\", \"lao\", \"lo-la\"],\r\n    tl: [\"tl\", \"tgl\", \"fil\", \"fil-ph\"],\r\n    zh: [\"zh\", \"zho\", \"zh-cn\", \"zh-hans\", \"zh-tw\", \"zh-hant\"],\r\n  };\r\n  // ถ้าไม่อยู่ใน map ให้ลอง [lang, lang-lang]\r\n  const generic = [L, `${L}-${L}`];\r\n  return map[L] || generic;\r\n};\r\n\r\nconst pickLangStrict = (multilangField, lang) => {\r\n  // multilangField ควรเป็น array ของ { \"@value\": \"...\", \"@language\": \"en\" }\r\n  if (!Array.isArray(multilangField)) return \"\";\r\n  const prefs = variantsFor(lang);\r\n  // 1) exact match ตามลำดับความชอบ\r\n  for (const p of prefs) {\r\n    const hit = multilangField.find(\r\n      (x) => (x?.[\"@language\"] || \"\").toLowerCase() === p\r\n    );\r\n    if (hit?.[\"@value\"]) return hit[\"@value\"];\r\n  }\r\n  // 2) กวาดหาโค้ดภาษาที่ขึ้นต้นเหมือนกัน (เช่น en-* )\r\n  const base = (lang || \"\").toLowerCase();\r\n  const loose = multilangField.find((x) =>\r\n    (x?.[\"@language\"] || \"\").toLowerCase().startsWith(base)\r\n  );\r\n  if (loose?.[\"@value\"]) return loose[\"@value\"];\r\n\r\n  // 3) ถ้าไม่เจอเลย ค่อย fallback ตัวแรก\r\n  return multilangField[0]?.[\"@value\"] || \"\";\r\n};\r\n\r\n/* ---------- UI ช่วย ๆ ---------- */\r\nconst ShelfBar = () => (\r\n  <div className=\"h-3 rounded-full bg-gradient-to-b from-[#e7d8c9] to-[#d9c1a9] shadow-inner\" />\r\n);\r\n\r\nconst ShelfTitle = ({ children }) => (\r\n  <h2 className=\"text-xl md:text-2xl font-extrabold tracking-wide text-[#5b4a3e] mb-3\">\r\n    {children}\r\n  </h2>\r\n);\r\n\r\n/* ===== Skeleton Loader ===== */\r\nconst SkeletonLibrary = () => (\r\n  <div className=\"py-20 flex flex-col items-center gap-6 animate-pulse text-[#5b4a3e]\">\r\n    <div className=\"h-8 w-52 bg-[#e5d7ca]/50 rounded-full\" />\r\n    <div className=\"h-6 w-72 bg-[#e5d7ca]/40 rounded-full\" />\r\n    <div className=\"h-6 w-64 bg-[#e5d7ca]/30 rounded-full\" />\r\n    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-10 px-4 w-full max-w-6xl\">\r\n      {Array.from({ length: 8 }).map((_, i) => (\r\n        <div key={i} className=\"aspect-[3/4] bg-[#e5d7ca]/40 rounded-xl shadow-sm\" />\r\n      ))}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default function BooksPage() {\r\n  const { t, i18n } = useTranslation();\r\n\r\n  const [items, setItems] = useState([]);\r\n  const [err, setErr] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [query, setQuery] = useState(\"\");\r\n  const [activeSet, setActiveSet] = useState(\"all\");\r\n  const [setLabels, setSetLabels] = useState({});\r\n\r\n  const navigate = useNavigate();\r\n\r\n  /* 1) โหลดรายการหนังสือ (เมื่อภาษาเปลี่ยน) */\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        setLoading(true);\r\n        const data = await fetchItemsLite({\r\n          limit: 60,\r\n          sortBy: \"created\",\r\n          sortOrder: \"desc\",\r\n        });\r\n        setItems(Array.isArray(data) ? data : []);\r\n        setErr(\"\");\r\n      } catch (e) {\r\n        setErr(e?.message || t(\"errors.loadFailed\", \"โหลดข้อมูลไม่สำเร็จ\"));\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n    // เราต้องการให้รอบโหลดนี้เกิดเมื่อภาษาเปลี่ยน เพื่อเคลียร์ state/transition ให้ครบ\r\n  }, [i18n.language, t]);\r\n\r\n  /* 2) โหลด label ของคอลเลกชันตามภาษา (เข้มงวดเหมือนกัน) */\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const ids = Array.from(\r\n          new Set(\r\n            (Array.isArray(items) ? items : []).flatMap((it) =>\r\n              (Array.isArray(it?.[\"o:item_set\"]) ? it[\"o:item_set\"] : [])\r\n                .map((s) => s?.[\"o:id\"])\r\n                .filter(Boolean)\r\n            )\r\n          )\r\n        );\r\n        if (!ids.length) {\r\n          setSetLabels({});\r\n          return;\r\n        }\r\n\r\n        const pairs = await Promise.all(\r\n          ids.map(async (id) => {\r\n            try {\r\n              const r = await fetchJsonWithProxies(withKeys(api(`/item_sets/${id}`)));\r\n              const strict = pickLangStrict(r?.[\"dcterms:title\"], i18n.language);\r\n              const name = strict || r?.[\"o:title\"] || `Collection #${id}`;\r\n              return [String(id), name];\r\n            } catch {\r\n              return [String(id), `Collection #${id}`];\r\n            }\r\n          })\r\n        );\r\n        setSetLabels(Object.fromEntries(pairs));\r\n      } catch {\r\n        // ignore\r\n      }\r\n    })();\r\n  }, [items, i18n.language]);\r\n\r\n  /* Tabs หมวดหมู่ */\r\n  const categoryTabs = useMemo(() => {\r\n    const tabs = [{ id: \"all\", label: t(\"filters.all\", \"ทั้งหมด\") }];\r\n    const others = Object.entries(setLabels).map(([id, label]) => ({ id, label }));\r\n    return tabs.concat(others);\r\n  }, [setLabels, t]);\r\n\r\n  /* สร้างฟังก์ชันคืนค่าชื่อ/คำโปรยตามภาษาแบบเข้มงวด */\r\n  const displayTitle = (it) =>\r\n    pickLangStrict(it?.[\"dcterms:title\"], i18n.language) ||\r\n    titleOf(it); // fallback เดิม\r\n\r\n  const displayDesc = (it) =>\r\n    pickLangStrict(it?.[\"dcterms:description\"], i18n.language) ||\r\n    descOf(it) ||\r\n    \"\";\r\n\r\n  /* Filter รายการ — ค้นจากค่าตามภาษาปัจจุบันจริง ๆ */\r\n  const filtered = useMemo(() => {\r\n  const q = query.trim().toLowerCase();\r\n  return items.filter((it) => {\r\n    // ✅ ดึงชื่อ/คำโปรยตามภาษาปัจจุบัน\r\n    const title = (displayTitle(it) || \"\").toLowerCase();\r\n    const desc = (displayDesc(it) || \"\").toLowerCase();\r\n\r\n    const hit = !q || title.includes(q) || desc.includes(q);\r\n    if (!hit) return false;\r\n\r\n    // ✅ กรองหมวดหมู่ (คอลเลกชัน)\r\n    if (activeSet === \"all\") return true;\r\n    const sets = Array.isArray(it?.[\"o:item_set\"]) ? it[\"o:item_set\"] : [];\r\n    return sets.some((s) => String(s?.[\"o:id\"]) === String(activeSet));\r\n  });\r\n}, [items, query, activeSet, i18n.language]);\r\n\r\n\r\n  /* จัดกลุ่มชั้นวาง */\r\n  const groupedBySet = useMemo(() => {\r\n    if (activeSet !== \"all\") return {};\r\n    const groups = {};\r\n    filtered.forEach((it) => {\r\n      const sets = Array.isArray(it?.[\"o:item_set\"]) ? it[\"o:item_set\"] : [];\r\n      if (sets.length === 0) (groups[\"_none\"] ||= []).push(it);\r\n      else {\r\n        sets.forEach((s) => {\r\n          const key = String(s?.[\"o:id\"] || \"_none\");\r\n          (groups[key] ||= []).push(it);\r\n        });\r\n      }\r\n    });\r\n    return groups;\r\n  }, [filtered, activeSet]);\r\n\r\n  const singleShelfItems = useMemo(() => {\r\n    if (activeSet === \"all\") return [];\r\n    return filtered;\r\n  }, [filtered, activeSet]);\r\n\r\n  const openBook = (item) => {\r\n    const id = item?.[\"o:id\"];\r\n    if (!id) return alert(t(\"errors.noId\", \"ไม่พบรหัสรายการ\"));\r\n    navigate(`/read/${id}`);\r\n  };\r\n\r\n  /* ==== UI ==== */\r\n  return (\r\n    <div className=\"min-h-screen bg-[#faf7f2] text-[#111518]\">\r\n      <SiteHeader />\r\n\r\n      <AnimatePresence mode=\"wait\">\r\n        {loading ? (\r\n          <motion.div\r\n            key=\"loading\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            <SkeletonLibrary />\r\n          </motion.div>\r\n        ) : (\r\n          <motion.div\r\n            key={i18n.language} // บังคับ re-render UI ทั้งบล็อคเมื่อภาษาเปลี่ยน\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            transition={{ duration: 0.25 }}\r\n          >\r\n            {/* HERO */}\r\n            <section className=\"relative h-[46vh] min-h-[360px] w-full overflow-hidden\">\r\n              <div\r\n                className=\"absolute inset-0 bg-center bg-cover\"\r\n                style={{ backgroundImage: \"url(/assets/banner.webp)\" }}\r\n              />\r\n              <div className=\"absolute inset-0 bg-[#fff1e6]/60\" />\r\n              <div className=\"relative z-10 h-full flex flex-col items-center justify-center text-center px-6\">\r\n                <h1 className=\"text-4xl md:text-6xl font-extrabold tracking-wide text-[#5b4a3e] drop-shadow\">\r\n                  {t(\"books.title\", \"ห้องสมุด\")}\r\n                </h1>\r\n                <p className=\"mt-3 max-w-2xl text-[#5b4a3e]/80\">\r\n                  {t(\"books.subtitle\", \"ค้นหาและเลือกดูหนังสือจากคอลเลกชันต่าง ๆ\")}\r\n                </p>\r\n\r\n                <div className=\"mt-6 w-full max-w-xl\">\r\n                  <form\r\n                    onSubmit={(e) => e.preventDefault()}\r\n                    className=\"flex items-center rounded-2xl bg-white/90 ring-1 ring-black/10 shadow\"\r\n                  >\r\n                    <input\r\n                      value={query}\r\n                      onChange={(e) => setQuery(e.target.value)}\r\n                      placeholder={t(\"search.placeholder\", \"ค้นหาชื่อหนังสือ / คำสำคัญ...\")}\r\n                      className=\"flex-1 px-4 py-3 rounded-2xl bg-transparent outline-none\"\r\n                    />\r\n                    <button className=\"px-5 py-3 font-semibold\">\r\n                      {t(\"actions.search\", \"ค้นหา\")}\r\n                    </button>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </section>\r\n\r\n            {/* Layout: Sidebar + Shelf */}\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-8 lg:px-12 mt-8 grid grid-cols-1 lg:grid-cols-4 gap-8\">\r\n              {/* Sidebar */}\r\n              <aside className=\"lg:col-span-1\">\r\n                <div className=\"sticky top-28 space-y-3 p-4 bg-white/70 backdrop-blur-md rounded-2xl shadow ring-1 ring-black/10\">\r\n                  <h3 className=\"font-bold text-[#5b4a3e] mb-2\">\r\n                    {t(\"filters.category\", \"หมวดหมู่\")}\r\n                  </h3>\r\n                  <div className=\"flex flex-col gap-2\">\r\n                    {categoryTabs.map((tab) => (\r\n                      <button\r\n                        key={tab.id}\r\n                        onClick={() => setActiveSet(tab.id)}\r\n                        className={`text-left px-3 py-2 rounded-lg text-sm md:text-base font-medium transition ${\r\n                          activeSet === tab.id\r\n                            ? \"bg-[#5b4a3e] text-white shadow\"\r\n                            : \"hover:bg-black/5 text-[#5b4a3e]\"\r\n                        }`}\r\n                      >\r\n                        {tab.label}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </aside>\r\n\r\n              {/* Content area */}\r\n              <main className=\"lg:col-span-3\">\r\n                {err ? (\r\n                  <div className=\"py-16 text-center text-red-600\">{err}</div>\r\n                ) : filtered.length === 0 ? (\r\n                  <div className=\"py-16 text-center\">\r\n                    {t(\"status.noResults\", \"ไม่พบหนังสือที่ตรงกับเงื่อนไข\")}\r\n                  </div>\r\n                ) : activeSet === \"all\" ? (\r\n                  <div className=\"space-y-12\">\r\n                    {Object.entries(groupedBySet)\r\n                      .filter(([key]) => key !== \"_none\")\r\n                      .map(([key, group]) => (\r\n                        <section key={key}>\r\n                          <ShelfTitle>\r\n                            {setLabels[key] || `${t(\"books.collection\", \"คอลเลกชัน\")} #${key}`}\r\n                          </ShelfTitle>\r\n                          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-3\">\r\n                            {group.map((it) => (\r\n                              <BookCard\r\n                                key={it[\"o:id\"]}\r\n                                item={it}\r\n                                onOpen={openBook}\r\n                                /* ส่งชื่อ/คำโปรยที่เลือกตามภาษาแบบเข้มงวดเข้าไป */\r\n                                titleOverride={displayTitle(it)}\r\n                                descOverride={displayDesc(it)}\r\n                              />\r\n                            ))}\r\n                          </div>\r\n                          <ShelfBar />\r\n                        </section>\r\n                      ))}\r\n                    {groupedBySet[\"_none\"] && (\r\n                      <section>\r\n                        <ShelfTitle>{t(\"books.uncategorized\", \"ไม่ระบุหมวด\")}</ShelfTitle>\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-3\">\r\n                          {groupedBySet[\"_none\"].map((it) => (\r\n                            <BookCard\r\n                              key={it[\"o:id\"]}\r\n                              item={it}\r\n                              onOpen={openBook}\r\n                              titleOverride={displayTitle(it)}\r\n                              descOverride={displayDesc(it)}\r\n                            />\r\n                          ))}\r\n                        </div>\r\n                        <ShelfBar />\r\n                      </section>\r\n                    )}\r\n                  </div>\r\n                ) : (\r\n                  <section className=\"space-y-4\">\r\n                    <ShelfTitle>\r\n                      {setLabels[String(activeSet)] || t(\"books.collection\", \"คอลเลกชัน\")}\r\n                    </ShelfTitle>\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-3\">\r\n                      {singleShelfItems.map((it) => (\r\n                        <BookCard\r\n                          key={it[\"o:id\"]}\r\n                          item={it}\r\n                          onOpen={openBook}\r\n                          titleOverride={displayTitle(it)}\r\n                          descOverride={displayDesc(it)}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                    <ShelfBar />\r\n                  </section>\r\n                )}\r\n              </main>\r\n            </div>\r\n\r\n            <BackToTop />\r\n            <Footer />\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}