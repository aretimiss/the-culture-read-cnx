{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Asus\\\\Desktop\\\\the-culture-read-cnx\\\\src\\\\pages\\\\HomePage.jsx\",\n  _s = $RefreshSig$();\n// src/pages/HomePage.jsx\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport \"./HomePage.css\";\nimport SiteHeader from \"../components/SiteHeader\";\nimport ParallaxHero from \"../components/ParallaxHero\";\nimport Footer from \"../components/Footer\";\nimport AutoCarousel from \"../components/AutoCarousel\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport i18n from \"../i18n\";\nimport { fetchItemsLite, thumbUrlOf } from \"../lib/omekaClient\";\nimport { pickLang } from \"../lib/i18nPick\";\n\n/** ===== helpers (ไม่ใช้ description) ===== */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getVals = (it, prop) => Array.isArray(it === null || it === void 0 ? void 0 : it[prop]) ? it[prop].map(v => v === null || v === void 0 ? void 0 : v[\"@value\"]).filter(Boolean) : [];\nconst getLangVals = (it, prop, lang) => Array.isArray(it === null || it === void 0 ? void 0 : it[prop]) ? it[prop].map(v => v !== null && v !== void 0 && v[\"@language\"] ? v[\"@language\"] === lang ? v[\"@value\"] : null : v === null || v === void 0 ? void 0 : v[\"@value\"]).filter(Boolean) : [];\nexport default function HomePage() {\n  _s();\n  const {\n    t\n  } = useTranslation();\n  const navigate = useNavigate();\n\n  // ชุดข้อมูลตามหมวด\n  const [books, setBooks] = useState([]);\n  const [manuscripts, setManuscripts] = useState([]);\n  const [articles, setArticles] = useState([]);\n  const [query, setQuery] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [err, setErr] = useState(\"\");\n\n  // multi-lang title/desc\n  const titleOfItem = it => pickLang(it === null || it === void 0 ? void 0 : it[\"dcterms:title\"], i18n.language) || \"\";\n  const descOfItem = it => pickLang(it === null || it === void 0 ? void 0 : it[\"dcterms:description\"], i18n.language) || \"\";\n  const openPDF = item => {\n    const id = item === null || item === void 0 ? void 0 : item[\"o:id\"];\n    if (!id) return alert(t(\"errors.noId\", \"ไม่พบรหัสรายการ\"));\n    navigate(`/read/${id}`);\n  };\n  useEffect(() => {\n    var _mq$addEventListener;\n    // background-attachment fix (iOS)\n    const mq = window.matchMedia(\"(max-width: 767px)\");\n    const apply = () => document.documentElement.style.setProperty(\"--bg-attach\", mq.matches ? \"scroll\" : \"fixed\");\n    apply();\n    (_mq$addEventListener = mq.addEventListener) === null || _mq$addEventListener === void 0 ? void 0 : _mq$addEventListener.call(mq, \"change\", apply);\n    return () => {\n      var _mq$removeEventListen;\n      return (_mq$removeEventListen = mq.removeEventListener) === null || _mq$removeEventListen === void 0 ? void 0 : _mq$removeEventListen.call(mq, \"change\", apply);\n    };\n  }, []);\n  useEffect(() => {\n    (async () => {\n      try {\n        setLoading(true);\n        setErr(\"\");\n        const [bks, manus, arts] = await Promise.all([fetchItemsLite({\n          limit: 12,\n          sortBy: \"created\",\n          sortOrder: \"desc\",\n          resource_class_label: \"Book\"\n        }), fetchItemsLite({\n          limit: 16,\n          sortBy: \"created\",\n          sortOrder: \"desc\",\n          resource_class_label: \"Manuscript\"\n        }), fetchItemsLite({\n          limit: 12,\n          sortBy: \"created\",\n          sortOrder: \"desc\",\n          resource_class_label: \"Article\"\n        })]);\n        setBooks(Array.isArray(bks) ? bks : []);\n        setManuscripts(Array.isArray(manus) ? manus : []);\n        setArticles(Array.isArray(arts) ? arts : []);\n      } catch (e) {\n        setErr((e === null || e === void 0 ? void 0 : e.message) || t(\"errors.loadFailed\", \"โหลดข้อมูลไม่สำเร็จ\"));\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, [i18n.language]);\n\n  // filter in-page\n  const filterByQuery = arr => {\n    if (!query.trim()) return arr || [];\n    const q = query.toLowerCase();\n    return (arr || []).filter(it => {\n      const t0 = (titleOfItem(it) || \"\").toLowerCase();\n      const d0 = (descOfItem(it) || \"\").toLowerCase();\n      return t0.includes(q) || d0.includes(q);\n    });\n  };\n  const booksFiltered = useMemo(() => filterByQuery(books).slice(0, 3), [books, query, i18n.language]); // ✅ 3 เล่มล่าสุด\n  const manuscriptsFiltered = useMemo(() => filterByQuery(manuscripts).slice(0, 12), [manuscripts, query, i18n.language]);\n  const articlesFiltered = useMemo(() => filterByQuery(articles).slice(0, 9), [articles, query, i18n.language]);\n\n  /** ---------- สไลด์ฝั่ง Manuscript (ควบคุมเองในหน้านี้) ---------- */\n  const [msIndex, setMsIndex] = useState(0);\n  useEffect(() => setMsIndex(0), [manuscriptsFiltered.length]); // รีเซ็ตเมื่อรายการเปลี่ยน\n\n  const currentMs = manuscriptsFiltered[msIndex];\n  const [currentThumb, setCurrentThumb] = useState(null);\n  useEffect(() => {\n    let alive = true;\n    (async () => {\n      const u = currentMs ? await thumbUrlOf(currentMs) : null;\n      if (alive) setCurrentThumb(u);\n    })();\n    return () => {\n      alive = false;\n    };\n  }, [currentMs]);\n  const nextMs = () => setMsIndex(i => manuscriptsFiltered.length ? (i + 1) % manuscriptsFiltered.length : 0);\n  const prevMs = () => setMsIndex(i => manuscriptsFiltered.length ? (i - 1 + manuscriptsFiltered.length) % manuscriptsFiltered.length : 0);\n  const jumpMs = i => setMsIndex(i);\n\n  // fields (ไม่ใช้ description)\n  const manuFields = useMemo(() => {\n    var _it$oId;\n    const it = currentMs || {};\n    const lang = i18n.language;\n    const joiner = arr => arr && arr.length ? arr.join(\", \") : \"—\";\n    return [{\n      label: \"ผู้สร้าง/ผู้เขียน\",\n      value: joiner(getLangVals(it, \"dcterms:creator\", lang) || getVals(it, \"dcterms:creator\"))\n    }, {\n      label: \"ปีที่จัดทำ/เผยแพร่\",\n      value: joiner(getVals(it, \"dcterms:date\"))\n    }, {\n      label: \"ภาษา\",\n      value: joiner(getVals(it, \"dcterms:language\"))\n    }, {\n      label: \"หัวเรื่อง\",\n      value: joiner(getLangVals(it, \"dcterms:subject\", lang) || getVals(it, \"dcterms:subject\"))\n    }, {\n      label: \"สถานที่\",\n      value: joiner(getLangVals(it, \"dcterms:spatial\", lang) || getVals(it, \"dcterms:spatial\"))\n    }, {\n      label: \"สำนักพิมพ์/ผู้ให้ข้อมูล\",\n      value: joiner(getLangVals(it, \"dcterms:publisher\", lang) || getVals(it, \"dcterms:publisher\"))\n    }, {\n      label: \"รหัสรายการ\",\n      value: (_it$oId = it === null || it === void 0 ? void 0 : it[\"o:id\"]) !== null && _it$oId !== void 0 ? _it$oId : \"—\"\n    }];\n  }, [currentMs, i18n.language]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen text-[#111518]\",\n    style: {\n      backgroundImage: \"url('/assets/banner.webp')\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      backgroundAttachment: \"var(--bg-attach, fixed)\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(SiteHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ParallaxHero, {\n      banner: \"\",\n      onSearch: setQuery,\n      searchPlaceholder: t(\"search.placeholder\", \"ค้นหาหนังสือ/คำอธิบาย…\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-8 lg:px-12 py-8 sm:py-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-4 lg:grid-rows-2 gap-6 sm:gap-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"lg:col-span-4 card-soft\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 pt-6\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl sm:text-3xl font-bold text-[#5b4a3e] text-center\",\n              children: \"\\u0E41\\u0E19\\u0E30\\u0E19\\u0E33\\u0E40\\u0E2D\\u0E01\\u0E2A\\u0E32\\u0E23\\u0E42\\u0E1A\\u0E23\\u0E32\\u0E13 (Manuscript)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 pb-6 grid grid-cols-1 md:grid-cols-2 gap-6 items-start\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative rounded-xl bg-white/70 shadow-sm overflow-hidden\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"aspect-[3/4] w-full\",\n                children: currentThumb ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: currentThumb,\n                  alt: \"\",\n                  className: \"w-full h-full object-cover object-center\",\n                  loading: \"lazy\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full h-full grid place-items-center text-black/40 text-sm\",\n                  children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E20\\u0E32\\u0E1E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute inset-0 flex items-center justify-between px-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: prevMs,\n                  className: \"h-9 w-9 rounded-full bg-black/40 hover:bg-black/60 text-white grid place-items-center\",\n                  \"aria-label\": \"Previous\",\n                  children: \"\\u2039\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: nextMs,\n                  className: \"h-9 w-9 rounded-full bg-black/40 hover:bg-black/60 text-white grid place-items-center\",\n                  \"aria-label\": \"Next\",\n                  children: \"\\u203A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute bottom-2 left-0 right-0 flex items-center justify-center gap-1\",\n                children: manuscriptsFiltered.map((_, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => jumpMs(i),\n                  className: `h-2.5 w-2.5 rounded-full ${i === msIndex ? \"bg-white\" : \"bg-white/50\"}`,\n                  \"aria-label\": `Slide ${i + 1}`\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-3\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => currentMs && openPDF(currentMs),\n                  className: \"w-full mt-2 px-4 py-2 rounded-lg bg-[#d8653b] text-white hover:opacity-90 transition\",\n                  children: \"\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E2D\\u0E48\\u0E32\\u0E19\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded-xl bg-white/70 p-4 shadow-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-semibold text-lg text-[#5b4a3e]\",\n                children: currentMs ? titleOfItem(currentMs) : \"—\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"dl\", {\n                className: \"mt-3 space-y-2 text-sm text-black/80\",\n                children: manuFields.map((f, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-3 gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"dt\", {\n                    className: \"col-span-1 text-black/60\",\n                    children: f.label\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 246,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"dd\", {\n                    className: \"col-span-2\",\n                    children: f.value || \"—\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 23\n                  }, this)]\n                }, idx, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"lg:col-span-2 lg:row-start-2 card-soft flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 pt-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl sm:text-3xl font-bold text-[#5b4a3e] text-center\",\n              children: \"\\u0E1A\\u0E17\\u0E04\\u0E27\\u0E32\\u0E21 / \\u0E01\\u0E34\\u0E08\\u0E01\\u0E23\\u0E23\\u0E21\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-center mt-2 text-sm sm:text-base text-black/70\",\n              children: [\"\\u0E42\\u0E0A\\u0E27\\u0E4C\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E25\\u0E48\\u0E32\\u0E2A\\u0E38\\u0E14\\u0E08\\u0E32\\u0E01\\u0E04\\u0E25\\u0E32\\u0E2A \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Article\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 pb-6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\",\n              children: (loading || err ? [] : articlesFiltered.slice(0, 6)).map(it => /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => openPDF(it),\n                className: \"group border rounded-xl p-4 bg-white/70 hover:bg-white text-left transition shadow-sm\",\n                title: titleOfItem(it),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold text-[#5b4a3e] line-clamp-2 group-hover:underline\",\n                  children: titleOfItem(it) || \"—\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2 text-xs text-black/60 line-clamp-3\",\n                  children: descOfItem(it) || \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 21\n                }, this)]\n              }, it[\"o:id\"], true, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n          className: \"lg:col-span-2 lg:row-start-2\",\n          children: /*#__PURE__*/_jsxDEV(AutoCarousel, {\n            title: \"\\u0E41\\u0E19\\u0E30\\u0E19\\u0E33\\u0E2B\\u0E19\\u0E31\\u0E07\\u0E2A\\u0E37\\u0E2D (\\u0E25\\u0E48\\u0E32\\u0E2A\\u0E38\\u0E14)\",\n            items: loading || err ? [] : booksFiltered /* <= 3 เล่ม */,\n            onOpen: openPDF,\n            className: \"h-[420px] sm:h-[520px] lg:h-[560px]\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n}\n_s(HomePage, \"oxQw8fbNJGzBqT6arigam7pkQ+Q=\", false, function () {\n  return [useTranslation, useNavigate];\n});\n_c = HomePage;\nvar _c;\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","SiteHeader","ParallaxHero","Footer","AutoCarousel","useNavigate","useTranslation","i18n","fetchItemsLite","thumbUrlOf","pickLang","jsxDEV","_jsxDEV","getVals","it","prop","Array","isArray","map","v","filter","Boolean","getLangVals","lang","HomePage","_s","t","navigate","books","setBooks","manuscripts","setManuscripts","articles","setArticles","query","setQuery","loading","setLoading","err","setErr","titleOfItem","language","descOfItem","openPDF","item","id","alert","_mq$addEventListener","mq","window","matchMedia","apply","document","documentElement","style","setProperty","matches","addEventListener","call","_mq$removeEventListen","removeEventListener","bks","manus","arts","Promise","all","limit","sortBy","sortOrder","resource_class_label","e","message","filterByQuery","arr","trim","q","toLowerCase","t0","d0","includes","booksFiltered","slice","manuscriptsFiltered","articlesFiltered","msIndex","setMsIndex","length","currentMs","currentThumb","setCurrentThumb","alive","u","nextMs","i","prevMs","jumpMs","manuFields","_it$oId","joiner","join","label","value","className","backgroundImage","backgroundSize","backgroundPosition","backgroundAttachment","children","fileName","_jsxFileName","lineNumber","columnNumber","banner","onSearch","searchPlaceholder","src","alt","onClick","_","f","idx","title","items","onOpen","_c","$RefreshReg$"],"sources":["C:/Users/Asus/Desktop/the-culture-read-cnx/src/pages/HomePage.jsx"],"sourcesContent":["// src/pages/HomePage.jsx\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport \"./HomePage.css\";\r\n\r\nimport SiteHeader from \"../components/SiteHeader\";\r\nimport ParallaxHero from \"../components/ParallaxHero\";\r\nimport Footer from \"../components/Footer\";\r\nimport AutoCarousel from \"../components/AutoCarousel\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport i18n from \"../i18n\";\r\nimport { fetchItemsLite, thumbUrlOf } from \"../lib/omekaClient\";\r\nimport { pickLang } from \"../lib/i18nPick\";\r\n\r\n/** ===== helpers (ไม่ใช้ description) ===== */\r\nconst getVals = (it, prop) =>\r\n  Array.isArray(it?.[prop]) ? it[prop].map((v) => v?.[\"@value\"]).filter(Boolean) : [];\r\n\r\nconst getLangVals = (it, prop, lang) =>\r\n  Array.isArray(it?.[prop])\r\n    ? it[prop]\r\n        .map((v) => (v?.[\"@language\"] ? (v[\"@language\"] === lang ? v[\"@value\"] : null) : v?.[\"@value\"]))\r\n        .filter(Boolean)\r\n    : [];\r\n\r\nexport default function HomePage() {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n\r\n  // ชุดข้อมูลตามหมวด\r\n  const [books, setBooks] = useState([]);\r\n  const [manuscripts, setManuscripts] = useState([]);\r\n  const [articles, setArticles] = useState([]);\r\n\r\n  const [query, setQuery] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [err, setErr] = useState(\"\");\r\n\r\n  // multi-lang title/desc\r\n  const titleOfItem = (it) => pickLang(it?.[\"dcterms:title\"], i18n.language) || \"\";\r\n  const descOfItem = (it) => pickLang(it?.[\"dcterms:description\"], i18n.language) || \"\";\r\n\r\n  const openPDF = (item) => {\r\n    const id = item?.[\"o:id\"];\r\n    if (!id) return alert(t(\"errors.noId\", \"ไม่พบรหัสรายการ\"));\r\n    navigate(`/read/${id}`);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // background-attachment fix (iOS)\r\n    const mq = window.matchMedia(\"(max-width: 767px)\");\r\n    const apply = () =>\r\n      document.documentElement.style.setProperty(\"--bg-attach\", mq.matches ? \"scroll\" : \"fixed\");\r\n    apply();\r\n    mq.addEventListener?.(\"change\", apply);\r\n    return () => mq.removeEventListener?.(\"change\", apply);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        setLoading(true);\r\n        setErr(\"\");\r\n\r\n        const [bks, manus, arts] = await Promise.all([\r\n          fetchItemsLite({ limit: 12, sortBy: \"created\", sortOrder: \"desc\", resource_class_label: \"Book\" }),\r\n          fetchItemsLite({ limit: 16, sortBy: \"created\", sortOrder: \"desc\", resource_class_label: \"Manuscript\" }),\r\n          fetchItemsLite({ limit: 12, sortBy: \"created\", sortOrder: \"desc\", resource_class_label: \"Article\" }),\r\n        ]);\r\n\r\n        setBooks(Array.isArray(bks) ? bks : []);\r\n        setManuscripts(Array.isArray(manus) ? manus : []);\r\n        setArticles(Array.isArray(arts) ? arts : []);\r\n      } catch (e) {\r\n        setErr(e?.message || t(\"errors.loadFailed\", \"โหลดข้อมูลไม่สำเร็จ\"));\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, [i18n.language]);\r\n\r\n  // filter in-page\r\n  const filterByQuery = (arr) => {\r\n    if (!query.trim()) return arr || [];\r\n    const q = query.toLowerCase();\r\n    return (arr || []).filter((it) => {\r\n      const t0 = (titleOfItem(it) || \"\").toLowerCase();\r\n      const d0 = (descOfItem(it) || \"\").toLowerCase();\r\n      return t0.includes(q) || d0.includes(q);\r\n    });\r\n  };\r\n\r\n  const booksFiltered = useMemo(() => filterByQuery(books).slice(0, 3), [books, query, i18n.language]); // ✅ 3 เล่มล่าสุด\r\n  const manuscriptsFiltered = useMemo(\r\n    () => filterByQuery(manuscripts).slice(0, 12),\r\n    [manuscripts, query, i18n.language]\r\n  );\r\n  const articlesFiltered = useMemo(\r\n    () => filterByQuery(articles).slice(0, 9),\r\n    [articles, query, i18n.language]\r\n  );\r\n\r\n  /** ---------- สไลด์ฝั่ง Manuscript (ควบคุมเองในหน้านี้) ---------- */\r\n  const [msIndex, setMsIndex] = useState(0);\r\n  useEffect(() => setMsIndex(0), [manuscriptsFiltered.length]); // รีเซ็ตเมื่อรายการเปลี่ยน\r\n\r\n  const currentMs = manuscriptsFiltered[msIndex];\r\n\r\n  const [currentThumb, setCurrentThumb] = useState(null);\r\n  useEffect(() => {\r\n    let alive = true;\r\n    (async () => {\r\n      const u = currentMs ? await thumbUrlOf(currentMs) : null;\r\n      if (alive) setCurrentThumb(u);\r\n    })();\r\n    return () => {\r\n      alive = false;\r\n    };\r\n  }, [currentMs]);\r\n\r\n  const nextMs = () =>\r\n    setMsIndex((i) => (manuscriptsFiltered.length ? (i + 1) % manuscriptsFiltered.length : 0));\r\n  const prevMs = () =>\r\n    setMsIndex((i) =>\r\n      manuscriptsFiltered.length ? (i - 1 + manuscriptsFiltered.length) % manuscriptsFiltered.length : 0\r\n    );\r\n  const jumpMs = (i) => setMsIndex(i);\r\n\r\n  // fields (ไม่ใช้ description)\r\n  const manuFields = useMemo(() => {\r\n    const it = currentMs || {};\r\n    const lang = i18n.language;\r\n    const joiner = (arr) => (arr && arr.length ? arr.join(\", \") : \"—\");\r\n    return [\r\n      { label: \"ผู้สร้าง/ผู้เขียน\", value: joiner(getLangVals(it, \"dcterms:creator\", lang) || getVals(it, \"dcterms:creator\")) },\r\n      { label: \"ปีที่จัดทำ/เผยแพร่\", value: joiner(getVals(it, \"dcterms:date\")) },\r\n      { label: \"ภาษา\", value: joiner(getVals(it, \"dcterms:language\")) },\r\n      { label: \"หัวเรื่อง\", value: joiner(getLangVals(it, \"dcterms:subject\", lang) || getVals(it, \"dcterms:subject\")) },\r\n      { label: \"สถานที่\", value: joiner(getLangVals(it, \"dcterms:spatial\", lang) || getVals(it, \"dcterms:spatial\")) },\r\n      { label: \"สำนักพิมพ์/ผู้ให้ข้อมูล\", value: joiner(getLangVals(it, \"dcterms:publisher\", lang) || getVals(it, \"dcterms:publisher\")) },\r\n      { label: \"รหัสรายการ\", value: it?.[\"o:id\"] ?? \"—\" },\r\n    ];\r\n  }, [currentMs, i18n.language]);\r\n\r\n  return (\r\n    <div\r\n      className=\"min-h-screen text-[#111518]\"\r\n      style={{\r\n        backgroundImage: \"url('/assets/banner.webp')\",\r\n        backgroundSize: \"cover\",\r\n        backgroundPosition: \"center\",\r\n        backgroundAttachment: \"var(--bg-attach, fixed)\",\r\n      }}\r\n    >\r\n      <SiteHeader />\r\n\r\n      {/* Banner + Search */}\r\n      <ParallaxHero\r\n        banner=\"\"\r\n        onSearch={setQuery}\r\n        searchPlaceholder={t(\"search.placeholder\", \"ค้นหาหนังสือ/คำอธิบาย…\")}\r\n      />\r\n\r\n      {/* ===== Layout ใหม่: แถวบนเต็มแถว (4 col) + แถวล่างแบ่งซ้าย/ขวา อย่างละ 2 col ===== */}\r\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-8 lg:px-12 py-8 sm:py-12\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 lg:grid-rows-2 gap-6 sm:gap-8\">\r\n          {/* แถวบนเต็มแถว: 4 คอลัมน์ */}\r\n          <section className=\"lg:col-span-4 card-soft\">\r\n            <div className=\"px-4 pt-6\">\r\n              <h2 className=\"text-2xl sm:text-3xl font-bold text-[#5b4a3e] text-center\">\r\n                แนะนำเอกสารโบราณ (Manuscript)\r\n              </h2>\r\n            </div>\r\n\r\n            <div className=\"px-4 pb-6 grid grid-cols-1 md:grid-cols-2 gap-6 items-start\">\r\n              {/* ซ้าย (2 คอลัมน์แรกของแถวบน): สไลด์รูปเอกสารโบราณ */}\r\n              <div className=\"relative rounded-xl bg-white/70 shadow-sm overflow-hidden\">\r\n                <div className=\"aspect-[3/4] w-full\">\r\n                  {currentThumb ? (\r\n                    <img\r\n                      src={currentThumb}\r\n                      alt=\"\"\r\n                      className=\"w-full h-full object-cover object-center\"\r\n                      loading=\"lazy\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"w-full h-full grid place-items-center text-black/40 text-sm\">\r\n                      ไม่มีภาพ\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* ปุ่มควบคุม */}\r\n                <div className=\"absolute inset-0 flex items-center justify-between px-2\">\r\n                  <button\r\n                    onClick={prevMs}\r\n                    className=\"h-9 w-9 rounded-full bg-black/40 hover:bg-black/60 text-white grid place-items-center\"\r\n                    aria-label=\"Previous\"\r\n                  >\r\n                    ‹\r\n                  </button>\r\n                  <button\r\n                    onClick={nextMs}\r\n                    className=\"h-9 w-9 rounded-full bg-black/40 hover:bg-black/60 text-white grid place-items-center\"\r\n                    aria-label=\"Next\"\r\n                  >\r\n                    ›\r\n                  </button>\r\n                </div>\r\n\r\n                {/* dots */}\r\n                <div className=\"absolute bottom-2 left-0 right-0 flex items-center justify-center gap-1\">\r\n                  {manuscriptsFiltered.map((_, i) => (\r\n                    <button\r\n                      key={i}\r\n                      onClick={() => jumpMs(i)}\r\n                      className={`h-2.5 w-2.5 rounded-full ${\r\n                        i === msIndex ? \"bg-white\" : \"bg-white/50\"\r\n                      }`}\r\n                      aria-label={`Slide ${i + 1}`}\r\n                    />\r\n                  ))}\r\n                </div>\r\n\r\n                {/* ปุ่มเปิดอ่าน */}\r\n                <div className=\"p-3\">\r\n                  <button\r\n                    onClick={() => currentMs && openPDF(currentMs)}\r\n                    className=\"w-full mt-2 px-4 py-2 rounded-lg bg-[#d8653b] text-white hover:opacity-90 transition\"\r\n                  >\r\n                    เปิดอ่าน\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* ขวา (อีก 2 คอลัมน์): รายละเอียดที่เปลี่ยนตามสไลด์ */}\r\n              <div className=\"rounded-xl bg-white/70 p-4 shadow-sm\">\r\n                <div className=\"font-semibold text-lg text-[#5b4a3e]\">\r\n                  {currentMs ? titleOfItem(currentMs) : \"—\"}\r\n                </div>\r\n\r\n                <dl className=\"mt-3 space-y-2 text-sm text-black/80\">\r\n                  {manuFields.map((f, idx) => (\r\n                    <div key={idx} className=\"grid grid-cols-3 gap-2\">\r\n                      <dt className=\"col-span-1 text-black/60\">{f.label}</dt>\r\n                      <dd className=\"col-span-2\">{f.value || \"—\"}</dd>\r\n                    </div>\r\n                  ))}\r\n                </dl>\r\n\r\n                {/* แสดงคำอธิบายสั้น ๆ เพิ่มได้ ถ้าต้องการ\r\n                <p className=\"mt-3 text-sm text-black/70 line-clamp-4\">{descOfItem(currentMs)}</p>\r\n                */}\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* แถวล่างซ้าย (2 คอลัมน์): บทความ/กิจกรรม */}\r\n          <section className=\"lg:col-span-2 lg:row-start-2 card-soft flex flex-col\">\r\n            <div className=\"px-4 pt-6\">\r\n              <h2 className=\"text-2xl sm:text-3xl font-bold text-[#5b4a3e] text-center\">\r\n                บทความ / กิจกรรม\r\n              </h2>\r\n              <p className=\"text-center mt-2 text-sm sm:text-base text-black/70\">\r\n                โชว์รายการล่าสุดจากคลาส <strong>Article</strong>\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"px-4 pb-6\">\r\n              <div className=\"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {(loading || err ? [] : articlesFiltered.slice(0, 6)).map((it) => (\r\n                  <button\r\n                    key={it[\"o:id\"]}\r\n                    onClick={() => openPDF(it)}\r\n                    className=\"group border rounded-xl p-4 bg-white/70 hover:bg-white text-left transition shadow-sm\"\r\n                    title={titleOfItem(it)}\r\n                  >\r\n                    <div className=\"font-semibold text-[#5b4a3e] line-clamp-2 group-hover:underline\">\r\n                      {titleOfItem(it) || \"—\"}\r\n                    </div>\r\n                    <div className=\"mt-2 text-xs text-black/60 line-clamp-3\">\r\n                      {descOfItem(it) || \"\"}\r\n                    </div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* แถวล่างขวา (2 คอลัมน์): หนังสือ — ใช้สไลด์ 3 เล่มล่าสุด */}\r\n          <aside className=\"lg:col-span-2 lg:row-start-2\">\r\n            <AutoCarousel\r\n              title=\"แนะนำหนังสือ (ล่าสุด)\"\r\n              items={loading || err ? [] : booksFiltered /* <= 3 เล่ม */}\r\n              onOpen={openPDF}\r\n              className=\"h-[420px] sm:h-[520px] lg:h-[560px]\"\r\n            />\r\n          </aside>\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}