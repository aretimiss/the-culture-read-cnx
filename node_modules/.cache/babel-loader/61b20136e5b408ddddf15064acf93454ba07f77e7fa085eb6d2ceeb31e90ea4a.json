{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Documents\\\\GitHub\\\\the-culture-read-cnx\\\\src\\\\pages\\\\BookArticleDetail.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s5 = $RefreshSig$();\n// src/pages/BookArticleDetail.jsx\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport SiteHeader from \"../components/SiteHeader\";\nimport Footer from \"../components/Footer\";\nimport BackToTop from \"../components/BackToTop\";\nimport { api, fetchJsonWithProxies, titleOf } from \"../lib/omekaClient\";\n\n/** helpers */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getVals = (item, key) => Array.isArray(item === null || item === void 0 ? void 0 : item[key]) ? item[key].map(x => x === null || x === void 0 ? void 0 : x[\"@value\"]).filter(Boolean) : [];\nconst getVal = (item, key, fallback = \"-\") => getVals(item, key)[0] || fallback;\n\n// UA + viewport\nconst useIsMobile = () => {\n  _s();\n  const [isMobile, setIsMobile] = useState(false);\n  useEffect(() => {\n    const uaIsMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);\n    const mq = window.matchMedia(\"(max-width: 768px)\");\n    const update = () => setIsMobile(uaIsMobile || mq.matches);\n    update();\n    mq.addEventListener(\"change\", update);\n    return () => mq.removeEventListener(\"change\", update);\n  }, []);\n  return isMobile;\n};\n\n// Observe element visibility (for reveal-on-scroll)\n_s(useIsMobile, \"0VTTNJATKABQPGLm9RVT0tKGUgU=\");\nconst useInView = (options = {\n  threshold: 0.2\n}) => {\n  _s2();\n  const ref = useRef(null);\n  const [inView, setInView] = useState(false);\n  useEffect(() => {\n    const el = ref.current;\n    if (!el) return;\n    const io = new IntersectionObserver(entries => {\n      entries.forEach(e => {\n        if (e.isIntersecting) setInView(true);\n      });\n    }, options);\n    io.observe(el);\n    return () => io.disconnect();\n  }, [options]);\n  return {\n    ref,\n    inView\n  };\n};\n\n// Track scroll progress within a container to shift the cover horizontally\n_s2(useInView, \"K+dCFMkCcTyPMHOI0MxAWPXS6Js=\");\nconst useCoverShift = (containerRef, maxShiftPx = 240) => {\n  _s3();\n  const [shift, setShift] = useState(0);\n  useEffect(() => {\n    const onScroll = () => {\n      const box = containerRef.current;\n      if (!box) return;\n      const rect = box.getBoundingClientRect();\n      const vh = window.innerHeight || 1;\n      // progress 0..1 while the hero is within viewport\n      const visibleHeight = Math.min(vh, Math.max(0, vh - Math.max(0, rect.top)));\n      const total = Math.min(vh, rect.height || vh);\n      const p = total ? Math.min(1, Math.max(0, visibleHeight / total)) : 0;\n      setShift(p * maxShiftPx); // 0 -> maxShiftPx px\n    };\n    onScroll();\n    window.addEventListener(\"scroll\", onScroll, {\n      passive: true\n    });\n    window.addEventListener(\"resize\", onScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", onScroll);\n      window.removeEventListener(\"resize\", onScroll);\n    };\n  }, [containerRef, maxShiftPx]);\n  return shift;\n};\n_s3(useCoverShift, \"F83N+u6qlx5l/+KqH7fUx/c32cI=\");\nexport default function BookArticleDetail() {\n  _s5();\n  var _s4 = $RefreshSig$();\n  const {\n    id\n  } = useParams();\n  const [item, setItem] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [err, setErr] = useState(\"\");\n  const isMobile = useIsMobile();\n  useEffect(() => {\n    let alive = true;\n    (async () => {\n      try {\n        setLoading(true);\n        setErr(\"\");\n        const data = await fetchJsonWithProxies(api(`/items/${id}`));\n        if (!alive) return;\n        setItem(data);\n        const t = titleOf(data) || (data === null || data === void 0 ? void 0 : data[\"o:title\"]) || \"บทความ\";\n        document.title = `${t} · บทความแนะนำหนังสือ`;\n      } catch (e) {\n        if (!alive) return;\n        setErr((e === null || e === void 0 ? void 0 : e.message) || \"โหลดข้อมูลไม่สำเร็จ\");\n      } finally {\n        if (alive) setLoading(false);\n      }\n    })();\n    return () => {\n      alive = false;\n    };\n  }, [id]);\n  const meta = useMemo(() => {\n    var _item$thumbnail_displ;\n    if (!item) return {};\n    const descriptions = getVals(item, \"dcterms:description\");\n    return {\n      title: titleOf(item) || (item === null || item === void 0 ? void 0 : item[\"o:title\"]),\n      creator: getVal(item, \"dcterms:creator\"),\n      date: getVal(item, \"dcterms:date\"),\n      extent: getVal(item, \"dcterms:extent\"),\n      identifier: getVal(item, \"dcterms:identifier\"),\n      type: getVal(item, \"dcterms:type\"),\n      thumb: (item === null || item === void 0 ? void 0 : (_item$thumbnail_displ = item.thumbnail_display_urls) === null || _item$thumbnail_displ === void 0 ? void 0 : _item$thumbnail_displ.large) || \"/assets/placeholder.webp\",\n      descriptions\n    };\n  }, [item]);\n\n  // Refs for parallax hero movement\n  const heroRef = useRef(null);\n  const coverShift = useCoverShift(heroRef, isMobile ? 160 : 280); // px to move right\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-[#faf7f2]\",\n      children: [/*#__PURE__*/_jsxDEV(SiteHeader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-6 py-24 animate-pulse\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-10 w-1/2 bg-[#e7d8c9] rounded mb-6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-96 bg-[#efe4d9] rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this);\n  }\n  if (err || !item) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-[#faf7f2]\",\n      children: [/*#__PURE__*/_jsxDEV(SiteHeader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"max-w-3xl mx-auto px-6 py-16 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-red-700 mb-2\",\n          children: \"\\u0E40\\u0E01\\u0E34\\u0E14\\u0E02\\u0E49\\u0E2D\\u0E1C\\u0E34\\u0E14\\u0E1E\\u0E25\\u0E32\\u0E14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-[#7b6c61]\",\n          children: err || \"ไม่พบข้อมูล\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/articles\",\n          className: \"mt-6 inline-block text-[#d8653b] underline\",\n          children: \"\\u0E22\\u0E49\\u0E2D\\u0E19\\u0E01\\u0E25\\u0E31\\u0E1A\\u0E44\\u0E1B\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E23\\u0E27\\u0E21\\u0E1A\\u0E17\\u0E04\\u0E27\\u0E32\\u0E21\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this);\n  }\n  const descs = meta.descriptions || [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen text-[#111518]\",\n    style: {\n      backgroundImage: \"url('/assets/banner.webp')\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      backgroundAttachment: \"fixed\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(SiteHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pt-24\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-8\",\n      children: /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"text-sm text-[#7b6c61] mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"hover:underline\",\n          children: \"\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E41\\u0E23\\u0E01\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mx-2\",\n          children: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/articles\",\n          className: \"hover:underline\",\n          children: \"\\u0E1A\\u0E17\\u0E04\\u0E27\\u0E32\\u0E21\\u0E41\\u0E19\\u0E30\\u0E19\\u0E33\\u0E2B\\u0E19\\u0E31\\u0E07\\u0E2A\\u0E37\\u0E2D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mx-2\",\n          children: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-[#5b4a3e]\",\n          children: meta.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      ref: heroRef,\n      className: \"relative py-6 sm:py-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 sm:px-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rounded-3xl shadow-lg border border-[#e7d8c9]/70 bg-[#fffaf3]/80 backdrop-blur-md p-5 md:p-7\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-6 items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative h-[58vw] sm:h-[460px] md:h-[520px] overflow-hidden\",\n              style: {\n                willChange: \"transform\",\n                transform: `translateX(${coverShift}px)`,\n                transition: \"transform 0.1s linear\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: meta.thumb,\n                alt: meta.title,\n                className: \"absolute inset-0 w-full h-full object-cover rounded-2xl ring-1 ring-[#e7d8c9] shadow\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:pl-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-3xl md:text-4xl font-extrabold tracking-tight text-[#5b4a3e] mb-3\",\n                children: meta.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"mb-5 space-y-1 text-[15px] text-[#57493f]\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"opacity-70\",\n                    children: \"\\u0E1C\\u0E39\\u0E49\\u0E41\\u0E15\\u0E48\\u0E07:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 23\n                  }, this), \" \", meta.creator]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"opacity-70\",\n                    children: \"\\u0E1B\\u0E35/\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 23\n                  }, this), \" \", meta.date]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"opacity-70\",\n                    children: \"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E2B\\u0E19\\u0E49\\u0E32:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 23\n                  }, this), \" \", meta.extent]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"opacity-70\",\n                    children: \"\\u0E40\\u0E25\\u0E02\\u0E17\\u0E30\\u0E40\\u0E1A\\u0E35\\u0E22\\u0E19:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 23\n                  }, this), \" \", meta.identifier]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"opacity-70\",\n                    children: \"\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E20\\u0E17:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 23\n                  }, this), \" \", meta.type]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 17\n              }, this), descs.length > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-[#7b6c61] italic\",\n                children: \"\\u0E40\\u0E25\\u0E37\\u0E48\\u0E2D\\u0E19\\u0E25\\u0E07\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E2D\\u0E48\\u0E32\\u0E19\\u0E04\\u0E33\\u0E2D\\u0E18\\u0E34\\u0E1A\\u0E32\\u0E22\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"italic text-[#7b6c61]\",\n                children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E04\\u0E33\\u0E2D\\u0E18\\u0E34\\u0E1A\\u0E32\\u0E22\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E19\\u0E35\\u0E49\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-8 pb-24\",\n      children: _s4(descs.map(_s4((desc, idx) => {\n        _s4();\n        // idx 0 => cover right, text left; then alternate\n        const coverRight = idx % 2 === 0; // 0,2,4 => right; 1,3,5 => left\n        const {\n          ref,\n          inView\n        } = useInView({\n          threshold: 0.15\n        });\n        return /*#__PURE__*/_jsxDEV(\"section\", {\n          ref: ref,\n          className: \"my-6 sm:my-8\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-6 items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: coverRight ? \"order-1 md:order-1\" : \"order-2 md:order-1\",\n              children: /*#__PURE__*/_jsxDEV(\"article\", {\n                className: `bg-white/95 border border-[#e7d8c9] rounded-3xl shadow-md p-6 md:p-8 leading-8 text-[#3f342d]\n                    transition-all duration-700 ease-out\n                    ${inView ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-6\"}`,\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-xl md:text-2xl font-bold text-[#5b4a3e] mb-3\",\n                  children: [\"\\u0E04\\u0E33\\u0E2D\\u0E18\\u0E34\\u0E1A\\u0E32\\u0E22 (\", idx + 1, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"whitespace-pre-wrap [ &::first-letter ]:float-left [ &::first-letter ]:text-5xl [ &::first-letter ]:leading-[0.9] [ &::first-letter ]:pr-2 [ &::first-letter ]:font-semibold [ &::first-letter ]:text-[#5b4a3e]\",\n                  children: desc\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: coverRight ? \"order-2 md:order-2\" : \"order-1 md:order-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `relative h-[58vw] sm:h-[420px] md:h-[480px] overflow-hidden rounded-2xl ring-1 ring-[#e7d8c9] shadow\n                    transition-transform duration-700 ease-out\n                    ${inView ? \"translate-x-0\" : coverRight ? \"-translate-x-8\" : \"translate-x-8\"}`,\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: meta.thumb,\n                  alt: `${meta.title} – cover`,\n                  className: \"absolute inset-0 w-full h-full object-cover\",\n                  loading: \"lazy\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 15\n          }, this)\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this);\n      }, \"oyd/E8SD7Fx4uOp6P7gVV2pVlaE=\", false, function () {\n        return [useInView];\n      })), \"oyd/E8SD7Fx4uOp6P7gVV2pVlaE=\", false, function () {\n        return [useInView];\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BackToTop, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 5\n  }, this);\n}\n_s5(BookArticleDetail, \"EBNVirAMMMg8sj4pphaOFq5CAHk=\", false, function () {\n  return [useParams, useIsMobile, useCoverShift];\n});\n_c = BookArticleDetail;\nvar _c;\n$RefreshReg$(_c, \"BookArticleDetail\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","useParams","Link","SiteHeader","Footer","BackToTop","api","fetchJsonWithProxies","titleOf","jsxDEV","_jsxDEV","getVals","item","key","Array","isArray","map","x","filter","Boolean","getVal","fallback","useIsMobile","_s","isMobile","setIsMobile","uaIsMobile","test","navigator","userAgent","mq","window","matchMedia","update","matches","addEventListener","removeEventListener","useInView","options","threshold","_s2","ref","inView","setInView","el","current","io","IntersectionObserver","entries","forEach","e","isIntersecting","observe","disconnect","useCoverShift","containerRef","maxShiftPx","_s3","shift","setShift","onScroll","box","rect","getBoundingClientRect","vh","innerHeight","visibleHeight","Math","min","max","top","total","height","p","passive","BookArticleDetail","_s5","_s4","$RefreshSig$","id","setItem","loading","setLoading","err","setErr","alive","data","t","document","title","message","meta","_item$thumbnail_displ","descriptions","creator","date","extent","identifier","type","thumb","thumbnail_display_urls","large","heroRef","coverShift","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","descs","style","backgroundImage","backgroundSize","backgroundPosition","backgroundAttachment","willChange","transform","transition","src","alt","length","desc","idx","coverRight","_c","$RefreshReg$"],"sources":["C:/Users/user/Documents/GitHub/the-culture-read-cnx/src/pages/BookArticleDetail.jsx"],"sourcesContent":["// src/pages/BookArticleDetail.jsx\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport SiteHeader from \"../components/SiteHeader\";\r\nimport Footer from \"../components/Footer\";\r\nimport BackToTop from \"../components/BackToTop\";\r\nimport { api, fetchJsonWithProxies, titleOf } from \"../lib/omekaClient\";\r\n\r\n/** helpers */\r\nconst getVals = (item, key) =>\r\n  Array.isArray(item?.[key]) ? item[key].map((x) => x?.[\"@value\"]).filter(Boolean) : [];\r\nconst getVal = (item, key, fallback = \"-\") => getVals(item, key)[0] || fallback;\r\n\r\n// UA + viewport\r\nconst useIsMobile = () => {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  useEffect(() => {\r\n    const uaIsMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);\r\n    const mq = window.matchMedia(\"(max-width: 768px)\");\r\n    const update = () => setIsMobile(uaIsMobile || mq.matches);\r\n    update();\r\n    mq.addEventListener(\"change\", update);\r\n    return () => mq.removeEventListener(\"change\", update);\r\n  }, []);\r\n  return isMobile;\r\n};\r\n\r\n// Observe element visibility (for reveal-on-scroll)\r\nconst useInView = (options = { threshold: 0.2 }) => {\r\n  const ref = useRef(null);\r\n  const [inView, setInView] = useState(false);\r\n  useEffect(() => {\r\n    const el = ref.current;\r\n    if (!el) return;\r\n    const io = new IntersectionObserver((entries) => {\r\n      entries.forEach((e) => {\r\n        if (e.isIntersecting) setInView(true);\r\n      });\r\n    }, options);\r\n    io.observe(el);\r\n    return () => io.disconnect();\r\n  }, [options]);\r\n  return { ref, inView };\r\n};\r\n\r\n// Track scroll progress within a container to shift the cover horizontally\r\nconst useCoverShift = (containerRef, maxShiftPx = 240) => {\r\n  const [shift, setShift] = useState(0);\r\n  useEffect(() => {\r\n    const onScroll = () => {\r\n      const box = containerRef.current;\r\n      if (!box) return;\r\n      const rect = box.getBoundingClientRect();\r\n      const vh = window.innerHeight || 1;\r\n      // progress 0..1 while the hero is within viewport\r\n      const visibleHeight = Math.min(vh, Math.max(0, vh - Math.max(0, rect.top)));\r\n      const total = Math.min(vh, rect.height || vh);\r\n      const p = total ? Math.min(1, Math.max(0, visibleHeight / total)) : 0;\r\n      setShift(p * maxShiftPx); // 0 -> maxShiftPx px\r\n    };\r\n    onScroll();\r\n    window.addEventListener(\"scroll\", onScroll, { passive: true });\r\n    window.addEventListener(\"resize\", onScroll);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", onScroll);\r\n      window.removeEventListener(\"resize\", onScroll);\r\n    };\r\n  }, [containerRef, maxShiftPx]);\r\n  return shift;\r\n};\r\n\r\nexport default function BookArticleDetail() {\r\n  const { id } = useParams();\r\n  const [item, setItem] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [err, setErr] = useState(\"\");\r\n  const isMobile = useIsMobile();\r\n\r\n  useEffect(() => {\r\n    let alive = true;\r\n    (async () => {\r\n      try {\r\n        setLoading(true);\r\n        setErr(\"\");\r\n        const data = await fetchJsonWithProxies(api(`/items/${id}`));\r\n        if (!alive) return;\r\n        setItem(data);\r\n        const t = titleOf(data) || data?.[\"o:title\"] || \"บทความ\";\r\n        document.title = `${t} · บทความแนะนำหนังสือ`;\r\n      } catch (e) {\r\n        if (!alive) return;\r\n        setErr(e?.message || \"โหลดข้อมูลไม่สำเร็จ\");\r\n      } finally {\r\n        if (alive) setLoading(false);\r\n      }\r\n    })();\r\n    return () => {\r\n      alive = false;\r\n    };\r\n  }, [id]);\r\n\r\n  const meta = useMemo(() => {\r\n    if (!item) return {};\r\n    const descriptions = getVals(item, \"dcterms:description\");\r\n    return {\r\n      title: titleOf(item) || item?.[\"o:title\"],\r\n      creator: getVal(item, \"dcterms:creator\"),\r\n      date: getVal(item, \"dcterms:date\"),\r\n      extent: getVal(item, \"dcterms:extent\"),\r\n      identifier: getVal(item, \"dcterms:identifier\"),\r\n      type: getVal(item, \"dcterms:type\"),\r\n      thumb:\r\n        item?.thumbnail_display_urls?.large || \"/assets/placeholder.webp\",\r\n      descriptions,\r\n    };\r\n  }, [item]);\r\n\r\n  // Refs for parallax hero movement\r\n  const heroRef = useRef(null);\r\n  const coverShift = useCoverShift(heroRef, isMobile ? 160 : 280); // px to move right\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-[#faf7f2]\">\r\n        <SiteHeader />\r\n        <div className=\"max-w-7xl mx-auto px-6 py-24 animate-pulse\">\r\n          <div className=\"h-10 w-1/2 bg-[#e7d8c9] rounded mb-6\" />\r\n          <div className=\"h-96 bg-[#efe4d9] rounded\" />\r\n        </div>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (err || !item) {\r\n    return (\r\n      <div className=\"min-h-screen bg-[#faf7f2]\">\r\n        <SiteHeader />\r\n        <main className=\"max-w-3xl mx-auto px-6 py-16 text-center\">\r\n          <h1 className=\"text-2xl font-bold text-red-700 mb-2\">เกิดข้อผิดพลาด</h1>\r\n          <p className=\"text-[#7b6c61]\">{err || \"ไม่พบข้อมูล\"}</p>\r\n          <Link to=\"/articles\" className=\"mt-6 inline-block text-[#d8653b] underline\">\r\n            ย้อนกลับไปหน้ารวมบทความ\r\n          </Link>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const descs = meta.descriptions || [];\r\n\r\n  return (\r\n    <div\r\n      className=\"min-h-screen text-[#111518]\"\r\n      style={{\r\n        backgroundImage: \"url('/assets/banner.webp')\",\r\n        backgroundSize: \"cover\",\r\n        backgroundPosition: \"center\",\r\n        backgroundAttachment: \"fixed\",\r\n      }}\r\n    >\r\n      <SiteHeader />\r\n\r\n      {/* NAV + BREADCRUMB */}\r\n      <div className=\"pt-24\" />\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-8\">\r\n        <nav className=\"text-sm text-[#7b6c61] mb-3\">\r\n          <Link to=\"/\" className=\"hover:underline\">หน้าแรก</Link>\r\n          <span className=\"mx-2\">/</span>\r\n          <Link to=\"/articles\" className=\"hover:underline\">บทความแนะนำหนังสือ</Link>\r\n          <span className=\"mx-2\">/</span>\r\n          <span className=\"text-[#5b4a3e]\">{meta.title}</span>\r\n        </nav>\r\n      </div>\r\n\r\n      {/* HERO (Cover left, details right). As user scrolls, cover glides to the right */}\r\n      <section ref={heroRef} className=\"relative py-6 sm:py-10\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-8\">\r\n          <div className=\"rounded-3xl shadow-lg border border-[#e7d8c9]/70 bg-[#fffaf3]/80 backdrop-blur-md p-5 md:p-7\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 items-center\">\r\n              {/* Cover (starts left). Shift to right as you scroll the hero) */}\r\n              <div\r\n                className=\"relative h-[58vw] sm:h-[460px] md:h-[520px] overflow-hidden\"\r\n                style={{\r\n                  willChange: \"transform\",\r\n                  transform: `translateX(${coverShift}px)`,\r\n                  transition: \"transform 0.1s linear\",\r\n                }}\r\n              >\r\n                <img\r\n                  src={meta.thumb}\r\n                  alt={meta.title}\r\n                  className=\"absolute inset-0 w-full h-full object-cover rounded-2xl ring-1 ring-[#e7d8c9] shadow\"\r\n                />\r\n              </div>\r\n\r\n              {/* Details (no descriptions here) */}\r\n              <div className=\"md:pl-4\">\r\n                <h1 className=\"text-3xl md:text-4xl font-extrabold tracking-tight text-[#5b4a3e] mb-3\">\r\n                  {meta.title}\r\n                </h1>\r\n                <ul className=\"mb-5 space-y-1 text-[15px] text-[#57493f]\">\r\n                  <li><span className=\"opacity-70\">ผู้แต่ง:</span> {meta.creator}</li>\r\n                  <li><span className=\"opacity-70\">ปี/วันที่:</span> {meta.date}</li>\r\n                  <li><span className=\"opacity-70\">จำนวนหน้า:</span> {meta.extent}</li>\r\n                  <li><span className=\"opacity-70\">เลขทะเบียน:</span> {meta.identifier}</li>\r\n                  <li><span className=\"opacity-70\">ประเภท:</span> {meta.type}</li>\r\n                </ul>\r\n                {descs.length > 0 ? (\r\n                  <p className=\"text-[#7b6c61] italic\">เลื่อนลงเพื่ออ่านคำอธิบาย</p>\r\n                ) : (\r\n                  <p className=\"italic text-[#7b6c61]\">ยังไม่มีคำอธิบายสำหรับรายการนี้</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* DESCRIPTION SECTIONS (zig-zag). First section appears with cover on the RIGHT */}\r\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-8 pb-24\">\r\n        {descs.map((desc, idx) => {\r\n          // idx 0 => cover right, text left; then alternate\r\n          const coverRight = idx % 2 === 0; // 0,2,4 => right; 1,3,5 => left\r\n          const { ref, inView } = useInView({ threshold: 0.15 });\r\n          return (\r\n            <section\r\n              key={idx}\r\n              ref={ref}\r\n              className=\"my-6 sm:my-8\"\r\n            >\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 items-center\">\r\n                {/* Left column */}\r\n                <div\r\n                  className={\r\n                    coverRight\r\n                      ? \"order-1 md:order-1\"\r\n                      : \"order-2 md:order-1\"\r\n                  }\r\n                >\r\n                  <article\r\n                    className={`bg-white/95 border border-[#e7d8c9] rounded-3xl shadow-md p-6 md:p-8 leading-8 text-[#3f342d]\r\n                    transition-all duration-700 ease-out\r\n                    ${inView ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-6\"}`}\r\n                  >\r\n                    <h2 className=\"text-xl md:text-2xl font-bold text-[#5b4a3e] mb-3\">\r\n                      คำอธิบาย ({idx + 1})\r\n                    </h2>\r\n                    <p className=\"whitespace-pre-wrap [ &::first-letter ]:float-left [ &::first-letter ]:text-5xl [ &::first-letter ]:leading-[0.9] [ &::first-letter ]:pr-2 [ &::first-letter ]:font-semibold [ &::first-letter ]:text-[#5b4a3e]\">\r\n                      {desc}\r\n                    </p>\r\n                  </article>\r\n                </div>\r\n\r\n                {/* Right column (cover that alternates sides) */}\r\n                <div\r\n                  className={\r\n                    coverRight\r\n                      ? \"order-2 md:order-2\"\r\n                      : \"order-1 md:order-2\"\r\n                  }\r\n                >\r\n                  <div\r\n                    className={`relative h-[58vw] sm:h-[420px] md:h-[480px] overflow-hidden rounded-2xl ring-1 ring-[#e7d8c9] shadow\r\n                    transition-transform duration-700 ease-out\r\n                    ${inView ? \"translate-x-0\" : coverRight ? \"-translate-x-8\" : \"translate-x-8\"}`}\r\n                  >\r\n                    <img\r\n                      src={meta.thumb}\r\n                      alt={`${meta.title} – cover`}\r\n                      className=\"absolute inset-0 w-full h-full object-cover\"\r\n                      loading=\"lazy\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </section>\r\n          );\r\n        })}\r\n      </main>\r\n\r\n      <Footer />\r\n      <BackToTop />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}