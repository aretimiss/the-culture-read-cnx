{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Documents\\\\GitHub\\\\the-culture-read-cnx\\\\src\\\\pages\\\\HomePage.jsx\",\n  _s = $RefreshSig$();\n// src/pages/HomePage.jsx\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport \"./HomePage.css\";\nimport SiteHeader from \"../components/SiteHeader\";\nimport ParallaxHero from \"../components/ParallaxHero\";\nimport Footer from \"../components/Footer\";\nimport AutoCarousel from \"../components/AutoCarousel\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport i18n from \"../i18n\";\nimport { fetchItemsLite, thumbUrlOf } from \"../lib/omekaClient\";\nimport { pickLang } from \"../lib/i18nPick\";\nimport MiniArticleHero from \"../components/MiniArticleHero\";\n\n/** ===== helpers (ไม่ใช้ description) ===== */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getVals = (it, prop) => Array.isArray(it === null || it === void 0 ? void 0 : it[prop]) ? it[prop].map(v => v === null || v === void 0 ? void 0 : v[\"@value\"]).filter(Boolean) : [];\nconst getLangVals = (it, prop, lang) => Array.isArray(it === null || it === void 0 ? void 0 : it[prop]) ? it[prop].map(v => v !== null && v !== void 0 && v[\"@language\"] ? v[\"@language\"] === lang ? v[\"@value\"] : null : v === null || v === void 0 ? void 0 : v[\"@value\"]).filter(Boolean) : [];\n\n/** ===== Smart loader สำหรับบทความ (ลองหลาย resource_class_label + fallback) ===== */\nconst ARTICLE_CLASS_CANDIDATES = [\"Article\", \"schema:Article\", \"bibo:Article\", \"NewsArticle\", \"schema:NewsArticle\", \"BlogPosting\", \"schema:BlogPosting\"];\nasync function fetchArticlesSmart(limit = 12) {\n  // 1) ลองตามคลาสที่พบบ่อย\n  for (const label of ARTICLE_CLASS_CANDIDATES) {\n    try {\n      const res = await fetchItemsLite({\n        limit,\n        sortBy: \"created\",\n        sortOrder: \"desc\",\n        resource_class_label: label\n      });\n      if (Array.isArray(res) && res.length > 0) {\n        console.log(\"[articles] matched:\", label, \"count:\", res.length);\n        return res;\n      }\n    } catch {\n      // ข้ามเมื่อ error เพื่อไล่ label ถัดไป\n    }\n  }\n  // 2) Fallback: ดึงล่าสุดไม่ระบุคลาส แล้วคัดกรองให้พอแสดงผล\n  try {\n    const anyRes = await fetchItemsLite({\n      limit: Math.max(limit * 2, 24),\n      sortBy: \"created\",\n      sortOrder: \"desc\"\n    });\n    const filtered = (anyRes || []).filter(it => {\n      var _it$thumbnail_display, _it$thumbnail_display2, _it$oThumbnail_urls, _it$oThumbnail_urls2;\n      const hasDesc = Array.isArray(it === null || it === void 0 ? void 0 : it[\"dcterms:description\"]) && it[\"dcterms:description\"].length > 0;\n      const hasThumb = (it === null || it === void 0 ? void 0 : (_it$thumbnail_display = it.thumbnail_display_urls) === null || _it$thumbnail_display === void 0 ? void 0 : _it$thumbnail_display.large) || (it === null || it === void 0 ? void 0 : (_it$thumbnail_display2 = it.thumbnail_display_urls) === null || _it$thumbnail_display2 === void 0 ? void 0 : _it$thumbnail_display2.medium) || (it === null || it === void 0 ? void 0 : (_it$oThumbnail_urls = it[\"o:thumbnail_urls\"]) === null || _it$oThumbnail_urls === void 0 ? void 0 : _it$oThumbnail_urls.large) || (it === null || it === void 0 ? void 0 : (_it$oThumbnail_urls2 = it[\"o:thumbnail_urls\"]) === null || _it$oThumbnail_urls2 === void 0 ? void 0 : _it$oThumbnail_urls2.medium);\n      return hasDesc || hasThumb;\n    });\n    console.log(\"[articles] fallback filtered:\", filtered.length);\n    return filtered.slice(0, limit);\n  } catch (e) {\n    console.warn(\"[articles] fallback failed:\", e);\n    return [];\n  }\n}\nexport default function HomePage() {\n  _s();\n  const {\n    t\n  } = useTranslation();\n  const navigate = useNavigate();\n\n  // ชุดข้อมูลตามหมวด\n  const [books, setBooks] = useState([]);\n  const [manuscripts, setManuscripts] = useState([]);\n  const [articles, setArticles] = useState([]);\n  const [query, setQuery] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [err, setErr] = useState(\"\");\n\n  // ใช้ภาษาหลัก (ตัด region ออก เช่น th-TH -> th)\n  const langBase = (i18n.language || \"th\").split(\"-\")[0];\n\n  // multi-lang title/desc\n  const titleOfItem = it => pickLang(it === null || it === void 0 ? void 0 : it[\"dcterms:title\"], langBase) || \"\";\n  const descOfItem = it => pickLang(it === null || it === void 0 ? void 0 : it[\"dcterms:description\"], langBase) || \"\";\n  const openPDF = item => {\n    const id = item === null || item === void 0 ? void 0 : item[\"o:id\"];\n    if (!id) return alert(t(\"errors.noId\"));\n    navigate(`/read/${id}`);\n  };\n  useEffect(() => {\n    var _mq$addEventListener;\n    // background-attachment fix (iOS)\n    const mq = window.matchMedia(\"(max-width: 767px)\");\n    const apply = () => document.documentElement.style.setProperty(\"--bg-attach\", mq.matches ? \"scroll\" : \"fixed\");\n    apply();\n    (_mq$addEventListener = mq.addEventListener) === null || _mq$addEventListener === void 0 ? void 0 : _mq$addEventListener.call(mq, \"change\", apply);\n    return () => {\n      var _mq$removeEventListen;\n      return (_mq$removeEventListen = mq.removeEventListener) === null || _mq$removeEventListen === void 0 ? void 0 : _mq$removeEventListen.call(mq, \"change\", apply);\n    };\n  }, []);\n  useEffect(() => {\n    (async () => {\n      try {\n        setLoading(true);\n        setErr(\"\");\n        const [bks, manus] = await Promise.all([fetchItemsLite({\n          limit: 12,\n          sortBy: \"created\",\n          sortOrder: \"desc\",\n          resource_class_label: \"Book\"\n        }), fetchItemsLite({\n          limit: 16,\n          sortBy: \"created\",\n          sortOrder: \"desc\",\n          resource_class_label: \"Manuscript\"\n        })]);\n        const arts = await fetchArticlesSmart(12);\n        setBooks(Array.isArray(bks) ? bks : []);\n        setManuscripts(Array.isArray(manus) ? manus : []);\n        setArticles(Array.isArray(arts) ? arts : []);\n        console.log(\"[counts]\", {\n          books: (bks || []).length,\n          manuscripts: (manus || []).length,\n          articles: (arts || []).length\n        });\n      } catch (e) {\n        setErr((e === null || e === void 0 ? void 0 : e.message) || t(\"errors.loadFailed\"));\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, [i18n.language, t]);\n\n  // filter in-page\n  const filterByQuery = arr => {\n    if (!query.trim()) return arr || [];\n    const q = query.toLowerCase();\n    return (arr || []).filter(it => {\n      const t0 = (titleOfItem(it) || \"\").toLowerCase();\n      const d0 = (descOfItem(it) || \"\").toLowerCase();\n      return t0.includes(q) || d0.includes(q);\n    });\n  };\n  const booksFiltered = useMemo(() => filterByQuery(books).slice(0, 3), [books, query, i18n.language]); // ✅ 3 เล่มล่าสุด\n\n  const manuscriptsFiltered = useMemo(() => filterByQuery(manuscripts).slice(0, 12), [manuscripts, query, i18n.language]);\n  const articlesFiltered = useMemo(() => filterByQuery(articles).slice(0, 9), [articles, query, i18n.language]);\n\n  /** ---------- สไลด์ฝั่ง Manuscript: ปัดได้ / ลูกศรคีย์บอร์ด / โฟกัสได้ ---------- */\n  const [msIndex, setMsIndex] = useState(0);\n  useEffect(() => setMsIndex(0), [manuscriptsFiltered.length]); // รีเซ็ตเมื่อรายการเปลี่ยน\n  const currentMs = manuscriptsFiltered[msIndex];\n  const [currentThumb, setCurrentThumb] = useState(null);\n  useEffect(() => {\n    let alive = true;\n    (async () => {\n      const u = currentMs ? await thumbUrlOf(currentMs) : null;\n      if (alive) setCurrentThumb(u);\n    })();\n    return () => {\n      alive = false;\n    };\n  }, [currentMs]);\n  const nextMs = () => setMsIndex(i => manuscriptsFiltered.length ? (i + 1) % manuscriptsFiltered.length : 0);\n  const prevMs = () => setMsIndex(i => manuscriptsFiltered.length ? (i - 1 + manuscriptsFiltered.length) % manuscriptsFiltered.length : 0);\n  const jumpMs = i => setMsIndex(i);\n\n  // touch swipe\n  const touchStartX = useRef(0);\n  const touchDeltaX = useRef(0);\n  const onTouchStart = e => {\n    touchStartX.current = e.touches[0].clientX;\n    touchDeltaX.current = 0;\n  };\n  const onTouchMove = e => {\n    touchDeltaX.current = e.touches[0].clientX - touchStartX.current;\n  };\n  const onTouchEnd = () => {\n    const THRESHOLD = 40;\n    if (touchDeltaX.current > THRESHOLD) prevMs();else if (touchDeltaX.current < -THRESHOLD) nextMs();\n  };\n\n  // keyboard arrows\n  const sliderRef = useRef(null);\n  const onKeyDown = e => {\n    if (e.key === \"ArrowLeft\") prevMs();\n    if (e.key === \"ArrowRight\") nextMs();\n  };\n\n  // fields (ยังไม่ใช้แสดงผล แต่เผื่ออนาคต)\n  const manuFields = useMemo(() => {\n    var _it$oId;\n    const it = currentMs || {};\n    const lang = langBase;\n    const joiner = arr => arr && arr.length ? arr.join(\", \") : \"—\";\n    return [{\n      label: t(\"book.author\"),\n      value: joiner(getLangVals(it, \"dcterms:creator\", lang) || getVals(it, \"dcterms:creator\"))\n    }, {\n      label: t(\"book.published\"),\n      value: joiner(getVals(it, \"dcterms:date\"))\n    }, {\n      label: t(\"book.language\"),\n      value: joiner(getVals(it, \"dcterms:language\"))\n    }, {\n      label: t(\"sections.rareBooks\"),\n      value: joiner(getLangVals(it, \"dcterms:subject\", lang) || getVals(it, \"dcterms:subject\"))\n    }, {\n      label: t(\"book.details\"),\n      value: joiner(getLangVals(it, \"dcterms:spatial\", lang) || getVals(it, \"dcterms:spatial\"))\n    }, {\n      label: t(\"book.publisher\"),\n      value: joiner(getLangVals(it, \"dcterms:publisher\", lang) || getVals(it, \"dcterms:publisher\"))\n    }, {\n      label: \"ID\",\n      value: (_it$oId = it === null || it === void 0 ? void 0 : it[\"o:id\"]) !== null && _it$oId !== void 0 ? _it$oId : \"—\"\n    }];\n  }, [currentMs, langBase, t]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen text-[#111518]\",\n    style: {\n      backgroundImage: \"url('/assets/banner.webp')\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      backgroundAttachment: \"var(--bg-attach, fixed)\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(SiteHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ParallaxHero, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-8 lg:px-12 py-8 sm:py-12 space-y-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"rounded-2xl bg-white/70 backdrop-blur-sm shadow-sm ring-1 ring-black/5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-5 pt-6 pb-2\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl sm:text-3xl font-bold tracking-tight text-[#5b4a3e] text-center\",\n            children: t(\"sections.ancientDocs\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-5 pb-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: sliderRef,\n            tabIndex: 0,\n            onKeyDown: onKeyDown,\n            onTouchStart: onTouchStart,\n            onTouchMove: onTouchMove,\n            onTouchEnd: onTouchEnd,\n            \"aria-roledescription\": \"carousel\",\n            \"aria-label\": t(\"sections.ancientDocs\"),\n            className: \"relative rounded-xl overflow-hidden ring-1 ring-black/5 bg-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"aspect-video w-full cursor-pointer\",\n              onClick: () => currentMs && openPDF(currentMs),\n              children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full h-full animate-pulse bg-neutral-100\",\n                \"aria-label\": t(\"status.loading\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 19\n              }, this) : currentThumb ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: currentThumb,\n                alt: titleOfItem(currentMs) || \"\",\n                className: \"w-full h-full object-cover object-center transition-transform duration-300 hover:scale-[1.02]\",\n                loading: \"lazy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full h-full grid place-items-center text-black/40 text-sm\",\n                children: t(\"common.noImage\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 flex items-center justify-between px-2 pointer-events-none\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: prevMs,\n                className: \"pointer-events-auto h-10 w-10 rounded-full bg-black/40 hover:bg-black/60 text-white grid place-items-center outline-none focus:ring-2 focus:ring-white/80\",\n                \"aria-label\": t(\"carousel.prev\"),\n                children: \"\\u2039\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: nextMs,\n                className: \"pointer-events-auto h-10 w-10 rounded-full bg-black/40 hover:bg-black/60 text-white grid place-items-center outline-none focus:ring-2 focus:ring-white/80\",\n                \"aria-label\": t(\"carousel.next\"),\n                children: \"\\u203A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute bottom-2 left-0 right-0 flex items-center justify-center gap-1.5\",\n              children: manuscriptsFiltered.map((_, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => jumpMs(i),\n                className: `h-2.5 w-2.5 rounded-full outline-none focus:ring-2 focus:ring-white/80 ${i === msIndex ? \"bg-white\" : \"bg-white/50 hover:bg-white/80\"}`,\n                \"aria-label\": t(\"carousel.goToSlide\", {\n                  n: i + 1\n                }),\n                \"aria-current\": i === msIndex ? \"true\" : \"false\"\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-2 gap-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"rounded-2xl bg-white/70 backdrop-blur-sm shadow-sm ring-1 ring-black/5 overflow-hidden\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-5 pt-6 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl sm:text-3xl font-bold tracking-tight text-[#5b4a3e] text-center\",\n              children: t(\"sections.activities\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-center mt-2 text-sm sm:text-base text-black/70\",\n              children: t(\"sections.activitiesDesc\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-0 pb-0\",\n            children: loading ?\n            /*#__PURE__*/\n            /* สเกเลตันโหลดอย่างย่อ */\n            _jsxDEV(\"div\", {\n              className: \"p-5\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-[360px] sm:h-[420px] rounded-xl bg-neutral-100 animate-pulse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 17\n            }, this) : articlesFiltered && articlesFiltered.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"p-5 text-center text-sm text-black/60\",\n              children: t(\"common.emptyArticles\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(MiniArticleHero, {\n              items: articlesFiltered // ส่งชุดบทความที่กรองแล้ว\n              ,\n              maxItems: 6 // จำกัดสไลด์ 6 ชิ้น\n              ,\n              height: \"min(58vh, 460px)\" // ความสูงคอมโพเนนต์\n              ,\n              showCoverOnMobile: false // ตั้ง true ถ้าอยากให้รูปปกโชว์บนมือถือ\n              // palette={[ ... ]}         // ถ้าต้องการ override โทนสี ส่งพาเลตต์เองได้\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n          className: \"rounded-2xl bg-white/70 backdrop-blur-sm shadow-sm ring-1 ring-black/5\",\n          children: [/*#__PURE__*/_jsxDEV(AutoCarousel, {\n            title: t(\"sections.recommendBooks\"),\n            items: loading || err ? [] : booksFiltered /* <= 3 เล่ม */,\n            onOpen: openPDF,\n            className: \"min-h-[360px]\" // ปรับเป็นคลาส Tailwind จริง\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this), !loading && !err && booksFiltered.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"px-5 pb-6 text-center text-sm text-black/60\",\n            children: t(\"common.emptyBooks\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 237,\n    columnNumber: 5\n  }, this);\n}\n_s(HomePage, \"O5aTLo5BatPYGe/Zx2sHoYWoCKE=\", false, function () {\n  return [useTranslation, useNavigate];\n});\n_c = HomePage;\nvar _c;\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","SiteHeader","ParallaxHero","Footer","AutoCarousel","useNavigate","useTranslation","i18n","fetchItemsLite","thumbUrlOf","pickLang","MiniArticleHero","jsxDEV","_jsxDEV","getVals","it","prop","Array","isArray","map","v","filter","Boolean","getLangVals","lang","ARTICLE_CLASS_CANDIDATES","fetchArticlesSmart","limit","label","res","sortBy","sortOrder","resource_class_label","length","console","log","anyRes","Math","max","filtered","_it$thumbnail_display","_it$thumbnail_display2","_it$oThumbnail_urls","_it$oThumbnail_urls2","hasDesc","hasThumb","thumbnail_display_urls","large","medium","slice","e","warn","HomePage","_s","t","navigate","books","setBooks","manuscripts","setManuscripts","articles","setArticles","query","setQuery","loading","setLoading","err","setErr","langBase","language","split","titleOfItem","descOfItem","openPDF","item","id","alert","_mq$addEventListener","mq","window","matchMedia","apply","document","documentElement","style","setProperty","matches","addEventListener","call","_mq$removeEventListen","removeEventListener","bks","manus","Promise","all","arts","message","filterByQuery","arr","trim","q","toLowerCase","t0","d0","includes","booksFiltered","manuscriptsFiltered","articlesFiltered","msIndex","setMsIndex","currentMs","currentThumb","setCurrentThumb","alive","u","nextMs","i","prevMs","jumpMs","touchStartX","touchDeltaX","onTouchStart","current","touches","clientX","onTouchMove","onTouchEnd","THRESHOLD","sliderRef","onKeyDown","key","manuFields","_it$oId","joiner","join","value","className","backgroundImage","backgroundSize","backgroundPosition","backgroundAttachment","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","tabIndex","onClick","src","alt","type","_","n","items","maxItems","height","showCoverOnMobile","title","onOpen","_c","$RefreshReg$"],"sources":["C:/Users/user/Documents/GitHub/the-culture-read-cnx/src/pages/HomePage.jsx"],"sourcesContent":["// src/pages/HomePage.jsx\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport \"./HomePage.css\";\r\n\r\nimport SiteHeader from \"../components/SiteHeader\";\r\nimport ParallaxHero from \"../components/ParallaxHero\";\r\nimport Footer from \"../components/Footer\";\r\nimport AutoCarousel from \"../components/AutoCarousel\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport i18n from \"../i18n\";\r\nimport { fetchItemsLite, thumbUrlOf } from \"../lib/omekaClient\";\r\nimport { pickLang } from \"../lib/i18nPick\";\r\nimport MiniArticleHero from \"../components/MiniArticleHero\";\r\n\r\n/** ===== helpers (ไม่ใช้ description) ===== */\r\nconst getVals = (it, prop) =>\r\n  Array.isArray(it?.[prop]) ? it[prop].map((v) => v?.[\"@value\"]).filter(Boolean) : [];\r\n\r\nconst getLangVals = (it, prop, lang) =>\r\n  Array.isArray(it?.[prop])\r\n    ? it[prop]\r\n        .map((v) => (v?.[\"@language\"] ? (v[\"@language\"] === lang ? v[\"@value\"] : null) : v?.[\"@value\"]))\r\n        .filter(Boolean)\r\n    : [];\r\n\r\n/** ===== Smart loader สำหรับบทความ (ลองหลาย resource_class_label + fallback) ===== */\r\nconst ARTICLE_CLASS_CANDIDATES = [\r\n  \"Article\",\r\n  \"schema:Article\",\r\n  \"bibo:Article\",\r\n  \"NewsArticle\",\r\n  \"schema:NewsArticle\",\r\n  \"BlogPosting\",\r\n  \"schema:BlogPosting\",\r\n];\r\n\r\nasync function fetchArticlesSmart(limit = 12) {\r\n  // 1) ลองตามคลาสที่พบบ่อย\r\n  for (const label of ARTICLE_CLASS_CANDIDATES) {\r\n    try {\r\n      const res = await fetchItemsLite({\r\n        limit,\r\n        sortBy: \"created\",\r\n        sortOrder: \"desc\",\r\n        resource_class_label: label,\r\n      });\r\n      if (Array.isArray(res) && res.length > 0) {\r\n        console.log(\"[articles] matched:\", label, \"count:\", res.length);\r\n        return res;\r\n      }\r\n    } catch {\r\n      // ข้ามเมื่อ error เพื่อไล่ label ถัดไป\r\n    }\r\n  }\r\n  // 2) Fallback: ดึงล่าสุดไม่ระบุคลาส แล้วคัดกรองให้พอแสดงผล\r\n  try {\r\n    const anyRes = await fetchItemsLite({\r\n      limit: Math.max(limit * 2, 24),\r\n      sortBy: \"created\",\r\n      sortOrder: \"desc\",\r\n    });\r\n    const filtered = (anyRes || []).filter((it) => {\r\n      const hasDesc = Array.isArray(it?.[\"dcterms:description\"]) && it[\"dcterms:description\"].length > 0;\r\n      const hasThumb =\r\n        it?.thumbnail_display_urls?.large ||\r\n        it?.thumbnail_display_urls?.medium ||\r\n        it?.[\"o:thumbnail_urls\"]?.large ||\r\n        it?.[\"o:thumbnail_urls\"]?.medium;\r\n      return hasDesc || hasThumb;\r\n    });\r\n    console.log(\"[articles] fallback filtered:\", filtered.length);\r\n    return filtered.slice(0, limit);\r\n  } catch (e) {\r\n    console.warn(\"[articles] fallback failed:\", e);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport default function HomePage() {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n\r\n  // ชุดข้อมูลตามหมวด\r\n  const [books, setBooks] = useState([]);\r\n  const [manuscripts, setManuscripts] = useState([]);\r\n  const [articles, setArticles] = useState([]);\r\n\r\n  const [query, setQuery] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [err, setErr] = useState(\"\");\r\n\r\n  // ใช้ภาษาหลัก (ตัด region ออก เช่น th-TH -> th)\r\n  const langBase = (i18n.language || \"th\").split(\"-\")[0];\r\n\r\n  // multi-lang title/desc\r\n  const titleOfItem = (it) => pickLang(it?.[\"dcterms:title\"], langBase) || \"\";\r\n  const descOfItem = (it) => pickLang(it?.[\"dcterms:description\"], langBase) || \"\";\r\n\r\n  const openPDF = (item) => {\r\n    const id = item?.[\"o:id\"];\r\n    if (!id) return alert(t(\"errors.noId\"));\r\n    navigate(`/read/${id}`);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // background-attachment fix (iOS)\r\n    const mq = window.matchMedia(\"(max-width: 767px)\");\r\n    const apply = () =>\r\n      document.documentElement.style.setProperty(\"--bg-attach\", mq.matches ? \"scroll\" : \"fixed\");\r\n    apply();\r\n    mq.addEventListener?.(\"change\", apply);\r\n    return () => mq.removeEventListener?.(\"change\", apply);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        setLoading(true);\r\n        setErr(\"\");\r\n\r\n        const [bks, manus] = await Promise.all([\r\n          fetchItemsLite({ limit: 12, sortBy: \"created\", sortOrder: \"desc\", resource_class_label: \"Book\" }),\r\n          fetchItemsLite({ limit: 16, sortBy: \"created\", sortOrder: \"desc\", resource_class_label: \"Manuscript\" }),\r\n        ]);\r\n        const arts = await fetchArticlesSmart(12);\r\n\r\n        setBooks(Array.isArray(bks) ? bks : []);\r\n        setManuscripts(Array.isArray(manus) ? manus : []);\r\n        setArticles(Array.isArray(arts) ? arts : []);\r\n\r\n        console.log(\"[counts]\", {\r\n          books: (bks || []).length,\r\n          manuscripts: (manus || []).length,\r\n          articles: (arts || []).length,\r\n        });\r\n      } catch (e) {\r\n        setErr(e?.message || t(\"errors.loadFailed\"));\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, [i18n.language, t]);\r\n\r\n  // filter in-page\r\n  const filterByQuery = (arr) => {\r\n    if (!query.trim()) return arr || [];\r\n    const q = query.toLowerCase();\r\n    return (arr || []).filter((it) => {\r\n      const t0 = (titleOfItem(it) || \"\").toLowerCase();\r\n      const d0 = (descOfItem(it) || \"\").toLowerCase();\r\n      return t0.includes(q) || d0.includes(q);\r\n    });\r\n  };\r\n\r\n  const booksFiltered = useMemo(\r\n    () => filterByQuery(books).slice(0, 3),\r\n    [books, query, i18n.language]\r\n  ); // ✅ 3 เล่มล่าสุด\r\n\r\n  const manuscriptsFiltered = useMemo(\r\n    () => filterByQuery(manuscripts).slice(0, 12),\r\n    [manuscripts, query, i18n.language]\r\n  );\r\n\r\n  const articlesFiltered = useMemo(\r\n    () => filterByQuery(articles).slice(0, 9),\r\n    [articles, query, i18n.language]\r\n  );\r\n\r\n  /** ---------- สไลด์ฝั่ง Manuscript: ปัดได้ / ลูกศรคีย์บอร์ด / โฟกัสได้ ---------- */\r\n  const [msIndex, setMsIndex] = useState(0);\r\n  useEffect(() => setMsIndex(0), [manuscriptsFiltered.length]); // รีเซ็ตเมื่อรายการเปลี่ยน\r\n  const currentMs = manuscriptsFiltered[msIndex];\r\n\r\n  const [currentThumb, setCurrentThumb] = useState(null);\r\n  useEffect(() => {\r\n    let alive = true;\r\n    (async () => {\r\n      const u = currentMs ? await thumbUrlOf(currentMs) : null;\r\n      if (alive) setCurrentThumb(u);\r\n    })();\r\n    return () => {\r\n      alive = false;\r\n    };\r\n  }, [currentMs]);\r\n\r\n  const nextMs = () =>\r\n    setMsIndex((i) => (manuscriptsFiltered.length ? (i + 1) % manuscriptsFiltered.length : 0));\r\n  const prevMs = () =>\r\n    setMsIndex((i) =>\r\n      manuscriptsFiltered.length ? (i - 1 + manuscriptsFiltered.length) % manuscriptsFiltered.length : 0\r\n    );\r\n  const jumpMs = (i) => setMsIndex(i);\r\n\r\n  // touch swipe\r\n  const touchStartX = useRef(0);\r\n  const touchDeltaX = useRef(0);\r\n  const onTouchStart = (e) => {\r\n    touchStartX.current = e.touches[0].clientX;\r\n    touchDeltaX.current = 0;\r\n  };\r\n  const onTouchMove = (e) => {\r\n    touchDeltaX.current = e.touches[0].clientX - touchStartX.current;\r\n  };\r\n  const onTouchEnd = () => {\r\n    const THRESHOLD = 40;\r\n    if (touchDeltaX.current > THRESHOLD) prevMs();\r\n    else if (touchDeltaX.current < -THRESHOLD) nextMs();\r\n  };\r\n\r\n  // keyboard arrows\r\n  const sliderRef = useRef(null);\r\n  const onKeyDown = (e) => {\r\n    if (e.key === \"ArrowLeft\") prevMs();\r\n    if (e.key === \"ArrowRight\") nextMs();\r\n  };\r\n\r\n  // fields (ยังไม่ใช้แสดงผล แต่เผื่ออนาคต)\r\n  const manuFields = useMemo(() => {\r\n    const it = currentMs || {};\r\n    const lang = langBase;\r\n    const joiner = (arr) => (arr && arr.length ? arr.join(\", \") : \"—\");\r\n    return [\r\n      { label: t(\"book.author\"), value: joiner(getLangVals(it, \"dcterms:creator\", lang) || getVals(it, \"dcterms:creator\")) },\r\n      { label: t(\"book.published\"), value: joiner(getVals(it, \"dcterms:date\")) },\r\n      { label: t(\"book.language\"), value: joiner(getVals(it, \"dcterms:language\")) },\r\n      { label: t(\"sections.rareBooks\"), value: joiner(getLangVals(it, \"dcterms:subject\", lang) || getVals(it, \"dcterms:subject\")) },\r\n      { label: t(\"book.details\"), value: joiner(getLangVals(it, \"dcterms:spatial\", lang) || getVals(it, \"dcterms:spatial\")) },\r\n      { label: t(\"book.publisher\"), value: joiner(getLangVals(it, \"dcterms:publisher\", lang) || getVals(it, \"dcterms:publisher\")) },\r\n      { label: \"ID\", value: it?.[\"o:id\"] ?? \"—\" },\r\n    ];\r\n  }, [currentMs, langBase, t]);\r\n\r\n  return (\r\n    <div\r\n      className=\"min-h-screen text-[#111518]\"\r\n      style={{\r\n        backgroundImage: \"url('/assets/banner.webp')\",\r\n        backgroundSize: \"cover\",\r\n        backgroundPosition: \"center\",\r\n        backgroundAttachment: \"var(--bg-attach, fixed)\",\r\n      }}\r\n    >\r\n      <SiteHeader />\r\n\r\n      {/* Banner + Search */}\r\n      <ParallaxHero />\r\n\r\n      {/* ===== Layout: Manuscripts + (Articles | Books) ===== */}\r\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-8 lg:px-12 py-8 sm:py-12 space-y-10\">\r\n        {/* ===== MANUSCRIPTS (Full Image Clickable) ===== */}\r\n        <section className=\"rounded-2xl bg-white/70 backdrop-blur-sm shadow-sm ring-1 ring-black/5\">\r\n          <div className=\"px-5 pt-6 pb-2\">\r\n            <h2 className=\"text-2xl sm:text-3xl font-bold tracking-tight text-[#5b4a3e] text-center\">\r\n              {t(\"sections.ancientDocs\")}\r\n            </h2>\r\n          </div>\r\n\r\n          <div className=\"px-5 pb-6\">\r\n            <div\r\n              ref={sliderRef}\r\n              tabIndex={0}\r\n              onKeyDown={onKeyDown}\r\n              onTouchStart={onTouchStart}\r\n              onTouchMove={onTouchMove}\r\n              onTouchEnd={onTouchEnd}\r\n              aria-roledescription=\"carousel\"\r\n              aria-label={t(\"sections.ancientDocs\")}\r\n              className=\"relative rounded-xl overflow-hidden ring-1 ring-black/5 bg-white\"\r\n            >\r\n              <div\r\n                className=\"aspect-video w-full cursor-pointer\"\r\n                onClick={() => currentMs && openPDF(currentMs)}\r\n              >\r\n                {loading ? (\r\n                  <div className=\"w-full h-full animate-pulse bg-neutral-100\" aria-label={t(\"status.loading\")} />\r\n                ) : currentThumb ? (\r\n                  <img\r\n                    src={currentThumb}\r\n                    alt={titleOfItem(currentMs) || \"\"}\r\n                    className=\"w-full h-full object-cover object-center transition-transform duration-300 hover:scale-[1.02]\"\r\n                    loading=\"lazy\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"w-full h-full grid place-items-center text-black/40 text-sm\">\r\n                    {t(\"common.noImage\")}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* controls */}\r\n              <div className=\"absolute inset-0 flex items-center justify-between px-2 pointer-events-none\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={prevMs}\r\n                  className=\"pointer-events-auto h-10 w-10 rounded-full bg-black/40 hover:bg-black/60 text-white grid place-items-center outline-none focus:ring-2 focus:ring-white/80\"\r\n                  aria-label={t(\"carousel.prev\")}\r\n                >\r\n                  ‹\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={nextMs}\r\n                  className=\"pointer-events-auto h-10 w-10 rounded-full bg-black/40 hover:bg-black/60 text-white grid place-items-center outline-none focus:ring-2 focus:ring-white/80\"\r\n                  aria-label={t(\"carousel.next\")}\r\n                >\r\n                  ›\r\n                </button>\r\n              </div>\r\n\r\n              {/* dots */}\r\n              <div className=\"absolute bottom-2 left-0 right-0 flex items-center justify-center gap-1.5\">\r\n                {manuscriptsFiltered.map((_, i) => (\r\n                  <button\r\n                    key={i}\r\n                    type=\"button\"\r\n                    onClick={() => jumpMs(i)}\r\n                    className={`h-2.5 w-2.5 rounded-full outline-none focus:ring-2 focus:ring-white/80 ${\r\n                      i === msIndex ? \"bg-white\" : \"bg-white/50 hover:bg-white/80\"\r\n                    }`}\r\n                    aria-label={t(\"carousel.goToSlide\", { n: i + 1 })}\r\n                    aria-current={i === msIndex ? \"true\" : \"false\"}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        {/* ===== BOTTOM ROW: Articles | Books ===== */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n          {/* Articles */}\r\n          <section className=\"rounded-2xl bg-white/70 backdrop-blur-sm shadow-sm ring-1 ring-black/5 overflow-hidden\">\r\n            <div className=\"px-5 pt-6 pb-2\">\r\n              <h2 className=\"text-2xl sm:text-3xl font-bold tracking-tight text-[#5b4a3e] text-center\">\r\n                {t(\"sections.activities\")}\r\n              </h2>\r\n              <p className=\"text-center mt-2 text-sm sm:text-base text-black/70\">\r\n                {t(\"sections.activitiesDesc\")}\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"px-0 pb-0\">\r\n              {loading ? (\r\n                /* สเกเลตันโหลดอย่างย่อ */\r\n                <div className=\"p-5\">\r\n                  <div className=\"h-[360px] sm:h-[420px] rounded-xl bg-neutral-100 animate-pulse\" />\r\n                </div>\r\n              ) : (articlesFiltered && articlesFiltered.length === 0) ? (\r\n                <p className=\"p-5 text-center text-sm text-black/60\">{t(\"common.emptyArticles\")}</p>\r\n              ) : (\r\n                <MiniArticleHero\r\n                  items={articlesFiltered}     // ส่งชุดบทความที่กรองแล้ว\r\n                  maxItems={6}                 // จำกัดสไลด์ 6 ชิ้น\r\n                  height=\"min(58vh, 460px)\"    // ความสูงคอมโพเนนต์\r\n                  showCoverOnMobile={false}    // ตั้ง true ถ้าอยากให้รูปปกโชว์บนมือถือ\r\n                  // palette={[ ... ]}         // ถ้าต้องการ override โทนสี ส่งพาเลตต์เองได้\r\n                />\r\n              )}\r\n            </div>\r\n          </section>\r\n\r\n          {/* Books carousel (3 เล่มล่าสุด) */}\r\n          <aside className=\"rounded-2xl bg-white/70 backdrop-blur-sm shadow-sm ring-1 ring-black/5\">\r\n            <AutoCarousel\r\n              title={t(\"sections.recommendBooks\")}\r\n              items={loading || err ? [] : booksFiltered /* <= 3 เล่ม */}\r\n              onOpen={openPDF}\r\n              className=\"min-h-[360px]\" // ปรับเป็นคลาส Tailwind จริง\r\n            />\r\n            {!loading && !err && booksFiltered.length === 0 && (\r\n              <p className=\"px-5 pb-6 text-center text-sm text-black/60\">{t(\"common.emptyBooks\")}</p>\r\n            )}\r\n          </aside>\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}