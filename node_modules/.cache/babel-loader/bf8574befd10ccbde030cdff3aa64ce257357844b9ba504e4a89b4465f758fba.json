{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Documents\\\\GitHub\\\\the-culture-read-cnx\\\\src\\\\pages\\\\BooksPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport SiteHeader from \"../components/SiteHeader\";\nimport Footer from \"../components/Footer\";\nimport BackToTop from \"../components/BackToTop\";\nimport BookCard from \"../components/BookCard\";\nimport { fetchItemsLite, fetchJsonWithProxies, withKeys, api } from \"../lib/omekaClient\";\nimport { titleOf, descOf } from \"../lib/textOf\";\nimport { pickLang } from \"../lib/i18nPick\";\n\n/* ---------- helpers: เลือกภาษาที่ “เข้มงวดกว่า” ---------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst variantsFor = lang => {\n  const L = (lang || \"\").toLowerCase();\n  const map = {\n    th: [\"th\", \"tha\", \"th-th\"],\n    en: [\"en\", \"eng\", \"en-us\", \"en-gb\"],\n    lo: [\"lo\", \"lao\", \"lo-la\"],\n    tl: [\"tl\", \"tgl\", \"fil\", \"fil-ph\"],\n    zh: [\"zh\", \"zho\", \"zh-cn\", \"zh-hans\", \"zh-tw\", \"zh-hant\"]\n  };\n  const generic = [L, `${L}-${L}`];\n  return map[L] || generic;\n};\nconst pickLangStrict = (field, lang) => {\n  var _field$;\n  if (!Array.isArray(field)) return \"\";\n  const prefs = variantsFor(lang);\n\n  // exact match\n  for (const p of prefs) {\n    const hit = field.find(x => ((x === null || x === void 0 ? void 0 : x[\"@language\"]) || \"\").toLowerCase() === p);\n    if (hit !== null && hit !== void 0 && hit[\"@value\"]) return hit[\"@value\"];\n  }\n\n  // startsWith match\n  const base = (lang || \"\").toLowerCase();\n  const loose = field.find(x => ((x === null || x === void 0 ? void 0 : x[\"@language\"]) || \"\").toLowerCase().startsWith(base));\n  if (loose !== null && loose !== void 0 && loose[\"@value\"]) return loose[\"@value\"];\n\n  // fallback\n  return ((_field$ = field[0]) === null || _field$ === void 0 ? void 0 : _field$[\"@value\"]) || \"\";\n};\n\n/* ---------- UI ---------- */\nconst ShelfBar = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"h-3 rounded-full bg-gradient-to-b from-[#e7d8c9] to-[#d9c1a9] shadow-inner\"\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 59,\n  columnNumber: 3\n}, this);\n_c = ShelfBar;\nconst ShelfTitle = ({\n  children\n}) => /*#__PURE__*/_jsxDEV(\"h2\", {\n  className: \"text-xl md:text-2xl font-extrabold tracking-wide text-[#5b4a3e] mb-3\",\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 63,\n  columnNumber: 3\n}, this);\n_c2 = ShelfTitle;\nconst SkeletonLibrary = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"py-20 flex flex-col items-center gap-6 animate-pulse text-[#5b4a3e]\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-8 w-52 bg-[#e5d7ca]/50 rounded-full\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-6 w-72 bg-[#e5d7ca]/40 rounded-full\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-6 w-64 bg-[#e5d7ca]/30 rounded-full\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-10 px-4 w-full max-w-6xl\",\n    children: Array.from({\n      length: 8\n    }).map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"aspect-[3/4] bg-[#e5d7ca]/40 rounded-xl shadow-sm\"\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 69,\n  columnNumber: 3\n}, this);\n_c3 = SkeletonLibrary;\nexport default function BooksPage() {\n  _s();\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const [items, setItems] = useState([]);\n  const [err, setErr] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [query, setQuery] = useState(\"\");\n  const [activeSet, setActiveSet] = useState(\"all\");\n  const [setLabels, setSetLabels] = useState({});\n  const navigate = useNavigate();\n\n  /* ---------- โหลดรายการหนังสือ ---------- */\n  useEffect(() => {\n    (async () => {\n      try {\n        setLoading(true);\n        const data = await fetchItemsLite({\n          limit: 60,\n          sortBy: \"created\",\n          sortOrder: \"desc\"\n        });\n        setItems(Array.isArray(data) ? data : []);\n        setErr(\"\");\n      } catch (e) {\n        setErr((e === null || e === void 0 ? void 0 : e.message) || t(\"errors.loadFailed\", \"โหลดข้อมูลไม่สำเร็จ\"));\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, [i18n.language]); // รีโหลดเมื่อเปลี่ยนภาษา\n\n  /* ---------- โหลด label ของคอลเลกชัน ---------- */\n  useEffect(() => {\n    (async () => {\n      try {\n        const ids = Array.from(new Set((Array.isArray(items) ? items : []).flatMap(it => (Array.isArray(it === null || it === void 0 ? void 0 : it[\"o:item_set\"]) ? it[\"o:item_set\"] : []).map(s => s === null || s === void 0 ? void 0 : s[\"o:id\"]).filter(Boolean))));\n        if (!ids.length) {\n          setSetLabels({});\n          return;\n        }\n        const pairs = await Promise.all(ids.map(async id => {\n          try {\n            const r = await fetchJsonWithProxies(withKeys(api(`/item_sets/${id}`)));\n            const name = pickLangStrict(r === null || r === void 0 ? void 0 : r[\"dcterms:title\"], i18n.language) || (r === null || r === void 0 ? void 0 : r[\"o:title\"]) || `Collection #${id}`;\n            return [String(id), name];\n          } catch {\n            return [String(id), `Collection #${id}`];\n          }\n        }));\n        setSetLabels(Object.fromEntries(pairs));\n      } catch {\n        // ignore\n      }\n    })();\n  }, [items, i18n.language]);\n\n  /* ---------- Tabs หมวดหมู่ ---------- */\n  const categoryTabs = useMemo(() => {\n    const tabs = [{\n      id: \"all\",\n      label: t(\"filters.all\", \"ทั้งหมด\")\n    }];\n    const others = Object.entries(setLabels).map(([id, label]) => ({\n      id,\n      label\n    }));\n    return tabs.concat(others);\n  }, [setLabels, t]);\n\n  /* ---------- สร้างชื่อ/คำโปรยตามภาษา ---------- */\n  const displayTitle = it => pickLangStrict(it === null || it === void 0 ? void 0 : it[\"dcterms:title\"], i18n.language) || titleOf(it);\n  const displayDesc = it => pickLangStrict(it === null || it === void 0 ? void 0 : it[\"dcterms:description\"], i18n.language) || descOf(it);\n\n  /* ---------- Filter ---------- */\n  const filtered = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    return items.filter(it => {\n      const title = (displayTitle(it) || \"\").toLowerCase();\n      const desc = (displayDesc(it) || \"\").toLowerCase();\n      const hit = !q || title.includes(q) || desc.includes(q);\n      if (!hit) return false;\n      if (activeSet === \"all\") return true;\n      const sets = Array.isArray(it === null || it === void 0 ? void 0 : it[\"o:item_set\"]) ? it[\"o:item_set\"] : [];\n      return sets.some(s => String(s === null || s === void 0 ? void 0 : s[\"o:id\"]) === String(activeSet));\n    });\n  }, [items, query, activeSet, i18n.language]);\n\n  /* ---------- จัดกลุ่ม ---------- */\n  const groupedBySet = useMemo(() => {\n    if (activeSet !== \"all\") return {};\n    const groups = {};\n    filtered.forEach(it => {\n      const sets = Array.isArray(it === null || it === void 0 ? void 0 : it[\"o:item_set\"]) ? it[\"o:item_set\"] : [];\n      if (sets.length === 0) (groups[\"_none\"] ||= []).push(it);else {\n        sets.forEach(s => {\n          const key = String((s === null || s === void 0 ? void 0 : s[\"o:id\"]) || \"_none\");\n          (groups[key] ||= []).push(it);\n        });\n      }\n    });\n    return groups;\n  }, [filtered, activeSet]);\n  const singleShelfItems = useMemo(() => {\n    if (activeSet === \"all\") return [];\n    return filtered;\n  }, [filtered, activeSet]);\n  const openBook = item => {\n    const id = item === null || item === void 0 ? void 0 : item[\"o:id\"];\n    if (!id) return alert(t(\"errors.noId\", \"ไม่พบรหัสรายการ\"));\n    navigate(`/read/${id}`);\n  };\n\n  /* ---------- UI ---------- */\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-[#faf7f2] text-[#111518]\",\n    children: [/*#__PURE__*/_jsxDEV(SiteHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      mode: \"wait\",\n      children: loading ? /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0\n        },\n        animate: {\n          opacity: 1\n        },\n        exit: {\n          opacity: 0\n        },\n        transition: {\n          duration: 0.3\n        },\n        children: /*#__PURE__*/_jsxDEV(SkeletonLibrary, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }, this)\n      }, \"loading\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(motion.div, {\n        // บังคับรี-render เมื่อเปลี่ยนภาษา\n        initial: {\n          opacity: 0\n        },\n        animate: {\n          opacity: 1\n        },\n        exit: {\n          opacity: 0\n        },\n        transition: {\n          duration: 0.25\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"relative h-[46vh] min-h-[360px] w-full overflow-hidden\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 bg-center bg-cover\",\n            style: {\n              backgroundImage: \"url(/assets/banner.webp)\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 bg-[#fff1e6]/60\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative z-10 h-full flex flex-col items-center justify-center text-center px-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-4xl md:text-6xl font-extrabold tracking-wide text-[#5b4a3e] drop-shadow\",\n              children: t(\"books.title\", \"Library\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-3 max-w-2xl text-[#5b4a3e]/80\",\n              children: t(\"books.subtitle\", \"Explore and discover books from our collections\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6 w-full max-w-xl\",\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: e => e.preventDefault(),\n                className: \"flex items-center rounded-2xl bg-white/90 ring-1 ring-black/10 shadow\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  value: query,\n                  onChange: e => setQuery(e.target.value),\n                  placeholder: t(\"search.placeholder\", \"Search by title or keyword...\"),\n                  className: \"flex-1 px-4 py-3 rounded-2xl bg-transparent outline-none\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"px-5 py-3 font-semibold\",\n                  children: t(\"actions.search\", \"Search\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-7xl mx-auto px-4 sm:px-8 lg:px-12 mt-8 grid grid-cols-1 lg:grid-cols-4 gap-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n            className: \"lg:col-span-1\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sticky top-28 space-y-3 p-4 bg-white/70 backdrop-blur-md rounded-2xl shadow ring-1 ring-black/10\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-bold text-[#5b4a3e] mb-2\",\n                children: t(\"filters.category\", \"Categories\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-col gap-2\",\n                children: categoryTabs.map(tab => /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setActiveSet(tab.id),\n                  className: `text-left px-3 py-2 rounded-lg text-sm md:text-base font-medium transition ${activeSet === tab.id ? \"bg-[#5b4a3e] text-white shadow\" : \"hover:bg-black/5 text-[#5b4a3e]\"}`,\n                  children: tab.label\n                }, tab.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n            className: \"lg:col-span-3\",\n            children: err ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-16 text-center text-red-600\",\n              children: err\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 19\n            }, this) : filtered.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-16 text-center\",\n              children: t(\"status.noResults\", \"No books found\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 19\n            }, this) : activeSet === \"all\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-12\",\n              children: [Object.entries(groupedBySet).filter(([key]) => key !== \"_none\").map(([key, group]) => /*#__PURE__*/_jsxDEV(\"section\", {\n                children: [/*#__PURE__*/_jsxDEV(ShelfTitle, {\n                  children: setLabels[key] || `${t(\"books.collection\", \"Collection\")} #${key}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-3\",\n                  children: group.map(it => /*#__PURE__*/_jsxDEV(BookCard, {\n                    item: it,\n                    onOpen: openBook,\n                    titleOverride: displayTitle(it),\n                    descOverride: displayDesc(it)\n                  }, it[\"o:id\"], false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 314,\n                    columnNumber: 31\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(ShelfBar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 27\n                }, this)]\n              }, key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 25\n              }, this)), groupedBySet[\"_none\"] && /*#__PURE__*/_jsxDEV(\"section\", {\n                children: [/*#__PURE__*/_jsxDEV(ShelfTitle, {\n                  children: t(\"books.uncategorized\", \"Uncategorized\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 328,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-3\",\n                  children: groupedBySet[\"_none\"].map(it => /*#__PURE__*/_jsxDEV(BookCard, {\n                    item: it,\n                    onOpen: openBook,\n                    titleOverride: displayTitle(it),\n                    descOverride: displayDesc(it)\n                  }, it[\"o:id\"], false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 331,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(ShelfBar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"section\", {\n              className: \"space-y-4\",\n              children: [/*#__PURE__*/_jsxDEV(ShelfTitle, {\n                children: setLabels[String(activeSet)] || t(\"books.collection\", \"Collection\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-3\",\n                children: singleShelfItems.map(it => /*#__PURE__*/_jsxDEV(BookCard, {\n                  item: it,\n                  onOpen: openBook,\n                  titleOverride: displayTitle(it),\n                  descOverride: displayDesc(it)\n                }, it[\"o:id\"], false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(ShelfBar, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(BackToTop, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }, this)]\n      }, i18n.language, true, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 5\n  }, this);\n}\n_s(BooksPage, \"Yki56LOd3FSjfd+xBzI2VKhB4xA=\", false, function () {\n  return [useTranslation, useNavigate];\n});\n_c4 = BooksPage;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"ShelfBar\");\n$RefreshReg$(_c2, \"ShelfTitle\");\n$RefreshReg$(_c3, \"SkeletonLibrary\");\n$RefreshReg$(_c4, \"BooksPage\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useNavigate","useTranslation","motion","AnimatePresence","SiteHeader","Footer","BackToTop","BookCard","fetchItemsLite","fetchJsonWithProxies","withKeys","api","titleOf","descOf","pickLang","jsxDEV","_jsxDEV","variantsFor","lang","L","toLowerCase","map","th","en","lo","tl","zh","generic","pickLangStrict","field","_field$","Array","isArray","prefs","p","hit","find","x","base","loose","startsWith","ShelfBar","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","ShelfTitle","children","_c2","SkeletonLibrary","from","length","_","i","_c3","BooksPage","_s","t","i18n","items","setItems","err","setErr","loading","setLoading","query","setQuery","activeSet","setActiveSet","setLabels","setSetLabels","navigate","data","limit","sortBy","sortOrder","e","message","language","ids","Set","flatMap","it","s","filter","Boolean","pairs","Promise","all","id","r","name","String","Object","fromEntries","categoryTabs","tabs","label","others","entries","concat","displayTitle","displayDesc","filtered","q","trim","title","desc","includes","sets","some","groupedBySet","groups","forEach","push","key","singleShelfItems","openBook","item","alert","mode","div","initial","opacity","animate","exit","transition","duration","style","backgroundImage","onSubmit","preventDefault","value","onChange","target","placeholder","tab","onClick","group","onOpen","titleOverride","descOverride","_c4","$RefreshReg$"],"sources":["C:/Users/user/Documents/GitHub/the-culture-read-cnx/src/pages/BooksPage.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nimport SiteHeader from \"../components/SiteHeader\";\nimport Footer from \"../components/Footer\";\nimport BackToTop from \"../components/BackToTop\";\nimport BookCard from \"../components/BookCard\";\n\nimport {\n  fetchItemsLite,\n  fetchJsonWithProxies,\n  withKeys,\n  api,\n} from \"../lib/omekaClient\";\nimport { titleOf, descOf } from \"../lib/textOf\";\nimport { pickLang } from \"../lib/i18nPick\";\n\n/* ---------- helpers: เลือกภาษาที่ “เข้มงวดกว่า” ---------- */\nconst variantsFor = (lang) => {\n  const L = (lang || \"\").toLowerCase();\n  const map = {\n    th: [\"th\", \"tha\", \"th-th\"],\n    en: [\"en\", \"eng\", \"en-us\", \"en-gb\"],\n    lo: [\"lo\", \"lao\", \"lo-la\"],\n    tl: [\"tl\", \"tgl\", \"fil\", \"fil-ph\"],\n    zh: [\"zh\", \"zho\", \"zh-cn\", \"zh-hans\", \"zh-tw\", \"zh-hant\"],\n  };\n  const generic = [L, `${L}-${L}`];\n  return map[L] || generic;\n};\n\nconst pickLangStrict = (field, lang) => {\n  if (!Array.isArray(field)) return \"\";\n  const prefs = variantsFor(lang);\n\n  // exact match\n  for (const p of prefs) {\n    const hit = field.find(\n      (x) => (x?.[\"@language\"] || \"\").toLowerCase() === p\n    );\n    if (hit?.[\"@value\"]) return hit[\"@value\"];\n  }\n\n  // startsWith match\n  const base = (lang || \"\").toLowerCase();\n  const loose = field.find((x) =>\n    (x?.[\"@language\"] || \"\").toLowerCase().startsWith(base)\n  );\n  if (loose?.[\"@value\"]) return loose[\"@value\"];\n\n  // fallback\n  return field[0]?.[\"@value\"] || \"\";\n};\n\n/* ---------- UI ---------- */\nconst ShelfBar = () => (\n  <div className=\"h-3 rounded-full bg-gradient-to-b from-[#e7d8c9] to-[#d9c1a9] shadow-inner\" />\n);\n\nconst ShelfTitle = ({ children }) => (\n  <h2 className=\"text-xl md:text-2xl font-extrabold tracking-wide text-[#5b4a3e] mb-3\">\n    {children}\n  </h2>\n);\n\nconst SkeletonLibrary = () => (\n  <div className=\"py-20 flex flex-col items-center gap-6 animate-pulse text-[#5b4a3e]\">\n    <div className=\"h-8 w-52 bg-[#e5d7ca]/50 rounded-full\" />\n    <div className=\"h-6 w-72 bg-[#e5d7ca]/40 rounded-full\" />\n    <div className=\"h-6 w-64 bg-[#e5d7ca]/30 rounded-full\" />\n    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-10 px-4 w-full max-w-6xl\">\n      {Array.from({ length: 8 }).map((_, i) => (\n        <div key={i} className=\"aspect-[3/4] bg-[#e5d7ca]/40 rounded-xl shadow-sm\" />\n      ))}\n    </div>\n  </div>\n);\n\nexport default function BooksPage() {\n  const { t, i18n } = useTranslation();\n\n  const [items, setItems] = useState([]);\n  const [err, setErr] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [query, setQuery] = useState(\"\");\n  const [activeSet, setActiveSet] = useState(\"all\");\n  const [setLabels, setSetLabels] = useState({});\n\n  const navigate = useNavigate();\n\n  /* ---------- โหลดรายการหนังสือ ---------- */\n  useEffect(() => {\n    (async () => {\n      try {\n        setLoading(true);\n        const data = await fetchItemsLite({\n          limit: 60,\n          sortBy: \"created\",\n          sortOrder: \"desc\",\n        });\n        setItems(Array.isArray(data) ? data : []);\n        setErr(\"\");\n      } catch (e) {\n        setErr(e?.message || t(\"errors.loadFailed\", \"โหลดข้อมูลไม่สำเร็จ\"));\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, [i18n.language]); // รีโหลดเมื่อเปลี่ยนภาษา\n\n  /* ---------- โหลด label ของคอลเลกชัน ---------- */\n  useEffect(() => {\n    (async () => {\n      try {\n        const ids = Array.from(\n          new Set(\n            (Array.isArray(items) ? items : []).flatMap((it) =>\n              (Array.isArray(it?.[\"o:item_set\"]) ? it[\"o:item_set\"] : [])\n                .map((s) => s?.[\"o:id\"])\n                .filter(Boolean)\n            )\n          )\n        );\n\n        if (!ids.length) {\n          setSetLabels({});\n          return;\n        }\n\n        const pairs = await Promise.all(\n          ids.map(async (id) => {\n            try {\n              const r = await fetchJsonWithProxies(withKeys(api(`/item_sets/${id}`)));\n              const name =\n                pickLangStrict(r?.[\"dcterms:title\"], i18n.language) ||\n                r?.[\"o:title\"] ||\n                `Collection #${id}`;\n              return [String(id), name];\n            } catch {\n              return [String(id), `Collection #${id}`];\n            }\n          })\n        );\n        setSetLabels(Object.fromEntries(pairs));\n      } catch {\n        // ignore\n      }\n    })();\n  }, [items, i18n.language]);\n\n  /* ---------- Tabs หมวดหมู่ ---------- */\n  const categoryTabs = useMemo(() => {\n    const tabs = [{ id: \"all\", label: t(\"filters.all\", \"ทั้งหมด\") }];\n    const others = Object.entries(setLabels).map(([id, label]) => ({ id, label }));\n    return tabs.concat(others);\n  }, [setLabels, t]);\n\n  /* ---------- สร้างชื่อ/คำโปรยตามภาษา ---------- */\n  const displayTitle = (it) =>\n    pickLangStrict(it?.[\"dcterms:title\"], i18n.language) || titleOf(it);\n\n  const displayDesc = (it) =>\n    pickLangStrict(it?.[\"dcterms:description\"], i18n.language) || descOf(it);\n\n  /* ---------- Filter ---------- */\n  const filtered = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    return items.filter((it) => {\n      const title = (displayTitle(it) || \"\").toLowerCase();\n      const desc = (displayDesc(it) || \"\").toLowerCase();\n\n      const hit = !q || title.includes(q) || desc.includes(q);\n      if (!hit) return false;\n\n      if (activeSet === \"all\") return true;\n      const sets = Array.isArray(it?.[\"o:item_set\"]) ? it[\"o:item_set\"] : [];\n      return sets.some((s) => String(s?.[\"o:id\"]) === String(activeSet));\n    });\n  }, [items, query, activeSet, i18n.language]);\n\n  /* ---------- จัดกลุ่ม ---------- */\n  const groupedBySet = useMemo(() => {\n    if (activeSet !== \"all\") return {};\n    const groups = {};\n    filtered.forEach((it) => {\n      const sets = Array.isArray(it?.[\"o:item_set\"]) ? it[\"o:item_set\"] : [];\n      if (sets.length === 0) (groups[\"_none\"] ||= []).push(it);\n      else {\n        sets.forEach((s) => {\n          const key = String(s?.[\"o:id\"] || \"_none\");\n          (groups[key] ||= []).push(it);\n        });\n      }\n    });\n    return groups;\n  }, [filtered, activeSet]);\n\n  const singleShelfItems = useMemo(() => {\n    if (activeSet === \"all\") return [];\n    return filtered;\n  }, [filtered, activeSet]);\n\n  const openBook = (item) => {\n    const id = item?.[\"o:id\"];\n    if (!id) return alert(t(\"errors.noId\", \"ไม่พบรหัสรายการ\"));\n    navigate(`/read/${id}`);\n  };\n\n  /* ---------- UI ---------- */\n  return (\n    <div className=\"min-h-screen bg-[#faf7f2] text-[#111518]\">\n      <SiteHeader />\n\n      <AnimatePresence mode=\"wait\">\n        {loading ? (\n          <motion.div\n            key=\"loading\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 0.3 }}\n          >\n            <SkeletonLibrary />\n          </motion.div>\n        ) : (\n          <motion.div\n            key={i18n.language} // บังคับรี-render เมื่อเปลี่ยนภาษา\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 0.25 }}\n          >\n            {/* HERO */}\n            <section className=\"relative h-[46vh] min-h-[360px] w-full overflow-hidden\">\n              <div\n                className=\"absolute inset-0 bg-center bg-cover\"\n                style={{ backgroundImage: \"url(/assets/banner.webp)\" }}\n              />\n              <div className=\"absolute inset-0 bg-[#fff1e6]/60\" />\n              <div className=\"relative z-10 h-full flex flex-col items-center justify-center text-center px-6\">\n                <h1 className=\"text-4xl md:text-6xl font-extrabold tracking-wide text-[#5b4a3e] drop-shadow\">\n                  {t(\"books.title\", \"Library\")}\n                </h1>\n                <p className=\"mt-3 max-w-2xl text-[#5b4a3e]/80\">\n                  {t(\"books.subtitle\", \"Explore and discover books from our collections\")}\n                </p>\n\n                <div className=\"mt-6 w-full max-w-xl\">\n                  <form\n                    onSubmit={(e) => e.preventDefault()}\n                    className=\"flex items-center rounded-2xl bg-white/90 ring-1 ring-black/10 shadow\"\n                  >\n                    <input\n                      value={query}\n                      onChange={(e) => setQuery(e.target.value)}\n                      placeholder={t(\"search.placeholder\", \"Search by title or keyword...\")}\n                      className=\"flex-1 px-4 py-3 rounded-2xl bg-transparent outline-none\"\n                    />\n                    <button className=\"px-5 py-3 font-semibold\">\n                      {t(\"actions.search\", \"Search\")}\n                    </button>\n                  </form>\n                </div>\n              </div>\n            </section>\n\n            {/* Layout */}\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-8 lg:px-12 mt-8 grid grid-cols-1 lg:grid-cols-4 gap-8\">\n              {/* Sidebar */}\n              <aside className=\"lg:col-span-1\">\n                <div className=\"sticky top-28 space-y-3 p-4 bg-white/70 backdrop-blur-md rounded-2xl shadow ring-1 ring-black/10\">\n                  <h3 className=\"font-bold text-[#5b4a3e] mb-2\">\n                    {t(\"filters.category\", \"Categories\")}\n                  </h3>\n                  <div className=\"flex flex-col gap-2\">\n                    {categoryTabs.map((tab) => (\n                      <button\n                        key={tab.id}\n                        onClick={() => setActiveSet(tab.id)}\n                        className={`text-left px-3 py-2 rounded-lg text-sm md:text-base font-medium transition ${\n                          activeSet === tab.id\n                            ? \"bg-[#5b4a3e] text-white shadow\"\n                            : \"hover:bg-black/5 text-[#5b4a3e]\"\n                        }`}\n                      >\n                        {tab.label}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              </aside>\n\n              {/* Content */}\n              <main className=\"lg:col-span-3\">\n                {err ? (\n                  <div className=\"py-16 text-center text-red-600\">{err}</div>\n                ) : filtered.length === 0 ? (\n                  <div className=\"py-16 text-center\">\n                    {t(\"status.noResults\", \"No books found\")}\n                  </div>\n                ) : activeSet === \"all\" ? (\n                  <div className=\"space-y-12\">\n                    {Object.entries(groupedBySet)\n                      .filter(([key]) => key !== \"_none\")\n                      .map(([key, group]) => (\n                        <section key={key}>\n                          <ShelfTitle>\n                            {setLabels[key] || `${t(\"books.collection\", \"Collection\")} #${key}`}\n                          </ShelfTitle>\n                          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-3\">\n                            {group.map((it) => (\n                              <BookCard\n                                key={it[\"o:id\"]}\n                                item={it}\n                                onOpen={openBook}\n                                titleOverride={displayTitle(it)}\n                                descOverride={displayDesc(it)}\n                              />\n                            ))}\n                          </div>\n                          <ShelfBar />\n                        </section>\n                      ))}\n                    {groupedBySet[\"_none\"] && (\n                      <section>\n                        <ShelfTitle>{t(\"books.uncategorized\", \"Uncategorized\")}</ShelfTitle>\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-3\">\n                          {groupedBySet[\"_none\"].map((it) => (\n                            <BookCard\n                              key={it[\"o:id\"]}\n                              item={it}\n                              onOpen={openBook}\n                              titleOverride={displayTitle(it)}\n                              descOverride={displayDesc(it)}\n                            />\n                          ))}\n                        </div>\n                        <ShelfBar />\n                      </section>\n                    )}\n                  </div>\n                ) : (\n                  <section className=\"space-y-4\">\n                    <ShelfTitle>\n                      {setLabels[String(activeSet)] || t(\"books.collection\", \"Collection\")}\n                    </ShelfTitle>\n                    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-3\">\n                      {singleShelfItems.map((it) => (\n                        <BookCard\n                          key={it[\"o:id\"]}\n                          item={it}\n                          onOpen={openBook}\n                          titleOverride={displayTitle(it)}\n                          descOverride={displayDesc(it)}\n                        />\n                      ))}\n                    </div>\n                    <ShelfBar />\n                  </section>\n                )}\n              </main>\n            </div>\n\n            <BackToTop />\n            <Footer />\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}