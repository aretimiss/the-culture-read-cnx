/*! For license information please see main.7ce1442b.js.LICENSE.txt */
(()=>{"use strict";var t={43:(t,e,n)=>{t.exports=n(202)},153:(t,e,n)=>{var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,i)&&!l.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===s[i]&&(s[i]=e[i]);return{$$typeof:r,type:t,key:c,ref:u,props:s,_owner:o.current}}e.Fragment=s,e.jsx=c,e.jsxs=c},202:(t,e)=>{var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||f}function y(){}function b(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function S(t,e,i){var r,s={},a=null,o=null;if(null!=e)for(r in void 0!==e.ref&&(o=e.ref),void 0!==e.key&&(a=""+e.key),e)_.call(e,r)&&!A.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:t,key:a,ref:o,props:s,_owner:k.current}}function E(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var C=/\/+/g;function M(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(t){return e[t]})}(""+t.key):e.toString(36)}function T(t,e,r,s,a){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var l=!1;if(null===t)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=t),t=""===s?"."+M(l,0):s,x(a)?(r="",null!=t&&(r=t.replace(C,"$&/")+"/"),T(a,e,r,"",function(t){return t})):null!=a&&(E(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+t)),e.push(a)),1;if(l=0,s=""===s?".":s+":",x(t))for(var c=0;c<t.length;c++){var u=s+M(o=t[c],c);l+=T(o,e,r,u,a)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=p&&t[p]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(o=t.next()).done;)l+=T(o=o.value,e,r,u=s+M(o,c++),a);else if("object"===o)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function R(t,e,n){if(null==t)return t;var i=[],r=0;return T(t,i,"","",function(t){return e.call(n,t,r++)}),i}function P(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)},function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var D={current:null},L={transition:null},N={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:L,ReactCurrentOwner:k};function I(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:R,forEach:function(t,e,n){R(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return R(t,function(){e++}),e},toArray:function(t){return R(t,function(t){return t})||[]},only:function(t){if(!E(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=s,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,e.act=I,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=g({},t.props),s=t.key,a=t.ref,o=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,o=k.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)_.call(e,c)&&!A.hasOwnProperty(c)&&(r[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:t.type,key:s,ref:a,props:r,_owner:o}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:t},t.Consumer=t},e.createElement=S,e.createFactory=function(t){var e=S.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:P}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=L.transition;L.transition={};try{t()}finally{L.transition=e}},e.unstable_act=I,e.useCallback=function(t,e){return D.current.useCallback(t,e)},e.useContext=function(t){return D.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return D.current.useDeferredValue(t)},e.useEffect=function(t,e){return D.current.useEffect(t,e)},e.useId=function(){return D.current.useId()},e.useImperativeHandle=function(t,e,n){return D.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return D.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return D.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return D.current.useMemo(t,e)},e.useReducer=function(t,e,n){return D.current.useReducer(t,e,n)},e.useRef=function(t){return D.current.useRef(t)},e.useState=function(t){return D.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return D.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return D.current.useTransition()},e.version="18.3.1"},234:(t,e)=>{function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<s(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=t[o],c=o+1,u=t[c];if(0>s(l,n))c<r&&0>s(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function s(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(t){for(var e=i(u);null!==e;){if(null===e.callback)r(u);else{if(!(e.startTime<=t))break;r(u),e.sortIndex=e.expirationTime,n(c,e)}e=i(u)}}function x(t){if(m=!1,w(t),!g)if(null!==i(c))g=!0,L(_);else{var e=i(u);null!==e&&N(x,e.startTime-t)}}function _(t,n){g=!1,m&&(m=!1,y(E),E=-1),f=!0;var s=p;try{for(w(n),d=i(c);null!==d&&(!(d.expirationTime>n)||t&&!T());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var o=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof o?d.callback=o:d===i(c)&&r(c),w(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&N(x,h.startTime-n),l=!1}return l}finally{d=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,A=!1,S=null,E=-1,C=5,M=-1;function T(){return!(e.unstable_now()-M<C)}function R(){if(null!==S){var t=e.unstable_now();M=t;var n=!0;try{n=S(!0,t)}finally{n?k():(A=!1,S=null)}}else A=!1}if("function"===typeof b)k=function(){b(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=R,k=function(){D.postMessage(null)}}else k=function(){v(R,0)};function L(t){S=t,A||(A=!0,k())}function N(t,n){E=v(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,L(_))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(t){switch(p){case 1:case 2:case 3:var e=3;break;default:e=p}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_scheduleCallback=function(t,r,s){var a=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return t={id:h++,callback:r,priorityLevel:t,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(t.sortIndex=s,n(u,t),null===i(c)&&t===i(u)&&(m?(y(E),E=-1):m=!0,N(x,s-a))):(t.sortIndex=o,n(c,t),g||f||(g=!0,L(_))),t},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(t){var e=p;return function(){var n=p;p=e;try{return t.apply(this,arguments)}finally{p=n}}}},391:(t,e,n)=>{var i=n(950);e.createRoot=i.createRoot,e.hydrateRoot=i.hydrateRoot},440:t=>{var e=function(){};t.exports=e},579:(t,e,n)=>{t.exports=n(153)},730:(t,e,n)=>{var i=n(43),r=n(853);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(o[t]=e,t=0;t<e.length;t++)a.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(t,e,n,i,r,s,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){m[t]=new g(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){m[t]=new g(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){m[t]=new g(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){m[t]=new g(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){m[t]=new g(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function b(t,e,n,i){var r=m.hasOwnProperty(e)?m[e]:null;(null!==r?0!==r.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!h.call(f,t)||!h.call(p,t)&&(d.test(t)?f[t]=!0:(p[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)});var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function I(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=N&&t[N]||t["@@iterator"])?t:null}var F,O=Object.assign;function B(t){if(void 0===F)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);F=e&&e[1]||""}return"\n"+F+t}var W=!1;function j(t,e){if(!t||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=o);break}}}finally{W=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?B(t):""}function U(t){switch(t.tag){case 5:return B(t.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return t=j(t.type,!1);case 11:return t=j(t.type.render,!1);case 1:return t=j(t.type,!0);default:return""}}function z(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case k:return"Fragment";case _:return"Portal";case S:return"Profiler";case A:return"StrictMode";case T:return"Suspense";case R:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case C:return(t.displayName||"Context")+".Consumer";case E:return(t._context.displayName||"Context")+".Provider";case M:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case P:return null!==(e=t.displayName||null)?e:z(t.type)||"Memo";case D:e=t._payload,t=t._init;try{return z(t(e))}catch(n){}}return null}function H(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(e);case 8:return e===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function V(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function G(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function q(t){t._valueTracker||(t._valueTracker=function(t){var e=G(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,s.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function X(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=G(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function K(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Y(t,e){var n=e.checked;return O({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Q(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=V(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function $(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function J(t,e){$(t,e);var n=V(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,V(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&K(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+V(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return O({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(et(n)){if(1<n.length)throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:V(n)}}function st(t,e){var n=V(e.value),i=V(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function ot(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?ot(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return ut(t,e)})}:ut);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||pt.hasOwnProperty(t)&&pt[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=gt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(pt).forEach(function(t){ft.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pt[e]=pt[t]})});var vt=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(t,e){if(e){if(vt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=null;function xt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var _t=null,kt=null,At=null;function St(t){if(t=br(t)){if("function"!==typeof _t)throw Error(s(280));var e=t.stateNode;e&&(e=xr(e),_t(t.stateNode,t.type,e))}}function Et(t){kt?At?At.push(t):At=[t]:kt=t}function Ct(){if(kt){var t=kt,e=At;if(At=kt=null,St(t),e)for(t=0;t<e.length;t++)St(e[t])}}function Mt(t,e){return t(e)}function Tt(){}var Rt=!1;function Pt(t,e,n){if(Rt)return t(e,n);Rt=!0;try{return Mt(t,e,n)}finally{Rt=!1,(null!==kt||null!==At)&&(Tt(),Ct())}}function Dt(t,e){var n=t.stateNode;if(null===n)return null;var i=xr(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}var Lt=!1;if(u)try{var Nt={};Object.defineProperty(Nt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Nt,Nt),window.removeEventListener("test",Nt,Nt)}catch(ut){Lt=!1}function It(t,e,n,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Ft=!1,Ot=null,Bt=!1,Wt=null,jt={onError:function(t){Ft=!0,Ot=t}};function Ut(t,e,n,i,r,s,a,o,l){Ft=!1,Ot=null,It.apply(jt,arguments)}function zt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ht(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Vt(t){if(zt(t)!==t)throw Error(s(188))}function Gt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=zt(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Vt(r),t;if(a===i)return Vt(r),e;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t))?qt(t):null}function qt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=qt(t);if(null!==e)return e;t=t.sibling}return null}var Xt=r.unstable_scheduleCallback,Kt=r.unstable_cancelCallback,Yt=r.unstable_shouldYield,Qt=r.unstable_requestPaint,$t=r.unstable_now,Jt=r.unstable_getCurrentPriorityLevel,Zt=r.unstable_ImmediatePriority,te=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,ne=r.unstable_LowPriority,ie=r.unstable_IdlePriority,re=null,se=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(oe(t)/le|0)|0},oe=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=he(o):0!==(s&=a)&&(i=he(s))}else 0!==(a=n&~r)?i=he(a):0!==s&&(i=he(s));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(s=e&-e)||16===r&&0!==(4194240&s)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-ae(e)),i|=t[n],e&=~r;return i}function pe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function fe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ve(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function ye(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ae(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var be=0;function we(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var xe,_e,ke,Ae,Se,Ee=!1,Ce=[],Me=null,Te=null,Re=null,Pe=new Map,De=new Map,Le=[],Ne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ie(t,e){switch(t){case"focusin":case"focusout":Me=null;break;case"dragenter":case"dragleave":Te=null;break;case"mouseover":case"mouseout":Re=null;break;case"pointerover":case"pointerout":Pe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":De.delete(e.pointerId)}}function Fe(t,e,n,i,r,s){return null===t||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==e&&(null!==(e=br(e))&&_e(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function Oe(t){var e=yr(t.target);if(null!==e){var n=zt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ht(n)))return t.blockedOn=e,void Se(t.priority,function(){ke(n)})}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Be(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ye(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=br(n))&&_e(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);wt=i,n.target.dispatchEvent(i),wt=null,e.shift()}return!0}function We(t,e,n){Be(t)&&n.delete(e)}function je(){Ee=!1,null!==Me&&Be(Me)&&(Me=null),null!==Te&&Be(Te)&&(Te=null),null!==Re&&Be(Re)&&(Re=null),Pe.forEach(We),De.forEach(We)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,Ee||(Ee=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,je)))}function ze(t){function e(e){return Ue(e,t)}if(0<Ce.length){Ue(Ce[0],t);for(var n=1;n<Ce.length;n++){var i=Ce[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==Me&&Ue(Me,t),null!==Te&&Ue(Te,t),null!==Re&&Ue(Re,t),Pe.forEach(e),De.forEach(e),n=0;n<Le.length;n++)(i=Le[n]).blockedOn===t&&(i.blockedOn=null);for(;0<Le.length&&null===(n=Le[0]).blockedOn;)Oe(n),null===n.blockedOn&&Le.shift()}var He=w.ReactCurrentBatchConfig,Ve=!0;function Ge(t,e,n,i){var r=be,s=He.transition;He.transition=null;try{be=1,Xe(t,e,n,i)}finally{be=r,He.transition=s}}function qe(t,e,n,i){var r=be,s=He.transition;He.transition=null;try{be=4,Xe(t,e,n,i)}finally{be=r,He.transition=s}}function Xe(t,e,n,i){if(Ve){var r=Ye(t,e,n,i);if(null===r)Vi(t,e,i,Ke,n),Ie(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return Me=Fe(Me,t,e,n,i,r),!0;case"dragenter":return Te=Fe(Te,t,e,n,i,r),!0;case"mouseover":return Re=Fe(Re,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Pe.set(s,Fe(Pe.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,De.set(s,Fe(De.get(s)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(Ie(t,i),4&e&&-1<Ne.indexOf(t)){for(;null!==r;){var s=br(r);if(null!==s&&xe(s),null===(s=Ye(t,e,n,i))&&Vi(t,e,i,Ke,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Vi(t,e,i,null,n)}}var Ke=null;function Ye(t,e,n,i){if(Ke=null,null!==(t=yr(t=xt(i))))if(null===(e=zt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ht(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ke=t,null}function Qe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Zt:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var $e=null,Je=null,Ze=null;function tn(){if(Ze)return Ze;var t,e,n=Je,i=n.length,r="value"in $e?$e.value:$e.textContent,s=r.length;for(t=0;t<i&&n[t]===r[t];t++);var a=i-t;for(e=1;e<=a&&n[i-e]===r[s-e];e++);return Ze=r.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function sn(t){function e(e,n,i,r,s){for(var a in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=O({},cn,{view:0,detail:0}),dn=sn(hn),pn=O({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(an=t.screenX-ln.screenX,on=t.screenY-ln.screenY):on=an=0,ln=t),an)},movementY:function(t){return"movementY"in t?t.movementY:on}}),fn=sn(pn),gn=sn(O({},pn,{dataTransfer:0})),mn=sn(O({},hn,{relatedTarget:0})),vn=sn(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=O({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=sn(yn),wn=sn(O({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=kn[t])&&!!e[t]}function Sn(){return An}var En=O({},hn,{key:function(t){if(t.key){var e=xn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?_n[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Cn=sn(En),Mn=sn(O({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(O({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Rn=sn(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=O({},pn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Pn),Ln=[9,13,27,32],Nn=u&&"CompositionEvent"in window,In=null;u&&"documentMode"in document&&(In=document.documentMode);var Fn=u&&"TextEvent"in window&&!In,On=u&&(!Nn||In&&8<In&&11>=In),Bn=String.fromCharCode(32),Wn=!1;function jn(t,e){switch(t){case"keyup":return-1!==Ln.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var zn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Hn[t.type]:"textarea"===e}function Gn(t,e,n,i){Et(i),0<(e=qi(e,"onChange")).length&&(n=new un("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var qn=null,Xn=null;function Kn(t){Bi(t,0)}function Yn(t){if(X(wr(t)))return t}function Qn(t,e){if("change"===t)return e}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),Zn="function"===typeof ti.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function ei(){qn&&(qn.detachEvent("onpropertychange",ni),Xn=qn=null)}function ni(t){if("value"===t.propertyName&&Yn(Xn)){var e=[];Gn(e,Xn,t,xt(t)),Pt(Kn,e)}}function ii(t,e,n){"focusin"===t?(ei(),Xn=n,(qn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function ri(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yn(Xn)}function si(t,e){if("click"===t)return Yn(e)}function ai(t,e){if("input"===t||"change"===t)return Yn(e)}var oi="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function li(t,e){if(oi(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(e,r)||!oi(t[r],e[r]))return!1}return!0}function ci(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ui(t,e){var n,i=ci(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ci(i)}}function hi(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hi(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function di(){for(var t=window,e=K();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=K((t=e.contentWindow).document)}return e}function pi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function fi(t){var e=di(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var a=ui(n,i);r&&a&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,vi=null,yi=null,bi=!1;function wi(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==K(i)||("selectionStart"in(i=mi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=qi(vi,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mi)))}function xi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _i={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionend:xi("Transition","TransitionEnd")},ki={},Ai={};function Si(t){if(ki[t])return ki[t];if(!_i[t])return t;var e,n=_i[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ai)return ki[t]=n[e];return t}u&&(Ai=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);var Ei=Si("animationend"),Ci=Si("animationiteration"),Mi=Si("animationstart"),Ti=Si("transitionend"),Ri=new Map,Pi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(t,e){Ri.set(t,e),l(e,[t])}for(var Li=0;Li<Pi.length;Li++){var Ni=Pi[Li];Di(Ni.toLowerCase(),"on"+(Ni[0].toUpperCase()+Ni.slice(1)))}Di(Ei,"onAnimationEnd"),Di(Ci,"onAnimationIteration"),Di(Mi,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(Ti,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ii));function Oi(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,a,o,l,c){if(Ut.apply(this,arguments),Ft){if(!Ft)throw Error(s(198));var u=Ot;Ft=!1,Ot=null,Bt||(Bt=!0,Wt=u)}}(i,e,void 0,t),t.currentTarget=null}function Bi(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break t;Oi(r,o,c),s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break t;Oi(r,o,c),s=l}}}if(Bt)throw t=Wt,Bt=!1,Wt=null,t}function Wi(t,e){var n=e[gr];void 0===n&&(n=e[gr]=new Set);var i=t+"__bubble";n.has(i)||(Hi(e,t,2,!1),n.add(i))}function ji(t,e,n){var i=0;e&&(i|=4),Hi(n,t,i,e)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function zi(t){if(!t[Ui]){t[Ui]=!0,a.forEach(function(e){"selectionchange"!==e&&(Fi.has(e)||ji(e,!1,t),ji(e,!0,t))});var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Ui]||(e[Ui]=!0,ji("selectionchange",!1,e))}}function Hi(t,e,n,i){switch(Qe(e)){case 1:var r=Ge;break;case 4:r=qe;break;default:r=Xe}n=r.bind(null,e,n,t),r=void 0,!Lt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Vi(t,e,n,i,r){var s=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=yr(o)))return;if(5===(l=a.tag)||6===l){i=s=a;continue t}o=o.parentNode}}i=i.return}Pt(function(){var i=s,r=xt(n),a=[];t:{var o=Ri.get(t);if(void 0!==o){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Ei:case Ci:case Mi:l=vn;break;case Ti:l=Rn;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=i;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==d&&(null!=(g=Dt(f,d))&&u.push(Gi(f,g,p)))),h)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(o="mouseover"===t||"pointerover"===t)||n===wt||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[fr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(h=zt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=fn,g="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(u=Mn,g="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?o:wr(l),p=null==c?o:wr(c),(o=new u(g,f+"leave",l,n,r)).target=h,o.relatedTarget=p,g=null,yr(r)===i&&((u=new u(d,f+"enter",c,n,r)).target=p,u.relatedTarget=h,g=u),h=g,l&&c)t:{for(d=c,f=0,p=u=l;p;p=Xi(p))f++;for(p=0,g=d;g;g=Xi(g))p++;for(;0<f-p;)u=Xi(u),f--;for(;0<p-f;)d=Xi(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break t;u=Xi(u),d=Xi(d)}u=null}else u=null;null!==l&&Ki(a,o,l,u,!1),null!==c&&null!==h&&Ki(a,h,c,u,!0)}if("select"===(l=(o=i?wr(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Qn;else if(Vn(o))if($n)m=ai;else{m=ri;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=si);switch(m&&(m=m(t,i))?Gn(a,m,n,r):(v&&v(t,o,i),"focusout"===t&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&tt(o,"number",o.value)),v=i?wr(i):window,t){case"focusin":(Vn(v)||"true"===v.contentEditable)&&(mi=v,vi=i,yi=null);break;case"focusout":yi=vi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,wi(a,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":wi(a,n,r)}var y;if(Nn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else zn?jn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(On&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(y=tn()):(Je="value"in($e=r)?$e.value:$e.textContent,zn=!0)),0<(v=qi(i,b)).length&&(b=new wn(b,t,null,n,r),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Fn?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(Wn=!0,Bn);case"textInput":return(t=e.data)===Bn&&Wn?null:t;default:return null}}(t,n):function(t,e){if(zn)return"compositionend"===t||!Nn&&jn(t,e)?(t=tn(),Ze=Je=$e=null,zn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return On&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=y))}Bi(a,e)})}function Gi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qi(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Dt(t,n))&&i.unshift(Gi(t,s,r)),null!=(s=Dt(t,e))&&i.push(Gi(t,s,r))),t=t.return}return i}function Xi(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Ki(t,e,n,i,r){for(var s=e._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Dt(n,s))&&a.unshift(Gi(n,l,o)):r||null!=(l=Dt(n,s))&&a.push(Gi(n,l,o))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var Yi=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function $i(t){return("string"===typeof t?t:""+t).replace(Yi,"\n").replace(Qi,"")}function Ji(t,e,n){if(e=$i(e),$i(t)!==e&&n)throw Error(s(425))}function Zi(){}var tr=null,er=null;function nr(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(t){return sr.resolve(null).then(t).catch(or)}:ir;function or(t){setTimeout(function(){throw t})}function lr(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return t.removeChild(r),void ze(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);ze(e)}function cr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ur(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,pr="__reactProps$"+hr,fr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,vr="__reactHandles$"+hr;function yr(t){var e=t[dr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fr]||n[dr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ur(t);null!==t;){if(n=t[dr])return n;t=ur(t)}return e}n=(t=n).parentNode}return null}function br(t){return!(t=t[dr]||t[fr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function wr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function xr(t){return t[pr]||null}var _r=[],kr=-1;function Ar(t){return{current:t}}function Sr(t){0>kr||(t.current=_r[kr],_r[kr]=null,kr--)}function Er(t,e){kr++,_r[kr]=t.current,t.current=e}var Cr={},Mr=Ar(Cr),Tr=Ar(!1),Rr=Cr;function Pr(t,e){var n=t.type.contextTypes;if(!n)return Cr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Lr(){Sr(Tr),Sr(Mr)}function Nr(t,e,n){if(Mr.current!==Cr)throw Error(s(168));Er(Mr,e),Er(Tr,n)}function Ir(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(s(108,H(t)||"Unknown",r));return O({},n,i)}function Fr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,Rr=Mr.current,Er(Mr,t),Er(Tr,Tr.current),!0}function Or(t,e,n){var i=t.stateNode;if(!i)throw Error(s(169));n?(t=Ir(t,e,Rr),i.__reactInternalMemoizedMergedChildContext=t,Sr(Tr),Sr(Mr),Er(Mr,t)):Sr(Tr),Er(Tr,n)}var Br=null,Wr=!1,jr=!1;function Ur(t){null===Br?Br=[t]:Br.push(t)}function zr(){if(!jr&&null!==Br){jr=!0;var t=0,e=be;try{var n=Br;for(be=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}Br=null,Wr=!1}catch(r){throw null!==Br&&(Br=Br.slice(t+1)),Xt(Zt,zr),r}finally{be=e,jr=!1}}return null}var Hr=[],Vr=0,Gr=null,qr=0,Xr=[],Kr=0,Yr=null,Qr=1,$r="";function Jr(t,e){Hr[Vr++]=qr,Hr[Vr++]=Gr,Gr=t,qr=e}function Zr(t,e,n){Xr[Kr++]=Qr,Xr[Kr++]=$r,Xr[Kr++]=Yr,Yr=t;var i=Qr;t=$r;var r=32-ae(i)-1;i&=~(1<<r),n+=1;var s=32-ae(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Qr=1<<32-ae(e)+r|n<<r|i,$r=s+t}else Qr=1<<s|n<<r|i,$r=t}function ts(t){null!==t.return&&(Jr(t,1),Zr(t,1,0))}function es(t){for(;t===Gr;)Gr=Hr[--Vr],Hr[Vr]=null,qr=Hr[--Vr],Hr[Vr]=null;for(;t===Yr;)Yr=Xr[--Kr],Xr[Kr]=null,$r=Xr[--Kr],Xr[Kr]=null,Qr=Xr[--Kr],Xr[Kr]=null}var ns=null,is=null,rs=!1,ss=null;function as(t,e){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function os(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,ns=t,is=cr(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,ns=t,is=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Yr?{id:Qr,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,ns=t,is=null,!0);default:return!1}}function ls(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function cs(t){if(rs){var e=is;if(e){var n=e;if(!os(t,e)){if(ls(t))throw Error(s(418));e=cr(n.nextSibling);var i=ns;e&&os(t,e)?as(i,n):(t.flags=-4097&t.flags|2,rs=!1,ns=t)}}else{if(ls(t))throw Error(s(418));t.flags=-4097&t.flags|2,rs=!1,ns=t}}}function us(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ns=t}function hs(t){if(t!==ns)return!1;if(!rs)return us(t),rs=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!nr(t.type,t.memoizedProps)),e&&(e=is)){if(ls(t))throw ds(),Error(s(418));for(;e;)as(t,e),e=cr(e.nextSibling)}if(us(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){is=cr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}is=null}}else is=ns?cr(t.stateNode.nextSibling):null;return!0}function ds(){for(var t=is;t;)t=cr(t.nextSibling)}function ps(){is=ns=null,rs=!1}function fs(t){null===ss?ss=[t]:ss.push(t)}var gs=w.ReactCurrentBatchConfig;function ms(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,t));var r=i,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=r.refs;null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function vs(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ys(t){return(0,t._init)(t._payload)}function bs(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Lc(t,e)).index=0,t.sibling=null,t}function a(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function o(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Oc(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function c(t,e,n,i){var s=n.type;return s===k?h(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&ys(s)===e.type)?((i=r(e,n.props)).ref=ms(t,e,n),i.return=t,i):((i=Nc(n.type,n.key,n.props,null,t.mode,i)).ref=ms(t,e,n),i.return=t,i)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Bc(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,s){return null===e||7!==e.tag?((e=Ic(n,t.mode,i,s)).return=t,e):((e=r(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Oc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case x:return(n=Nc(e.type,e.key,e.props,null,t.mode,n)).ref=ms(t,null,e),n.return=t,n;case _:return(e=Bc(e,t.mode,n)).return=t,e;case D:return d(t,(0,e._init)(e._payload),n)}if(et(e)||I(e))return(e=Ic(e,t.mode,n,null)).return=t,e;vs(t,e)}return null}function p(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===r?c(t,e,n,i):null;case _:return n.key===r?u(t,e,n,i):null;case D:return p(t,e,(r=n._init)(n._payload),i)}if(et(n)||I(n))return null!==r?null:h(t,e,n,i,null);vs(t,n)}return null}function f(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case x:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case _:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r);case D:return f(t,e,n,(0,i._init)(i._payload),r)}if(et(i)||I(i))return h(e,t=t.get(n)||null,i,r,null);vs(e,i)}return null}function g(r,s,o,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<o.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=p(r,h,o[g],l);if(null===v){null===h&&(h=m);break}t&&h&&null===v.alternate&&e(r,h),s=a(v,s,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===o.length)return n(r,h),rs&&Jr(r,g),c;if(null===h){for(;g<o.length;g++)null!==(h=d(r,o[g],l))&&(s=a(h,s,g),null===u?c=h:u.sibling=h,u=h);return rs&&Jr(r,g),c}for(h=i(r,h);g<o.length;g++)null!==(m=f(h,r,g,o[g],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=a(m,s,g),null===u?c=m:u.sibling=m,u=m);return t&&h.forEach(function(t){return e(r,t)}),rs&&Jr(r,g),c}function m(r,o,l,c){var u=I(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=o,m=o=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=p(r,g,y.value,c);if(null===b){null===g&&(g=v);break}t&&g&&null===b.alternate&&e(r,g),o=a(b,o,m),null===h?u=b:h.sibling=b,h=b,g=v}if(y.done)return n(r,g),rs&&Jr(r,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(r,y.value,c))&&(o=a(y,o,m),null===h?u=y:h.sibling=y,h=y);return rs&&Jr(r,m),u}for(g=i(r,g);!y.done;m++,y=l.next())null!==(y=f(g,r,m,y.value,c))&&(t&&null!==y.alternate&&g.delete(null===y.key?m:y.key),o=a(y,o,m),null===h?u=y:h.sibling=y,h=y);return t&&g.forEach(function(t){return e(r,t)}),rs&&Jr(r,m),u}return function t(i,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:t:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(i,u.sibling),(s=r(u,a.props.children)).return=i,i=s;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&ys(c)===u.type){n(i,u.sibling),(s=r(u,a.props)).ref=ms(i,u,a),s.return=i,i=s;break t}n(i,u);break}e(i,u),u=u.sibling}a.type===k?((s=Ic(a.props.children,i.mode,l,a.key)).return=i,i=s):((l=Nc(a.type,a.key,a.props,null,i.mode,l)).ref=ms(i,s,a),l.return=i,i=l)}return o(i);case _:t:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break t}n(i,s);break}e(i,s),s=s.sibling}(s=Bc(a,i.mode,l)).return=i,i=s}return o(i);case D:return t(i,s,(u=a._init)(a._payload),l)}if(et(a))return g(i,s,a,l);if(I(a))return m(i,s,a,l);vs(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=Oc(a,i.mode,l)).return=i,i=s),o(i)):n(i,s)}}var ws=bs(!0),xs=bs(!1),_s=Ar(null),ks=null,As=null,Ss=null;function Es(){Ss=As=ks=null}function Cs(t){var e=_s.current;Sr(_s),t._currentValue=e}function Ms(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ts(t,e){ks=t,Ss=As=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(bo=!0),t.firstContext=null)}function Rs(t){var e=t._currentValue;if(Ss!==t)if(t={context:t,memoizedValue:e,next:null},null===As){if(null===ks)throw Error(s(308));As=t,ks.dependencies={lanes:0,firstContext:t}}else As=As.next=t;return e}var Ps=null;function Ds(t){null===Ps?Ps=[t]:Ps.push(t)}function Ls(t,e,n,i){var r=e.interleaved;return null===r?(n.next=n,Ds(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ns(t,i)}function Ns(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Is=!1;function Fs(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ws(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Ml)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ns(t,n)}return null===(r=i.interleaved)?(e.next=e,Ds(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ns(t,n)}function js(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ye(t,n)}}function Us(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=e:s=s.next=e}else r=s=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zs(t,e,n,i){var r=t.updateQueue;Is=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=t.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(a=0,u=c=l=null,o=s;;){var d=o.lane,p=o.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var f=t,g=o;switch(d=e,p=n,g.tag){case 1:if("function"===typeof(f=g.payload)){h=f.call(p,h,d);break t}h=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=g.payload)?f.call(p,h,d):f)||void 0===d)break t;h=O({},h,d);break t;case 2:Is=!0}}null!==o.callback&&0!==o.lane&&(t.flags|=64,null===(d=r.effects)?r.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,a|=d;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(d=o).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(e=r.shared.interleaved)){r=e;do{a|=r.lane,r=r.next}while(r!==e)}else null===s&&(r.shared.lanes=0);Fl|=a,t.lanes=a,t.memoizedState=h}}function Hs(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Vs={},Gs=Ar(Vs),qs=Ar(Vs),Xs=Ar(Vs);function Ks(t){if(t===Vs)throw Error(s(174));return t}function Ys(t,e){switch(Er(Xs,e),Er(qs,t),Er(Gs,Vs),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Sr(Gs),Er(Gs,e)}function Qs(){Sr(Gs),Sr(qs),Sr(Xs)}function $s(t){Ks(Xs.current);var e=Ks(Gs.current),n=lt(e,t.type);e!==n&&(Er(qs,t),Er(Gs,n))}function Js(t){qs.current===t&&(Sr(Gs),Sr(qs))}var Zs=Ar(0);function ta(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ea=[];function na(){for(var t=0;t<ea.length;t++)ea[t]._workInProgressVersionPrimary=null;ea.length=0}var ia=w.ReactCurrentDispatcher,ra=w.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,ha=0,da=0;function pa(){throw Error(s(321))}function fa(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!oi(t[n],e[n]))return!1;return!0}function ga(t,e,n,i,r,a){if(sa=a,aa=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ia.current=null===t||null===t.memoizedState?Ja:Za,t=n(i,r),ua){a=0;do{if(ua=!1,ha=0,25<=a)throw Error(s(301));a+=1,la=oa=null,e.updateQueue=null,ia.current=to,t=n(i,r)}while(ua)}if(ia.current=$a,e=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,e)throw Error(s(300));return t}function ma(){var t=0!==ha;return ha=0,t}function va(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=t:la=la.next=t,la}function ya(){if(null===oa){var t=aa.alternate;t=null!==t?t.memoizedState:null}else t=oa.next;var e=null===la?aa.memoizedState:la.next;if(null!==e)la=e,oa=t;else{if(null===t)throw Error(s(310));t={memoizedState:(oa=t).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=t:la=la.next=t}return la}function ba(t,e){return"function"===typeof e?e(t):e}function wa(t){var e=ya(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=oa,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((sa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=i):c=c.next=d,aa.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,oi(i,e.memoizedState)||(bo=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=c,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{a=r.lane,aa.lanes|=a,Fl|=a,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xa(t){var e=ya(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,a=e.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=t(a,o.action),o=o.next}while(o!==r);oi(a,e.memoizedState)||(bo=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function _a(){}function ka(t,e){var n=aa,i=ya(),r=e(),a=!oi(i.memoizedState,r);if(a&&(i.memoizedState=r,bo=!0),i=i.queue,Ia(Ea.bind(null,n,i,t),[t]),i.getSnapshot!==e||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ra(9,Sa.bind(null,n,i,r,e),void 0,null),null===Tl)throw Error(s(349));0!==(30&sa)||Aa(n,e,r)}return r}function Aa(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=aa.updateQueue)?(e={lastEffect:null,stores:null},aa.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Sa(t,e,n,i){e.value=n,e.getSnapshot=i,Ca(e)&&Ma(t)}function Ea(t,e,n){return n(function(){Ca(e)&&Ma(t)})}function Ca(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!oi(t,n)}catch(i){return!0}}function Ma(t){var e=Ns(t,1);null!==e&&nc(e,t,1,-1)}function Ta(t){var e=va();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:t},e.queue=t,t=t.dispatch=Xa.bind(null,aa,t),[e.memoizedState,t]}function Ra(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=aa.updateQueue)?(e={lastEffect:null,stores:null},aa.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Pa(){return ya().memoizedState}function Da(t,e,n,i){var r=va();aa.flags|=t,r.memoizedState=Ra(1|e,n,void 0,void 0===i?null:i)}function La(t,e,n,i){var r=ya();i=void 0===i?null:i;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==i&&fa(i,a.deps))return void(r.memoizedState=Ra(e,n,s,i))}aa.flags|=t,r.memoizedState=Ra(1|e,n,s,i)}function Na(t,e){return Da(8390656,8,t,e)}function Ia(t,e){return La(2048,8,t,e)}function Fa(t,e){return La(4,2,t,e)}function Oa(t,e){return La(4,4,t,e)}function Ba(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Wa(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,La(4,4,Ba.bind(null,e,t),n)}function ja(){}function Ua(t,e){var n=ya();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&fa(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function za(t,e){var n=ya();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&fa(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Ha(t,e,n){return 0===(21&sa)?(t.baseState&&(t.baseState=!1,bo=!0),t.memoizedState=n):(oi(n,e)||(n=ge(),aa.lanes|=n,Fl|=n,t.baseState=!0),e)}function Va(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var i=ra.transition;ra.transition={};try{t(!1),e()}finally{be=n,ra.transition=i}}function Ga(){return ya().memoizedState}function qa(t,e,n){var i=ec(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ka(t))Ya(e,n);else if(null!==(n=Ls(t,e,n,i))){nc(n,t,i,tc()),Qa(n,e,i)}}function Xa(t,e,n){var i=ec(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ka(t))Ya(e,r);else{var s=t.alternate;if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,oi(o,a)){var l=e.interleaved;return null===l?(r.next=r,Ds(e)):(r.next=l.next,l.next=r),void(e.interleaved=r)}}catch(c){}null!==(n=Ls(t,e,r,i))&&(nc(n,t,i,r=tc()),Qa(n,e,i))}}function Ka(t){var e=t.alternate;return t===aa||null!==e&&e===aa}function Ya(t,e){ua=ca=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qa(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ye(t,n)}}var $a={readContext:Rs,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Ja={readContext:Rs,useCallback:function(t,e){return va().memoizedState=[t,void 0===e?null:e],t},useContext:Rs,useEffect:Na,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Da(4194308,4,Ba.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Da(4194308,4,t,e)},useInsertionEffect:function(t,e){return Da(4,2,t,e)},useMemo:function(t,e){var n=va();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=va();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=qa.bind(null,aa,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},va().memoizedState=t},useState:Ta,useDebugValue:ja,useDeferredValue:function(t){return va().memoizedState=t},useTransition:function(){var t=Ta(!1),e=t[0];return t=Va.bind(null,t[1]),va().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=aa,r=va();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=e(),null===Tl)throw Error(s(349));0!==(30&sa)||Aa(i,e,n)}r.memoizedState=n;var a={value:n,getSnapshot:e};return r.queue=a,Na(Ea.bind(null,i,a,t),[t]),i.flags|=2048,Ra(9,Sa.bind(null,i,a,n,e),void 0,null),n},useId:function(){var t=va(),e=Tl.identifierPrefix;if(rs){var n=$r;e=":"+e+"R"+(n=(Qr&~(1<<32-ae(Qr)-1)).toString(32)+n),0<(n=ha++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=da++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Za={readContext:Rs,useCallback:Ua,useContext:Rs,useEffect:Ia,useImperativeHandle:Wa,useInsertionEffect:Fa,useLayoutEffect:Oa,useMemo:za,useReducer:wa,useRef:Pa,useState:function(){return wa(ba)},useDebugValue:ja,useDeferredValue:function(t){return Ha(ya(),oa.memoizedState,t)},useTransition:function(){return[wa(ba)[0],ya().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:Ga,unstable_isNewReconciler:!1},to={readContext:Rs,useCallback:Ua,useContext:Rs,useEffect:Ia,useImperativeHandle:Wa,useInsertionEffect:Fa,useLayoutEffect:Oa,useMemo:za,useReducer:xa,useRef:Pa,useState:function(){return xa(ba)},useDebugValue:ja,useDeferredValue:function(t){var e=ya();return null===oa?e.memoizedState=t:Ha(e,oa.memoizedState,t)},useTransition:function(){return[xa(ba)[0],ya().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:Ga,unstable_isNewReconciler:!1};function eo(t,e){if(t&&t.defaultProps){for(var n in e=O({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function no(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:O({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var io={isMounted:function(t){return!!(t=t._reactInternals)&&zt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=tc(),r=ec(t),s=Bs(i,r);s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Ws(t,s,r))&&(nc(e,t,r,i),js(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=tc(),r=ec(t),s=Bs(i,r);s.tag=1,s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Ws(t,s,r))&&(nc(e,t,r,i),js(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tc(),i=ec(t),r=Bs(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),null!==(e=Ws(t,r,i))&&(nc(e,t,i,n),js(e,t,i))}};function ro(t,e,n,i,r,s,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,s,a):!e.prototype||!e.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function so(t,e,n){var i=!1,r=Cr,s=e.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(r=Dr(e)?Rr:Mr.current,s=(i=null!==(i=e.contextTypes)&&void 0!==i)?Pr(t,r):Cr),e=new e(n,s),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=io,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function ao(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&io.enqueueReplaceState(e,e.state,null)}function oo(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Fs(t);var s=e.contextType;"object"===typeof s&&null!==s?r.context=Rs(s):(s=Dr(e)?Rr:Mr.current,r.context=Pr(t,s)),r.state=t.memoizedState,"function"===typeof(s=e.getDerivedStateFromProps)&&(no(t,e,s,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&io.enqueueReplaceState(r,r.state,null),zs(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}function lo(t,e){try{var n="",i=e;do{n+=U(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:t,source:e,stack:r,digest:null}}function co(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function uo(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(t,e,n){(n=Bs(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Vl||(Vl=!0,Gl=i),uo(0,e)},n}function fo(t,e,n){(n=Bs(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){uo(0,e)}}var s=t.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,e),"function"!==typeof i&&(null===ql?ql=new Set([this]):ql.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function go(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new ho;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Sc.bind(null,t,e,n),e.then(t,t))}function mo(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function vo(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Bs(-1,1)).tag=2,Ws(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var yo=w.ReactCurrentOwner,bo=!1;function wo(t,e,n,i){e.child=null===t?xs(e,null,n,i):ws(e,t.child,n,i)}function xo(t,e,n,i,r){n=n.render;var s=e.ref;return Ts(e,r),i=ga(t,e,n,i,s,r),n=ma(),null===t||bo?(rs&&n&&ts(e),e.flags|=1,wo(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Vo(t,e,r))}function _o(t,e,n,i,r){if(null===t){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Nc(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,ko(t,e,s,i,r))}if(s=t.child,0===(t.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&t.ref===e.ref)return Vo(t,e,r)}return e.flags|=1,(t=Lc(s,i)).ref=e.ref,t.return=e,e.child=t}function ko(t,e,n,i,r){if(null!==t){var s=t.memoizedProps;if(li(s,i)&&t.ref===e.ref){if(bo=!1,e.pendingProps=i=s,0===(t.lanes&r))return e.lanes=t.lanes,Vo(t,e,r);0!==(131072&t.flags)&&(bo=!0)}}return Eo(t,e,n,i,r)}function Ao(t,e,n){var i=e.pendingProps,r=i.children,s=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(Ll,Dl),Dl|=n;else{if(0===(1073741824&n))return t=null!==s?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Er(Ll,Dl),Dl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Er(Ll,Dl),Dl|=i}else null!==s?(i=s.baseLanes|n,e.memoizedState=null):i=n,Er(Ll,Dl),Dl|=i;return wo(t,e,r,n),e.child}function So(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Eo(t,e,n,i,r){var s=Dr(n)?Rr:Mr.current;return s=Pr(e,s),Ts(e,r),n=ga(t,e,n,i,s,r),i=ma(),null===t||bo?(rs&&i&&ts(e),e.flags|=1,wo(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Vo(t,e,r))}function Co(t,e,n,i,r){if(Dr(n)){var s=!0;Fr(e)}else s=!1;if(Ts(e,r),null===e.stateNode)Ho(t,e),so(e,n,i),oo(e,n,i,r),i=!0;else if(null===t){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rs(c):c=Pr(e,c=Dr(n)?Rr:Mr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&ao(e,a,i,c),Is=!1;var d=e.memoizedState;a.state=d,zs(e,i,a,r),l=e.memoizedState,o!==i||d!==l||Tr.current||Is?("function"===typeof u&&(no(e,n,u,i),l=e.memoizedState),(o=Is||ro(e,n,o,i,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,Os(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:eo(e.type,o),a.props=c,h=e.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=Pr(e,l=Dr(n)?Rr:Mr.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&ao(e,a,i,l),Is=!1,d=e.memoizedState,a.state=d,zs(e,i,a,r);var f=e.memoizedState;o!==h||d!==f||Tr.current||Is?("function"===typeof p&&(no(e,n,p,i),f=e.memoizedState),(c=Is||ro(e,n,c,i,d,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=f),a.props=i,a.state=f,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Mo(t,e,n,i,s,r)}function Mo(t,e,n,i,r,s){So(t,e);var a=0!==(128&e.flags);if(!i&&!a)return r&&Or(e,n,!1),Vo(t,e,s);i=e.stateNode,yo.current=e;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&a?(e.child=ws(e,t.child,null,s),e.child=ws(e,null,o,s)):wo(t,e,o,s),e.memoizedState=i.state,r&&Or(e,n,!0),e.child}function To(t){var e=t.stateNode;e.pendingContext?Nr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Nr(0,e.context,!1),Ys(t,e.containerInfo)}function Ro(t,e,n,i,r){return ps(),fs(r),e.flags|=256,wo(t,e,n,i),e.child}var Po,Do,Lo,No,Io={dehydrated:null,treeContext:null,retryLane:0};function Fo(t){return{baseLanes:t,cachePool:null,transitions:null}}function Oo(t,e,n){var i,r=e.pendingProps,a=Zs.current,o=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&a)),i?(o=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Er(Zs,1&a),null===t)return cs(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=r.children,t=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Fc(l,r,0,null),t=Ic(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Fo(n),e.memoizedState=Io,t):Bo(e,l));if(null!==(a=t.memoizedState)&&null!==(i=a.dehydrated))return function(t,e,n,i,r,a,o){if(n)return 256&e.flags?(e.flags&=-257,Wo(t,e,o,i=co(Error(s(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=i.fallback,r=e.mode,i=Fc({mode:"visible",children:i.children},r,0,null),(a=Ic(a,r,o,null)).flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,0!==(1&e.mode)&&ws(e,t.child,null,o),e.child.memoizedState=Fo(o),e.memoizedState=Io,a);if(0===(1&e.mode))return Wo(t,e,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Wo(t,e,o,i=co(a=Error(s(419)),i,void 0))}if(l=0!==(o&t.childLanes),bo||l){if(null!==(i=Tl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Ns(t,r),nc(i,t,r,-1))}return gc(),Wo(t,e,o,i=co(Error(s(421))))}return"$?"===r.data?(e.flags|=128,e.child=t.child,e=Cc.bind(null,t),r._reactRetry=e,null):(t=a.treeContext,is=cr(r.nextSibling),ns=e,rs=!0,ss=null,null!==t&&(Xr[Kr++]=Qr,Xr[Kr++]=$r,Xr[Kr++]=Yr,Qr=t.id,$r=t.overflow,Yr=e),e=Bo(e,i.children),e.flags|=4096,e)}(t,e,l,r,i,a,n);if(o){o=r.fallback,l=e.mode,i=(a=t.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&e.child!==a?((r=e.child).childLanes=0,r.pendingProps=c,e.deletions=null):(r=Lc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=Lc(i,o):(o=Ic(o,l,n,null)).flags|=2,o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=null===(l=t.child.memoizedState)?Fo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Io,r}return t=(o=t.child).sibling,r=Lc(o,{mode:"visible",children:r.children}),0===(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Bo(t,e){return(e=Fc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Wo(t,e,n,i){return null!==i&&fs(i),ws(e,t.child,null,n),(t=Bo(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function jo(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),Ms(t.return,e,n)}function Uo(t,e,n,i,r){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function zo(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(wo(t,e,i.children,n),0!==(2&(i=Zs.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&jo(t,n,e);else if(19===t.tag)jo(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Er(Zs,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===ta(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Uo(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===ta(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Uo(e,!0,n,null,s);break;case"together":Uo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ho(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vo(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Fl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Lc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Lc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Go(t,e){if(!rs)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function qo(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Xo(t,e,n){var i=e.pendingProps;switch(es(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(e),null;case 1:case 17:return Dr(e.type)&&Lr(),qo(e),null;case 3:return i=e.stateNode,Qs(),Sr(Tr),Sr(Mr),na(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(hs(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==ss&&(ac(ss),ss=null))),Do(t,e),qo(e),null;case 5:Js(e);var r=Ks(Xs.current);if(n=e.type,null!==t&&null!=e.stateNode)Lo(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(s(166));return qo(e),null}if(t=Ks(Gs.current),hs(e)){i=e.stateNode,n=e.type;var a=e.memoizedProps;switch(i[dr]=e,i[pr]=a,t=0!==(1&e.mode),n){case"dialog":Wi("cancel",i),Wi("close",i);break;case"iframe":case"object":case"embed":Wi("load",i);break;case"video":case"audio":for(r=0;r<Ii.length;r++)Wi(Ii[r],i);break;case"source":Wi("error",i);break;case"img":case"image":case"link":Wi("error",i),Wi("load",i);break;case"details":Wi("toggle",i);break;case"input":Q(i,a),Wi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Wi("invalid",i);break;case"textarea":rt(i,a),Wi("invalid",i)}for(var l in yt(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,c,t),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,c,t),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Wi("scroll",i)}switch(n){case"input":q(i),Z(i,a,!0);break;case"textarea":q(i),at(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=Zi)}i=r,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=ot(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[dr]=e,t[pr]=i,Po(t,e,!1,!1),e.stateNode=t;t:{switch(l=bt(n,i),n){case"dialog":Wi("cancel",t),Wi("close",t),r=i;break;case"iframe":case"object":case"embed":Wi("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ii.length;r++)Wi(Ii[r],t);r=i;break;case"source":Wi("error",t),r=i;break;case"img":case"image":case"link":Wi("error",t),Wi("load",t),r=i;break;case"details":Wi("toggle",t),r=i;break;case"input":Q(t,i),r=Y(t,i),Wi("invalid",t);break;case"option":default:r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=O({},i,{value:void 0}),Wi("invalid",t);break;case"textarea":rt(t,i),r=it(t,i),Wi("invalid",t)}for(a in yt(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?mt(t,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&dt(t,u):"number"===typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Wi("scroll",t):null!=u&&b(t,a,u,l))}switch(n){case"input":q(t),Z(t,i,!1);break;case"textarea":q(t),at(t);break;case"option":null!=i.value&&t.setAttribute("value",""+V(i.value));break;case"select":t.multiple=!!i.multiple,null!=(a=i.value)?nt(t,!!i.multiple,a,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(t.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return qo(e),null;case 6:if(t&&null!=e.stateNode)No(t,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(s(166));if(n=Ks(Xs.current),Ks(Gs.current),hs(e)){if(i=e.stateNode,n=e.memoizedProps,i[dr]=e,(a=i.nodeValue!==n)&&null!==(t=ns))switch(t.tag){case 3:Ji(i.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&t.mode))}a&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=e,e.stateNode=i}return qo(e),null;case 13:if(Sr(Zs),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&e.mode)&&0===(128&e.flags))ds(),ps(),e.flags|=98560,a=!1;else if(a=hs(e),null!==i&&null!==i.dehydrated){if(null===t){if(!a)throw Error(s(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(s(317));a[dr]=e}else ps(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;qo(e),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&Zs.current)?0===Nl&&(Nl=3):gc())),null!==e.updateQueue&&(e.flags|=4),qo(e),null);case 4:return Qs(),Do(t,e),null===t&&zi(e.stateNode.containerInfo),qo(e),null;case 10:return Cs(e.type._context),qo(e),null;case 19:if(Sr(Zs),null===(a=e.memoizedState))return qo(e),null;if(i=0!==(128&e.flags),null===(l=a.rendering))if(i)Go(a,!1);else{if(0!==Nl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ta(t))){for(e.flags|=128,Go(a,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Er(Zs,1&Zs.current|2),e.child}t=t.sibling}null!==a.tail&&$t()>zl&&(e.flags|=128,i=!0,Go(a,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=ta(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!rs)return qo(e),null}else 2*$t()-a.renderingStartTime>zl&&1073741824!==n&&(e.flags|=128,i=!0,Go(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=a.last)?n.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=$t(),e.sibling=null,n=Zs.current,Er(Zs,i?1&n|2:1&n),e):(qo(e),null);case 22:case 23:return hc(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Dl)&&(qo(e),6&e.subtreeFlags&&(e.flags|=8192)):qo(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}function Ko(t,e){switch(es(e),e.tag){case 1:return Dr(e.type)&&Lr(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Qs(),Sr(Tr),Sr(Mr),na(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Js(e),null;case 13:if(Sr(Zs),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));ps()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Sr(Zs),null;case 4:return Qs(),null;case 10:return Cs(e.type._context),null;case 22:case 23:return hc(),null;default:return null}}Po=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},Lo=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Ks(Gs.current);var s,a=null;switch(n){case"input":r=Y(t,r),i=Y(t,i),a=[];break;case"select":r=O({},r,{value:void 0}),i=O({},i,{value:void 0}),a=[];break;case"textarea":r=it(t,r),i=it(t,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(t.onclick=Zi)}for(u in yt(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Wi("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}},No=function(t,e,n,i){n!==i&&(e.flags|=4)};var Yo=!1,Qo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Ac(t,e,i)}else n.current=null}function tl(t,e,n){try{n()}catch(i){Ac(t,e,i)}}var el=!1;function nl(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,void 0!==s&&tl(e,n,s)}r=r.next}while(r!==i)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function rl(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[dr],delete e[pr],delete e[gr],delete e[mr],delete e[vr])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ol(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Zi));else if(4!==i&&null!==(t=t.child))for(ll(t,e,n),t=t.sibling;null!==t;)ll(t,e,n),t=t.sibling}function cl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var ul=null,hl=!1;function dl(t,e,n){for(n=n.child;null!==n;)pl(t,e,n),n=n.sibling}function pl(t,e,n){if(se&&"function"===typeof se.onCommitFiberUnmount)try{se.onCommitFiberUnmount(re,n)}catch(o){}switch(n.tag){case 5:Qo||Zo(n,e);case 6:var i=ul,r=hl;ul=null,dl(t,e,n),hl=r,null!==(ul=i)&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?lr(t.parentNode,n):1===t.nodeType&&lr(t,n),ze(t)):lr(ul,n.stateNode));break;case 4:i=ul,r=hl,ul=n.stateNode.containerInfo,hl=!0,dl(t,e,n),ul=i,hl=r;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tl(n,e,a),r=r.next}while(r!==i)}dl(t,e,n);break;case 1:if(!Qo&&(Zo(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Ac(n,e,o)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?(Qo=(i=Qo)||null!==n.memoizedState,dl(t,e,n),Qo=i):dl(t,e,n);break;default:dl(t,e,n)}}function fl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new $o),e.forEach(function(e){var i=Mc.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))})}}function gl(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=t,o=e,l=o;t:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break t;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===ul)throw Error(s(160));pl(a,o,r),ul=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Ac(r,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)ml(e,t),e=e.sibling}function ml(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gl(e,t),vl(t),4&i){try{nl(3,t,t.return),il(3,t)}catch(m){Ac(t,t.return,m)}try{nl(5,t,t.return)}catch(m){Ac(t,t.return,m)}}break;case 1:gl(e,t),vl(t),512&i&&null!==n&&Zo(n,n.return);break;case 5:if(gl(e,t),vl(t),512&i&&null!==n&&Zo(n,n.return),32&t.flags){var r=t.stateNode;try{dt(r,"")}catch(m){Ac(t,t.return,m)}}if(4&i&&null!=(r=t.stateNode)){var a=t.memoizedProps,o=null!==n?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(r,a),bt(l,o);var u=bt(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?mt(r,d):"dangerouslySetInnerHTML"===h?ht(r,d):"children"===h?dt(r,d):b(r,h,d,u)}switch(l){case"input":J(r,a);break;case"textarea":st(r,a);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?nt(r,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?nt(r,!!a.multiple,a.defaultValue,!0):nt(r,!!a.multiple,a.multiple?[]:"",!1))}r[pr]=a}catch(m){Ac(t,t.return,m)}}break;case 6:if(gl(e,t),vl(t),4&i){if(null===t.stateNode)throw Error(s(162));r=t.stateNode,a=t.memoizedProps;try{r.nodeValue=a}catch(m){Ac(t,t.return,m)}}break;case 3:if(gl(e,t),vl(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{ze(e.containerInfo)}catch(m){Ac(t,t.return,m)}break;case 4:default:gl(e,t),vl(t);break;case 13:gl(e,t),vl(t),8192&(r=t.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Ul=$t())),4&i&&fl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Qo=(u=Qo)||h,gl(e,t),Qo=u):gl(e,t),vl(t),8192&i){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for(Jo=t,h=t.child;null!==h;){for(d=Jo=h;null!==Jo;){switch(f=(p=Jo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){i=p,n=p.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Ac(i,n,m)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){xl(d);continue}}null!==f?(f.return=p,Jo=f):xl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",o))}catch(m){Ac(t,t.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ac(t,t.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(e,t),vl(t),4&i&&fl(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(al(n)){var i=n;break t}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(dt(r,""),i.flags&=-33),cl(t,ol(t),r);break;case 3:case 4:var a=i.stateNode.containerInfo;ll(t,ol(t),a);break;default:throw Error(s(161))}}catch(o){Ac(t,t.return,o)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function yl(t,e,n){Jo=t,bl(t,e,n)}function bl(t,e,n){for(var i=0!==(1&t.mode);null!==Jo;){var r=Jo,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||Yo;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Yo;var c=Qo;if(Yo=a,(Qo=l)&&!c)for(Jo=r;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?_l(r):null!==l?(l.return=a,Jo=l):_l(r);for(;null!==s;)Jo=s,bl(s,e,n),s=s.sibling;Jo=r,Yo=o,Qo=c}wl(t)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Jo=s):wl(t)}}function wl(t){for(;null!==Jo;){var e=Jo;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Qo||il(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!Qo)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:eo(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Hs(e,a,i);break;case 3:var o=e.updateQueue;if(null!==o){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Hs(e,o,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&ze(d)}}}break;default:throw Error(s(163))}Qo||512&e.flags&&rl(e)}catch(D_){Ac(e,e.return,D_)}}if(e===t){Jo=null;break}if(null!==(n=e.sibling)){n.return=e.return,Jo=n;break}Jo=e.return}}function xl(t){for(;null!==Jo;){var e=Jo;if(e===t){Jo=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Jo=n;break}Jo=e.return}}function _l(t){for(;null!==Jo;){var e=Jo;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Ac(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(l){Ac(e,r,l)}}var s=e.return;try{rl(e)}catch(l){Ac(e,s,l)}break;case 5:var a=e.return;try{rl(e)}catch(l){Ac(e,a,l)}}}catch(l){Ac(e,e.return,l)}if(e===t){Jo=null;break}var o=e.sibling;if(null!==o){o.return=e.return,Jo=o;break}Jo=e.return}}var kl,Al=Math.ceil,Sl=w.ReactCurrentDispatcher,El=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,Ml=0,Tl=null,Rl=null,Pl=0,Dl=0,Ll=Ar(0),Nl=0,Il=null,Fl=0,Ol=0,Bl=0,Wl=null,jl=null,Ul=0,zl=1/0,Hl=null,Vl=!1,Gl=null,ql=null,Xl=!1,Kl=null,Yl=0,Ql=0,$l=null,Jl=-1,Zl=0;function tc(){return 0!==(6&Ml)?$t():-1!==Jl?Jl:Jl=$t()}function ec(t){return 0===(1&t.mode)?1:0!==(2&Ml)&&0!==Pl?Pl&-Pl:null!==gs.transition?(0===Zl&&(Zl=ge()),Zl):0!==(t=be)?t:t=void 0===(t=window.event)?16:Qe(t.type)}function nc(t,e,n,i){if(50<Ql)throw Ql=0,$l=null,Error(s(185));ve(t,n,i),0!==(2&Ml)&&t===Tl||(t===Tl&&(0===(2&Ml)&&(Ol|=n),4===Nl&&oc(t,Pl)),ic(t,i),1===n&&0===Ml&&0===(1&e.mode)&&(zl=$t()+500,Wr&&zr()))}function ic(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ae(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=pe(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}(t,e);var i=de(t,t===Tl?Pl:0);if(0===i)null!==n&&Kt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&Kt(n),1===e)0===t.tag?function(t){Wr=!0,Ur(t)}(lc.bind(null,t)):Ur(lc.bind(null,t)),ar(function(){0===(6&Ml)&&zr()}),n=null;else{switch(we(i)){case 1:n=Zt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Tc(n,rc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rc(t,e){if(Jl=-1,Zl=0,0!==(6&Ml))throw Error(s(327));var n=t.callbackNode;if(_c()&&t.callbackNode!==n)return null;var i=de(t,t===Tl?Pl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=mc(t,i);else{e=i;var r=Ml;Ml|=2;var a=fc();for(Tl===t&&Pl===e||(Hl=null,zl=$t()+500,dc(t,e));;)try{yc();break}catch(l){pc(t,l)}Es(),Sl.current=a,Ml=r,null!==Rl?e=0:(Tl=null,Pl=0,e=Nl)}if(0!==e){if(2===e&&(0!==(r=fe(t))&&(i=r,e=sc(t,r))),1===e)throw n=Il,dc(t,0),oc(t,i),ic(t,$t()),n;if(6===e)oc(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!oi(s(),r))return!1}catch(o){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=mc(t,i))&&(0!==(a=fe(t))&&(i=a,e=sc(t,a))),1===e))throw n=Il,dc(t,0),oc(t,i),ic(t,$t()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(s(345));case 2:case 5:xc(t,jl,Hl);break;case 3:if(oc(t,i),(130023424&i)===i&&10<(e=Ul+500-$t())){if(0!==de(t,0))break;if(((r=t.suspendedLanes)&i)!==i){tc(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ir(xc.bind(null,t,jl,Hl),e);break}xc(t,jl,Hl);break;case 4:if(oc(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-ae(i);a=1<<o,(o=e[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=$t()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Al(i/1960))-i)){t.timeoutHandle=ir(xc.bind(null,t,jl,Hl),i);break}xc(t,jl,Hl);break;default:throw Error(s(329))}}}return ic(t,$t()),t.callbackNode===n?rc.bind(null,t):null}function sc(t,e){var n=Wl;return t.current.memoizedState.isDehydrated&&(dc(t,e).flags|=256),2!==(t=mc(t,e))&&(e=jl,jl=n,null!==e&&ac(e)),t}function ac(t){null===jl?jl=t:jl.push.apply(jl,t)}function oc(t,e){for(e&=~Bl,e&=~Ol,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),i=1<<n;t[n]=-1,e&=~i}}function lc(t){if(0!==(6&Ml))throw Error(s(327));_c();var e=de(t,0);if(0===(1&e))return ic(t,$t()),null;var n=mc(t,e);if(0!==t.tag&&2===n){var i=fe(t);0!==i&&(e=i,n=sc(t,i))}if(1===n)throw n=Il,dc(t,0),oc(t,e),ic(t,$t()),n;if(6===n)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xc(t,jl,Hl),ic(t,$t()),null}function cc(t,e){var n=Ml;Ml|=1;try{return t(e)}finally{0===(Ml=n)&&(zl=$t()+500,Wr&&zr())}}function uc(t){null!==Kl&&0===Kl.tag&&0===(6&Ml)&&_c();var e=Ml;Ml|=1;var n=Cl.transition,i=be;try{if(Cl.transition=null,be=1,t)return t()}finally{be=i,Cl.transition=n,0===(6&(Ml=e))&&zr()}}function hc(){Dl=Ll.current,Sr(Ll)}function dc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,rr(n)),null!==Rl)for(n=Rl.return;null!==n;){var i=n;switch(es(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Lr();break;case 3:Qs(),Sr(Tr),Sr(Mr),na();break;case 5:Js(i);break;case 4:Qs();break;case 13:case 19:Sr(Zs);break;case 10:Cs(i.type._context);break;case 22:case 23:hc()}n=n.return}if(Tl=t,Rl=t=Lc(t.current,null),Pl=Dl=e,Nl=0,Il=null,Bl=Ol=Fl=0,jl=Wl=null,null!==Ps){for(e=0;e<Ps.length;e++)if(null!==(i=(n=Ps[e]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}Ps=null}return t}function pc(t,e){for(;;){var n=Rl;try{if(Es(),ia.current=$a,ca){for(var i=aa.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,ha=0,El.current=null,null===n||null===n.return){Nl=1,Il=e,Rl=null;break}t:{var a=t,o=n.return,l=n,c=e;if(e=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=mo(o);if(null!==f){f.flags&=-257,vo(f,o,l,0,e),1&f.mode&&go(a,u,e),c=u;var g=(e=f).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){go(a,u,e),gc();break t}c=Error(s(426))}else if(rs&&1&l.mode){var v=mo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,e),fs(lo(c,l));break t}}a=c=lo(c,l),4!==Nl&&(Nl=2),null===Wl?Wl=[a]:Wl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Us(a,po(0,c,e));break t;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e,Us(a,fo(a,l,e));break t}}a=a.return}while(null!==a)}wc(n)}catch(w){e=w,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function fc(){var t=Sl.current;return Sl.current=$a,null===t?$a:t}function gc(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Tl||0===(268435455&Fl)&&0===(268435455&Ol)||oc(Tl,Pl)}function mc(t,e){var n=Ml;Ml|=2;var i=fc();for(Tl===t&&Pl===e||(Hl=null,dc(t,e));;)try{vc();break}catch(r){pc(t,r)}if(Es(),Ml=n,Sl.current=i,null!==Rl)throw Error(s(261));return Tl=null,Pl=0,Nl}function vc(){for(;null!==Rl;)bc(Rl)}function yc(){for(;null!==Rl&&!Yt();)bc(Rl)}function bc(t){var e=kl(t.alternate,t,Dl);t.memoizedProps=t.pendingProps,null===e?wc(t):Rl=e,El.current=null}function wc(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Xo(n,e,Dl)))return void(Rl=n)}else{if(null!==(n=Ko(n,e)))return n.flags&=32767,void(Rl=n);if(null===t)return Nl=6,void(Rl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Rl=e);Rl=e=t}while(null!==e);0===Nl&&(Nl=5)}function xc(t,e,n){var i=be,r=Cl.transition;try{Cl.transition=null,be=1,function(t,e,n,i){do{_c()}while(null!==Kl);if(0!==(6&Ml))throw Error(s(327));n=t.finishedWork;var r=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ae(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}(t,a),t===Tl&&(Rl=Tl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Tc(ee,function(){return _c(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=be;be=1;var l=Ml;Ml|=4,El.current=null,function(t,e){if(tr=Ve,pi(t=di())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break t}var o=0,l=-1,c=-1,u=0,h=0,d=t,p=null;e:for(;;){for(var f;d!==n||0!==r&&3!==d.nodeType||(l=o+r),d!==a||0!==i&&3!==d.nodeType||(c=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===t)break e;if(p===n&&++u===r&&(l=o),p===a&&++h===i&&(c=o),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(er={focusedElem:t,selectionRange:n},Ve=!1,Jo=e;null!==Jo;)if(t=(e=Jo).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Jo=t;else for(;null!==Jo;){e=Jo;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:eo(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(x){Ac(e,e.return,x)}if(null!==(t=e.sibling)){t.return=e.return,Jo=t;break}Jo=e.return}g=el,el=!1}(t,n),ml(n,t),fi(er),Ve=!!tr,er=tr=null,t.current=n,yl(n,t,r),Qt(),Ml=l,be=o,Cl.transition=a}else t.current=n;if(Xl&&(Xl=!1,Kl=t,Yl=r),a=t.pendingLanes,0===a&&(ql=null),function(t){if(se&&"function"===typeof se.onCommitFiberRoot)try{se.onCommitFiberRoot(re,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),ic(t,$t()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Vl)throw Vl=!1,t=Gl,Gl=null,t;0!==(1&Yl)&&0!==t.tag&&_c(),a=t.pendingLanes,0!==(1&a)?t===$l?Ql++:(Ql=0,$l=t):Ql=0,zr()}(t,e,n,i)}finally{Cl.transition=r,be=i}return null}function _c(){if(null!==Kl){var t=we(Yl),e=Cl.transition,n=be;try{if(Cl.transition=null,be=16>t?16:t,null===Kl)var i=!1;else{if(t=Kl,Kl=null,Yl=0,0!==(6&Ml))throw Error(s(331));var r=Ml;for(Ml|=4,Jo=t.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var h=Jo;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Jo=d;else for(;null!==Jo;){var p=(h=Jo).sibling,f=h.return;if(sl(h),h===u){Jo=null;break}if(null!==p){p.return=f,Jo=p;break}Jo=f}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else t:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Jo=y;break t}Jo=a.return}}var b=t.current;for(Jo=b;null!==Jo;){var w=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Jo=w;else t:for(o=b;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(_){Ac(l,l.return,_)}if(l===o){Jo=null;break t}var x=l.sibling;if(null!==x){x.return=l.return,Jo=x;break t}Jo=l.return}}if(Ml=r,zr(),se&&"function"===typeof se.onPostCommitFiberRoot)try{se.onPostCommitFiberRoot(re,t)}catch(_){}i=!0}return i}finally{be=n,Cl.transition=e}}return!1}function kc(t,e,n){t=Ws(t,e=po(0,e=lo(n,e),1),1),e=tc(),null!==t&&(ve(t,1,e),ic(t,e))}function Ac(t,e,n){if(3===t.tag)kc(t,t,n);else for(;null!==e;){if(3===e.tag){kc(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ql||!ql.has(i))){e=Ws(e,t=fo(e,t=lo(n,t),1),1),t=tc(),null!==e&&(ve(e,1,t),ic(e,t));break}}e=e.return}}function Sc(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=tc(),t.pingedLanes|=t.suspendedLanes&n,Tl===t&&(Pl&n)===n&&(4===Nl||3===Nl&&(130023424&Pl)===Pl&&500>$t()-Ul?dc(t,0):Bl|=n),ic(t,e)}function Ec(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=tc();null!==(t=Ns(t,e))&&(ve(t,e,n),ic(t,n))}function Cc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Ec(t,n)}function Mc(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(e),Ec(t,n)}function Tc(t,e){return Xt(t,e)}function Rc(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(t,e,n,i){return new Rc(t,e,n,i)}function Dc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Lc(t,e){var n=t.alternate;return null===n?((n=Pc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nc(t,e,n,i,r,a){var o=2;if(i=t,"function"===typeof t)Dc(t)&&(o=1);else if("string"===typeof t)o=5;else t:switch(t){case k:return Ic(n.children,r,a,e);case A:o=8,r|=8;break;case S:return(t=Pc(12,n,e,2|r)).elementType=S,t.lanes=a,t;case T:return(t=Pc(13,n,e,r)).elementType=T,t.lanes=a,t;case R:return(t=Pc(19,n,e,r)).elementType=R,t.lanes=a,t;case L:return Fc(n,r,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case E:o=10;break t;case C:o=9;break t;case M:o=11;break t;case P:o=14;break t;case D:o=16,i=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Pc(o,n,e,r)).elementType=t,e.type=i,e.lanes=a,e}function Ic(t,e,n,i){return(t=Pc(7,t,i,e)).lanes=n,t}function Fc(t,e,n,i){return(t=Pc(22,t,i,e)).elementType=L,t.lanes=n,t.stateNode={isHidden:!1},t}function Oc(t,e,n){return(t=Pc(6,t,null,e)).lanes=n,t}function Bc(t,e,n){return(e=Pc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Wc(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function jc(t,e,n,i,r,s,a,o,l){return t=new Wc(t,e,n,o,l),1===e?(e=1,!0===s&&(e|=8)):e=0,s=Pc(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fs(s),t}function Uc(t){if(!t)return Cr;t:{if(zt(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Dr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var n=t.type;if(Dr(n))return Ir(t,n,e)}return e}function zc(t,e,n,i,r,s,a,o,l){return(t=jc(n,i,!0,t,0,s,0,o,l)).context=Uc(null),n=t.current,(s=Bs(i=tc(),r=ec(n))).callback=void 0!==e&&null!==e?e:null,Ws(n,s,r),t.current.lanes=r,ve(t,r,i),ic(t,i),t}function Hc(t,e,n,i){var r=e.current,s=tc(),a=ec(r);return n=Uc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Bs(s,a)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=Ws(r,e,a))&&(nc(t,r,a,s),js(t,r,a)),a}function Vc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Gc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function qc(t,e){Gc(t,e),(t=t.alternate)&&Gc(t,e)}kl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Tr.current)bo=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return bo=!1,function(t,e,n){switch(e.tag){case 3:To(e),ps();break;case 5:$s(e);break;case 1:Dr(e.type)&&Fr(e);break;case 4:Ys(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Er(_s,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Er(Zs,1&Zs.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Oo(t,e,n):(Er(Zs,1&Zs.current),null!==(t=Vo(t,e,n))?t.sibling:null);Er(Zs,1&Zs.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return zo(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Er(Zs,Zs.current),i)break;return null;case 22:case 23:return e.lanes=0,Ao(t,e,n)}return Vo(t,e,n)}(t,e,n);bo=0!==(131072&t.flags)}else bo=!1,rs&&0!==(1048576&e.flags)&&Zr(e,qr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ho(t,e),t=e.pendingProps;var r=Pr(e,Mr.current);Ts(e,n),r=ga(null,e,i,t,r,n);var a=ma();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dr(i)?(a=!0,Fr(e)):a=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Fs(e),r.updater=io,e.stateNode=r,r._reactInternals=e,oo(e,i,t,n),e=Mo(null,e,i,!0,a,n)):(e.tag=0,rs&&a&&ts(e),wo(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(Ho(t,e),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Dc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===M)return 11;if(t===P)return 14}return 2}(i),t=eo(i,t),r){case 0:e=Eo(null,e,i,t,n);break t;case 1:e=Co(null,e,i,t,n);break t;case 11:e=xo(null,e,i,t,n);break t;case 14:e=_o(null,e,i,eo(i.type,t),n);break t}throw Error(s(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,Eo(t,e,i,r=e.elementType===i?r:eo(i,r),n);case 1:return i=e.type,r=e.pendingProps,Co(t,e,i,r=e.elementType===i?r:eo(i,r),n);case 3:t:{if(To(e),null===t)throw Error(s(387));i=e.pendingProps,r=(a=e.memoizedState).element,Os(t,e),zs(e,i,null,n);var o=e.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Ro(t,e,i,n,r=lo(Error(s(423)),e));break t}if(i!==r){e=Ro(t,e,i,n,r=lo(Error(s(424)),e));break t}for(is=cr(e.stateNode.containerInfo.firstChild),ns=e,rs=!0,ss=null,n=xs(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),i===r){e=Vo(t,e,n);break t}wo(t,e,i,n)}e=e.child}return e;case 5:return $s(e),null===t&&cs(e),i=e.type,r=e.pendingProps,a=null!==t?t.memoizedProps:null,o=r.children,nr(i,r)?o=null:null!==a&&nr(i,a)&&(e.flags|=32),So(t,e),wo(t,e,o,n),e.child;case 6:return null===t&&cs(e),null;case 13:return Oo(t,e,n);case 4:return Ys(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=ws(e,null,i,n):wo(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,xo(t,e,i,r=e.elementType===i?r:eo(i,r),n);case 7:return wo(t,e,e.pendingProps,n),e.child;case 8:case 12:return wo(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,a=e.memoizedProps,o=r.value,Er(_s,i._currentValue),i._currentValue=o,null!==a)if(oi(a.value,o)){if(a.children===r.children&&!Tr.current){e=Vo(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=Bs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ms(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ms(o,n,e),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ts(e,n),i=i(r=Rs(r)),e.flags|=1,wo(t,e,i,n),e.child;case 14:return r=eo(i=e.type,e.pendingProps),_o(t,e,i,r=eo(i.type,r),n);case 15:return ko(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:eo(i,r),Ho(t,e),e.tag=1,Dr(i)?(t=!0,Fr(e)):t=!1,Ts(e,n),so(e,i,r),oo(e,i,r,n),Mo(null,e,i,!0,t,n);case 19:return zo(t,e,n);case 22:return Ao(t,e,n)}throw Error(s(156,e.tag))};var Xc="function"===typeof reportError?reportError:function(t){console.error(t)};function Kc(t){this._internalRoot=t}function Yc(t){this._internalRoot=t}function Qc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function $c(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Jc(){}function Zc(t,e,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof r){var o=r;r=function(){var t=Vc(a);o.call(t)}}Hc(e,a,t,r)}else a=function(t,e,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var t=Vc(a);s.call(t)}}var a=zc(e,i,t,0,null,!1,0,"",Jc);return t._reactRootContainer=a,t[fr]=a.current,zi(8===t.nodeType?t.parentNode:t),uc(),a}for(;r=t.lastChild;)t.removeChild(r);if("function"===typeof i){var o=i;i=function(){var t=Vc(l);o.call(t)}}var l=jc(t,0,!1,null,0,!1,0,"",Jc);return t._reactRootContainer=l,t[fr]=l.current,zi(8===t.nodeType?t.parentNode:t),uc(function(){Hc(e,l,n,i)}),l}(n,e,t,r,i);return Vc(a)}Yc.prototype.render=Kc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(s(409));Hc(t,e,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;uc(function(){Hc(null,t,null,null)}),e[fr]=null}},Yc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ae();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Le.length&&0!==e&&e<Le[n].priority;n++);Le.splice(n,0,t),0===n&&Oe(t)}},xe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ye(e,1|n),ic(e,$t()),0===(6&Ml)&&(zl=$t()+500,zr()))}break;case 13:uc(function(){var e=Ns(t,1);if(null!==e){var n=tc();nc(e,t,1,n)}}),qc(t,1)}},_e=function(t){if(13===t.tag){var e=Ns(t,134217728);if(null!==e)nc(e,t,134217728,tc());qc(t,134217728)}},ke=function(t){if(13===t.tag){var e=ec(t),n=Ns(t,e);if(null!==n)nc(n,t,e,tc());qc(t,e)}},Ae=function(){return be},Se=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},_t=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=xr(i);if(!r)throw Error(s(90));X(i),J(i,r)}}}break;case"textarea":st(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Mt=cc,Tt=uc;var tu={usingClientEntryPoint:!1,Events:[br,wr,xr,Et,Ct,cc]},eu={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Gt(t))?null:t.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{re=iu.inject(nu),se=iu}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(e))throw Error(s(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Qc(t))throw Error(s(299));var n=!1,i="",r=Xc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(r=e.onRecoverableError)),e=jc(t,1,!1,null,0,n,0,i,r),t[fr]=e.current,zi(8===t.nodeType?t.parentNode:t),new Kc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw t=Object.keys(t).join(","),Error(s(268,t))}return t=null===(t=Gt(e))?null:t.stateNode},e.flushSync=function(t){return uc(t)},e.hydrate=function(t,e,n){if(!$c(e))throw Error(s(200));return Zc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Qc(t))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",o=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),e=zc(e,null,t,1,null!=n?n:null,r,0,a,o),t[fr]=e.current,zi(t),i)for(t=0;t<i.length;t++)r=(r=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Yc(e)},e.render=function(t,e,n){if(!$c(e))throw Error(s(200));return Zc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!$c(t))throw Error(s(40));return!!t._reactRootContainer&&(uc(function(){Zc(null,null,t,!1,function(){t._reactRootContainer=null,t[fr]=null})}),!0)},e.unstable_batchedUpdates=cc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!$c(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return Zc(t,e,n,!1,i)},e.version="18.3.1-next-f1338f8080-20240426"},749:(t,e,n)=>{t.exports=n.p+"static/media/pdf.worker.min.cdfaa934ac7473094fbd.mjs"},853:(t,e,n)=>{t.exports=n(234)},950:(t,e,n)=>{!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(730)}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}n.m=t,n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/",n.b="undefined"!==typeof document&&document.baseURI||self.location.href;var i={};n.r(i),n.d(i,{hasBrowserEnv:()=>On,hasStandardBrowserEnv:()=>Wn,hasStandardBrowserWebWorkerEnv:()=>jn,navigator:()=>Bn,origin:()=>Un});var r={};n.r(r),n.d(r,{dU:()=>cy,ng:()=>Hr,EA:()=>Rp,Tm:()=>cg,D6:()=>zf,YE:()=>eg,rE:()=>zg});var s=n(43),a=n(391);function o(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l(e)?e:e+""}function u(t,e,n){return(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}const p=["sri"],f=["page"],g=["page","matches"],m=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],v=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],y=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var b="popstate";function w(){return C(function(t,e){let{pathname:n,search:i,hash:r}=t.location;return A("",{pathname:n,search:i,hash:r},e.state&&e.state.usr||null,e.state&&e.state.key||"default")},function(t,e){return"string"===typeof e?e:S(e)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function x(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function _(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function k(t,e){return{usr:t.state,key:t.key,idx:e}}function A(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return d(d({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?E(e):e),{},{state:n,key:e&&e.key||i||Math.random().toString(36).substring(2,10)})}function S(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(e+="#"===i.charAt(0)?i:"#"+i),e}function E(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function C(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",l=null,c=u();function u(){return(a.state||{idx:null}).idx}function h(){o="POP";let t=u(),e=null==t?null:t-c;c=t,l&&l({action:o,location:f.location,delta:e})}function p(t){return M(t)}null==c&&(c=0,a.replaceState(d(d({},a.state),{},{idx:c}),""));let f={get action(){return o},get location(){return t(r,a)},listen(t){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(b,h),l=t,()=>{r.removeEventListener(b,h),l=null}},createHref:t=>e(r,t),createURL:p,encodeLocation(t){let e=p(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){o="PUSH";let i=A(f.location,t,e);n&&n(i,t),c=u()+1;let h=k(i,c),d=f.createHref(i);try{a.pushState(h,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;r.location.assign(d)}s&&l&&l({action:o,location:f.location,delta:1})},replace:function(t,e){o="REPLACE";let i=A(f.location,t,e);n&&n(i,t),c=u();let r=k(i,c),h=f.createHref(i);a.replaceState(r,"",h),s&&l&&l({action:o,location:f.location,delta:0})},go:t=>a.go(t)};return f}function M(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),x(n,"No window.location.(origin|href) available to create URL");let i="string"===typeof t?t:S(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}new WeakMap;function T(t,e){return R(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function R(t,e,n,i){let r=G(("string"===typeof e?E(e):e).pathname||"/",n);if(null==r)return null;let s=P(t);!function(t){t.sort((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every((t,n)=>t===e[n]);return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map(t=>t.childrenIndex),e.routesMeta.map(t=>t.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let t=V(r);a=U(s[o],t,i)}return a}function P(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(t,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?t.path||"":o,caseSensitive:!0===t.caseSensitive,childrenIndex:s,route:t};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(i)&&a)return;x(l.relativePath.startsWith(i),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(i,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(i.length)}let c=Q([i,l.relativePath]),u=n.concat(l);t.children&&t.children.length>0&&(x(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),P(t.children,e,u,c,a)),(null!=t.path||t.index)&&e.push({path:c,score:j(c,t.index),routesMeta:u})};return t.forEach((t,e)=>{var n;if(""!==t.path&&null!==(n=t.path)&&void 0!==n&&n.includes("?"))for(let i of D(t.path))s(t,e,!0,i);else s(t,e)}),e}function D(t){let e=t.split("/");if(0===e.length)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let a=D(i.join("/")),o=[];return o.push(...a.map(t=>""===t?s:[s,t].join("/"))),r&&o.push(...a),o.map(e=>t.startsWith("/")&&""===e?"/":e)}var L=/^:[\w-]+$/,N=3,I=2,F=1,O=10,B=-2,W=t=>"*"===t;function j(t,e){let n=t.split("/"),i=n.length;return n.some(W)&&(i+=B),e&&(i+=I),n.filter(t=>!W(t)).reduce((t,e)=>t+(L.test(e)?N:""===e?F:O),i)}function U(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=t,r={},s="/",a=[];for(let o=0;o<i.length;++o){let t=i[o],l=o===i.length-1,c="/"===s?e:e.slice(s.length)||"/",u=z({path:t.relativePath,caseSensitive:t.caseSensitive,end:l},c),h=t.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=z({path:t.relativePath,caseSensitive:t.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),a.push({params:r,pathname:Q([s,u.pathname]),pathnameBase:$(Q([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=Q([s,u.pathnameBase]))}return a}function z(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=H(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((t,e,n)=>{let{paramName:i,isOptional:r}=e;if("*"===i){let t=o[n]||"";a=s.slice(0,s.length-t.length).replace(/(.)\/+$/,"$1")}const l=o[n];return t[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),t},{}),pathname:s,pathnameBase:a,pattern:t}}function H(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'.concat(t,'" will be treated as if it were "').concat(t.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(t.replace(/\*$/,"/*"),'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(t,e,n)=>(i.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==t&&"/"!==t&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function V(t){try{return t.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(e){return _(!1,'The URL path "'.concat(t,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(e,").")),t}}function G(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&"/"!==i?null:t.slice(n)||"/"}function q(t,e,n,i){return"Cannot include a '".concat(t,"' character in a manually specified `to.").concat(e,"` field [").concat(JSON.stringify(i),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function X(t){return t.filter((t,e)=>0===e||t.route.path&&t.route.path.length>0)}function K(t){let e=X(t);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Y(t,e,n){let i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof t?i=E(t):(i=d({},t),x(!i.pathname||!i.pathname.includes("?"),q("?","pathname","search",i)),x(!i.pathname||!i.pathname.includes("#"),q("#","pathname","hash",i)),x(!i.search||!i.search.includes("#"),q("#","search","hash",i)));let s,a=""===t||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let t=e.length-1;if(!r&&o.startsWith("..")){let e=o.split("/");for(;".."===e[0];)e.shift(),t-=1;i.pathname=e.join("/")}s=t>=0?e[t]:"/"}let l=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:i="",hash:r=""}="string"===typeof t?E(t):t,s=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)}),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:s,search:J(i),hash:Z(r)}}(i,s),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Q=t=>t.join("/").replace(/\/\/+/g,"/"),$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),J=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",Z=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";function tt(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}var et=["POST","PUT","PATCH","DELETE"],nt=(new Set(et),["GET",...et]);new Set(nt),Symbol("ResetLoaderData");var it=s.createContext(null);it.displayName="DataRouter";var rt=s.createContext(null);rt.displayName="DataRouterState";var st=s.createContext(!1);var at=s.createContext({isTransitioning:!1});at.displayName="ViewTransition";var ot=s.createContext(new Map);ot.displayName="Fetchers";var lt=s.createContext(null);lt.displayName="Await";var ct=s.createContext(null);ct.displayName="Navigation";var ut=s.createContext(null);ut.displayName="Location";var ht=s.createContext({outlet:null,matches:[],isDataRoute:!1});ht.displayName="Route";var dt=s.createContext(null);dt.displayName="RouteError";function pt(){return null!=s.useContext(ut)}function ft(){return x(pt(),"useLocation() may be used only in the context of a <Router> component."),s.useContext(ut).location}var gt="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mt(t){s.useContext(ct).static||s.useLayoutEffect(t)}function vt(){let{isDataRoute:t}=s.useContext(ht);return t?function(){let{router:t}=Ct("useNavigate"),e=Tt("useNavigate"),n=s.useRef(!1);mt(()=>{n.current=!0});let i=s.useCallback(async function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_(n.current,gt),n.current&&("number"===typeof i?t.navigate(i):await t.navigate(i,d({fromRouteId:e},r)))},[t,e]);return i}():function(){x(pt(),"useNavigate() may be used only in the context of a <Router> component.");let t=s.useContext(it),{basename:e,navigator:n}=s.useContext(ct),{matches:i}=s.useContext(ht),{pathname:r}=ft(),a=JSON.stringify(K(i)),o=s.useRef(!1);mt(()=>{o.current=!0});let l=s.useCallback(function(i){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_(o.current,gt),!o.current)return;if("number"===typeof i)return void n.go(i);let l=Y(i,JSON.parse(a),r,"path"===s.relative);null==t&&"/"!==e&&(l.pathname="/"===l.pathname?e:Q([e,l.pathname])),(s.replace?n.replace:n.push)(l,s.state,s)},[e,n,a,r,t]);return l}()}s.createContext(null);function yt(){let{matches:t}=s.useContext(ht),e=t[t.length-1];return e?e.params:{}}function bt(t){let{relative:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=s.useContext(ht),{pathname:i}=ft(),r=JSON.stringify(K(n));return s.useMemo(()=>Y(t,JSON.parse(r),i,"path"===e),[t,r,i,e])}function wt(t,e,n,i,r){x(pt(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=s.useContext(ct),{matches:o}=s.useContext(ht),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let t=p&&p.path||"";Dt(u,!p||t.endsWith("*")||t.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(t,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(t,'"> to <Route path="').concat("/"===t?"*":"".concat(t,"/*"),'">.'))}let f,g=ft();if(e){var m;let t="string"===typeof e?E(e):e;x("/"===h||(null===(m=t.pathname)||void 0===m?void 0:m.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(t.pathname,'" was given in the `location` prop.')),f=t}else f=g;let v=f.pathname||"/",y=v;if("/"!==h){let t=h.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(t.length).join("/")}let b=T(t,{pathname:y});_(p||null!=b,'No routes matched location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" ')),_(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let w=St(b&&b.map(t=>Object.assign({},t,{params:Object.assign({},c,t.params),pathname:Q([h,a.encodeLocation?a.encodeLocation(t.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?h:Q([h,a.encodeLocation?a.encodeLocation(t.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:t.pathnameBase])})),o,n,i,r);return e&&w?s.createElement(ut.Provider,{value:{location:d({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:"POP"}},w):w}function xt(){let t=Rt(),e=tt(t)?"".concat(t.status," ").concat(t.statusText):t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=s.createElement(s.Fragment,null,s.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),s.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",s.createElement("code",{style:a},"ErrorBoundary")," or"," ",s.createElement("code",{style:a},"errorElement")," prop on your route.")),s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},e),n?s.createElement("pre",{style:r},n):null,o)}var _t=s.createElement(xt,null),kt=class extends s.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return void 0!==this.state.error?s.createElement(ht.Provider,{value:this.props.routeContext},s.createElement(dt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function At(t){let{routeContext:e,match:n,children:i}=t,r=s.useContext(it);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(ht.Provider,{value:e},i)}function St(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==t){if(!n)return null;if(n.errors)t=n.matches;else{if(0!==e.length||n.initialized||!(n.matches.length>0))return null;t=n.matches}}let r=t,a=null===n||void 0===n?void 0:n.errors;if(null!=a){let t=r.findIndex(t=>t.route.id&&void 0!==(null===a||void 0===a?void 0:a[t.route.id]));x(t>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(a).join(","))),r=r.slice(0,Math.min(r.length,t+1))}let o=!1,l=-1;if(n)for(let s=0;s<r.length;s++){let t=r[s];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=s),t.route.id){let{loaderData:e,errors:i}=n,s=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!i||void 0===i[t.route.id]);if(t.route.lazy||s){o=!0,r=l>=0?r.slice(0,l+1):[r[0]];break}}}return r.reduceRight((t,c,u)=>{let h,d=!1,p=null,f=null;n&&(h=a&&c.route.id?a[c.route.id]:void 0,p=c.route.errorElement||_t,o&&(l<0&&0===u?(Dt("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):l===u&&(d=!0,f=c.route.hydrateFallbackElement||null)));let g=e.concat(r.slice(0,u+1)),m=()=>{let e;return e=h?p:d?f:c.route.Component?s.createElement(c.route.Component,null):c.route.element?c.route.element:t,s.createElement(At,{match:c,routeContext:{outlet:t,matches:g,isDataRoute:null!=n},children:e})};return n&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?s.createElement(kt,{location:n.location,revalidation:n.revalidation,component:p,error:h,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0},unstable_onError:i}):m()},null)}function Et(t){return"".concat(t," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ct(t){let e=s.useContext(it);return x(e,Et(t)),e}function Mt(t){let e=s.useContext(rt);return x(e,Et(t)),e}function Tt(t){let e=function(t){let e=s.useContext(ht);return x(e,Et(t)),e}(t),n=e.matches[e.matches.length-1];return x(n.route.id,"".concat(t,' can only be used on routes that contain a unique "id"')),n.route.id}function Rt(){var t;let e=s.useContext(dt),n=Mt("useRouteError"),i=Tt("useRouteError");return void 0!==e?e:null===(t=n.errors)||void 0===t?void 0:t[i]}var Pt={};function Dt(t,e,n){e||Pt[t]||(Pt[t]=!0,_(!1,n))}var Lt={};function Nt(t,e){t||Lt[e]||(Lt[e]=!0,console.warn(e))}s.memo(function(t){let{routes:e,future:n,state:i,unstable_onError:r}=t;return wt(e,void 0,i,r,n)});function It(t){x(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ft(t){let{basename:e="/",children:n=null,location:i,navigationType:r="POP",navigator:a,static:o=!1}=t;x(!pt(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=s.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);"string"===typeof i&&(i=E(i));let{pathname:u="/",search:h="",hash:d="",state:p=null,key:f="default"}=i,g=s.useMemo(()=>{let t=G(u,l);return null==t?null:{location:{pathname:t,search:h,hash:d,state:p,key:f},navigationType:r}},[l,u,h,d,p,f,r]);return _(null!=g,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(h).concat(d,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:s.createElement(ct.Provider,{value:c},s.createElement(ut.Provider,{children:n,value:g}))}function Ot(t){let{children:e,location:n}=t;return wt(Bt(e),n)}s.Component;function Bt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return s.Children.forEach(t,(t,i)=>{if(!s.isValidElement(t))return;let r=[...e,i];if(t.type===s.Fragment)return void n.push.apply(n,Bt(t.props.children,r));x(t.type===It,"[".concat("string"===typeof t.type?t.type:t.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),x(!t.props.index||!t.props.children,"An index route cannot have child routes.");let a={id:t.props.id||r.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,middleware:t.props.middleware,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=Bt(t.props.children,r)),n.push(a)}),n}var Wt="get",jt="application/x-www-form-urlencoded";function Ut(t){return null!=t&&"string"===typeof t.tagName}var zt=null;var Ht=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vt(t){return null==t||Ht.has(t)?t:(_(!1,'"'.concat(t,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(jt,'"')),null)}function Gt(t,e){let n,i,r,s,a;if(Ut(o=t)&&"form"===o.tagName.toLowerCase()){let a=t.getAttribute("action");i=a?G(a,e):null,n=t.getAttribute("method")||Wt,r=Vt(t.getAttribute("enctype"))||jt,s=new FormData(t)}else if(function(t){return Ut(t)&&"button"===t.tagName.toLowerCase()}(t)||function(t){return Ut(t)&&"input"===t.tagName.toLowerCase()}(t)&&("submit"===t.type||"image"===t.type)){let a=t.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=t.getAttribute("formaction")||a.getAttribute("action");if(i=o?G(o,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Wt,r=Vt(t.getAttribute("formenctype"))||Vt(a.getAttribute("enctype"))||jt,s=new FormData(a,t),!function(){if(null===zt)try{new FormData(document.createElement("form"),0),zt=!1}catch(t){zt=!0}return zt}()){let{name:e,type:n,value:i}=t;if("image"===n){let t=e?"".concat(e,"."):"";s.append("".concat(t,"x"),"0"),s.append("".concat(t,"y"),"0")}else e&&s.append(e,i)}}else{if(Ut(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Wt,i=null,r=jt,a=t}var o;return s&&"text/plain"===r&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function qt(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}Symbol("SingleFetchRedirect");function Xt(t,e,n){let i="string"===typeof t?new URL(t,"undefined"===typeof window?"server://singlefetch/":window.location.origin):t;return"/"===i.pathname?i.pathname="_root.".concat(n):e&&"/"===G(i.pathname,e)?i.pathname="".concat(e.replace(/\/$/,""),"/_root.").concat(n):i.pathname="".concat(i.pathname.replace(/\/$/,""),".").concat(n),i}async function Kt(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error("Error loading route module `".concat(t.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Yt(t){return null!=t&&"string"===typeof t.page}function Qt(t){return null!=t&&(null==t.href?"preload"===t.rel&&"string"===typeof t.imageSrcSet&&"string"===typeof t.imageSizes:"string"===typeof t.rel&&"string"===typeof t.href)}function $t(t,e,n,i,r,s){let a=(t,e)=>!n[e]||t.route.id!==n[e].route.id,o=(t,e)=>{var i;return n[e].pathname!==t.pathname||(null===(i=n[e].route.path)||void 0===i?void 0:i.endsWith("*"))&&n[e].params["*"]!==t.params["*"]};return"assets"===s?e.filter((t,e)=>a(t,e)||o(t,e)):"data"===s?e.filter((e,s)=>{let l=i.routes[e.route.id];if(!l||!l.hasLoader)return!1;if(a(e,s)||o(e,s))return!0;if(e.route.shouldRevalidate){var c;let i=e.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(t,window.origin),nextParams:e.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0}):[]}function Jt(t,e){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=t.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1),[...new Set(i)];var i}function Zt(t,e){let n=new Set,i=new Set(e);return t.reduce((t,r)=>{if(e&&!Yt(r)&&"script"===r.as&&r.href&&i.has(r.href))return t;let s=JSON.stringify(function(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}(r));return n.has(s)||(n.add(s),t.push({key:s,link:r})),t},[])}function te(t,e){return"lazy"===t.mode&&!0===e}function ee(){let t=s.useContext(it);return qt(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ne(){let t=s.useContext(rt);return qt(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ie=s.createContext(void 0);function re(){let t=s.useContext(ie);return qt(t,"You must render this element inside a <HydratedRouter> element"),t}function se(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function ae(t,e,n){if(n&&!ue)return[t[0]];if(e){let n=t.findIndex(t=>void 0!==e[t.route.id]);return t.slice(0,n+1)}return t}ie.displayName="FrameworkContext";function oe(t){let{page:e}=t,n=o(t,f),{router:i}=ee(),r=s.useMemo(()=>T(i.routes,e,i.basename),[i.routes,e,i.basename]);return r?s.createElement(ce,d({page:e,matches:r},n)):null}function le(t){let{manifest:e,routeModules:n}=re(),[i,r]=s.useState([]);return s.useEffect(()=>{let i=!1;return async function(t,e,n){return Zt((await Promise.all(t.map(async t=>{let i=e.routes[t.route.id];if(i){let t=await Kt(i,n);return t.links?t.links():[]}return[]}))).flat(1).filter(Qt).filter(t=>"stylesheet"===t.rel||"preload"===t.rel).map(t=>"stylesheet"===t.rel?d(d({},t),{},{rel:"prefetch",as:"style"}):d(d({},t),{},{rel:"prefetch"})))}(t,e,n).then(t=>{i||r(t)}),()=>{i=!0}},[t,e,n]),i}function ce(t){let{page:e,matches:n}=t,i=o(t,g),r=ft(),{manifest:a,routeModules:l}=re(),{basename:c}=ee(),{loaderData:u,matches:h}=ne(),p=s.useMemo(()=>$t(e,n,h,a,r,"data"),[e,n,h,a,r]),f=s.useMemo(()=>$t(e,n,h,a,r,"assets"),[e,n,h,a,r]),m=s.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let t=new Set,i=!1;if(n.forEach(e=>{var n;let r=a.routes[e.route.id];r&&r.hasLoader&&(!p.some(t=>t.route.id===e.route.id)&&e.route.id in u&&null!==(n=l[e.route.id])&&void 0!==n&&n.shouldRevalidate||r.hasClientLoader?i=!0:t.add(e.route.id))}),0===t.size)return[];let s=Xt(e,c,"data");return i&&t.size>0&&s.searchParams.set("_routes",n.filter(e=>t.has(e.route.id)).map(t=>t.route.id).join(",")),[s.pathname+s.search]},[c,u,r,a,p,n,e,l]),v=s.useMemo(()=>Jt(f,a),[f,a]),y=le(f);return s.createElement(s.Fragment,null,m.map(t=>s.createElement("link",d({key:t,rel:"prefetch",as:"fetch",href:t},i))),v.map(t=>s.createElement("link",d({key:t,rel:"modulepreload",href:t},i))),y.map(t=>{let{key:e,link:n}=t;return s.createElement("link",d({key:e,nonce:i.nonce},n))}))}var ue=!1;function he(t){let{manifest:e,serverHandoffString:n,isSpaMode:i,renderMeta:r,routeDiscovery:a,ssr:l}=re(),{router:c,static:u,staticContext:h}=ee(),{matches:f}=ne(),g=s.useContext(st),m=te(a,l);r&&(r.didRenderScripts=!0);let v=ae(f,null,i);s.useEffect(()=>{ue=!0},[]);let y=s.useMemo(()=>{var i;if(g)return null;let r=h?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",a=u?"".concat(null!==(i=e.hmr)&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(e.hmr.runtime),";"):"").concat(m?"":"import ".concat(JSON.stringify(e.url)),";\n").concat(v.map((t,n)=>{let i="route".concat(n),r=e.routes[t.route.id];qt(r,"Route ".concat(t.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=r,u=[...s?[{module:s,varName:"".concat(i,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(i,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(i,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(i,"_HydrateFallback")}]:[],{module:c,varName:"".concat(i,"_main")}];return 1===u.length?"import * as ".concat(i," from ").concat(JSON.stringify(c),";"):[u.map(t=>"import * as ".concat(t.varName,' from "').concat(t.module,'";')).join("\n"),"const ".concat(i," = {").concat(u.map(t=>"...".concat(t.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(m?"window.__reactRouterManifest = ".concat(JSON.stringify(function(t,e){let{sri:n}=t,i=o(t,p),r=new Set(e.state.matches.map(t=>t.route.id)),s=e.state.location.pathname.split("/").filter(Boolean),a=["/"];for(s.pop();s.length>0;)a.push("/".concat(s.join("/"))),s.pop();a.forEach(t=>{let n=T(e.routes,t,e.basename);n&&n.forEach(t=>r.add(t.route.id))});let l=[...r].reduce((t,e)=>Object.assign(t,{[e]:i.routes[e]}),{});return d(d({},i),{},{routes:l,sri:!!n||void 0})}(e,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((t,e)=>"".concat(JSON.stringify(t.route.id),":route").concat(e)).join(","),"};\n\nimport(").concat(JSON.stringify(e.entry.module),");"):" ";return s.createElement(s.Fragment,null,s.createElement("script",d(d({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:r},type:void 0})),s.createElement("script",d(d({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:"module",async:!0})))},[]),b=ue||g?[]:(w=e.entry.imports.concat(Jt(v,e,{includeHydrateFallback:!0})),[...new Set(w)]);var w;let x="object"===typeof e.sri?e.sri:{};return Nt(!g,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ue||g?null:s.createElement(s.Fragment,null,"object"===typeof e.sri?s.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}}):null,m?null:s.createElement("link",{rel:"modulepreload",href:e.url,crossOrigin:t.crossOrigin,integrity:x[e.url],suppressHydrationWarning:!0}),s.createElement("link",{rel:"modulepreload",href:e.entry.module,crossOrigin:t.crossOrigin,integrity:x[e.entry.module],suppressHydrationWarning:!0}),b.map(e=>s.createElement("link",{key:e,rel:"modulepreload",href:e,crossOrigin:t.crossOrigin,integrity:x[e],suppressHydrationWarning:!0})),y)}function de(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return t=>{e.forEach(e=>{"function"===typeof e?e(t):null!=e&&(e.current=t)})}}s.Component;function pe(t){let{error:e,isOutsideRemixApp:n}=t;console.error(e);let i,r=s.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(tt(e))return s.createElement(fe,{title:"Unhandled Thrown Response!"},s.createElement("h1",{style:{fontSize:"24px"}},e.status," ",e.statusText),r);if(e instanceof Error)i=e;else{let t=null==e?"Unknown Error":"object"===typeof e&&"toString"in e?e.toString():JSON.stringify(e);i=new Error(t)}return s.createElement(fe,{title:"Application Error!",isOutsideRemixApp:n},s.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),s.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),r)}function fe(t){var e;let{title:n,renderScripts:i,isOutsideRemixApp:r,children:a}=t,{routeModules:o}=re();return null!==(e=o.root)&&void 0!==e&&e.Layout&&!r?a:s.createElement("html",{lang:"en"},s.createElement("head",null,s.createElement("meta",{charSet:"utf-8"}),s.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),s.createElement("title",null,n)),s.createElement("body",null,s.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,i?s.createElement(he,null):null)))}var ge="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ge&&(window.__reactRouterVersion="7.9.4")}catch(Hk){}function me(t){let{basename:e,children:n,window:i}=t,r=s.useRef();null==r.current&&(r.current=w({window:i,v5Compat:!0}));let a=r.current,[o,l]=s.useState({action:a.action,location:a.location}),c=s.useCallback(t=>{s.startTransition(()=>l(t))},[l]);return s.useLayoutEffect(()=>a.listen(c),[a,c]),s.createElement(Ft,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a})}var ve=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ye=s.forwardRef(function(t,e){let n,{onClick:i,discover:r="render",prefetch:a="none",relative:l,reloadDocument:c,replace:u,state:h,target:p,to:f,preventScrollReset:g,viewTransition:v}=t,y=o(t,m),{basename:b}=s.useContext(ct),w="string"===typeof f&&ve.test(f),k=!1;if("string"===typeof f&&w&&(n=f,ge))try{let t=new URL(window.location.href),e=f.startsWith("//")?new URL(t.protocol+f):new URL(f),n=G(e.pathname,b);e.origin===t.origin&&null!=n?f=n+e.search+e.hash:k=!0}catch(Hk){_(!1,'<Link to="'.concat(f,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let A=function(t){let{relative:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(pt(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=s.useContext(ct),{hash:r,pathname:a,search:o}=bt(t,{relative:e}),l=a;return"/"!==n&&(l="/"===a?n:Q([n,a])),i.createHref({pathname:l,search:o,hash:r})}(f,{relative:l}),[E,C,M]=function(t,e){let n=s.useContext(ie),[i,r]=s.useState(!1),[a,o]=s.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=e,p=s.useRef(null);s.useEffect(()=>{if("render"===t&&o(!0),"viewport"===t){let t=new IntersectionObserver(t=>{t.forEach(t=>{o(t.isIntersecting)})},{threshold:.5});return p.current&&t.observe(p.current),()=>{t.disconnect()}}},[t]),s.useEffect(()=>{if(i){let t=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(t)}}},[i]);let f=()=>{r(!0)},g=()=>{r(!1),o(!1)};return n?"intent"!==t?[a,p,{}]:[a,p,{onFocus:se(l,f),onBlur:se(c,g),onMouseEnter:se(u,f),onMouseLeave:se(h,g),onTouchStart:se(d,f)}]:[!1,p,{}]}(a,y),T=function(t){let{target:e,replace:n,state:i,preventScrollReset:r,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=vt(),c=ft(),u=bt(t,{relative:a});return s.useCallback(s=>{if(function(t,e){return 0===t.button&&(!e||"_self"===e)&&!function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)}(s,e)){s.preventDefault();let e=void 0!==n?n:S(c)===S(u);l(t,{replace:e,state:i,preventScrollReset:r,relative:a,viewTransition:o})}},[c,l,u,n,i,e,t,r,a,o])}(f,{replace:u,state:h,target:p,preventScrollReset:g,relative:l,viewTransition:v});let R=s.createElement("a",d(d(d({},y),M),{},{href:n||A,onClick:k||c?i:function(t){i&&i(t),t.defaultPrevented||T(t)},ref:de(e,C),target:p,"data-discover":w||"render"!==r?void 0:"true"}));return E&&!w?s.createElement(s.Fragment,null,R,s.createElement(oe,{page:A})):R});ye.displayName="Link",s.forwardRef(function(t,e){let{"aria-current":n="page",caseSensitive:i=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:u,children:h}=t,p=o(t,v),f=bt(c,{relative:p.relative}),g=ft(),m=s.useContext(rt),{navigator:y,basename:b}=s.useContext(ct),w=null!=m&&function(t){let{relative:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.useContext(at);x(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=xe("useViewTransitionState"),r=bt(t,{relative:e});if(!n.isTransitioning)return!1;let a=G(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=G(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=z(r.pathname,o)||null!=z(r.pathname,a)}(f)&&!0===u,_=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,k=g.pathname,A=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(k=k.toLowerCase(),A=A?A.toLowerCase():null,_=_.toLowerCase()),A&&b&&(A=G(A,b)||A);const S="/"!==_&&_.endsWith("/")?_.length-1:_.length;let E,C=k===_||!a&&k.startsWith(_)&&"/"===k.charAt(S),M=null!=A&&(A===_||!a&&A.startsWith(_)&&"/"===A.charAt(_.length)),T={isActive:C,isPending:M,isTransitioning:w},R=C?n:void 0;E="function"===typeof r?r(T):[r,C?"active":null,M?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let P="function"===typeof l?l(T):l;return s.createElement(ye,d(d({},p),{},{"aria-current":R,className:E,ref:e,style:P,to:c,viewTransition:u}),"function"===typeof h?h(T):h)}).displayName="NavLink";var be=s.forwardRef((t,e)=>{let{discover:n="render",fetcherKey:i,navigate:r,reloadDocument:a,replace:l,state:c,method:u=Wt,action:h,onSubmit:p,relative:f,preventScrollReset:g,viewTransition:m}=t,v=o(t,y),b=Ae(),w=function(t){let{relative:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=s.useContext(ct),i=s.useContext(ht);x(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a=d({},bt(t||".",{relative:e})),o=ft();if(null==t){a.search=o.search;let t=new URLSearchParams(a.search),e=t.getAll("index");if(e.some(t=>""===t)){t.delete("index"),e.filter(t=>t).forEach(e=>t.append("index",e));let n=t.toString();a.search=n?"?".concat(n):""}}t&&"."!==t||!r.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:Q([n,a.pathname]));return S(a)}(h,{relative:f}),_="get"===u.toLowerCase()?"get":"post",k="string"===typeof h&&ve.test(h);return s.createElement("form",d(d({ref:e,method:_,action:w,onSubmit:a?p:t=>{if(p&&p(t),t.defaultPrevented)return;t.preventDefault();let e=t.nativeEvent.submitter,n=(null===e||void 0===e?void 0:e.getAttribute("formmethod"))||u;b(e||t.currentTarget,{fetcherKey:i,method:n,navigate:r,replace:l,state:c,relative:f,preventScrollReset:g,viewTransition:m})}},v),{},{"data-discover":k||"render"!==n?void 0:"true"}))});function we(t){return"".concat(t," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function xe(t){let e=s.useContext(it);return x(e,we(t)),e}be.displayName="Form";var _e=0,ke=()=>"__".concat(String(++_e),"__");function Ae(){let{router:t}=xe("useSubmit"),{basename:e}=s.useContext(ct),n=Tt("useRouteId");return s.useCallback(async function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:a,encType:o,formData:l,body:c}=Gt(i,e);if(!1===r.navigate){let e=r.fetcherKey||ke();await t.fetch(e,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}var Se=n(579);function Ee(){return(0,Se.jsx)("header",{className:"fixed top-0 left-0 w-full z-50 bg-gradient-to-b from-[#5b4a3e]/80 to-[#5b4a3e]/40 backdrop-blur-lg text-white shadow-md",children:(0,Se.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between px-6 sm:px-10 py-5 md:py-6",children:[(0,Se.jsxs)("div",{className:"flex items-center gap-4 md:gap-6",children:[(0,Se.jsx)("img",{src:"/assets/logo.png",alt:"Logo",className:"w-14 h-14 md:w-16 md:h-16 rounded-2xl bg-white/85 p-2 shadow-lg ring-1 ring-white/30"}),(0,Se.jsx)("h1",{className:"text-lg md:text-2xl font-bold tracking-wide drop-shadow-sm",children:"The Culture Read @CNX"})]}),(0,Se.jsxs)("nav",{className:"hidden md:flex items-center gap-9",children:[(0,Se.jsx)(ye,{className:"navlink",to:"/",children:"\u0e2b\u0e19\u0e49\u0e32\u0e2b\u0e25\u0e31\u0e01"}),(0,Se.jsx)(ye,{className:"navlink",to:"/books",children:"\u0e2b\u0e19\u0e31\u0e07\u0e2a\u0e37\u0e2d"}),(0,Se.jsx)(ye,{className:"navlink",to:"/articles",children:"\u0e1a\u0e17\u0e04\u0e27\u0e32\u0e21"}),(0,Se.jsx)(ye,{className:"navlink",to:"/events",children:"\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21"}),(0,Se.jsx)(ye,{className:"navlink",to:"/about",children:"\u0e40\u0e01\u0e35\u0e48\u0e22\u0e27\u0e01\u0e31\u0e1a\u0e42\u0e04\u0e23\u0e07\u0e01\u0e32\u0e23"})]}),(0,Se.jsx)("button",{className:"md:hidden p-3 rounded-lg hover:bg-white/20 transition",children:(0,Se.jsx)("span",{className:"material-symbols-outlined text-white text-2xl",children:"menu"})})]})})}function Ce(t){let{query:e,setQuery:n,onSearch:i}=t;const r=[{img:"/assets/hero.jpg"},{img:"/assets/hero2.jpeg"},{img:"/assets/hero3.jpg"}],[a,o]=(0,s.useState)(0);(0,s.useEffect)(()=>{const t=setInterval(()=>o(t=>(t+1)%r.length),5e3);return()=>clearInterval(t)},[r.length]);const l=r[a];return(0,Se.jsxs)("section",{className:"relative w-full h-[520px] md:h-[620px] overflow-hidden",children:[(0,Se.jsx)("img",{src:l.img,alt:"",className:"absolute inset-0 w-full h-full object-cover"}),(0,Se.jsxs)("div",{className:"relative z-10 h-full flex items-center justify-center px-4",children:[(0,Se.jsx)("div",{className:"max-w-4xl w-full text-center rounded-2xl shadow-lg p-6 md:p-10",children:(0,Se.jsxs)("form",{className:"mt-6 flex w-full max-w-xl mx-auto",onSubmit:t=>{t.preventDefault(),null===i||void 0===i||i()},children:[(0,Se.jsx)("input",{className:"flex-1 h-12 md:h-14 px-4 rounded-l-lg border border-gray-300 focus:outline-none",placeholder:"\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e2b\u0e19\u0e31\u0e07\u0e2a\u0e37\u0e2d \u0e1a\u0e17\u0e04\u0e27\u0e32\u0e21 \u0e2b\u0e23\u0e37\u0e2d\u0e04\u0e2d\u0e25\u0e40\u0e25\u0e01\u0e0a\u0e31\u0e19...",value:e,onChange:t=>n(t.target.value),"aria-label":"\u0e04\u0e49\u0e19\u0e2b\u0e32"}),(0,Se.jsx)("button",{type:"submit",className:"px-5 rounded-r-lg bg-accent text-white font-bold",children:"Search"})]})}),(0,Se.jsx)("div",{className:"absolute bottom-4 md:bottom-6 left-1/2 -translate-x-1/2 flex gap-2",children:r.map((t,e)=>(0,Se.jsx)("span",{className:"w-3 h-3 rounded-full transition-all ".concat(e===a?"bg-accent scale-110":"bg-white/60")},e))})]})]})}const Me=t=>{var e;const n=null===t||void 0===t||null===(e=t["o:created"])||void 0===e?void 0:e["@value"];if(!n)return"-";return new Date(n).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})};function Te(t){let{item:e,onOpen:n}=t;const i=(t=>{var e,n;return t["o:title"]||(null===(e=t["dcterms:title"])||void 0===e||null===(n=e[0])||void 0===n?void 0:n["@value"])||"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e0a\u0e37\u0e48\u0e2d\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23"})(e),r=(t=>{var e,n,i,r;return(null===(e=t["dcterms:abstract"])||void 0===e||null===(n=e[0])||void 0===n?void 0:n["@value"])||(null===(i=t["dcterms:description"])||void 0===i||null===(r=i[0])||void 0===r?void 0:r["@value"])||""})(e),s=(t=>{var e,n,i;return(null===t||void 0===t||null===(e=t.thumbnail_display_urls)||void 0===e?void 0:e.large)||(null===t||void 0===t||null===(n=t.thumbnail_display_urls)||void 0===n?void 0:n.medium)||(null===t||void 0===t||null===(i=t.thumbnail_display_urls)||void 0===i?void 0:i.square)||null})(e);return(0,Se.jsxs)("article",{className:"flex flex-col h-full bg-[#fffdf6] border border-[#f1e9de] rounded-md shadow-sm",children:[(0,Se.jsx)("div",{className:"w-full bg-[#eee2d3]",children:(0,Se.jsx)("div",{className:"relative w-full aspect-[4/3] flex items-center justify-center",children:s?(0,Se.jsx)("img",{src:s,alt:i,className:"w-full h-full object-contain",loading:"lazy"}):(0,Se.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-[#efe7db] to-[#faefe1]"})})}),(0,Se.jsxs)("div",{className:"p-4 flex flex-col gap-2",children:[(0,Se.jsx)("h3",{className:"text-[#5b4a3e] font-semibold leading-snug",children:i}),(0,Se.jsxs)("div",{className:"text-xs text-[#a36a46]",children:["\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e23\u0e49\u0e32\u0e07: ",Me(e)]}),(0,Se.jsx)("p",{className:"text-sm text-[#6c5b4a] line-clamp-3",children:r}),(0,Se.jsx)("div",{className:"mt-2",children:(0,Se.jsxs)("button",{onClick:()=>n(e),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded bg-[#d8653b] text-white text-sm font-semibold hover:bg-[#c85a32]",children:["\u0e40\u0e1b\u0e34\u0e14\u0e2d\u0e48\u0e32\u0e19 PDF",(0,Se.jsx)("span",{className:"material-symbols-outlined text-base",children:"picture_as_pdf"})]})})]})]})}function Re(){return(0,Se.jsx)("footer",{className:"bg-white border-t border-gray-200 px-4 sm:px-10 lg:px-40 py-8",children:(0,Se.jsxs)("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,Se.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,Se.jsx)("h3",{className:"text-[#111518] text-lg font-bold",children:"The Culture Read @CNX"}),(0,Se.jsx)("p",{className:"text-[#637c88] text-sm",children:"\xa9 2025 The Culture Read @CNX. All rights reserved."})]}),(0,Se.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,Se.jsx)("h4",{className:"font-semibold",children:"\u0e2b\u0e31\u0e27\u0e02\u0e49\u0e2d 1"}),(0,Se.jsx)("a",{className:"text-sm hover:underline",href:"/topic/1-1",children:"1.1"}),(0,Se.jsx)("a",{className:"text-sm hover:underline",href:"/topic/1-2",children:"1.2"}),(0,Se.jsx)("a",{className:"text-sm hover:underline",href:"/topic/1-3",children:"1.3"})]}),(0,Se.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,Se.jsx)("h4",{className:"font-semibold",children:"\u0e2b\u0e31\u0e27\u0e02\u0e49\u0e2d 2"}),(0,Se.jsx)("a",{className:"text-sm hover:underline",href:"/topic/2-1",children:"2.1"}),(0,Se.jsx)("a",{className:"text-sm hover:underline",href:"/topic/2-2",children:"2.2"})]}),(0,Se.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,Se.jsx)("h4",{className:"font-semibold",children:"Developers"}),(0,Se.jsx)("a",{className:"text-sm hover:underline",href:"/status",children:"API Status"})]})]})})}function Pe(t,e){return function(){return t.apply(e,arguments)}}const{toString:De}=Object.prototype,{getPrototypeOf:Le}=Object,{iterator:Ne,toStringTag:Ie}=Symbol,Fe=(Oe=Object.create(null),t=>{const e=De.call(t);return Oe[e]||(Oe[e]=e.slice(8,-1).toLowerCase())});var Oe;const Be=t=>(t=t.toLowerCase(),e=>Fe(e)===t),We=t=>e=>typeof e===t,{isArray:je}=Array,Ue=We("undefined");function ze(t){return null!==t&&!Ue(t)&&null!==t.constructor&&!Ue(t.constructor)&&Ge(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const He=Be("ArrayBuffer");const Ve=We("string"),Ge=We("function"),qe=We("number"),Xe=t=>null!==t&&"object"===typeof t,Ke=t=>{if("object"!==Fe(t))return!1;const e=Le(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Ie in t)&&!(Ne in t)},Ye=Be("Date"),Qe=Be("File"),$e=Be("Blob"),Je=Be("FileList"),Ze=Be("URLSearchParams"),[tn,en,nn,rn]=["ReadableStream","Request","Response","Headers"].map(Be);function sn(t,e){let n,i,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),je(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(ze(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),s=i.length;let a;for(n=0;n<s;n++)a=i[n],e.call(null,t[a],a,t)}}function an(t,e){if(ze(t))return null;e=e.toLowerCase();const n=Object.keys(t);let i,r=n.length;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const on="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ln=t=>!Ue(t)&&t!==on;const cn=(un="undefined"!==typeof Uint8Array&&Le(Uint8Array),t=>un&&t instanceof un);var un;const hn=Be("HTMLFormElement"),dn=(t=>{let{hasOwnProperty:e}=t;return(t,n)=>e.call(t,n)})(Object.prototype),pn=Be("RegExp"),fn=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};sn(n,(n,r)=>{let s;!1!==(s=e(n,r,t))&&(i[r]=s||n)}),Object.defineProperties(t,i)};const gn=Be("AsyncFunction"),mn=((t,e)=>{return t?setImmediate:e?(n="axios@".concat(Math.random()),i=[],on.addEventListener("message",t=>{let{source:e,data:r}=t;e===on&&r===n&&i.length&&i.shift()()},!1),t=>{i.push(t),on.postMessage(n,"*")}):t=>setTimeout(t);var n,i})("function"===typeof setImmediate,Ge(on.postMessage)),vn="undefined"!==typeof queueMicrotask?queueMicrotask.bind(on):"undefined"!==typeof process&&process.nextTick||mn,yn={isArray:je,isArrayBuffer:He,isBuffer:ze,isFormData:t=>{let e;return t&&("function"===typeof FormData&&t instanceof FormData||Ge(t.append)&&("formdata"===(e=Fe(t))||"object"===e&&Ge(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&He(t.buffer),e},isString:Ve,isNumber:qe,isBoolean:t=>!0===t||!1===t,isObject:Xe,isPlainObject:Ke,isEmptyObject:t=>{if(!Xe(t)||ze(t))return!1;try{return 0===Object.keys(t).length&&Object.getPrototypeOf(t)===Object.prototype}catch(Hk){return!1}},isReadableStream:tn,isRequest:en,isResponse:nn,isHeaders:rn,isUndefined:Ue,isDate:Ye,isFile:Qe,isBlob:$e,isRegExp:pn,isFunction:Ge,isStream:t=>Xe(t)&&Ge(t.pipe),isURLSearchParams:Ze,isTypedArray:cn,isFileList:Je,forEach:sn,merge:function t(){const{caseless:e,skipUndefined:n}=ln(this)&&this||{},i={},r=(r,s)=>{const a=e&&an(i,s)||s;Ke(i[a])&&Ke(r)?i[a]=t(i[a],r):Ke(r)?i[a]=t({},r):je(r)?i[a]=r.slice():n&&Ue(r)||(i[a]=r)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&sn(arguments[s],r);return i},extend:function(t,e,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return sn(e,(e,i)=>{n&&Ge(e)?t[i]=Pe(e,n):t[i]=e},{allOwnKeys:i}),t},trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,i)=>{let r,s,a;const o={};if(e=e||{},null==t)return e;do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)a=r[s],i&&!i(a,t,e)||o[a]||(e[a]=t[a],o[a]=!0);t=!1!==n&&Le(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:Fe,kindOfTest:Be,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return-1!==i&&i===n},toArray:t=>{if(!t)return null;if(je(t))return t;let e=t.length;if(!qe(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Ne]).call(t);let i;for(;(i=n.next())&&!i.done;){const n=i.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const i=[];for(;null!==(n=t.exec(e));)i.push(n);return i},isHTMLForm:hn,hasOwnProperty:dn,hasOwnProp:dn,reduceDescriptors:fn,freezeMethods:t=>{fn(t,(e,n)=>{if(Ge(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=t[n];Ge(i)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(t,e)=>{const n={},i=t=>{t.forEach(t=>{n[t]=!0})};return je(t)?i(t):i(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,e,n){return e.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(t,e)=>null!=t&&Number.isFinite(t=+t)?t:e,findKey:an,global:on,isContextDefined:ln,isSpecCompliantForm:function(t){return!!(t&&Ge(t.append)&&"FormData"===t[Ie]&&t[Ne])},toJSONObject:t=>{const e=new Array(10),n=(t,i)=>{if(Xe(t)){if(e.indexOf(t)>=0)return;if(ze(t))return t;if(!("toJSON"in t)){e[i]=t;const r=je(t)?[]:{};return sn(t,(t,e)=>{const s=n(t,i+1);!Ue(s)&&(r[e]=s)}),e[i]=void 0,r}}return t};return n(t,0)},isAsyncFn:gn,isThenable:t=>t&&(Xe(t)||Ge(t))&&Ge(t.then)&&Ge(t.catch),setImmediate:mn,asap:vn,isIterable:t=>null!=t&&Ge(t[Ne])};function bn(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}yn.inherits(bn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:yn.toJSONObject(this.config),code:this.code,status:this.status}}});const wn=bn.prototype,xn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{xn[t]={value:t}}),Object.defineProperties(bn,xn),Object.defineProperty(wn,"isAxiosError",{value:!0}),bn.from=(t,e,n,i,r,s)=>{const a=Object.create(wn);yn.toFlatObject(t,a,function(t){return t!==Error.prototype},t=>"isAxiosError"!==t);const o=t&&t.message?t.message:"Error",l=null==e&&t?t.code:e;return bn.call(a,o,l,n,i,r),t&&null==a.cause&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",s&&Object.assign(a,s),a};const _n=bn;function kn(t){return yn.isPlainObject(t)||yn.isArray(t)}function An(t){return yn.endsWith(t,"[]")?t.slice(0,-2):t}function Sn(t,e,n){return t?t.concat(e).map(function(t,e){return t=An(t),!n&&e?"["+t+"]":t}).join(n?".":""):e}const En=yn.toFlatObject(yn,{},null,function(t){return/^is[A-Z]/.test(t)});const Cn=function(t,e,n){if(!yn.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const i=(n=yn.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(t,e){return!yn.isUndefined(e[t])})).metaTokens,r=n.visitor||c,s=n.dots,a=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&yn.isSpecCompliantForm(e);if(!yn.isFunction(r))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(yn.isDate(t))return t.toISOString();if(yn.isBoolean(t))return t.toString();if(!o&&yn.isBlob(t))throw new _n("Blob is not supported. Use a Buffer instead.");return yn.isArrayBuffer(t)||yn.isTypedArray(t)?o&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function c(t,n,r){let o=t;if(t&&!r&&"object"===typeof t)if(yn.endsWith(n,"{}"))n=i?n:n.slice(0,-2),t=JSON.stringify(t);else if(yn.isArray(t)&&function(t){return yn.isArray(t)&&!t.some(kn)}(t)||(yn.isFileList(t)||yn.endsWith(n,"[]"))&&(o=yn.toArray(t)))return n=An(n),o.forEach(function(t,i){!yn.isUndefined(t)&&null!==t&&e.append(!0===a?Sn([n],i,s):null===a?n:n+"[]",l(t))}),!1;return!!kn(t)||(e.append(Sn(r,n,s),l(t)),!1)}const u=[],h=Object.assign(En,{defaultVisitor:c,convertValue:l,isVisitable:kn});if(!yn.isObject(t))throw new TypeError("data must be an object");return function t(n,i){if(!yn.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+i.join("."));u.push(n),yn.forEach(n,function(n,s){!0===(!(yn.isUndefined(n)||null===n)&&r.call(e,n,yn.isString(s)?s.trim():s,i,h))&&t(n,i?i.concat(s):[s])}),u.pop()}}(t),e};function Mn(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(t){return e[t]})}function Tn(t,e){this._pairs=[],t&&Cn(t,this,e)}const Rn=Tn.prototype;Rn.append=function(t,e){this._pairs.push([t,e])},Rn.toString=function(t){const e=t?function(e){return t.call(this,e,Mn)}:Mn;return this._pairs.map(function(t){return e(t[0])+"="+e(t[1])},"").join("&")};const Pn=Tn;function Dn(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ln(t,e,n){if(!e)return t;const i=n&&n.encode||Dn;yn.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(s=r?r(e,n):yn.isURLSearchParams(e)?e.toString():new Pn(e,n).toString(i),s){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+s}return t}const Nn=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){yn.forEach(this.handlers,function(e){null!==e&&t(e)})}},In={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Fn={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Pn,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},On="undefined"!==typeof window&&"undefined"!==typeof document,Bn="object"===typeof navigator&&navigator||void 0,Wn=On&&(!Bn||["ReactNative","NativeScript","NS"].indexOf(Bn.product)<0),jn="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Un=On&&window.location.href||"http://localhost",zn=d(d({},i),Fn);const Hn=function(t){function e(t,n,i,r){let s=t[r++];if("__proto__"===s)return!0;const a=Number.isFinite(+s),o=r>=t.length;if(s=!s&&yn.isArray(i)?i.length:s,o)return yn.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!a;i[s]&&yn.isObject(i[s])||(i[s]=[]);return e(t,n,i[s],r)&&yn.isArray(i[s])&&(i[s]=function(t){const e={},n=Object.keys(t);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],e[s]=t[s];return e}(i[s])),!a}if(yn.isFormData(t)&&yn.isFunction(t.entries)){const n={};return yn.forEachEntry(t,(t,i)=>{e(function(t){return yn.matchAll(/\w+|\[(\w*)]/g,t).map(t=>"[]"===t[0]?"":t[1]||t[0])}(t),i,n,0)}),n}return null};const Vn={transitional:In,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,r=yn.isObject(t);r&&yn.isHTMLForm(t)&&(t=new FormData(t));if(yn.isFormData(t))return i?JSON.stringify(Hn(t)):t;if(yn.isArrayBuffer(t)||yn.isBuffer(t)||yn.isStream(t)||yn.isFile(t)||yn.isBlob(t)||yn.isReadableStream(t))return t;if(yn.isArrayBufferView(t))return t.buffer;if(yn.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Cn(t,new zn.classes.URLSearchParams,d({visitor:function(t,e,n,i){return zn.isNode&&yn.isBuffer(t)?(this.append(e,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((s=yn.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Cn(s?{"files[]":t}:t,e&&new e,this.formSerializer)}}return r||i?(e.setContentType("application/json",!1),function(t,e,n){if(yn.isString(t))try{return(e||JSON.parse)(t),yn.trim(t)}catch(Hk){if("SyntaxError"!==Hk.name)throw Hk}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||Vn.transitional,n=e&&e.forcedJSONParsing,i="json"===this.responseType;if(yn.isResponse(t)||yn.isReadableStream(t))return t;if(t&&yn.isString(t)&&(n&&!this.responseType||i)){const n=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(Hk){if(n){if("SyntaxError"===Hk.name)throw _n.from(Hk,_n.ERR_BAD_RESPONSE,this,null,this.response);throw Hk}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zn.classes.FormData,Blob:zn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};yn.forEach(["delete","get","head","post","put","patch"],t=>{Vn.headers[t]={}});const Gn=Vn,qn=yn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Xn=Symbol("internals");function Kn(t){return t&&String(t).trim().toLowerCase()}function Yn(t){return!1===t||null==t?t:yn.isArray(t)?t.map(Yn):String(t)}function Qn(t,e,n,i,r){return yn.isFunction(i)?i.call(this,e,n):(r&&(e=n),yn.isString(e)?yn.isString(i)?-1!==e.indexOf(i):yn.isRegExp(i)?i.test(e):void 0:void 0)}class $n{constructor(t){t&&this.set(t)}set(t,e,n){const i=this;function r(t,e,n){const r=Kn(e);if(!r)throw new Error("header name must be a non-empty string");const s=yn.findKey(i,r);(!s||void 0===i[s]||!0===n||void 0===n&&!1!==i[s])&&(i[s||e]=Yn(t))}const s=(t,e)=>yn.forEach(t,(t,n)=>r(t,n,e));if(yn.isPlainObject(t)||t instanceof this.constructor)s(t,e);else if(yn.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))s((t=>{const e={};let n,i,r;return t&&t.split("\n").forEach(function(t){r=t.indexOf(":"),n=t.substring(0,r).trim().toLowerCase(),i=t.substring(r+1).trim(),!n||e[n]&&qn[n]||("set-cookie"===n?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e})(t),e);else if(yn.isObject(t)&&yn.isIterable(t)){let n,i,r={};for(const e of t){if(!yn.isArray(e))throw TypeError("Object iterator must return a key-value pair");r[i=e[0]]=(n=r[i])?yn.isArray(n)?[...n,e[1]]:[n,e[1]]:e[1]}s(r,e)}else null!=t&&r(e,t,n);return this}get(t,e){if(t=Kn(t)){const n=yn.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}(t);if(yn.isFunction(e))return e.call(this,t,n);if(yn.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Kn(t)){const n=yn.findKey(this,t);return!(!n||void 0===this[n]||e&&!Qn(0,this[n],n,e))}return!1}delete(t,e){const n=this;let i=!1;function r(t){if(t=Kn(t)){const r=yn.findKey(n,t);!r||e&&!Qn(0,n[r],r,e)||(delete n[r],i=!0)}}return yn.isArray(t)?t.forEach(r):r(t),i}clear(t){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const r=e[n];t&&!Qn(0,this[r],r,t,!0)||(delete this[r],i=!0)}return i}normalize(t){const e=this,n={};return yn.forEach(this,(i,r)=>{const s=yn.findKey(n,r);if(s)return e[s]=Yn(i),void delete e[r];const a=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}(r):String(r).trim();a!==r&&delete e[r],e[a]=Yn(i),n[a]=!0}),this}concat(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.constructor.concat(this,...e)}toJSON(t){const e=Object.create(null);return yn.forEach(this,(n,i)=>{null!=n&&!1!==n&&(e[i]=t&&yn.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(t=>{let[e,n]=t;return e+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t){const e=new this(t);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach(t=>e.set(t)),e}static accessor(t){const e=(this[Xn]=this[Xn]={accessors:{}}).accessors,n=this.prototype;function i(t){const i=Kn(t);e[i]||(!function(t,e){const n=yn.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(t,n,r){return this[i].call(this,e,t,n,r)},configurable:!0})})}(n,t),e[i]=!0)}return yn.isArray(t)?t.forEach(i):i(t),this}}$n.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),yn.reduceDescriptors($n.prototype,(t,e)=>{let{value:n}=t,i=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(t){this[i]=t}}}),yn.freezeMethods($n);const Jn=$n;function Zn(t,e){const n=this||Gn,i=e||n,r=Jn.from(i.headers);let s=i.data;return yn.forEach(t,function(t){s=t.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function ti(t){return!(!t||!t.__CANCEL__)}function ei(t,e,n){_n.call(this,null==t?"canceled":t,_n.ERR_CANCELED,e,n),this.name="CanceledError"}yn.inherits(ei,_n,{__CANCEL__:!0});const ni=ei;function ii(t,e,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new _n("Request failed with status code "+n.status,[_n.ERR_BAD_REQUEST,_n.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}const ri=function(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r,s=0,a=0;return e=void 0!==e?e:1e3,function(o){const l=Date.now(),c=i[a];r||(r=l),n[s]=o,i[s]=l;let u=a,h=0;for(;u!==s;)h+=n[u++],u%=t;if(s=(s+1)%t,s===a&&(a=(a+1)%t),l-r<e)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};const si=function(t,e){let n,i,r=0,s=1e3/e;const a=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=s,n=null,i&&(clearTimeout(i),i=null),t(...e)};return[function(){const t=Date.now(),e=t-r;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];e>=s?a(l,t):(n=l,i||(i=setTimeout(()=>{i=null,a(n)},s-e)))},()=>n&&a(n)]},ai=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const r=ri(50,250);return si(n=>{const s=n.loaded,a=n.lengthComputable?n.total:void 0,o=s-i,l=r(o);i=s;t({loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&s<=a?(a-s)/l:void 0,event:n,lengthComputable:null!=a,[e?"download":"upload"]:!0})},n)},oi=(t,e)=>{const n=null!=t;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},li=t=>function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return yn.asap(()=>t(...n))},ci=zn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,zn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(zn.origin),zn.navigator&&/(msie|trident)/i.test(zn.navigator.userAgent)):()=>!0,ui=zn.hasStandardBrowserEnv?{write(t,e,n,i,r,s){const a=[t+"="+encodeURIComponent(e)];yn.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),yn.isString(i)&&a.push("path="+i),yn.isString(r)&&a.push("domain="+r),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function hi(t,e,n){let i=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e);return t&&(i||0==n)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const di=t=>t instanceof Jn?d({},t):t;function pi(t,e){e=e||{};const n={};function i(t,e,n,i){return yn.isPlainObject(t)&&yn.isPlainObject(e)?yn.merge.call({caseless:i},t,e):yn.isPlainObject(e)?yn.merge({},e):yn.isArray(e)?e.slice():e}function r(t,e,n,r){return yn.isUndefined(e)?yn.isUndefined(t)?void 0:i(void 0,t,0,r):i(t,e,0,r)}function s(t,e){if(!yn.isUndefined(e))return i(void 0,e)}function a(t,e){return yn.isUndefined(e)?yn.isUndefined(t)?void 0:i(void 0,t):i(void 0,e)}function o(n,r,s){return s in e?i(n,r):s in t?i(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(t,e,n)=>r(di(t),di(e),0,!0)};return yn.forEach(Object.keys(d(d({},t),e)),function(i){const s=l[i]||r,a=s(t[i],e[i],i);yn.isUndefined(a)&&s!==o||(n[i]=a)}),n}const fi=t=>{const e=pi({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:a,auth:o}=e;if(e.headers=a=Jn.from(a),e.url=Ln(hi(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),yn.isFormData(n))if(zn.hasStandardBrowserEnv||zn.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(yn.isFunction(n.getHeaders)){const t=n.getHeaders(),e=["content-type","content-length"];Object.entries(t).forEach(t=>{let[n,i]=t;e.includes(n.toLowerCase())&&a.set(n,i)})}if(zn.hasStandardBrowserEnv&&(i&&yn.isFunction(i)&&(i=i(e)),i||!1!==i&&ci(e.url))){const t=r&&s&&ui.read(s);t&&a.set(r,t)}return e},gi="undefined"!==typeof XMLHttpRequest&&function(t){return new Promise(function(e,n){const i=fi(t);let r=i.data;const s=Jn.from(i.headers).normalize();let a,o,l,c,u,{responseType:h,onUploadProgress:d,onDownloadProgress:p}=i;function f(){c&&c(),u&&u(),i.cancelToken&&i.cancelToken.unsubscribe(a),i.signal&&i.signal.removeEventListener("abort",a)}let g=new XMLHttpRequest;function m(){if(!g)return;const i=Jn.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());ii(function(t){e(t),f()},function(t){n(t),f()},{data:h&&"text"!==h&&"json"!==h?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:i,config:t,request:g}),g=null}g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(n(new _n("Request aborted",_n.ECONNABORTED,t,g)),g=null)},g.onerror=function(e){const i=e&&e.message?e.message:"Network Error",r=new _n(i,_n.ERR_NETWORK,t,g);r.event=e||null,n(r),g=null},g.ontimeout=function(){let e=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const r=i.transitional||In;i.timeoutErrorMessage&&(e=i.timeoutErrorMessage),n(new _n(e,r.clarifyTimeoutError?_n.ETIMEDOUT:_n.ECONNABORTED,t,g)),g=null},void 0===r&&s.setContentType(null),"setRequestHeader"in g&&yn.forEach(s.toJSON(),function(t,e){g.setRequestHeader(e,t)}),yn.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),h&&"json"!==h&&(g.responseType=i.responseType),p&&([l,u]=ai(p,!0),g.addEventListener("progress",l)),d&&g.upload&&([o,c]=ai(d),g.upload.addEventListener("progress",o),g.upload.addEventListener("loadend",c)),(i.cancelToken||i.signal)&&(a=e=>{g&&(n(!e||e.type?new ni(null,t,g):e),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(a),i.signal&&(i.signal.aborted?a():i.signal.addEventListener("abort",a)));const v=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(i.url);v&&-1===zn.protocols.indexOf(v)?n(new _n("Unsupported protocol "+v+":",_n.ERR_BAD_REQUEST,t)):g.send(r||null)})},mi=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let n,i=new AbortController;const r=function(t){if(!n){n=!0,a();const e=t instanceof Error?t:this.reason;i.abort(e instanceof _n?e:new ni(e instanceof Error?e.message:e))}};let s=e&&setTimeout(()=>{s=null,r(new _n("timeout ".concat(e," of ms exceeded"),_n.ETIMEDOUT))},e);const a=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(t=>{t.unsubscribe?t.unsubscribe(r):t.removeEventListener("abort",r)}),t=null)};t.forEach(t=>t.addEventListener("abort",r));const{signal:o}=i;return o.unsubscribe=()=>yn.asap(a),o}};function vi(t,e){this.v=t,this.k=e}function yi(t){return function(){return new bi(t.apply(this,arguments))}}function bi(t){var e,n;function i(e,n){try{var s=t[e](n),a=s.value,o=a instanceof vi;Promise.resolve(o?a.v:a).then(function(n){if(o){var l="return"===e?"return":"next";if(!a.k||n.done)return i(l,n);n=t[l](n).value}r(s.done?"return":"normal",n)},function(t){i("throw",t)})}catch(t){r("throw",t)}}function r(t,r){switch(t){case"return":e.resolve({value:r,done:!0});break;case"throw":e.reject(r);break;default:e.resolve({value:r,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(t,r){return new Promise(function(s,a){var o={key:t,arg:r,resolve:s,reject:a,next:null};n?n=n.next=o:(e=n=o,i(t,r))})},"function"!=typeof t.return&&(this.return=void 0)}function wi(t){return new vi(t,0)}function xi(t){var e={},n=!1;function i(e,i){return n=!0,i=new Promise(function(n){n(t[e](i))}),{done:!1,value:new vi(i,1)}}return e["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},e.next=function(t){return n?(n=!1,t):i("next",t)},"function"==typeof t.throw&&(e.throw=function(t){if(n)throw n=!1,t;return i("throw",t)}),"function"==typeof t.return&&(e.return=function(t){return n?(n=!1,t):i("return",t)}),e}function _i(t){var e,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new ki(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function ki(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return ki=function(t){this.s=t,this.n=t.next},ki.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new ki(t)}bi.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},bi.prototype.next=function(t){return this._invoke("next",t)},bi.prototype.throw=function(t){return this._invoke("throw",t)},bi.prototype.return=function(t){return this._invoke("return",t)};const Ai=function*(t,e){let n=t.byteLength;if(!e||n<e)return void(yield t);let i,r=0;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},Si=function(){var t=yi(function*(t,e){var n,i=!1,r=!1;try{for(var s,a=_i(Ei(t));i=!(s=yield wi(a.next())).done;i=!1){const t=s.value;yield*xi(_i(Ai(t,e)))}}catch(o){r=!0,n=o}finally{try{i&&null!=a.return&&(yield wi(a.return()))}finally{if(r)throw n}}});return function(e,n){return t.apply(this,arguments)}}(),Ei=function(){var t=yi(function*(t){if(t[Symbol.asyncIterator])return void(yield*xi(_i(t)));const e=t.getReader();try{for(;;){const{done:t,value:n}=yield wi(e.read());if(t)break;yield n}}finally{yield wi(e.cancel())}});return function(e){return t.apply(this,arguments)}}(),Ci=(t,e,n,i)=>{const r=Si(t,e);let s,a=0,o=t=>{s||(s=!0,i&&i(t))};return new ReadableStream({async pull(t){try{const{done:e,value:i}=await r.next();if(e)return o(),void t.close();let s=i.byteLength;if(n){let t=a+=s;n(t)}t.enqueue(new Uint8Array(i))}catch(e){throw o(e),e}},cancel:t=>(o(t),r.return())},{highWaterMark:2})},{isFunction:Mi}=yn,Ti=(t=>{let{Request:e,Response:n}=t;return{Request:e,Response:n}})(yn.global),{ReadableStream:Ri,TextEncoder:Pi}=yn.global,Di=function(t){try{for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return!!t(...n)}catch(Hk){return!1}},Li=t=>{t=yn.merge.call({skipUndefined:!0},Ti,t);const{fetch:e,Request:n,Response:i}=t,r=e?Mi(e):"function"===typeof fetch,s=Mi(n),a=Mi(i);if(!r)return!1;const o=r&&Mi(Ri),l=r&&("function"===typeof Pi?(c=new Pi,t=>c.encode(t)):async t=>new Uint8Array(await new n(t).arrayBuffer()));var c;const u=s&&o&&Di(()=>{let t=!1;const e=new n(zn.origin,{body:new Ri,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),h=a&&o&&Di(()=>yn.isReadableStream(new i("").body)),p={stream:h&&(t=>t.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!p[t]&&(p[t]=(e,n)=>{let i=e&&e[t];if(i)return i.call(e);throw new _n("Response type '".concat(t,"' is not supported"),_n.ERR_NOT_SUPPORT,n)})});const f=async(t,e)=>{const i=yn.toFiniteNumber(t.getContentLength());return null==i?(async t=>{if(null==t)return 0;if(yn.isBlob(t))return t.size;if(yn.isSpecCompliantForm(t)){const e=new n(zn.origin,{method:"POST",body:t});return(await e.arrayBuffer()).byteLength}return yn.isArrayBufferView(t)||yn.isArrayBuffer(t)?t.byteLength:(yn.isURLSearchParams(t)&&(t+=""),yn.isString(t)?(await l(t)).byteLength:void 0)})(e):i};return async t=>{let{url:r,method:a,data:o,signal:l,cancelToken:c,timeout:g,onDownloadProgress:m,onUploadProgress:v,responseType:y,headers:b,withCredentials:w="same-origin",fetchOptions:x}=fi(t),_=e||fetch;y=y?(y+"").toLowerCase():"text";let k=mi([l,c&&c.toAbortSignal()],g),A=null;const S=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let E;try{if(v&&u&&"get"!==a&&"head"!==a&&0!==(E=await f(b,o))){let t,e=new n(r,{method:"POST",body:o,duplex:"half"});if(yn.isFormData(o)&&(t=e.headers.get("content-type"))&&b.setContentType(t),e.body){const[t,n]=oi(E,ai(li(v)));o=Ci(e.body,65536,t,n)}}yn.isString(w)||(w=w?"include":"omit");const e=s&&"credentials"in n.prototype,l=d(d({},x),{},{signal:k,method:a.toUpperCase(),headers:b.normalize().toJSON(),body:o,duplex:"half",credentials:e?w:void 0});A=s&&new n(r,l);let c=await(s?_(A,x):_(r,l));const g=h&&("stream"===y||"response"===y);if(h&&(m||g&&S)){const t={};["status","statusText","headers"].forEach(e=>{t[e]=c[e]});const e=yn.toFiniteNumber(c.headers.get("content-length")),[n,r]=m&&oi(e,ai(li(m),!0))||[];c=new i(Ci(c.body,65536,n,()=>{r&&r(),S&&S()}),t)}y=y||"text";let C=await p[yn.findKey(p,y)||"text"](c,t);return!g&&S&&S(),await new Promise((e,n)=>{ii(e,n,{data:C,headers:Jn.from(c.headers),status:c.status,statusText:c.statusText,config:t,request:A})})}catch(C){if(S&&S(),C&&"TypeError"===C.name&&/Load failed|fetch/i.test(C.message))throw Object.assign(new _n("Network Error",_n.ERR_NETWORK,t,A),{cause:C.cause||C});throw _n.from(C,C&&C.code,t,A)}}},Ni=new Map,Ii=t=>{let e=t?t.env:{};const{fetch:n,Request:i,Response:r}=e,s=[i,r,n];let a,o,l=s.length,c=Ni;for(;l--;)a=s[l],o=c.get(a),void 0===o&&c.set(a,o=l?new Map:Li(e)),c=o;return o},Fi=(Ii(),{http:null,xhr:gi,fetch:{get:Ii}});yn.forEach(Fi,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(Hk){}Object.defineProperty(t,"adapterName",{value:e})}});const Oi=t=>"- ".concat(t),Bi=t=>yn.isFunction(t)||null===t||!1===t,Wi=(t,e)=>{t=yn.isArray(t)?t:[t];const{length:n}=t;let i,r;const s={};for(let a=0;a<n;a++){let n;if(i=t[a],r=i,!Bi(i)&&(r=Fi[(n=String(i)).toLowerCase()],void 0===r))throw new _n("Unknown adapter '".concat(n,"'"));if(r&&(yn.isFunction(r)||(r=r.get(e))))break;s[n||"#"+a]=r}if(!r){const t=Object.entries(s).map(t=>{let[e,n]=t;return"adapter ".concat(e," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let e=n?t.length>1?"since :\n"+t.map(Oi).join("\n"):" "+Oi(t[0]):"as no adapter specified";throw new _n("There is no suitable adapter to dispatch the request "+e,"ERR_NOT_SUPPORT")}return r};function ji(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ni(null,t)}function Ui(t){ji(t),t.headers=Jn.from(t.headers),t.data=Zn.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return Wi(t.adapter||Gn.adapter,t)(t).then(function(e){return ji(t),e.data=Zn.call(t,t.transformResponse,e),e.headers=Jn.from(e.headers),e},function(e){return ti(e)||(ji(t),e&&e.response&&(e.response.data=Zn.call(t,t.transformResponse,e.response),e.response.headers=Jn.from(e.response.headers))),Promise.reject(e)})}const zi="1.12.2",Hi={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Hi[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Vi={};Hi.transitional=function(t,e,n){function i(t,e){return"[Axios v"+zi+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,r,s)=>{if(!1===t)throw new _n(i(r," has been removed"+(e?" in "+e:"")),_n.ERR_DEPRECATED);return e&&!Vi[r]&&(Vi[r]=!0,console.warn(i(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,s)}},Hi.spelling=function(t){return(e,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(t)),!0)};const Gi={assertOptions:function(t,e,n){if("object"!==typeof t)throw new _n("options must be an object",_n.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const s=i[r],a=e[s];if(a){const e=t[s],n=void 0===e||a(e,s,t);if(!0!==n)throw new _n("option "+s+" must be "+n,_n.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new _n("Unknown option "+s,_n.ERR_BAD_OPTION)}},validators:Hi},qi=Gi.validators;class Xi{constructor(t){this.defaults=t||{},this.interceptors={request:new Nn,response:new Nn}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const e=t.stack?t.stack.replace(/^.+\n/,""):"";try{n.stack?e&&!String(n.stack).endsWith(e.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+e):n.stack=e}catch(Hk){}}throw n}}_request(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{},e=pi(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:r}=e;void 0!==n&&Gi.assertOptions(n,{silentJSONParsing:qi.transitional(qi.boolean),forcedJSONParsing:qi.transitional(qi.boolean),clarifyTimeoutError:qi.transitional(qi.boolean)},!1),null!=i&&(yn.isFunction(i)?e.paramsSerializer={serialize:i}:Gi.assertOptions(i,{encode:qi.function,serialize:qi.function},!0)),void 0!==e.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Gi.assertOptions(e,{baseUrl:qi.spelling("baseURL"),withXsrfToken:qi.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let s=r&&yn.merge(r.common,r[e.method]);r&&yn.forEach(["delete","get","head","post","put","patch","common"],t=>{delete r[t]}),e.headers=Jn.concat(s,r);const a=[];let o=!0;this.interceptors.request.forEach(function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(o=o&&t.synchronous,a.unshift(t.fulfilled,t.rejected))});const l=[];let c;this.interceptors.response.forEach(function(t){l.push(t.fulfilled,t.rejected)});let u,h=0;if(!o){const t=[Ui.bind(this),void 0];for(t.unshift(...a),t.push(...l),u=t.length,c=Promise.resolve(e);h<u;)c=c.then(t[h++],t[h++]);return c}u=a.length;let d=e;for(;h<u;){const t=a[h++],e=a[h++];try{d=t(d)}catch(p){e.call(this,p);break}}try{c=Ui.call(this,d)}catch(p){return Promise.reject(p)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(t){return Ln(hi((t=pi(this.defaults,t)).baseURL,t.url,t.allowAbsoluteUrls),t.params,t.paramsSerializer)}}yn.forEach(["delete","get","head","options"],function(t){Xi.prototype[t]=function(e,n){return this.request(pi(n||{},{method:t,url:e,data:(n||{}).data}))}}),yn.forEach(["post","put","patch"],function(t){function e(e){return function(n,i,r){return this.request(pi(r||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Xi.prototype[t]=e(),Xi.prototype[t+"Form"]=e(!0)});const Ki=Xi;class Yi{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(t){e=t});const n=this;this.promise.then(t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null}),this.promise.then=t=>{let e;const i=new Promise(t=>{n.subscribe(t),e=t}).then(t);return i.cancel=function(){n.unsubscribe(e)},i},t(function(t,i,r){n.reason||(n.reason=new ni(t,i,r),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=e=>{t.abort(e)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new Yi(function(e){t=e}),cancel:t}}}const Qi=Yi;const $i={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($i).forEach(t=>{let[e,n]=t;$i[n]=e});const Ji=$i;const Zi=function t(e){const n=new Ki(e),i=Pe(Ki.prototype.request,n);return yn.extend(i,Ki.prototype,n,{allOwnKeys:!0}),yn.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return t(pi(e,n))},i}(Gn);Zi.Axios=Ki,Zi.CanceledError=ni,Zi.CancelToken=Qi,Zi.isCancel=ti,Zi.VERSION=zi,Zi.toFormData=Cn,Zi.AxiosError=_n,Zi.Cancel=Zi.CanceledError,Zi.all=function(t){return Promise.all(t)},Zi.spread=function(t){return function(e){return t.apply(null,e)}},Zi.isAxiosError=function(t){return yn.isObject(t)&&!0===t.isAxiosError},Zi.mergeConfig=pi,Zi.AxiosHeaders=Jn,Zi.formToJSON=t=>Hn(yn.isHTMLForm(t)?new FormData(t):t),Zi.getAdapter=Wi,Zi.HttpStatusCode=Ji,Zi.default=Zi;const tr=Zi,er="https://z277970-rr25o5.ps07.zwhhosting.com/omekas/api".replace(/\/+$/,""),nr=t=>(t=>{const e=t.includes("?")?"&":"?";return"".concat(t).concat(e,"key_identity=").concat("6pW9FziPx0tOP5HtqHF6HOLT8i1OoR6e","&key_credential=").concat("QZqVwHqGUlpvJc13iuEuf2GpsG2Ak6pm")})("".concat(er).concat(t.startsWith("/")?t:"/".concat(t))),ir=async t=>{try{const e="https://api.allorigins.win/get?url=".concat(encodeURIComponent(t)),n=await tr.get(e,{timeout:15e3});return JSON.parse(n.data.contents)}catch(e){}try{const e="https://api.codetabs.com/v1/proxy?quest=".concat(encodeURIComponent(t));return(await tr.get(e,{timeout:15e3})).data}catch(n){}return(await tr.get(t,{timeout:15e3})).data};function rr(){const[t,e]=(0,s.useState)([]),[n,i]=(0,s.useState)(""),[r,a]=(0,s.useState)(!0),[o,l]=(0,s.useState)("");(0,s.useEffect)(()=>{c()},[]);const c=async()=>{try{a(!0);const t=await ir(nr("/items"));e(Array.isArray(t)?t:[]),l("")}catch(Hk){l((null===Hk||void 0===Hk?void 0:Hk.message)||"\u0e42\u0e2b\u0e25\u0e14\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08")}finally{a(!1)}},u=(0,s.useMemo)(()=>{if(!n.trim())return t.slice(0,12);const e=n.toLowerCase();return t.filter(t=>{const n=(t=>{var e,n;return t["o:title"]||(null===(e=t["dcterms:title"])||void 0===e||null===(n=e[0])||void 0===n?void 0:n["@value"])||"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e0a\u0e37\u0e48\u0e2d\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23"})(t).toLowerCase(),i=((t=>{var e,n,i,r;return(null===(e=t["dcterms:abstract"])||void 0===e||null===(n=e[0])||void 0===n?void 0:n["@value"])||(null===(i=t["dcterms:description"])||void 0===i||null===(r=i[0])||void 0===r?void 0:r["@value"])||""})(t)||"").toLowerCase();return n.includes(e)||i.includes(e)}).slice(0,12)},[t,n]),h=async t=>{try{await async function(t){var e;const n=null===t||void 0===t||null===(e=t["o:primary_media"])||void 0===e?void 0:e["o:id"];if(!n)throw new Error("\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e44\u0e1f\u0e25\u0e4c\u0e2b\u0e25\u0e31\u0e01\u0e02\u0e2d\u0e07\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e19\u0e35\u0e49");const i=await ir(nr("/media/".concat(n))),r=null===i||void 0===i?void 0:i["o:original_url"];if(!r)throw new Error("\u0e44\u0e21\u0e48\u0e1e\u0e1a URL \u0e02\u0e2d\u0e07\u0e44\u0e1f\u0e25\u0e4c PDF");window.open(r,"_blank")}(t)}catch(Hk){alert((null===Hk||void 0===Hk?void 0:Hk.message)||"\u0e40\u0e1b\u0e34\u0e14\u0e44\u0e1f\u0e25\u0e4c\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08")}};return(0,Se.jsxs)("div",{className:"min-h-screen bg-background-light text-[#111518]",children:[(0,Se.jsx)(Ee,{}),(0,Se.jsx)("div",{className:"h-[88px]"}),(0,Se.jsxs)("main",{className:"flex-1",children:[(0,Se.jsx)(Ce,{query:n,setQuery:i,onSearch:()=>{}}),(0,Se.jsxs)("section",{className:"px-4 sm:px-10 lg:px-40",children:[(0,Se.jsx)("h2",{className:"section-title",children:"\u0e2d\u0e22\u0e39\u0e48\u0e43\u0e19\u0e0a\u0e48\u0e27\u0e07\u0e1e\u0e31\u0e12\u0e19\u0e32"}),r?(0,Se.jsx)("div",{className:"state",children:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14\u2026"}):o?(0,Se.jsxs)("div",{className:"state text-red-500",children:["\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14: ",o]}):0===u.length?(0,Se.jsx)("div",{className:"state",children:"\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23"}):(0,Se.jsx)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] items-stretch gap-6 p-4",children:u.map(t=>(0,Se.jsx)(Te,{item:t,onOpen:h},t["o:id"]))})]})]}),(0,Se.jsx)(Re,{})]})}function sr(){const[t,e]=(0,s.useState)(!1);(0,s.useEffect)(()=>{const t=()=>e(window.scrollY>400);return t(),window.addEventListener("scroll",t,{passive:!0}),()=>window.removeEventListener("scroll",t)},[]);return(0,Se.jsx)("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-5 right-5 z-[60] rounded-full shadow-lg border\n        px-3 py-2 bg-white/90 backdrop-blur hover:bg-white\n        transition ".concat(t?"opacity-100":"opacity-0 pointer-events-none"),title:"\u0e01\u0e25\u0e31\u0e1a\u0e02\u0e36\u0e49\u0e19\u0e14\u0e49\u0e32\u0e19\u0e1a\u0e19",children:"\u2b06\ufe0e"})}function ar(t,e,n){e||(e=[]);var i=e.length++;return Object.defineProperty({},"_",{set:function(r){e[i]=r,t.apply(n,e)}})}function or(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function lr(t,e){or(t,e),e.add(t)}function cr(t,e,n){or(t,e),e.set(t,n)}function ur(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function hr(t,e,n){return n(ur(t,e))}function dr(t,e){return t.get(ur(t,e))}function pr(t,e,n){return t.set(ur(t,e),n),n}var fr,gr,mr,vr,yr,br,wr,xr,_r,kr,Ar,Sr,Er,Cr,Mr,Tr,Rr,Pr;const Dr="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),Lr=[.001,0,0,.001,0,0],Nr=1.35,Ir=1,Fr=2,Or=4,Br=16,Wr=32,jr=64,Ur=128,zr=256,Hr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Vr="pdfjs_internal_editor_",Gr={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},qr={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Xr=0,Kr=1,Yr=2,Qr=3,$r=3,Jr=4,Zr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ts={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},es=1,ns=2,is=3,rs=4,ss=5,as={ERRORS:0,WARNINGS:1,INFOS:5},os={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ls=0,cs=1,us=2,hs=3;let ds=as.WARNINGS;function ps(t){Number.isInteger(t)&&(ds=t)}function fs(){return ds}function gs(t){ds>=as.INFOS&&console.info("Info: ".concat(t))}function ms(t){ds>=as.WARNINGS&&console.warn("Warning: ".concat(t))}function vs(t){throw new Error(t)}function ys(t,e){t||vs(e)}function bs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;if(n&&"string"===typeof t){if(n.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);(null===e||void 0===e?void 0:e.length)>=2&&(t="http://".concat(t))}if(n.tryConvertEncoding)try{t=decodeURIComponent(escape(t))}catch(r){}}const i=e?URL.parse(t,e):URL.parse(t);return function(t){switch(null===t||void 0===t?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i)?i:null}function ws(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=URL.parse(t);return i?(i.hash=e,i.href):n&&bs(t,"http://example.com")?t.split("#",1)[0]+"".concat(e?"#".concat(e):""):""}function xs(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const _s=function(){function t(t,e){this.message=t,this.name=e}return t.prototype=new Error,t.constructor=t,t}();class ks extends _s{constructor(t,e){super(t,"PasswordException"),this.code=e}}class As extends _s{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Ss extends _s{constructor(t){super(t,"InvalidPDFException")}}class Es extends _s{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class Cs extends _s{constructor(t){super(t,"FormatError")}}class Ms extends _s{constructor(t){super(t,"AbortException")}}function Ts(t){"object"===typeof t&&void 0!==(null===t||void 0===t?void 0:t.length)||vs("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const i=[];for(let r=0;r<e;r+=n){const s=Math.min(r+n,e),a=t.subarray(r,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Rs(t){"string"!==typeof t&&vs("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let i=0;i<e;++i)n[i]=255&t.charCodeAt(i);return n}class Ps{static get isLittleEndian(){return xs(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return xs(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(t){return!1}}())}static get isOffscreenCanvasSupported(){return xs(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get isImageDecoderSupported(){return xs(this,"isImageDecoderSupported","undefined"!==typeof ImageDecoder)}static get platform(){const{platform:t,userAgent:e}=navigator;return xs(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return xs(this,"isCSSRoundSupported",null===(t=globalThis.CSS)||void 0===t||null===(e=t.supports)||void 0===e?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Ds=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));class Ls{static makeHexColor(t,e,n){return"#".concat(Ds[t]).concat(Ds[e]).concat(Ds[n])}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t[n],r=t[n+1];t[n]=i*e[0]+r*e[2]+e[4],t[n+1]=i*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5];for(let c=0;c<6;c+=2){const e=t[n+c],u=t[n+c+1];t[n+c]=e*i+u*s+o,t[n+c+1]=e*r+u*a+l}}static applyInverseTransform(t,e){const n=t[0],i=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-n*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,n){const i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=t[0],u=t[1],h=t[2],d=t[3];let p=i*c+o,f=p,g=i*h+o,m=g,v=a*u+l,y=v,b=a*d+l,w=b;if(0!==r||0!==s){const t=r*c,e=r*h,n=s*u,i=s*d;p+=n,m+=n,g+=i,f+=i,v+=t,w+=t,b+=e,y+=e}n[0]=Math.min(n[0],p,g,f,m),n[1]=Math.min(n[1],v,b,y,w),n[2]=Math.max(n[2],p,g,f,m),n[3]=Math.max(n[3],v,b,y,w)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],a=n**2+i**2,o=n*r+i*s,l=r**2+s**2,c=(a+l)/2,u=Math.sqrt(c**2-(a*l-o**2));e[0]=Math.sqrt(c+u||1),e[1]=Math.sqrt(c-u||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),s=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>s?null:[n,r,i,s]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,i,r){r[0]=Math.min(r[0],t,n),r[1]=Math.min(r[1],e,i),r[2]=Math.max(r[2],t,n),r[3]=Math.max(r[3],e,i)}static bezierBoundingBox(t,e,n,i,r,s,a,o,l){l[0]=Math.min(l[0],t,a),l[1]=Math.min(l[1],e,o),l[2]=Math.max(l[2],t,a),l[3]=Math.max(l[3],e,o),ur(Ls,this,Is).call(this,t,n,r,a,e,i,s,o,3*(3*(n-r)-t+a),6*(t-2*n+r),3*(n-t),l),ur(Ls,this,Is).call(this,t,n,r,a,e,i,s,o,3*(3*(i-s)-e+o),6*(e-2*i+s),3*(i-e),l)}}function Ns(t,e,n,i,r,s,a,o,l,c){if(l<=0||l>=1)return;const u=1-l,h=l*l,d=h*l,p=u*(u*(u*t+3*l*e)+3*h*n)+d*i,f=u*(u*(u*r+3*l*s)+3*h*a)+d*o;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],f),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],f)}function Is(t,e,n,i,r,s,a,o,l,c,u,h){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&ur(fr,this,Ns).call(this,t,e,n,i,r,s,a,o,-u/c,h));const d=c**2-4*u*l;if(d<0)return;const p=Math.sqrt(d),f=2*l;ur(fr,this,Ns).call(this,t,e,n,i,r,s,a,o,(-c+p)/f,h),ur(fr,this,Ns).call(this,t,e,n,i,r,s,a,o,(-c-p)/f,h)}fr=Ls;let Fs=null,Os=null;function Bs(){if("function"===typeof crypto.randomUUID)return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),Ts(t)}const Ws="pdfjs_internal_id_";function js(t,e,n){return Math.min(Math.max(t,e),n)}function Us(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(Ts(t))}"function"!==typeof Promise.try&&(Promise.try=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return new Promise(e=>{e(t(...n))})}),"function"!==typeof Math.sumPrecise&&(Math.sumPrecise=function(t){return t.reduce((t,e)=>t+e,0)});class zs{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};return function t(n){var i;if(!n)return;let r=null;const s=n.name;if("#text"===s)r=n.value;else{if(!zs.shouldBuildText(s))return;null!==n&&void 0!==n&&null!==(i=n.attributes)&&void 0!==i&&i.textContent?r=n.attributes.textContent:n.value&&(r=n.value)}if(null!==r&&e.push({str:r}),n.children)for(const e of n.children)t(e)}(t),n}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}class Hs{static setupStorage(t,e,n,i,r){const s=i.getValue(e,{value:null});switch(n.name){case"textarea":if(null!==s.value&&(t.textContent=s.value),"print"===r)break;t.addEventListener("input",t=>{i.setValue(e,{value:t.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(s.value===n.attributes.xfaOn?t.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&t.removeAttribute("checked"),"print"===r)break;t.addEventListener("change",t=>{i.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})})}else{if(null!==s.value&&t.setAttribute("value",s.value),"print"===r)break;t.addEventListener("input",t=>{i.setValue(e,{value:t.target.value})})}break;case"select":if(null!==s.value){t.setAttribute("value",s.value);for(const t of n.children)t.attributes.value===s.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",t=>{const n=t.target.options,r=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(e,{value:r})})}}static setAttributes(t){let{html:e,element:n,storage:i=null,intent:r,linkService:s}=t;const{attributes:a}=n,o=e instanceof HTMLAnchorElement;"radio"===a.type&&(a.name="".concat(a.name,"-").concat(r));for(const[l,c]of Object.entries(a))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&e.setAttribute(l,c)}o&&s.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,n,i)}static render(t){const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,r=t.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:r,linkService:n});const a="richText"!==r,o=t.div;if(o.append(s),t.viewport){const e="matrix(".concat(t.viewport.transform.join(","),")");o.style.transform=e}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const t=document.createTextNode(i.value);s.append(t),a&&zs.shouldBuildText(i.name)&&l.push(t)}return{textDivs:l}}const c=[[i,-1,s]];for(;c.length>0;){var u,h;const[t,i,s]=c.at(-1);if(i+1===t.children.length){c.pop();continue}const o=t.children[++c.at(-1)[1]];if(null===o)continue;const{name:d}=o;if("#text"===d){const t=document.createTextNode(o.value);l.push(t),s.append(t);continue}const p=null!==o&&void 0!==o&&null!==(u=o.attributes)&&void 0!==u&&u.xmlns?document.createElementNS(o.attributes.xmlns,d):document.createElement(d);if(s.append(p),o.attributes&&this.setAttributes({html:p,element:o,storage:e,intent:r,linkService:n}),(null===(h=o.children)||void 0===h?void 0:h.length)>0)c.push([o,-1,p]);else if(o.value){const t=document.createTextNode(o.value);a&&zs.shouldBuildText(d)&&l.push(t),p.append(t)}}for(const d of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:l}}static update(t){const e="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=e,t.div.hidden=!1}}const Vs="http://www.w3.org/2000/svg";class Gs{}async function qs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(Js(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE)if(200!==r.status&&0!==r.status)i(new Error(r.statusText));else{switch(e){case"arraybuffer":case"blob":case"json":return void n(r.response)}n(r.responseText)}},r.send(null)})}gr=Gs,u(Gs,"CSS",96),u(Gs,"PDF",72),u(Gs,"PDF_TO_CSS_UNITS",gr.CSS/gr.PDF);class Xs{constructor(t){let{viewBox:e,userUnit:n,scale:i,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}=t;this.viewBox=e,this.userUnit=n,this.scale=i,this.rotation=r,this.offsetX=s,this.offsetY=a,i*=n;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,h,d,p,f,g,m,v;switch(r%=360,r<0&&(r+=360),r){case 180:u=-1,h=0,d=0,p=1;break;case 90:u=0,h=1,d=1,p=0;break;case 270:u=0,h=-1,d=-1,p=0;break;case 0:u=1,h=0,d=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,p=-p),0===u?(f=Math.abs(c-e[1])*i+s,g=Math.abs(l-e[0])*i+a,m=(e[3]-e[1])*i,v=(e[2]-e[0])*i):(f=Math.abs(l-e[0])*i+s,g=Math.abs(c-e[1])*i+a,m=(e[2]-e[0])*i,v=(e[3]-e[1])*i),this.transform=[u*i,h*i,d*i,p*i,f-u*i*l-d*i*c,g-h*i*l-p*i*c],this.width=m,this.height=v}get rawDims(){const t=this.viewBox;return xs(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone(){let{scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Xs({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){const n=[t,e];return Ls.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];Ls.applyTransform(e,this.transform);const n=[t[2],t[3]];return Ls.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return Ls.applyInverseTransform(n,this.transform),n}}class Ks extends _s{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(t,"RenderingCancelledException"),this.extraDelay=e}}function Ys(t){const e=t.length;let n=0;for(;n<e&&""===t[n].trim();)n++;return"data:"===t.substring(n,n+5).toLowerCase()}function Qs(t){return"string"===typeof t&&/\.pdf$/i.test(t)}class $s{constructor(){u(this,"started",Object.create(null)),u(this,"times",[])}time(t){t in this.started&&ms("Timer is already running for ".concat(t)),this.started[t]=Date.now()}timeEnd(t){t in this.started||ms("Timer has not been started for ".concat(t)),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:r}of this.times)t.push("".concat(n.padEnd(e)," ").concat(r-i,"ms\n"));return t.join("")}}function Js(t,e){const n=e?URL.parse(t,e):URL.parse(t);return"http:"===(null===n||void 0===n?void 0:n.protocol)||"https:"===(null===n||void 0===n?void 0:n.protocol)}function Zs(t){t.preventDefault()}function ta(t){t.preventDefault(),t.stopPropagation()}class ea{static toDateObject(t){if(t instanceof Date)return t;if(!t||"string"!==typeof t)return null;ur(ea,this,na)._||(na._=ur(ea,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const e=ur(ea,this,na)._.exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let s=parseInt(e[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(e[6],10);o=o>=0&&o<=59?o:0;const l=e[7]||"Z";let c=parseInt(e[8],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[9],10)||0;return u=u>=0&&u<=59?u:0,"-"===l?(s+=c,a+=u):"+"===l&&(s-=c,a-=u),new Date(Date.UTC(n,i,r,s,a,o))}}var na={_:void 0};function ia(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(t=>parseInt(t)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ms('Not a valid color format: "'.concat(t,'"')),[0,0,0])}function ra(t){const{a:e,b:n,c:i,d:r,e:s,f:a}=t.getTransform();return[e,n,i,r,s,a]}function sa(t){const{a:e,b:n,c:i,d:r,e:s,f:a}=t.getTransform().invertSelf();return[e,n,i,r,s,a]}function aa(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e instanceof Xs){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:s}=t,a=Ps.isCSSRoundSupported,o="var(--total-scale-factor) * ".concat(i,"px"),l="var(--total-scale-factor) * ".concat(r,"px"),c=a?"round(down, ".concat(o,", var(--scale-round-x))"):"calc(".concat(o,")"),u=a?"round(down, ".concat(l,", var(--scale-round-y))"):"calc(".concat(l,")");n&&e.rotation%180!==0?(s.width=u,s.height=c):(s.width=c,s.height=u)}i&&t.setAttribute("data-main-rotation",e.rotation)}class oa{constructor(){const{pixelRatio:t}=oa;this.sx=t,this.sy=t}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=1/0,a=1/0,o=1/0;(n=oa.capPixels(n,r))>0&&(s=Math.sqrt(n/(t*e))),-1!==i&&(a=i/t,o=i/e);const l=Math.min(s,a,o);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const la=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ca{static get isDarkMode(){var t,e;return xs(this,"isDarkMode",!(null===(t=window)||void 0===t||null===(e=t.matchMedia)||void 0===e||!e.call(t,"(prefers-color-scheme: dark)").matches))}}function ua(t,e){const n=t[0]/255,i=t[1]/255,r=t[2]/255,s=Math.max(n,i,r),a=Math.min(n,i,r),o=(s+a)/2;if(s===a)e[0]=e[1]=0;else{const t=s-a;switch(e[1]=o<.5?t/(s+a):t/(2-s-a),s){case n:e[0]=60*((i-r)/t+(i<r?6:0));break;case i:e[0]=60*((r-n)/t+2);break;case r:e[0]=60*((n-i)/t+4)}}e[2]=o}function ha(t,e){const n=t[0],i=t[1],r=t[2],s=(1-Math.abs(2*r-1))*i,a=s*(1-Math.abs(n/60%2-1)),o=r-s/2;switch(Math.floor(n/60)){case 0:e[0]=s+o,e[1]=a+o,e[2]=o;break;case 1:e[0]=a+o,e[1]=s+o,e[2]=o;break;case 2:e[0]=o,e[1]=s+o,e[2]=a+o;break;case 3:e[0]=o,e[1]=a+o,e[2]=s+o;break;case 4:e[0]=a+o,e[1]=o,e[2]=s+o;break;case 5:case 6:e[0]=s+o,e[1]=o,e[2]=a+o}}function da(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function pa(t,e,n){ha(t,n),n.map(da);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];ha(e,n),n.map(da);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)}const fa=new Map;function ga(t,e){let{html:n,dir:i,className:r}=t;const s=document.createDocumentFragment();if("string"===typeof n){const t=document.createElement("p");t.dir=i||"auto";const e=n.split(/(?:\r\n?|\n)/);for(let n=0,i=e.length;n<i;++n){const r=e[n];t.append(document.createTextNode(r)),n<i-1&&t.append(document.createElement("br"))}s.append(t)}else Hs.render({xfaHtml:n,div:s,intent:"richText"});s.firstChild.classList.add("richText",r),e.append(s)}var ma=new WeakMap,va=new WeakMap,ya=new WeakMap,ba=new WeakMap,wa=new WeakMap,xa=new WeakMap,_a=new WeakMap,ka=new WeakMap,Aa=new WeakSet;class Sa{constructor(t){lr(this,Aa),cr(this,ma,null),cr(this,va,null),cr(this,ya,void 0),cr(this,ba,null),cr(this,wa,null),cr(this,xa,null),cr(this,_a,null),cr(this,ka,null),pr(ya,this,t),Pa._||(Pa._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=pr(ma,this,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=dr(ya,this)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Zs,{signal:e}),t.addEventListener("pointerdown",Ea,{signal:e}));const n=pr(ba,this,document.createElement("div"));n.className="buttons",t.append(n);const i=dr(ya,this).toolbarPosition;if(i){const{style:e}=t,n="ltr"===dr(ya,this)._uiManager.direction?1-i[0]:i[0];e.insetInlineEnd="".concat(100*n,"%"),e.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return t}get div(){return dr(ma,this)}hide(){var t;dr(ma,this).classList.add("hidden"),null===(t=dr(va,this))||void 0===t||t.hideDropdown()}show(){var t,e;dr(ma,this).classList.remove("hidden"),null===(t=dr(wa,this))||void 0===t||t.shown(),null===(e=dr(xa,this))||void 0===e||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=dr(ya,this),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",Pa._[t]),ur(Aa,this,Ta).call(this,n)&&n.addEventListener("click",t=>{e.delete()},{signal:e._signal}),dr(ba,this).append(n)}async addAltText(t){const e=await t.render();ur(Aa,this,Ta).call(this,e),dr(ba,this).append(e,hr(Aa,this,Ra)),pr(wa,this,t)}addComment(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(dr(xa,this))return;const n=t.renderForToolbar();if(!n)return;ur(Aa,this,Ta).call(this,n);const i=pr(_a,this,hr(Aa,this,Ra));e?(dr(ba,this).insertBefore(n,e),dr(ba,this).insertBefore(i,e)):dr(ba,this).append(n,i),pr(xa,this,t),t.toolbar=this}addColorPicker(t){if(dr(va,this))return;pr(va,this,t);const e=t.renderButton();ur(Aa,this,Ta).call(this,e),dr(ba,this).append(e,hr(Aa,this,Ra))}async addEditSignatureButton(t){const e=pr(ka,this,await t.renderEditButton(dr(ya,this)));ur(Aa,this,Ta).call(this,e),dr(ba,this).append(e,hr(Aa,this,Ra))}removeButton(t){var e,n;if("comment"===t)null===(e=dr(xa,this))||void 0===e||e.removeToolbarCommentButton(),pr(xa,this,null),null===(n=dr(_a,this))||void 0===n||n.remove(),pr(_a,this,null)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e)}}async addButtonBefore(t,e,n){const i=dr(ba,this).querySelector(n);i&&"comment"===t&&this.addComment(e,i)}updateEditSignatureButton(t){dr(ka,this)&&(dr(ka,this).title=t)}remove(){var t;dr(ma,this).remove(),null===(t=dr(va,this))||void 0===t||t.destroy(),pr(va,this,null)}}function Ea(t){t.stopPropagation()}function Ca(t){dr(ya,this)._focusEventsAllowed=!1,ta(t)}function Ma(t){dr(ya,this)._focusEventsAllowed=!0,ta(t)}function Ta(t){const e=dr(ya,this)._uiManager._signal;return e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("focusin",ur(Aa,this,Ca).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",ur(Aa,this,Ma).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Zs,{signal:e}),!0)}function Ra(t){const e=document.createElement("div");return e.className="divider",e}var Pa={_:null},Da=new WeakMap,La=new WeakMap,Na=new WeakMap,Ia=new WeakSet;class Fa{constructor(t){lr(this,Ia),cr(this,Da,null),cr(this,La,null),cr(this,Na,void 0),pr(Na,this,t)}show(t,e,n){const[i,r]=ur(Ia,this,Ba).call(this,e,n),{style:s}=dr(La,this)||pr(La,this,ur(Ia,this,Oa).call(this));t.append(dr(La,this)),s.insetInlineEnd="".concat(100*i,"%"),s.top="calc(".concat(100*r,"% + var(--editor-toolbar-vert-offset))")}hide(){dr(La,this).remove()}}function Oa(){const t=pr(La,this,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=dr(Na,this)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Zs,{signal:e});const n=pr(Da,this,document.createElement("div"));return n.className="buttons",t.append(n),dr(Na,this).hasCommentManager()&&ur(Ia,this,Wa).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{dr(Na,this).commentSelection("floating_button")}),ur(Ia,this,Wa).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{dr(Na,this).highlightSelection("floating_button")}),t}function Ba(t,e){let n=0,i=0;for(const r of t){const t=r.y+r.height;if(t<n)continue;const s=r.x+(e?r.width:0);t>n?(i=s,n=t):e?s>i&&(i=s):s<i&&(i=s)}return[e?1-i:i,n]}function Wa(t,e,n,i){const r=document.createElement("button");r.classList.add("basic",t),r.tabIndex=0,r.setAttribute("data-l10n-id",e);const s=document.createElement("span");r.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",n);const a=dr(Na,this)._signal;a instanceof AbortSignal&&!a.aborted&&(r.addEventListener("contextmenu",Zs,{signal:a}),r.addEventListener("click",i,{signal:a})),dr(Da,this).append(r)}function ja(t,e,n){for(const i of n)e.addEventListener(i,t[i].bind(t))}var Ua=new WeakMap;class za{constructor(){cr(this,Ua,0)}get id(){var t,e;return"".concat(Vr).concat((pr(Ua,this,(t=dr(Ua,this),e=t++,t)),e))}}var Ha=new WeakMap,Va=new WeakMap,Ga=new WeakMap,qa=new WeakSet;class Xa{constructor(){lr(this,qa),cr(this,Ha,Bs()),cr(this,Va,0),cr(this,Ga,null)}static get _isSVGFittingCanvas(){const t=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),e=new Image;e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return xs(this,"_isSVGFittingCanvas",e.decode().then(()=>(t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(t){const{lastModified:e,name:n,size:i,type:r}=t;return ur(qa,this,Ka).call(this,"".concat(e,"_").concat(n,"_").concat(i,"_").concat(r),t)}async getFromUrl(t){return ur(qa,this,Ka).call(this,t,t)}async getFromBlob(t,e){const n=await e;return ur(qa,this,Ka).call(this,t,n)}async getFromId(t){dr(Ga,this)||pr(Ga,this,new Map);const e=dr(Ga,this).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:t}=e;return delete e.blobPromise,this.getFromBlob(e.id,t)}return this.getFromUrl(e.url)}getFromCanvas(t,e){var n,i,r;dr(Ga,this)||pr(Ga,this,new Map);let s=dr(Ga,this).get(t);if(null!==(r=s)&&void 0!==r&&r.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),s={bitmap:a.transferToImageBitmap(),id:"image_".concat(dr(Ha,this),"_").concat((pr(Va,this,(n=dr(Va,this),i=n++,n)),i)),refCounter:1,isSvg:!1},dr(Ga,this).set(t,s),dr(Ga,this).set(s.id,s),s}getSvgUrl(t){const e=dr(Ga,this).get(t);return null!==e&&void 0!==e&&e.isSvg?e.svgUrl:null}deleteId(t){var e;dr(Ga,this)||pr(Ga,this,new Map);const n=dr(Ga,this).get(t);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:i}=n;if(!n.url&&!n.file){const t=new OffscreenCanvas(i.width,i.height);t.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=t.convertToBlob()}null===(e=i.close)||void 0===e||e.call(i),n.bitmap=null}isValidId(t){return t.startsWith("image_".concat(dr(Ha,this),"_"))}}async function Ka(t,e){var n;dr(Ga,this)||pr(Ga,this,new Map);let i=dr(Ga,this).get(t);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var r,s;let t;if(i||(i={bitmap:null,id:"image_".concat(dr(Ha,this),"_").concat((pr(Va,this,(r=dr(Va,this),s=r++,r)),s)),refCounter:0,isSvg:!1}),"string"===typeof e?(i.url=e,t=await qs(e,"blob")):e instanceof File?t=i.file=e:e instanceof Blob&&(t=e),"image/svg+xml"===t.type){const e=mr._isSVGFittingCanvas,n=new FileReader,r=new Image,s=new Promise((t,s)=>{r.onload=()=>{i.bitmap=r,i.isSvg=!0,t()},n.onload=async()=>{const t=i.svgUrl=n.result;r.src=await e?"".concat(t,"#svgView(preserveAspectRatio(none))"):t},r.onerror=n.onerror=s});n.readAsDataURL(t),await s}else i.bitmap=await createImageBitmap(t);i.refCounter=1}catch(Hk){ms(Hk),i=null}return dr(Ga,this).set(t,i),i&&dr(Ga,this).set(i.id,i),i}mr=Xa;var Ya=new WeakMap,Qa=new WeakMap,$a=new WeakMap,Ja=new WeakMap;class Za{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;cr(this,Ya,[]),cr(this,Qa,!1),cr(this,$a,void 0),cr(this,Ja,-1),pr($a,this,t)}add(t){let{cmd:e,undo:n,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=t;if(r&&e(),dr(Qa,this))return;const l={cmd:e,undo:n,post:i,type:s};if(-1===dr(Ja,this))return dr(Ya,this).length>0&&(dr(Ya,this).length=0),pr(Ja,this,0),void dr(Ya,this).push(l);if(a&&dr(Ya,this)[dr(Ja,this)].type===s)return o&&(l.undo=dr(Ya,this)[dr(Ja,this)].undo),void(dr(Ya,this)[dr(Ja,this)]=l);const c=dr(Ja,this)+1;c===dr($a,this)?dr(Ya,this).splice(0,1):(pr(Ja,this,c),c<dr(Ya,this).length&&dr(Ya,this).splice(c)),dr(Ya,this).push(l)}undo(){if(-1===dr(Ja,this))return;pr(Qa,this,!0);const{undo:t,post:e}=dr(Ya,this)[dr(Ja,this)];t(),null===e||void 0===e||e(),pr(Qa,this,!1),pr(Ja,this,dr(Ja,this)-1)}redo(){if(dr(Ja,this)<dr(Ya,this).length-1){pr(Ja,this,dr(Ja,this)+1),pr(Qa,this,!0);const{cmd:t,post:e}=dr(Ya,this)[dr(Ja,this)];t(),null===e||void 0===e||e(),pr(Qa,this,!1)}}hasSomethingToUndo(){return-1!==dr(Ja,this)}hasSomethingToRedo(){return dr(Ja,this)<dr(Ya,this).length-1}cleanType(t){if(-1!==dr(Ja,this)){for(let e=dr(Ja,this);e>=0;e--)if(dr(Ya,this)[e].type!==t)return dr(Ya,this).splice(e+1,dr(Ja,this)-e),void pr(Ja,this,e);dr(Ya,this).length=0,pr(Ja,this,-1)}}destroy(){pr(Ya,this,null)}}var to=new WeakSet;class eo{constructor(t){lr(this,to),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ps.platform;for(const[n,i,r={}]of t)for(const t of n){const n=t.startsWith("mac+");e&&n?(this.callbacks.set(t.slice(4),{callback:i,options:r}),this.allKeys.add(t.split("+").at(-1))):e||n||(this.callbacks.set(t,{callback:i,options:r}),this.allKeys.add(t.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(ur(to,this,no).call(this,e));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:s=[],checker:a=null}}=n;a&&!a(t,e)||(i.bind(t,...s,e)(),r||ta(e))}}function no(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}class io{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return function(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of t.keys()){e.style.color=n;const i=window.getComputedStyle(e).color;t.set(n,ia(i))}e.remove()}(t),xs(this,"_colors",t)}convert(t){const e=ia(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((t,n)=>t===e[n]))return io._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Ls.makeHexColor(...e):t}}u(io,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var ro=new WeakMap,so=new WeakMap,ao=new WeakMap,oo=new WeakMap,lo=new WeakMap,co=new WeakMap,uo=new WeakMap,ho=new WeakMap,po=new WeakMap,fo=new WeakMap,go=new WeakMap,mo=new WeakMap,vo=new WeakMap,yo=new WeakMap,bo=new WeakMap,wo=new WeakMap,xo=new WeakMap,_o=new WeakMap,ko=new WeakMap,Ao=new WeakMap,So=new WeakMap,Eo=new WeakMap,Co=new WeakMap,Mo=new WeakMap,To=new WeakMap,Ro=new WeakMap,Po=new WeakMap,Do=new WeakMap,Lo=new WeakMap,No=new WeakMap,Io=new WeakMap,Fo=new WeakMap,Oo=new WeakMap,Bo=new WeakMap,Wo=new WeakMap,jo=new WeakMap,Uo=new WeakMap,zo=new WeakMap,Ho=new WeakMap,Vo=new WeakMap,Go=new WeakMap,qo=new WeakMap,Xo=new WeakMap,Ko=new WeakMap,Yo=new WeakMap,Qo=new WeakMap,$o=new WeakMap,Jo=new WeakMap,Zo=new WeakMap,tl=new WeakSet;class el{static get _keyboardManager(){const t=el.prototype,e=t=>dr(Qo,t).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl(),n=(t,e)=>{let{target:n}=e;if(n instanceof HTMLInputElement){const{type:t}=n;return"text"!==t&&"number"!==t}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return xs(this,"_keyboardManager",new eo([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(t,e)=>{let{target:n}=e;return!(n instanceof HTMLButtonElement)&&dr(Qo,t).contains(n)&&!t.isEnterHandled}}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(t,e)=>{let{target:n}=e;return!(n instanceof HTMLButtonElement)&&dr(Qo,t).contains(document.activeElement)}}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}constructor(t,e,n,i,r,s,a,o,l,c,h,d,p,f,g,m){lr(this,tl),cr(this,ro,new AbortController),cr(this,so,null),cr(this,ao,null),cr(this,oo,new Map),cr(this,lo,new Map),cr(this,co,null),cr(this,uo,null),cr(this,ho,null),cr(this,po,new Za),cr(this,fo,null),cr(this,go,null),cr(this,mo,null),cr(this,vo,0),cr(this,yo,new Set),cr(this,bo,null),cr(this,wo,null),cr(this,xo,new Set),u(this,"_editorUndoBar",null),cr(this,_o,!1),cr(this,ko,!1),cr(this,Ao,!1),cr(this,So,null),cr(this,Eo,null),cr(this,Co,null),cr(this,Mo,null),cr(this,To,!1),cr(this,Ro,null),cr(this,Po,new za),cr(this,Do,!1),cr(this,Lo,!1),cr(this,No,!1),cr(this,Io,null),cr(this,Fo,null),cr(this,Oo,null),cr(this,Bo,null),cr(this,Wo,null),cr(this,jo,Gr.NONE),cr(this,Uo,new Set),cr(this,zo,null),cr(this,Ho,null),cr(this,Vo,null),cr(this,Go,null),cr(this,qo,null),cr(this,Xo,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),cr(this,Ko,[0,0]),cr(this,Yo,null),cr(this,Qo,null),cr(this,$o,null),cr(this,Jo,null),cr(this,Zo,null);const v=this._signal=dr(ro,this).signal;pr(Qo,this,t),pr($o,this,e),pr(Jo,this,n),pr(co,this,i),pr(fo,this,r),pr(Ho,this,s),pr(qo,this,o),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:v}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),a._on("setpreference",this.onSetPreference.bind(this),{signal:v}),a._on("switchannotationeditorparams",t=>this.updateParams(t.type,t.value),{signal:v}),window.addEventListener("pointerdown",()=>{pr(Lo,this,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{pr(Lo,this,!1)},{capture:!0,signal:v}),ur(tl,this,ol).call(this),ur(tl,this,fl).call(this),ur(tl,this,ul).call(this),pr(uo,this,o.annotationStorage),pr(So,this,o.filterFactory),pr(Vo,this,l),pr(Mo,this,c||null),pr(_o,this,h),pr(ko,this,d),pr(Ao,this,p),pr(Wo,this,f||null),this.viewParameters={realScale:Gs.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=!1!==m,null===r||void 0===r||r.setSidebarUiManager(this)}destroy(){var t,e,n,i,r,s,a,o,l;null===(t=dr(Zo,this))||void 0===t||t.resolve(),pr(Zo,this,null),null===(e=dr(ro,this))||void 0===e||e.abort(),pr(ro,this,null),this._signal=null;for(const c of dr(lo,this).values())c.destroy();dr(lo,this).clear(),dr(oo,this).clear(),dr(xo,this).clear(),null===(n=dr(Bo,this))||void 0===n||n.clear(),pr(so,this,null),dr(Uo,this).clear(),dr(po,this).destroy(),null===(i=dr(co,this))||void 0===i||i.destroy(),null===(r=dr(fo,this))||void 0===r||r.destroy(),null===(s=dr(Ho,this))||void 0===s||s.destroy(),null===(a=dr(Ro,this))||void 0===a||a.hide(),pr(Ro,this,null),null===(o=dr(Oo,this))||void 0===o||o.destroy(),pr(Oo,this,null),pr(ao,this,null),dr(Eo,this)&&(clearTimeout(dr(Eo,this)),pr(Eo,this,null)),dr(Yo,this)&&(clearTimeout(dr(Yo,this)),pr(Yo,this,null)),null===(l=this._editorUndoBar)||void 0===l||l.destroy(),pr(qo,this,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return dr(Wo,this)}get useNewAltTextFlow(){return dr(ko,this)}get useNewAltTextWhenAddingImage(){return dr(Ao,this)}get hcmFilter(){return xs(this,"hcmFilter",dr(Vo,this)?dr(So,this).addHCMFilter(dr(Vo,this).foreground,dr(Vo,this).background):"none")}get direction(){return xs(this,"direction",getComputedStyle(dr(Qo,this)).direction)}get _highlightColors(){return xs(this,"_highlightColors",dr(Mo,this)?new Map(dr(Mo,this).split(",").map(t=>((t=t.split("=").map(t=>t.trim()))[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return xs(this,"highlightColors",null);const e=new Map,n=!!dr(Vo,this);for(const[i,r]of t){const t=i.endsWith("_HCM");n&&t?e.set(i.replace("_HCM",""),r):n||t||e.set(i,r)}return xs(this,"highlightColors",e)}get highlightColorNames(){return xs(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),pr(mo,this,t)}setMainHighlightColorPicker(t){pr(Oo,this,t)}editAltText(t){var e;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(e=dr(co,this))||void 0===e||e.editAltText(this,t,n)}hasCommentManager(){return!!dr(fo,this)}editComment(t,e,n,i){var r;null===(r=dr(fo,this))||void 0===r||r.showDialog(this,t,e,n,i)}selectComment(t,e){const n=dr(lo,this).get(t),i=null===n||void 0===n?void 0:n.getEditorByUID(e);null===i||void 0===i||i.toggleComment(!0,!0)}updateComment(t){var e;null===(e=dr(fo,this))||void 0===e||e.updateComment(t.getData())}updatePopupColor(t){var e;null===(e=dr(fo,this))||void 0===e||e.updatePopupColor(t)}removeComment(t){var e;null===(e=dr(fo,this))||void 0===e||e.removeComments([t.uid])}toggleComment(t,e){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;null===(n=dr(fo,this))||void 0===n||n.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){var n;return t&&(null===(n=dr(fo,this))||void 0===n?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return(null===(t=dr(fo,this))||void 0===t?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(dr(lo,this).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),i=n=>{n.pageNumber===t&&(this._eventBus._off("editorsrendered",i),e())};this._eventBus.on("editorsrendered",i),await n}getSignature(t){var e;null===(e=dr(Ho,this))||void 0===e||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return dr(Ho,this)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference(t){let{name:e,value:n}=t;if("enableNewAltTextWhenAddingImage"===e)pr(Ao,this,n)}onPageChanging(t){let{pageNumber:e}=t;pr(vo,this,e-1)}focusMainContainer(){dr(Qo,this).focus()}findParent(t,e){for(const n of dr(lo,this).values()){const{x:i,y:r,width:s,height:a}=n.div.getBoundingClientRect();if(t>=i&&t<=i+s&&e>=r&&e<=r+a)return n}return null}disableUserSelect(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];dr($o,this).classList.toggle("noUserSelect",t)}addShouldRescale(t){dr(xo,this).add(t)}removeShouldRescale(t){dr(xo,this).delete(t)}onScaleChanging(t){var e;let{scale:n}=t;this.commitOrRemove(),this.viewParameters.realScale=n*Gs.PDF_TO_CSS_UNITS;for(const i of dr(xo,this))i.onScaleChanging();null===(e=dr(mo,this))||void 0===e||e.onScaleChanging()}onRotationChanging(t){let{pagesRotation:e}=t;this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:a}=n,o=n.toString(),l=ur(tl,this,nl).call(this,n).closest(".textLayer"),c=this.getSelectionBoxes(l);if(!c)return;n.empty();const u=ur(tl,this,il).call(this,l),h=dr(jo,this)===Gr.NONE,d=()=>{const n=null===u||void 0===u?void 0:u.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:c,anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:a,text:o});h&&this.showAllEditors("highlight",!0,!0),e&&(null===n||void 0===n||n.editComment())};h?this.switchToMode(Gr.HIGHLIGHT,d):d()}commentSelection(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!dr(uo,this))return null;const e="".concat(Vr).concat(t),n=dr(uo,this).getRawValue(e);return n&&dr(uo,this).remove(e),n}addToAnnotationStorage(t){t.isEmpty()||!dr(uo,this)||dr(uo,this).has(t.id)||dr(uo,this).setValue(t.id,t)}a11yAlert(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=dr(Jo,this);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,dr(To,this)&&(pr(To,this,!1),ur(tl,this,al).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of dr(Uo,this))if(e.div.contains(t)){pr(Fo,this,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!dr(Fo,this))return;const[t,e]=dr(Fo,this);pr(Fo,this,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){ur(tl,this,ul).call(this),ur(tl,this,dl).call(this)}removeEditListeners(){ur(tl,this,hl).call(this),ur(tl,this,pl).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of dr(wo,this))if(n.isHandlingMimeForPasting(e))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}drop(t){for(const e of t.dataTransfer.items)for(const n of dr(wo,this))if(n.isHandlingMimeForPasting(e.type))return n.paste(e,this.currentLayer),void t.preventDefault()}copy(t){var e;if(t.preventDefault(),null===(e=dr(so,this))||void 0===e||e.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of dr(Uo,this)){const t=i.serialize(!0);t&&n.push(t)}0!==n.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const s of e.items)for(const t of dr(wo,this))if(t.isHandlingMimeForPasting(s.type))return void t.paste(s,this.currentLayer);let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){return void ms('paste: "'.concat(r.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const t=[];for(const s of n){const e=await i.deserialize(s);if(!e)return;t.push(e)}const e=()=>{for(const e of t)ur(tl,this,bl).call(this,e);ur(tl,this,_l).call(this,t)},r=()=>{for(const e of t)e.remove()};this.addCommands({cmd:e,undo:r,mustExec:!0})}catch(r){ms('paste: "'.concat(r.message,'".'))}}keydown(t){this.isShiftKeyDown||"Shift"!==t.key||(this.isShiftKeyDown=!0),dr(jo,this)===Gr.NONE||this.isEditorHandlingKeyboard||el._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,dr(To,this)&&(pr(To,this,!1),ur(tl,this,al).call(this,"main_toolbar")))}onEditingAction(t){let{name:e}=t;switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu")}}setEditingState(t){t?(ur(tl,this,ll).call(this),ur(tl,this,dl).call(this),ur(tl,this,gl).call(this,{isEditing:dr(jo,this)!==Gr.NONE,isEmpty:ur(tl,this,xl).call(this),hasSomethingToUndo:dr(po,this).hasSomethingToUndo(),hasSomethingToRedo:dr(po,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(ur(tl,this,cl).call(this),ur(tl,this,pl).call(this),ur(tl,this,gl).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!dr(wo,this)){pr(wo,this,t);for(const t of dr(wo,this))ur(tl,this,ml).call(this,t.defaultPropertiesToUpdate)}}getId(){return dr(Po,this).id}get currentLayer(){return dr(lo,this).get(dr(vo,this))}getLayer(t){return dr(lo,this).get(t)}get currentPageIndex(){return dr(vo,this)}addLayer(t){dr(lo,this).set(t.pageIndex,t),dr(Do,this)?t.enable():t.disable()}removeLayer(t){dr(lo,this).delete(t.pageIndex)}async updateMode(t){var e,n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(dr(jo,this)!==t&&(!dr(Zo,this)||(await dr(Zo,this).promise,dr(Zo,this)))){var o,l;if(pr(Zo,this,Promise.withResolvers()),null===(e=dr(mo,this))||void 0===e||e.commitOrRemove(),dr(jo,this)===Gr.POPUP)null===(o=dr(fo,this))||void 0===o||o.hideSidebar();if(null===(n=dr(fo,this))||void 0===n||n.destroyPopup(),pr(jo,this,t),t===Gr.NONE){var c;this.setEditingState(!1),ur(tl,this,yl).call(this);for(const t of dr(oo,this).values())t.hideStandaloneCommentButton();return null===(c=this._editorUndoBar)||void 0===c||c.hide(),this.toggleComment(null),void dr(Zo,this).resolve()}for(const t of dr(oo,this).values())t.addStandaloneCommentButton();if(t===Gr.SIGNATURE)await(null===(l=dr(Ho,this))||void 0===l?void 0:l.loadSignatures());this.setEditingState(!0),await ur(tl,this,vl).call(this),this.unselectAll();for(const e of dr(lo,this).values())e.updateMode(t);if(t===Gr.POPUP){var u;dr(ao,this)||pr(ao,this,await dr(qo,this).getAnnotationsByType(new Set(dr(wo,this).map(t=>t._editorType))));const t=new Set,e=[];for(const n of dr(oo,this).values()){const{annotationElementId:i,hasComment:r,deleted:s}=n;i&&t.add(i),r&&!s&&e.push(n.getData())}for(const n of dr(ao,this)){const{id:i,popupRef:r,contentsObj:s}=n;r&&null!==s&&void 0!==s&&s.str&&!t.has(i)&&!dr(yo,this).has(i)&&e.push(n)}null===(u=dr(fo,this))||void 0===u||u.showSidebar(e)}if(!i)return r&&this.addNewEditorFromKeyboard(),void dr(Zo,this).resolve();for(const t of dr(oo,this).values())t.uid===i?(this.setSelected(t),a?t.editComment():s?t.enterInEditMode():t.focus()):t.unselect();dr(Zo,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==dr(jo,this)&&this._eventBus.dispatch("switchannotationeditormode",d({source:this},t))}updateParams(t,e){if(dr(wo,this)){switch(t){case qr.CREATE:return void this.currentLayer.addNewEditor(e);case qr.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(dr(Go,this)||pr(Go,this,new Map)).set(t,e),this.showAllEditors("highlight",e)}if(this.hasSelection)for(const n of dr(Uo,this))n.updateParams(t,e);else for(const n of dr(wo,this))n.updateDefaultParams(t,e)}}showAllEditors(t,e){var n,i;for(const r of dr(oo,this).values())r.editorType===t&&r.show(e);(null===(n=null===(i=dr(Go,this))||void 0===i?void 0:i.get(qr.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==e&&ur(tl,this,ml).call(this,[[qr.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(dr(No,this)!==t){pr(No,this,t);for(const e of dr(lo,this).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of dr(oo,this).values())e.pageIndex===t&&(yield e)}getEditor(t){return dr(oo,this).get(t)}addEditor(t){dr(oo,this).set(t.id,t)}removeEditor(t){var e,n;(t.div.contains(document.activeElement)&&(dr(Eo,this)&&clearTimeout(dr(Eo,this)),pr(Eo,this,setTimeout(()=>{this.focusMainContainer(),pr(Eo,this,null)},0))),dr(oo,this).delete(t.id),t.annotationElementId)&&(null===(e=dr(Bo,this))||void 0===e||e.delete(t.annotationElementId));(this.unselect(t),t.annotationElementId&&dr(yo,this).has(t.annotationElementId))||(null===(n=dr(uo,this))||void 0===n||n.remove(t.id))}addDeletedAnnotationElement(t){dr(yo,this).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return dr(yo,this).has(t)}removeDeletedAnnotationElement(t){dr(yo,this).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){dr(so,this)!==t&&(pr(so,this,t),t&&ur(tl,this,ml).call(this,t.propertiesToUpdate))}updateUI(t){hr(tl,this,wl)===t&&ur(tl,this,ml).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){ur(tl,this,ml).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(dr(Uo,this).has(t))return dr(Uo,this).delete(t),t.unselect(),void ur(tl,this,gl).call(this,{hasSelectedEditor:this.hasSelection});dr(Uo,this).add(t),t.select(),ur(tl,this,ml).call(this,t.propertiesToUpdate),ur(tl,this,gl).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.id}),null===(e=dr(mo,this))||void 0===e||e.commitOrRemove();for(const n of dr(Uo,this))n!==t&&n.unselect();dr(Uo,this).clear(),dr(Uo,this).add(t),t.select(),ur(tl,this,ml).call(this,t.propertiesToUpdate),ur(tl,this,gl).call(this,{hasSelectedEditor:!0})}isSelected(t){return dr(Uo,this).has(t)}get firstSelectedEditor(){return dr(Uo,this).values().next().value}unselect(t){t.unselect(),dr(Uo,this).delete(t),ur(tl,this,gl).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==dr(Uo,this).size}get isEnterHandled(){return 1===dr(Uo,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){var t;dr(po,this).undo(),ur(tl,this,gl).call(this,{hasSomethingToUndo:dr(po,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ur(tl,this,xl).call(this)}),null===(t=this._editorUndoBar)||void 0===t||t.hide()}redo(){dr(po,this).redo(),ur(tl,this,gl).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:dr(po,this).hasSomethingToRedo(),isEmpty:ur(tl,this,xl).call(this)})}addCommands(t){dr(po,this).add(t),ur(tl,this,gl).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ur(tl,this,xl).call(this)})}cleanUndoStack(t){dr(po,this).cleanType(t)}delete(){var t;this.commitOrRemove();const e=null===(t=this.currentLayer)||void 0===t?void 0:t.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...dr(Uo,this)],i=()=>{for(const t of n)ur(tl,this,bl).call(this,t)};this.addCommands({cmd:()=>{var t;null===(t=this._editorUndoBar)||void 0===t||t.show(i,1===n.length?n[0].editorType:n.length);for(const e of n)e.remove()},undo:i,mustExec:!0})}commitOrRemove(){var t;null===(t=dr(so,this))||void 0===t||t.commitOrRemove()}hasSomethingToControl(){return dr(so,this)||this.hasSelection}selectAll(){for(const t of dr(Uo,this))t.commit();ur(tl,this,_l).call(this,dr(oo,this).values())}unselectAll(){var t;if((!dr(so,this)||(dr(so,this).commitOrRemove(),dr(jo,this)===Gr.NONE))&&(null===(t=dr(mo,this))||void 0===t||!t.commitOrRemove())&&this.hasSelection){for(const t of dr(Uo,this))t.unselect();dr(Uo,this).clear(),ur(tl,this,gl).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;dr(Ko,this)[0]+=t,dr(Ko,this)[1]+=e;const[n,i]=dr(Ko,this),r=[...dr(Uo,this)];dr(Yo,this)&&clearTimeout(dr(Yo,this)),pr(Yo,this,setTimeout(()=>{pr(Yo,this,null),dr(Ko,this)[0]=dr(Ko,this)[1]=0,this.addCommands({cmd:()=>{for(const t of r)dr(oo,this).has(t.id)&&(t.translateInPage(n,i),t.translationDone())},undo:()=>{for(const t of r)dr(oo,this).has(t.id)&&(t.translateInPage(-n,-i),t.translationDone())},mustExec:!1})},1e3));for(const s of r)s.translateInPage(t,e),s.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),pr(bo,this,new Map);for(const t of dr(Uo,this))dr(bo,this).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!dr(bo,this))return!1;this.disableUserSelect(!1);const t=dr(bo,this);pr(bo,this,null);let e=!1;for(const[{x:i,y:r,pageIndex:s},a]of t)a.newX=i,a.newY=r,a.newPageIndex=s,e||(e=i!==a.savedX||r!==a.savedY||s!==a.savedPageIndex);if(!e)return!1;const n=(t,e,n,i)=>{if(dr(oo,this).has(t.id)){const r=dr(lo,this).get(i);r?t._setParentAndPosition(r,e,n):(t.pageIndex=i,t.x=e,t.y=n)}};return this.addCommands({cmd:()=>{for(const[e,{newX:i,newY:r,newPageIndex:s}]of t)n(e,i,r,s)},undo:()=>{for(const[e,{savedX:i,savedY:r,savedPageIndex:s}]of t)n(e,i,r,s)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(dr(bo,this))for(const n of dr(bo,this).keys())n.drag(t,e)}rebuild(t){if(null===t.parent){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return(null===(t=this.getActive())||void 0===t?void 0:t.shouldGetKeyboardEvents())||1===dr(Uo,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return dr(so,this)===t}getActive(){return dr(so,this)}getMode(){return dr(jo,this)}isEditingMode(){return dr(jo,this)!==Gr.NONE}get imageManager(){return xs(this,"imageManager",new Xa)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let l=0,c=e.rangeCount;l<c;l++)if(!t.contains(e.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:s}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(t,e,a,o)=>({x:(e-i)/s,y:1-(t+a-n)/r,width:o/s,height:a/r});break;case"180":a=(t,e,a,o)=>({x:1-(t+a-n)/r,y:1-(e+o-i)/s,width:a/r,height:o/s});break;case"270":a=(t,e,a,o)=>({x:1-(e+o-i)/s,y:(t-n)/r,width:o/s,height:a/r});break;default:a=(t,e,a,o)=>({x:(t-n)/r,y:(e-i)/s,width:a/r,height:o/s})}const o=[];for(let l=0,c=e.rangeCount;l<c;l++){const t=e.getRangeAt(l);if(!t.collapsed)for(const{x:e,y:n,width:i,height:r}of t.getClientRects())0!==i&&0!==r&&o.push(a(e,n,i,r))}return 0===o.length?null:o}addChangedExistingAnnotation(t){let{annotationElementId:e,id:n}=t;(dr(ho,this)||pr(ho,this,new Map)).set(e,n)}removeChangedExistingAnnotation(t){var e;let{annotationElementId:n}=t;null===(e=dr(ho,this))||void 0===e||e.delete(n)}renderAnnotationElement(t){var e;const n=null===(e=dr(ho,this))||void 0===e?void 0:e.get(t.data.id);if(!n)return;const i=dr(uo,this).getRawValue(n);i&&(dr(jo,this)!==Gr.NONE||i.hasBeenModified)&&i.renderAnnotationElement(t)}setMissingCanvas(t,e,n){var i;const r=null===(i=dr(Bo,this))||void 0===i?void 0:i.get(t);r&&(r.setCanvas(e,n),dr(Bo,this).delete(t))}addMissingCanvas(t,e){(dr(Bo,this)||pr(Bo,this,new Map)).set(t,e)}}function nl(t){let{anchorNode:e}=t;return e.nodeType===Node.TEXT_NODE?e.parentElement:e}function il(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of dr(lo,this).values())if(n.hasTextLayer(t))return n;return null}function rl(){const t=document.getSelection();if(!t||t.isCollapsed)return;const e=ur(tl,this,nl).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(e);n&&(dr(Ro,this)||pr(Ro,this,new Fa(this)),dr(Ro,this).show(e,n,"ltr"===this.direction))}function sl(){var t;const e=document.getSelection();if(!e||e.isCollapsed){var n;if(dr(zo,this))null===(n=dr(Ro,this))||void 0===n||n.hide(),pr(zo,this,null),ur(tl,this,gl).call(this,{hasSelectedText:!1});return}const{anchorNode:i}=e;if(i===dr(zo,this))return;const r=ur(tl,this,nl).call(this,e).closest(".textLayer");var s;if(r){if(null===(t=dr(Ro,this))||void 0===t||t.hide(),pr(zo,this,i),ur(tl,this,gl).call(this,{hasSelectedText:!0}),(dr(jo,this)===Gr.HIGHLIGHT||dr(jo,this)===Gr.NONE)&&(dr(jo,this)===Gr.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),pr(To,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const t=dr(jo,this)===Gr.HIGHLIGHT?ur(tl,this,il).call(this,r):null;if(null===t||void 0===t||t.toggleDrawing(),dr(Lo,this)){const e=new AbortController,n=this.combinedSignal(e),i=n=>{"pointerup"===n.type&&0!==n.button||(e.abort(),null===t||void 0===t||t.toggleDrawing(!0),"pointerup"===n.type&&ur(tl,this,al).call(this,"main_toolbar"))};window.addEventListener("pointerup",i,{signal:n}),window.addEventListener("blur",i,{signal:n})}else null===t||void 0===t||t.toggleDrawing(!0),ur(tl,this,al).call(this,"main_toolbar")}}else dr(zo,this)&&(null===(s=dr(Ro,this))||void 0===s||s.hide(),pr(zo,this,null),ur(tl,this,gl).call(this,{hasSelectedText:!1}))}function al(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";dr(jo,this)===Gr.HIGHLIGHT?this.highlightSelection(t):dr(_o,this)&&ur(tl,this,rl).call(this)}function ol(){document.addEventListener("selectionchange",ur(tl,this,sl).bind(this),{signal:this._signal})}function ll(){if(dr(Co,this))return;pr(Co,this,new AbortController);const t=this.combinedSignal(dr(Co,this));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}function cl(){var t;null===(t=dr(Co,this))||void 0===t||t.abort(),pr(Co,this,null)}function ul(){if(dr(Io,this))return;pr(Io,this,new AbortController);const t=this.combinedSignal(dr(Io,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}function hl(){var t;null===(t=dr(Io,this))||void 0===t||t.abort(),pr(Io,this,null)}function dl(){if(dr(go,this))return;pr(go,this,new AbortController);const t=this.combinedSignal(dr(go,this));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}function pl(){var t;null===(t=dr(go,this))||void 0===t||t.abort(),pr(go,this,null)}function fl(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}function gl(t){Object.entries(t).some(t=>{let[e,n]=t;return dr(Xo,this)[e]!==n})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(dr(Xo,this),t)}),dr(jo,this)===Gr.HIGHLIGHT&&!1===t.hasSelectedEditor&&ur(tl,this,ml).call(this,[[qr.HIGHLIGHT_FREE,!0]]))}function ml(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}async function vl(){if(!dr(Do,this)){pr(Do,this,!0);const t=[];for(const e of dr(lo,this).values())t.push(e.enable());await Promise.all(t);for(const e of dr(oo,this).values())e.enable()}}function yl(){if(this.unselectAll(),dr(Do,this)){pr(Do,this,!1);for(const t of dr(lo,this).values())t.disable();for(const t of dr(oo,this).values())t.disable()}}function bl(t){const e=dr(lo,this).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}function wl(t){let e=null;for(e of dr(Uo,t));return e}function xl(){if(0===dr(oo,this).size)return!0;if(1===dr(oo,this).size)for(const t of dr(oo,this).values())return t.isEmpty();return!1}function _l(t){for(const e of dr(Uo,this))e.unselect();dr(Uo,this).clear();for(const e of t)e.isEmpty()||(dr(Uo,this).add(e),e.select());ur(tl,this,gl).call(this,{hasSelectedEditor:this.hasSelection})}u(el,"TRANSLATE_SMALL",1),u(el,"TRANSLATE_BIG",10);var kl=new WeakMap,Al=new WeakMap,Sl=new WeakMap,El=new WeakMap,Cl=new WeakMap,Ml=new WeakMap,Tl=new WeakMap,Rl=new WeakMap,Pl=new WeakMap,Dl=new WeakMap,Ll=new WeakMap,Nl=new WeakMap,Il=new WeakSet;class Fl{constructor(t){lr(this,Il),cr(this,kl,null),cr(this,Al,!1),cr(this,Sl,null),cr(this,El,null),cr(this,Cl,null),cr(this,Ml,null),cr(this,Tl,!1),cr(this,Rl,null),cr(this,Pl,null),cr(this,Dl,null),cr(this,Ll,null),cr(this,Nl,!1),pr(Pl,this,t),pr(Nl,this,t._uiManager.useNewAltTextFlow),Wl._||(Wl._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){var e;null!==(e=Fl._l10n)&&void 0!==e||(Fl._l10n=t)}async render(){const t=pr(Sl,this,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=pr(El,this,document.createElement("span"));t.append(e),dr(Nl,this)?(t.classList.add("new"),t.setAttribute("data-l10n-id",Wl._.missing),e.setAttribute("data-l10n-id",Wl._["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=dr(Pl,this)._uiManager._signal;t.addEventListener("contextmenu",Zs,{signal:n}),t.addEventListener("pointerdown",t=>t.stopPropagation(),{signal:n});const i=t=>{t.preventDefault(),dr(Pl,this)._uiManager.editAltText(dr(Pl,this)),dr(Nl,this)&&dr(Pl,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:hr(Il,this,Ol)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",e=>{e.target===t&&"Enter"===e.key&&(pr(Tl,this,!0),i(e))},{signal:n}),await ur(Il,this,Bl).call(this),t}finish(){dr(Sl,this)&&(dr(Sl,this).focus({focusVisible:dr(Tl,this)}),pr(Tl,this,!1))}isEmpty(){return dr(Nl,this)?null===dr(kl,this):!dr(kl,this)&&!dr(Al,this)}hasData(){return dr(Nl,this)?null!==dr(kl,this)||!!dr(Dl,this):this.isEmpty()}get guessedText(){return dr(Dl,this)}async setGuessedText(t){null===dr(kl,this)&&(pr(Dl,this,t),pr(Ll,this,await Fl._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),ur(Il,this,Bl).call(this))}toggleAltTextBadge(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e;if(!dr(Nl,this)||dr(kl,this))return null===(e=dr(Rl,this))||void 0===e||e.remove(),void pr(Rl,this,null);if(!dr(Rl,this)){const t=pr(Rl,this,document.createElement("div"));t.className="noAltTextBadge",dr(Pl,this).div.append(t)}dr(Rl,this).classList.toggle("hidden",!t)}serialize(t){let e=dr(kl,this);return t||dr(Dl,this)!==e||(e=dr(Ll,this)),{altText:e,decorative:dr(Al,this),guessedText:dr(Dl,this),textWithDisclaimer:dr(Ll,this)}}get data(){return{altText:dr(kl,this),decorative:dr(Al,this)}}set data(t){let{altText:e,decorative:n,guessedText:i,textWithDisclaimer:r,cancel:s=!1}=t;i&&(pr(Dl,this,i),pr(Ll,this,r)),dr(kl,this)===e&&dr(Al,this)===n||(s||(pr(kl,this,e),pr(Al,this,n)),ur(Il,this,Bl).call(this))}toggle(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];dr(Sl,this)&&(!t&&dr(Ml,this)&&(clearTimeout(dr(Ml,this)),pr(Ml,this,null)),dr(Sl,this).disabled=!t)}shown(){dr(Pl,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:hr(Il,this,Ol)}})}destroy(){var t,e;null===(t=dr(Sl,this))||void 0===t||t.remove(),pr(Sl,this,null),pr(El,this,null),pr(Cl,this,null),null===(e=dr(Rl,this))||void 0===e||e.remove(),pr(Rl,this,null)}}function Ol(t){return(dr(kl,t)?"added":null===dr(kl,t)&&t.guessedText&&"review")||"missing"}async function Bl(){const t=dr(Sl,this);if(!t)return;if(dr(Nl,this)){var e,n;if(t.classList.toggle("done",!!dr(kl,this)),t.setAttribute("data-l10n-id",Wl._[hr(Il,this,Ol)]),null===(e=dr(El,this))||void 0===e||e.setAttribute("data-l10n-id",Wl._["".concat(hr(Il,this,Ol),"-label")]),!dr(kl,this))return void(null===(n=dr(Cl,this))||void 0===n||n.remove())}else{var i;if(!dr(kl,this)&&!dr(Al,this))return t.classList.remove("done"),void(null===(i=dr(Cl,this))||void 0===i||i.remove());t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=dr(Cl,this);if(!r){pr(Cl,this,r=document.createElement("span")),r.className="tooltip",r.setAttribute("role","tooltip"),r.id="alt-text-tooltip-".concat(dr(Pl,this).id);const e=100,n=dr(Pl,this)._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(dr(Ml,this)),pr(Ml,this,null)},{once:!0}),t.addEventListener("mouseenter",()=>{pr(Ml,this,setTimeout(()=>{pr(Ml,this,null),dr(Cl,this).classList.add("show"),dr(Pl,this)._reportTelemetry({action:"alt_text_tooltip"})},e))},{signal:n}),t.addEventListener("mouseleave",()=>{var t;dr(Ml,this)&&(clearTimeout(dr(Ml,this)),pr(Ml,this,null)),null===(t=dr(Cl,this))||void 0===t||t.classList.remove("show")},{signal:n})}dr(Al,this)?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=dr(kl,this)),r.parentNode||t.append(r);const s=dr(Pl,this).getElementForAltText();null===s||void 0===s||s.setAttribute("aria-describedby",r.id)}var Wl={_:null};u(Fl,"_l10n",null);var jl=new WeakMap,Ul=new WeakMap,zl=new WeakMap,Hl=new WeakMap,Vl=new WeakMap,Gl=new WeakMap,ql=new WeakMap,Xl=new WeakMap,Kl=new WeakMap,Yl=new WeakMap,Ql=new WeakSet;class $l{constructor(t){lr(this,Ql),cr(this,jl,null),cr(this,Ul,null),cr(this,zl,!1),cr(this,Hl,null),cr(this,Vl,null),cr(this,Gl,null),cr(this,ql,null),cr(this,Xl,null),cr(this,Kl,!1),cr(this,Yl,null),pr(Hl,this,t)}renderForToolbar(){const t=pr(Ul,this,document.createElement("button"));return t.className="comment",ur(Ql,this,Jl).call(this,t,!1)}renderForStandalone(){const t=pr(jl,this,document.createElement("button"));t.className="annotationCommentButton";const e=dr(Hl,this).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd="calc(".concat(100*("ltr"===dr(Hl,this)._uiManager.direction?1-e[0]:e[0]),"% - var(--comment-button-dim))"),n.top="calc(".concat(100*e[1],"% - var(--comment-button-dim))");const i=dr(Hl,this).commentButtonColor;i&&(n.backgroundColor=i)}return ur(Ql,this,Jl).call(this,t,!0)}focusButton(){setTimeout(()=>{var t,e;null===(t=null!==(e=dr(jl,this))&&void 0!==e?e:dr(Ul,this))||void 0===t||t.focus()},0)}onUpdatedColor(){if(!dr(jl,this))return;const t=dr(Hl,this).commentButtonColor;t&&(dr(jl,this).style.backgroundColor=t),dr(Hl,this)._uiManager.updatePopupColor(dr(Hl,this))}get commentButtonWidth(){var t,e;return(null!==(t=null===(e=dr(jl,this))||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==t?t:0)/dr(Hl,this).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(dr(Yl,this))return dr(Yl,this);if(!dr(jl,this))return null;const{x:t,y:e,height:n}=dr(jl,this).getBoundingClientRect(),{x:i,y:r,width:s,height:a}=dr(Hl,this).parent.boundingClientRect;return[(t-i)/s,(e+n-r)/a]}set commentPopupPositionInLayer(t){pr(Yl,this,t)}hasDefaultPopupPosition(){return null===dr(Yl,this)}removeStandaloneCommentButton(){var t;null===(t=dr(jl,this))||void 0===t||t.remove(),pr(jl,this,null)}removeToolbarCommentButton(){var t;null===(t=dr(Ul,this))||void 0===t||t.remove(),pr(Ul,this,null)}setCommentButtonStates(t){let{selected:e,hasPopup:n}=t;dr(jl,this)&&(dr(jl,this).classList.toggle("selected",e),dr(jl,this).ariaExpanded=n)}edit(t){const e=this.commentPopupPositionInLayer;let n,i;if(e)[n,i]=e;else{[n,i]=dr(Hl,this).commentButtonPosition;const{width:t,height:e,x:r,y:s}=dr(Hl,this);n=r+n*t,i=s+i*e}const r=dr(Hl,this).parent.boundingClientRect,{x:s,y:a,width:o,height:l}=r;dr(Hl,this)._uiManager.editComment(dr(Hl,this),s+n*o,a+i*l,d(d({},t),{},{parentDimensions:r}))}finish(){dr(Ul,this)&&(dr(Ul,this).focus({focusVisible:dr(zl,this)}),pr(zl,this,!1))}isDeleted(){return dr(Kl,this)||""===dr(ql,this)}isEmpty(){return null===dr(ql,this)}hasBeenEdited(){return this.isDeleted()||dr(ql,this)!==dr(Vl,this)}serialize(){return this.data}get data(){return{text:dr(ql,this),richText:dr(Gl,this),date:dr(Xl,this),deleted:this.isDeleted()}}set data(t){if(t!==dr(ql,this)&&pr(Gl,this,null),null===t)return pr(ql,this,""),void pr(Kl,this,!0);pr(ql,this,t),pr(Xl,this,new Date),pr(Kl,this,!1)}setInitialText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;pr(Vl,this,t),this.data=t,pr(Xl,this,null),pr(Gl,this,e)}shown(){}destroy(){var t,e;null===(t=dr(Ul,this))||void 0===t||t.remove(),pr(Ul,this,null),null===(e=dr(jl,this))||void 0===e||e.remove(),pr(jl,this,null),pr(ql,this,""),pr(Gl,this,null),pr(Xl,this,null),pr(Hl,this,null),pr(zl,this,!1),pr(Kl,this,!1)}}function Jl(t,e){if(!dr(Hl,this)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[dr(Hl,this)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=dr(Hl,this)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Zs,{signal:n}),e&&(t.addEventListener("focusin",t=>{dr(Hl,this)._focusEventsAllowed=!1,ta(t)},{capture:!0,signal:n}),t.addEventListener("focusout",t=>{dr(Hl,this)._focusEventsAllowed=!0,ta(t)},{capture:!0,signal:n})),t.addEventListener("pointerdown",t=>t.stopPropagation(),{signal:n});const i=e=>{e.preventDefault(),t===dr(Ul,this)?this.edit():dr(Hl,this).toggleComment(!0)};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",e=>{e.target===t&&"Enter"===e.key&&(pr(zl,this,!0),i(e))},{signal:n}),t.addEventListener("pointerenter",()=>{dr(Hl,this).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{dr(Hl,this).toggleComment(!1,!1)},{signal:n}),t}var Zl=new WeakMap,tc=new WeakMap,ec=new WeakMap,nc=new WeakMap,ic=new WeakMap,rc=new WeakMap,sc=new WeakMap,ac=new WeakMap,oc=new WeakMap,lc=new WeakMap,cc=new WeakMap,uc=new WeakMap,hc=new WeakSet;class dc{constructor(t){let{container:e,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:o}=t;lr(this,hc),cr(this,Zl,void 0),cr(this,tc,!1),cr(this,ec,null),cr(this,nc,void 0),cr(this,ic,void 0),cr(this,rc,void 0),cr(this,sc,void 0),cr(this,ac,null),cr(this,oc,void 0),cr(this,lc,null),cr(this,cc,void 0),cr(this,uc,null),pr(Zl,this,e),pr(ec,this,i),pr(nc,this,n),pr(ic,this,r),pr(rc,this,s),pr(sc,this,a),pr(cc,this,new AbortController),pr(oc,this,AbortSignal.any([o,dr(cc,this).signal])),e.addEventListener("touchstart",ur(hc,this,pc).bind(this),{passive:!1,signal:dr(oc,this)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/oa.pixelRatio}destroy(){var t,e;null===(t=dr(cc,this))||void 0===t||t.abort(),pr(cc,this,null),null===(e=dr(ac,this))||void 0===e||e.abort(),pr(ac,this,null)}}function pc(t){var e,n;if(null!==(e=dr(nc,this))&&void 0!==e&&e.call(this))return;if(1===t.touches.length){if(dr(ac,this))return;const t=pr(ac,this,new AbortController),e=AbortSignal.any([dr(oc,this),t.signal]),n=dr(Zl,this),i={capture:!0,signal:e,passive:!1},r=t=>{var e;"touch"===t.pointerType&&(null===(e=dr(ac,this))||void 0===e||e.abort(),pr(ac,this,null))};return n.addEventListener("pointerdown",t=>{"touch"===t.pointerType&&(ta(t),r(t))},i),n.addEventListener("pointerup",r,i),void n.addEventListener("pointercancel",r,i)}if(!dr(uc,this)){var i;pr(uc,this,new AbortController);const t=AbortSignal.any([dr(oc,this),dr(uc,this).signal]),e=dr(Zl,this),n={signal:t,capture:!1,passive:!1};e.addEventListener("touchmove",ur(hc,this,fc).bind(this),n);const r=ur(hc,this,gc).bind(this);e.addEventListener("touchend",r,n),e.addEventListener("touchcancel",r,n),n.capture=!0,e.addEventListener("pointerdown",ta,n),e.addEventListener("pointermove",ta,n),e.addEventListener("pointercancel",ta,n),e.addEventListener("pointerup",ta,n),null===(i=dr(ic,this))||void 0===i||i.call(this)}if(ta(t),2!==t.touches.length||null!==(n=dr(ec,this))&&void 0!==n&&n.call(this))return void pr(lc,this,null);let[r,s]=t.touches;r.identifier>s.identifier&&([r,s]=[s,r]),pr(lc,this,{touch0X:r.screenX,touch0Y:r.screenY,touch1X:s.screenX,touch1Y:s.screenY})}function fc(t){var e;if(!dr(lc,this)||2!==t.touches.length)return;ta(t);let[n,i]=t.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:r,screenY:s}=n,{screenX:a,screenY:o}=i,l=dr(lc,this),{touch0X:c,touch0Y:u,touch1X:h,touch1Y:d}=l,p=h-c,f=d-u,g=a-r,m=o-s,v=Math.hypot(g,m)||1,y=Math.hypot(p,f)||1;if(!dr(tc,this)&&Math.abs(y-v)<=vr.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!dr(tc,this))return void pr(tc,this,!0);const b=[(r+a)/2,(s+o)/2];null===(e=dr(rc,this))||void 0===e||e.call(this,b,y,v)}function gc(t){if(!(t.touches.length>=2)){var e;if(dr(uc,this))dr(uc,this).abort(),pr(uc,this,null),null===(e=dr(sc,this))||void 0===e||e.call(this);dr(lc,this)&&(ta(t),pr(lc,this,null),pr(tc,this,!1))}}vr=dc;var mc=new WeakMap,vc=new WeakMap,yc=new WeakMap,bc=new WeakMap,wc=new WeakMap,xc=new WeakMap,_c=new WeakMap,kc=new WeakMap,Ac=new WeakMap,Sc=new WeakMap,Ec=new WeakMap,Cc=new WeakMap,Mc=new WeakMap,Tc=new WeakMap,Rc=new WeakMap,Pc=new WeakMap,Dc=new WeakMap,Lc=new WeakMap,Nc=new WeakMap,Ic=new WeakMap,Fc=new WeakMap,Oc=new WeakMap,Bc=new WeakMap,Wc=new WeakMap,jc=new WeakMap,Uc=new WeakMap,zc=new WeakSet;class Hc{static get _resizerKeyboardManager(){const t=Hc.prototype._resizeWithKeyboard,e=el.TRANSLATE_SMALL,n=el.TRANSLATE_BIG;return xs(this,"_resizerKeyboardManager",new eo([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Hc.prototype._stopResizingWithKeyboard]]))}constructor(t){lr(this,zc),cr(this,mc,null),cr(this,vc,null),cr(this,yc,null),cr(this,bc,null),cr(this,wc,null),cr(this,xc,!1),cr(this,_c,null),cr(this,kc,""),cr(this,Ac,null),cr(this,Sc,null),cr(this,Ec,null),cr(this,Cc,null),cr(this,Mc,null),cr(this,Tc,""),cr(this,Rc,!1),cr(this,Pc,null),cr(this,Dc,!1),cr(this,Lc,!1),cr(this,Nc,!1),cr(this,Ic,null),cr(this,Fc,0),cr(this,Oc,0),cr(this,Bc,null),cr(this,Wc,null),u(this,"isSelected",!1),u(this,"_isCopy",!1),u(this,"_editToolbar",null),u(this,"_initialOptions",Object.create(null)),u(this,"_initialData",null),u(this,"_isVisible",!0),u(this,"_uiManager",null),u(this,"_focusEventsAllowed",!0),cr(this,jc,!1),cr(this,Uc,Hc._zIndex++),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,s];const[a,o]=this.parentDimensions;this.x=t.x/a,this.y=t.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return xs(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new cu({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){var n;if(null!==(n=Hc._l10n)&&void 0!==n||(Hc._l10n=t),Hc._l10nResizer||(Hc._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==Hc._borderLineWidth)return;const i=getComputedStyle(document.documentElement);Hc._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){vs("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return dr(jc,this)}set _isDraggable(t){var e;pr(jc,this,t),null===(e=this.div)||void 0===e||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=dr(Uc,this)}setParent(t){var e;null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(ur(zc,this,lu).call(this),null===(e=dr(Cc,this))||void 0===e||e.remove(),pr(Cc,this,null));this.parent=t}focusin(t){this._focusEventsAllowed&&(dr(Rc,this)?pr(Rc,this,!1):this.parent.setSelected(this))}focusout(t){var e;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=t.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(t.preventDefault(),null!==(e=this.parent)&&void 0!==e&&e.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[r,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/r,this.y=(e+i)/s,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i),this._onTranslated()}translate(t,e){ur(zc,this,Vc).call(this,this.parentDimensions,t,e)}translateInPage(t,e){dr(Pc,this)||pr(Pc,this,[this.x,this.y,this.width,this.height]),ur(zc,this,Vc).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){dr(Pc,this)||pr(Pc,this,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this;const[o,l]=this.getBaseTranslation();s+=o,a+=l;const{style:c}=n;c.left="".concat((100*s).toFixed(2),"%"),c.top="".concat((100*a).toFixed(2),"%"),this._onTranslating(s,a),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!dr(Pc,this)&&(dr(Pc,this)[0]!==this.x||dr(Pc,this)[1]!==this.y)}get _hasBeenResized(){return!!dr(Pc,this)&&(dr(Pc,this)[2]!==this.width||dr(Pc,this)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Hc,i=n/t,r=n/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const{div:{style:e},pageDimensions:[n,i]}=this;let{x:r,y:s,width:a,height:o}=this;if(a*=n,o*=i,r*=n,s*=i,this._mustFixPosition)switch(t){case 0:r=js(r,0,n-a),s=js(s,0,i-o);break;case 90:r=js(r,0,n-o),s=js(s,a,i);break;case 180:r=js(r,a,n),s=js(s,o,i);break;case 270:r=js(r,o,n),s=js(s,0,i-a)}this.x=r/=n,this.y=s/=i;const[l,c]=this.getBaseTranslation();r+=l,s+=c,e.left="".concat((100*r).toFixed(2),"%"),e.top="".concat((100*s).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(t,e){return Gc.call(Hc,t,e,this.parentRotation)}pageTranslationToScreen(t,e){return Gc.call(Hc,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width="".concat((100*e).toFixed(2),"%"),t.height="".concat((100*n).toFixed(2),"%")}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(1e4*t)/1e4}_onResizing(){}altTextFinish(){var t;null===(t=dr(yc,this))||void 0===t||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||dr(Lc,this))return this._editToolbar;this._editToolbar=new Sa(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;null===(t=this._editToolbar)||void 0===t||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;null===(t=this._editToolbar)||void 0===t||t.removeButton("comment")}removeEditToolbar(){var t,e;null===(t=this._editToolbar)||void 0===t||t.remove(),this._editToolbar=null,null===(e=dr(yc,this))||void 0===e||e.destroy()}addContainer(t){var e;const n=null===(e=this._editToolbar)||void 0===e?void 0:e.div;n?n.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return dr(yc,this)||(Fl.initialize(Hc._l10n),pr(yc,this,new Fl(this)),dr(mc,this)&&(dr(yc,this).data=dr(mc,this),pr(mc,this,null))),dr(yc,this)}get altTextData(){var t;return null===(t=dr(yc,this))||void 0===t?void 0:t.data}set altTextData(t){dr(yc,this)&&(dr(yc,this).data=t)}get guessedAltText(){var t;return null===(t=dr(yc,this))||void 0===t?void 0:t.guessedText}async setGuessedAltText(t){var e;await(null===(e=dr(yc,this))||void 0===e?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return null===(e=dr(yc,this))||void 0===e?void 0:e.serialize(t)}hasAltText(){return!!dr(yc,this)&&!dr(yc,this).isEmpty()}hasAltTextData(){var t,e;return null!==(t=null===(e=dr(yc,this))||void 0===e?void 0:e.hasData())&&void 0!==t&&t}focusCommentButton(){var t;null===(t=dr(bc,this))||void 0===t||t.focusButton()}addCommentButton(){return dr(bc,this)||pr(bc,this,new $l(this))}addStandaloneCommentButton(){dr(wc,this)?this._uiManager.isEditingMode()&&dr(wc,this).classList.remove("hidden"):this.hasComment&&(pr(wc,this,dr(bc,this).renderForStandalone()),this.div.append(dr(wc,this)))}removeStandaloneCommentButton(){dr(bc,this).removeStandaloneCommentButton(),pr(wc,this,null)}hideStandaloneCommentButton(){var t;null===(t=dr(wc,this))||void 0===t||t.classList.add("hidden")}get comment(){var t;const{data:{richText:e,text:n,date:i,deleted:r}}=dr(bc,this);return{text:n,richText:e,date:i,deleted:r,color:this.getNonHCMColor(),opacity:null!==(t=this.opacity)&&void 0!==t?t:1}}set comment(t){dr(bc,this)||pr(bc,this,new $l(this)),dr(bc,this).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData(t){let{comment:e,popupRef:n,richText:i}=t;if(!n)return;if(dr(bc,this)||pr(bc,this,new $l(this)),dr(bc,this).setInitialText(e,i),!this.annotationElementId)return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var t;return null===(t=dr(bc,this))||void 0===t?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return null===(t=dr(bc,this))||void 0===t?void 0:t.isDeleted()}get hasComment(){return!!dr(bc,this)&&!dr(bc,this).isEmpty()&&!dr(bc,this).isDeleted()}async editComment(t){dr(bc,this)||pr(bc,this,new $l(this)),dr(bc,this).edit(t)}toggleComment(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){dr(bc,this).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const e=180,n=100,[,,,i]=t.rect,[r]=this.pageDimensions,[s]=this.pageTranslation,a=s+r+1,o=i-n,l=a+e;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,o,l,i]}}}updateFromAnnotationLayer(t){let{popup:{contents:e,deleted:n}}=t;dr(bc,this).data=n?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var t;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=dr(xc,this)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),ur(zc,this,iu).call(this);const[n,i]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth="".concat((100*i/n).toFixed(2),"%"),e.style.maxHeight="".concat((100*n/i).toFixed(2),"%"));const[r,s]=this.getInitialTranslation();return this.translate(r,s),ja(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(dr(Wc,this)||pr(Wc,this,new dc({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:ur(zc,this,Jc).bind(this),onPinching:ur(zc,this,Zc).bind(this),onPinchEnd:ur(zc,this,tu).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),null===(t=this._uiManager._editorUndoBar)||void 0===t||t.hide(),e}pointerdown(t){const{isMac:e}=Ps.platform;0!==t.button||t.ctrlKey&&e?t.preventDefault():(pr(Rc,this,!0),this._isDraggable?ur(zc,this,nu).call(this,t):ur(zc,this,eu).call(this,t))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){dr(Ic,this)&&clearTimeout(dr(Ic,this)),pr(Ic,this,setTimeout(()=>{var t;pr(Ic,this,null),null===(t=this.parent)||void 0===t||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const i=this.parentScale,[r,s]=this.pageDimensions,[a,o]=this.pageTranslation,l=t/i,c=e/i,u=this.x*r,h=this.y*s,d=this.width*r,p=this.height*s;switch(n){case 0:return[u+l+a,s-h-c-p+o,u+l+d+a,s-h-c+o];case 90:return[u+c+a,s-h+l+o,u+c+p+a,s-h+l+d+o];case 180:return[u-l-d+a,s-h+c+o,u-l+a,s-h+c+p+o];case 270:return[u-c-p+a,s-h-l-d+o,u-c+a,s-h-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,r,s]=t,a=r-n,o=s-i;switch(this.rotation){case 0:return[n,e-s,a,o];case 90:return[n,e-i,o,a];case 180:return[r,e-i,a,o];case 270:return[r,e-s,o,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Hc._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;null===(t=dr(bc,this))||void 0===t||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:i,deleted:r,richText:s},uid:a,pageIndex:o,creationDate:l,modificationDate:c}=this;return{id:a,pageIndex:o,rect:this.getPDFRect(),richText:s,contentsObj:{str:t},creationDate:l,modificationDate:n||c,popupRef:!r,color:e,opacity:i}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),pr(Lc,this,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),pr(Lc,this,!1),!0)}isInEditMode(){return dr(Lc,this)}shouldGetKeyboardEvents(){return dr(Nc,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:s}=window;return e<s&&i>0&&t<r&&n>0}rebuild(){ur(zc,this,iu).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(t=this._initialData)||void 0===t?void 0:t.popupRef)||""}}serialize(){var t;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:(null===(t=this._initialData)||void 0===t?void 0:t.popupRef)||""}}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});i.rotation=t.rotation,pr(mc,i,t.accessibilityData),i._isCopy=t.isCopy||!1;const[r,s]=i.pageDimensions,[a,o,l,c]=i.getRectInCurrentCoords(t.rect,s);return i.x=a/r,i.y=o/s,i.width=l/r,i.height=c/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var t,e;if(null===(t=dr(Mc,this))||void 0===t||t.abort(),pr(Mc,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),dr(Ic,this)&&(clearTimeout(dr(Ic,this)),pr(Ic,this,null)),ur(zc,this,lu).call(this),this.removeEditToolbar(),dr(Bc,this)){for(const t of dr(Bc,this).values())clearTimeout(t);pr(Bc,this,null)}this.parent=null,null===(e=dr(Wc,this))||void 0===e||e.destroy(),pr(Wc,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(ur(zc,this,Xc).call(this),dr(Ac,this).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return"ltr"===this._uiManager.direction?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,i,r,s]=this.getPDFRect();return[Hc._round(n+(r-n)*t),Hc._round(i+(s-i)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return dr(bc,this).commentPopupPositionInLayer}set commentPopupPosition(t){dr(bc,this).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return dr(bc,this).hasDefaultPopupPosition()}get commentButtonWidth(){return dr(bc,this).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){dr(bc,this).setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||"Enter"!==t.key)return;this._uiManager.setSelected(this),pr(Ec,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=dr(Ac,this).children;if(!dr(vc,this)){pr(vc,this,Array.from(e));const t=ur(zc,this,ru).bind(this),n=ur(zc,this,su).bind(this),i=this._uiManager._signal;for(const e of dr(vc,this)){const r=e.getAttribute("data-resizer-name");e.setAttribute("role","spinbutton"),e.addEventListener("keydown",t,{signal:i}),e.addEventListener("blur",n,{signal:i}),e.addEventListener("focus",ur(zc,this,au).bind(this,r),{signal:i}),e.setAttribute("data-l10n-id",Hc._l10nResizer[r])}}const n=dr(vc,this)[0];let i=0;for(const s of e){if(s===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(dr(vc,this).length/4);if(r!==i){if(r<i)for(let e=0;e<i-r;e++)dr(Ac,this).append(dr(Ac,this).firstChild);else if(r>i)for(let e=0;e<r-i;e++)dr(Ac,this).firstChild.before(dr(Ac,this).lastChild);let t=0;for(const n of e){const e=dr(vc,this)[t++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",Hc._l10nResizer[e])}}ur(zc,this,ou).call(this,0),pr(Nc,this,!0),dr(Ac,this).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){dr(Nc,this)&&ur(zc,this,$c).call(this,dr(Tc,this),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){ur(zc,this,lu).call(this),this.div.focus()}select(){var t,e,n;this.isSelected&&this._editToolbar?this._editToolbar.show():(this.isSelected=!0,this.makeResizable(),null===(t=this.div)||void 0===t||t.classList.add("selectedEditor"),this._editToolbar?(null===(e=this._editToolbar)||void 0===e||e.show(),null===(n=dr(yc,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{var t,e;null!==(t=this.div)&&void 0!==t&&t.classList.contains("selectedEditor")&&(null===(e=this._editToolbar)||void 0===e||e.show())}))}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return null===(t=this.div)||void 0===t?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,i,r;this.isSelected&&(this.isSelected=!1,null===(t=dr(Ac,this))||void 0===t||t.classList.add("hidden"),null===(e=this.div)||void 0===e||e.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=this._editToolbar)||void 0===i||i.hide(),null===(r=dr(yc,this))||void 0===r||r.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){"BUTTON"!==t.target.nodeName&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return dr(Dc,this)}set isEditing(t){pr(Dc,this,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){dr(Bc,this)||pr(Bc,this,new Map);const{action:e}=t;let n=dr(Bc,this).get(e);return n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),dr(Bc,this).delete(e),0===dr(Bc,this).size&&pr(Bc,this,null)},Hc._telemetryTimeout),void dr(Bc,this).set(e,n)}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),pr(xc,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),pr(xc,this,!0)}updateFakeAnnotationElement(t){if(dr(Cc,this)||this.deleted)return this.deleted?(dr(Cc,this).remove(),void pr(Cc,this,null)):void((this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&dr(Cc,this).updateEdited({rect:this.getPDFRect(),popup:this.comment}));pr(Cc,this,t.addFakeAnnotation(this))}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){const t=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.before(e)}}else e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}resetAnnotationElement(t){const{firstChild:e}=t.container;"DIV"===(null===e||void 0===e?void 0:e.nodeName)&&e.classList.contains("annotationContent")&&e.remove()}}function Vc(t,e,n){let[i,r]=t;[e,n]=this.screenToPageTranslation(e,n),this.x+=e/i,this.y+=n/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function Gc(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}function qc(t){switch(t){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}}function Xc(){if(dr(Ac,this))return;pr(Ac,this,document.createElement("div")),dr(Ac,this).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const t=document.createElement("div");dr(Ac,this).append(t),t.classList.add("resizer",n),t.setAttribute("data-resizer-name",n),t.addEventListener("pointerdown",ur(zc,this,Kc).bind(this,n),{signal:e}),t.addEventListener("contextmenu",Zs,{signal:e}),t.tabIndex=-1}this.div.prepend(dr(Ac,this))}function Kc(t,e){var n;e.preventDefault();const{isMac:i}=Ps.platform;if(0!==e.button||e.ctrlKey&&i)return;null===(n=dr(yc,this))||void 0===n||n.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,pr(Sc,this,[e.screenX,e.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",ur(zc,this,$c).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",ta,{passive:!1,signal:a}),window.addEventListener("contextmenu",Zs,{signal:a}),pr(Ec,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const c=()=>{var t;s.abort(),this.parent.togglePointerEvents(!0),null===(t=dr(yc,this))||void 0===t||t.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=l,ur(zc,this,Qc).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}function Yc(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}function Qc(){if(!dr(Ec,this))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=dr(Ec,this);pr(Ec,this,null);const r=this.x,s=this.y,a=this.width,o=this.height;r===t&&s===e&&a===n&&o===i||this.addCommands({cmd:ur(zc,this,Yc).bind(this,r,s,a,o),undo:ur(zc,this,Yc).bind(this,t,e,n,i),mustExec:!0})}function $c(t,e){const[n,i]=this.parentDimensions,r=this.x,s=this.y,a=this.width,o=this.height,l=yr.MIN_SIZE/n,c=yr.MIN_SIZE/i,u=ur(zc,this,qc).call(this,this.rotation),h=(t,e)=>[u[0]*t+u[2]*e,u[1]*t+u[3]*e],d=ur(zc,this,qc).call(this,360-this.rotation);let p,f,g=!1,m=!1;switch(t){case"topLeft":g=!0,p=(t,e)=>[0,0],f=(t,e)=>[t,e];break;case"topMiddle":p=(t,e)=>[t/2,0],f=(t,e)=>[t/2,e];break;case"topRight":g=!0,p=(t,e)=>[t,0],f=(t,e)=>[0,e];break;case"middleRight":m=!0,p=(t,e)=>[t,e/2],f=(t,e)=>[0,e/2];break;case"bottomRight":g=!0,p=(t,e)=>[t,e],f=(t,e)=>[0,0];break;case"bottomMiddle":p=(t,e)=>[t/2,e],f=(t,e)=>[t/2,0];break;case"bottomLeft":g=!0,p=(t,e)=>[0,e],f=(t,e)=>[t,0];break;case"middleLeft":m=!0,p=(t,e)=>[0,e/2],f=(t,e)=>[t,e/2]}const v=p(a,o),y=f(a,o);let b=h(...y);const w=yr._round(r+b[0]),x=yr._round(s+b[1]);let _,k,A=1,S=1;if(e.fromKeyboard)({deltaX:_,deltaY:k}=e);else{const{screenX:t,screenY:n}=e,[i,r]=dr(Sc,this);[_,k]=this.screenToPageTranslation(t-i,n-r),dr(Sc,this)[0]=t,dr(Sc,this)[1]=n}var E,C;if([_,k]=(E=_/n,C=k/i,[d[0]*E+d[2]*C,d[1]*E+d[3]*C]),g){const t=Math.hypot(a,o);A=S=Math.max(Math.min(Math.hypot(y[0]-v[0]-_,y[1]-v[1]-k)/t,1/a,1/o),l/a,c/o)}else m?A=js(Math.abs(y[0]-v[0]-_),l,1)/a:S=js(Math.abs(y[1]-v[1]-k),c,1)/o;const M=yr._round(a*A),T=yr._round(o*S);b=h(...f(M,T));const R=w-b[0],P=x-b[1];dr(Pc,this)||pr(Pc,this,[this.x,this.y,this.width,this.height]),this.width=M,this.height=T,this.x=R,this.y=P,this.setDims(),this.fixAndSetPosition(),this._onResizing()}function Jc(){var t;pr(Ec,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null===(t=dr(yc,this))||void 0===t||t.toggle(!1),this.parent.togglePointerEvents(!1)}function Zc(t,e,n){let i=n/e*.7+1-.7;if(1===i)return;const r=ur(zc,this,qc).call(this,this.rotation),s=(t,e)=>[r[0]*t+r[2]*e,r[1]*t+r[3]*e],[a,o]=this.parentDimensions,l=this.x,c=this.y,u=this.width,h=this.height,d=yr.MIN_SIZE/a,p=yr.MIN_SIZE/o;i=Math.max(Math.min(i,1/u,1/h),d/u,p/h);const f=yr._round(u*i),g=yr._round(h*i);if(f===u&&g===h)return;dr(Pc,this)||pr(Pc,this,[l,c,u,h]);const m=s(u/2,h/2),v=yr._round(l+m[0]),y=yr._round(c+m[1]),b=s(f/2,g/2);this.x=v-b[0],this.y=y-b[1],this.width=f,this.height=g,this.setDims(),this.fixAndSetPosition(),this._onResizing()}function tu(){var t;null===(t=dr(yc,this))||void 0===t||t.toggle(!0),this.parent.togglePointerEvents(!0),ur(zc,this,Qc).call(this)}function eu(t){const{isMac:e}=Ps.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}function nu(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:r},a=t=>{i.abort(),pr(_c,this,null),pr(Rc,this,!1),this._uiManager.endDragSession()||ur(zc,this,eu).call(this,t),n&&this._onStopDragging()};e&&(pr(Fc,this,t.clientX),pr(Oc,this,t.clientY),pr(_c,this,t.pointerId),pr(kc,this,t.pointerType),window.addEventListener("pointermove",t=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:e,clientY:i,pointerId:r}=t;if(r!==dr(_c,this))return void ta(t);const[s,a]=this.screenToPageTranslation(e-dr(Fc,this),i-dr(Oc,this));pr(Fc,this,e),pr(Oc,this,i),this._uiManager.dragSelectedEditors(s,a)},s),window.addEventListener("touchmove",ta,s),window.addEventListener("pointerdown",t=>{t.pointerType===dr(kc,this)&&(dr(Wc,this)||t.isPrimary)&&a(t),ta(t)},s));const o=t=>{dr(_c,this)&&dr(_c,this)!==t.pointerId?ta(t):a(t)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})}function iu(){if(dr(Mc,this)||!this.div)return;pr(Mc,this,new AbortController);const t=this._uiManager.combinedSignal(dr(Mc,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}function ru(t){yr._resizerKeyboardManager.exec(this,t)}function su(t){var e;dr(Nc,this)&&(null===(e=t.relatedTarget)||void 0===e?void 0:e.parentNode)!==dr(Ac,this)&&ur(zc,this,lu).call(this)}function au(t){pr(Tc,this,dr(Nc,this)?t:"")}function ou(t){if(dr(vc,this))for(const e of dr(vc,this))e.tabIndex=t}function lu(){pr(Nc,this,!1),ur(zc,this,ou).call(this,-1),ur(zc,this,Qc).call(this)}yr=Hc,u(Hc,"_l10n",null),u(Hc,"_l10nResizer",null),u(Hc,"_borderLineWidth",-1),u(Hc,"_colorManager",new io),u(Hc,"_zIndex",1),u(Hc,"_telemetryTimeout",1e3);class cu extends Hc{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const uu=3285377520,hu=4294901760,du=65535;class pu{constructor(t){this.h1=t?4294967295&t:uu,this.h2=t?4294967295&t:uu}update(t){let e,n;if("string"===typeof t){e=new Uint8Array(2*t.length),n=0;for(let i=0,r=t.length;i<r;i++){const r=t.charCodeAt(i);r<=255?e[n++]=r:(e[n++]=r>>>8,e[n++]=255&r)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");e=t.slice(),n=e.byteLength}const i=n>>2,r=n-4*i,s=new Uint32Array(e.buffer,0,i);let a=0,o=0,l=this.h1,c=this.h2;const u=3432918353,h=461845907,d=11601,p=13715;for(let f=0;f<i;f++)1&f?(a=s[f],a=a*u&hu|a*d&du,a=a<<15|a>>>17,a=a*h&hu|a*p&du,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=s[f],o=o*u&hu|o*d&du,o=o<<15|o>>>17,o=o*h&hu|o*p&du,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(a=0,r){case 3:a^=e[4*i+2]<<16;case 2:a^=e[4*i+1]<<8;case 1:a^=e[4*i],a=a*u&hu|a*d&du,a=a<<15|a>>>17,a=a*h&hu|a*p&du,1&i?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=3981806797*t&hu|36045*t&du,e=4283543511*e&hu|(2950163797*(e<<16|t>>>16)&hu)>>>16,t^=e>>>1,t=444984403*t&hu|60499*t&du,e=3301882366*e&hu|(3120437893*(e<<16|t>>>16)&hu)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const fu=Object.freeze({map:null,hash:"",transfer:void 0});var gu=new WeakMap,mu=new WeakMap,vu=new WeakMap,yu=new WeakMap,bu=new WeakSet;class wu{constructor(){lr(this,bu),cr(this,gu,!1),cr(this,mu,null),cr(this,vu,null),cr(this,yu,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=dr(yu,this).get(t);return void 0===n?e:Object.assign(e,n)}getRawValue(t){return dr(yu,this).get(t)}remove(t){const e=dr(yu,this).get(t);if(void 0!==e&&(e instanceof Hc&&dr(vu,this).delete(e.annotationElementId),dr(yu,this).delete(t),0===dr(yu,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor)){for(const t of dr(yu,this).values())if(t instanceof Hc)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=dr(yu,this).get(t);let i=!1;if(void 0!==n)for(const[r,s]of Object.entries(e))n[r]!==s&&(i=!0,n[r]=s);else i=!0,dr(yu,this).set(t,e);i&&ur(bu,this,xu).call(this),e instanceof Hc&&((dr(vu,this)||pr(vu,this,new Map)).set(e.annotationElementId,e),"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type))}has(t){return dr(yu,this).has(t)}get size(){return dr(yu,this).size}resetModified(){dr(gu,this)&&(pr(gu,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new ku(this)}get serializable(){if(0===dr(yu,this).size)return fu;const t=new Map,e=new pu,n=[],i=Object.create(null);let r=!1;for(const[s,a]of dr(yu,this)){const n=a instanceof Hc?a.serialize(!1,i):a;n&&(t.set(s,n),e.update("".concat(s,":").concat(JSON.stringify(n))),r||(r=!!n.bitmap))}if(r)for(const s of t.values())s.bitmap&&n.push(s.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:fu}get editorStats(){let t=null;const e=new Map;let n=0,i=0;for(const a of dr(yu,this).values()){var r;if(!(a instanceof Hc)){a.popup&&(a.popup.deleted?i+=1:n+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(n+=1);const o=a.telemetryFinalData;if(!o)continue;const{type:l}=o;e.has(l)||e.set(l,Object.getPrototypeOf(a).constructor),t||(t=Object.create(null));const c=(r=t)[l]||(r[l]=new Map);for(const[t,e]of Object.entries(o)){var s;if("type"===t)continue;let n=c.get(t);n||(n=new Map,c.set(t,n));const i=null!==(s=n.get(e))&&void 0!==s?s:0;n.set(e,i+1)}}if((i>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:i,edited:n}),!t)return null;for(const[a,o]of e)t[a]=o.computeTelemetryFinalData(t[a]);return t}resetModifiedIds(){pr(mu,this,null)}updateEditor(t,e){var n;const i=null===(n=dr(vu,this))||void 0===n?void 0:n.get(t);return!!i&&(i.updateFromAnnotationLayer(e),!0)}getEditor(t){var e;return(null===(e=dr(vu,this))||void 0===e?void 0:e.get(t))||null}get modifiedIds(){if(dr(mu,this))return dr(mu,this);const t=[];if(dr(vu,this))for(const e of dr(vu,this).values())e.serialize()&&t.push(e.annotationElementId);return pr(mu,this,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return dr(yu,this).entries()}}function xu(){dr(gu,this)||(pr(gu,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var _u=new WeakMap;class ku extends wu{constructor(t){super(),cr(this,_u,void 0);const{map:e,hash:n,transfer:i}=t.serializable,r=structuredClone(e,i?{transfer:i}:null);pr(_u,this,{map:r,hash:n,transfer:i})}get print(){vs("Should not call PrintAnnotationStorage.print")}get serializable(){return dr(_u,this)}get modifiedIds(){return xs(this,"modifiedIds",{ids:new Set,hash:""})}}var Au=new WeakMap;class Su{constructor(t){let{ownerDocument:e=globalThis.document,styleElement:n=null}=t;cr(this,Au,new Set),this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),dr(Au,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(t){let{systemFontInfo:e,disableFontFace:n,_inspectFont:i}=t;if(e&&!dr(Au,this).has(e.loadedName)){if(ys(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:t,src:n,style:s}=e,a=new FontFace(t,n,s);this.addNativeFontFace(a);try{await a.load(),dr(Au,this).add(t),null===i||void 0===i||i(e)}catch(r){ms("Cannot load system font: ".concat(e.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}return}vs("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo)return void await this.loadSystemFont(t);if(this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(n){throw ms("Failed to load font '".concat(e.family,"': '").concat(n,"'.")),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(e=>{const n=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){var t;return xs(this,"isFontLoadingAPISupported",!(null===(t=this._document)||void 0===t||!t.fonts))}get isSyncFontLoadingSupported(){return xs(this,"isSyncFontLoadingSupported",Dr||Ps.platform.isFirefox)}_queueLoadingCallback(t){const{loadingRequests:e}=this,n={done:!1,complete:function(){for(ys(!n.done,"completeRequest() cannot be called twice."),n.done=!0;e.length>0&&e[0].done;){const t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(n),n}get _loadTestFont(){return xs(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function i(t,e,n,i){return t.substring(0,e)+i+t.substring(e+n)}let r,s;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let u=this._loadTestFont;u=i(u,976,c.length,c);const h=1482184792;let d=n(u,16);for(r=0,s=c.length-3;r<s;r+=4)d=d-h+n(c,r)|0;var p;r<c.length&&(d=d-h+n(c+"XXX",r)|0),u=i(u,16,4,(p=d,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f="url(data:font/opentype;base64,".concat(btoa(u),");"),g='@font-face {font-family:"'.concat(c,'";src:').concat(f,"}");this.insertRule(g);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const v of[t.loadedName,c]){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=v,m.append(t)}this._document.body.append(m),function t(e,n){if(++l>30)return ms("Load test font never loaded."),void n();o.font="30px "+e,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n))}(c,()=>{m.remove(),e.complete()})}}var Eu=new WeakMap;class Cu{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;cr(this,Eu,void 0),this.compiledGlyphs=Object.create(null),pr(Eu,this,t),this._inspectFont=e,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return null===(t=this._inspectFont)||void 0===t||t.call(this,this),e}createFontFaceRule(){var t;if(!this.data||this.disableFontFace)return null;const e="url(data:".concat(this.mimetype,";base64,").concat(Us(this.data),");");let n;if(this.cssFontInfo){let t="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(t+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(t,"src:").concat(e,"}")}else n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(e,"}");return null===(t=this._inspectFont)||void 0===t||t.call(this,this,e),n}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(s){ms('getPathGenerator - ignoring character: "'.concat(s,'".'))}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}get black(){return dr(Eu,this).black}get bold(){return dr(Eu,this).bold}get disableFontFace(){var t;return null!==(t=dr(Eu,this).disableFontFace)&&void 0!==t&&t}get fontExtraProperties(){var t;return null!==(t=dr(Eu,this).fontExtraProperties)&&void 0!==t&&t}get isInvalidPDFjsFont(){return dr(Eu,this).isInvalidPDFjsFont}get isType3Font(){return dr(Eu,this).isType3Font}get italic(){return dr(Eu,this).italic}get missingFile(){return dr(Eu,this).missingFile}get remeasure(){return dr(Eu,this).remeasure}get vertical(){return dr(Eu,this).vertical}get ascent(){return dr(Eu,this).ascent}get defaultWidth(){return dr(Eu,this).defaultWidth}get descent(){return dr(Eu,this).descent}get bbox(){return dr(Eu,this).bbox}get fontMatrix(){return dr(Eu,this).fontMatrix}get fallbackName(){return dr(Eu,this).fallbackName}get loadedName(){return dr(Eu,this).loadedName}get mimetype(){return dr(Eu,this).mimetype}get name(){return dr(Eu,this).name}get data(){return dr(Eu,this).data}clearData(){dr(Eu,this).clearData()}get cssFontInfo(){return dr(Eu,this).cssFontInfo}get systemFontInfo(){return dr(Eu,this).systemFontInfo}get defaultVMetrics(){return dr(Eu,this).defaultVMetrics}}function Mu(t){if("string"!==typeof t)return null;if(t.endsWith("/"))return t;throw new Error('Invalid factory url: "'.concat(t,'" must include trailing slash.'))}const Tu=t=>"object"===typeof t&&Number.isInteger(null===t||void 0===t?void 0:t.num)&&t.num>=0&&Number.isInteger(null===t||void 0===t?void 0:t.gen)&&t.gen>=0,Ru=function(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,r,...s]=n;if(!t(i)&&!Number.isInteger(i))return!1;if(!e(r))return!1;const a=s.length;let o=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return 0===a;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(4!==a)return!1;o=!1;break;default:return!1}for(const l of s)if(!("number"===typeof l||o&&null===l))return!1;return!0}.bind(null,Tu,t=>"object"===typeof t&&"string"===typeof(null===t||void 0===t?void 0:t.name));var Pu=new WeakMap,Du=new WeakMap;class Lu{constructor(){cr(this,Pu,new Map),cr(this,Du,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};dr(Du,this).then(()=>{for(const[t]of dr(Pu,this))t.call(this,n)})}addEventListener(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted)return void ms("LoopbackPort - cannot use an `aborted` signal.");const s=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",s),r.addEventListener("abort",s)}dr(Pu,this).set(e,i)}removeEventListener(t,e){const n=dr(Pu,this).get(e);null===n||void 0===n||n(),dr(Pu,this).delete(e)}terminate(){for(const[,t]of dr(Pu,this))null===t||void 0===t||t();dr(Pu,this).clear()}}const Nu=1,Iu=2,Fu=1,Ou=2,Bu=3,Wu=4,ju=5,Uu=6,zu=7,Hu=8;function Vu(){}function Gu(t){if(t instanceof Ms||t instanceof Ss||t instanceof ks||t instanceof Es||t instanceof As)return t;switch(t instanceof Error||"object"===typeof t&&null!==t||vs('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new Ms(t.message);case"InvalidPDFException":return new Ss(t.message);case"PasswordException":return new ks(t.message,t.code);case"ResponseException":return new Es(t.message,t.status,t.missing);case"UnknownErrorException":return new As(t.message,t.details)}return new As(t.message,t.toString())}var qu=new WeakMap,Xu=new WeakSet;class Ku{constructor(t,e,n){lr(this,Xu),cr(this,qu,new AbortController),this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",ur(Xu,this,Yu).bind(this),{signal:dr(qu,this).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error('There is already an actionName called "'.concat(t,'"'));n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(s){r.reject(s)}return r.promise}sendWithStream(t,e,n,i){const r=this.streamId++,s=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[r]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:s,targetName:a,action:t,streamId:r,data:e,desiredSize:n.desiredSize},i),l.promise},pull:t=>{const e=Promise.withResolvers();return this.streamControllers[r].pullCall=e,o.postMessage({sourceName:s,targetName:a,stream:Uu,streamId:r,desiredSize:t.desiredSize}),e.promise},cancel:t=>{ys(t instanceof Error,"cancel must have a valid reason");const e=Promise.withResolvers();return this.streamControllers[r].cancelCall=e,this.streamControllers[r].isClosed=!0,o.postMessage({sourceName:s,targetName:a,stream:Fu,streamId:r,reason:Gu(t)}),e.promise}},n)}destroy(){var t;null===(t=dr(qu,this))||void 0===t||t.abort(),pr(qu,this,null)}}function Yu(t){let{data:e}=t;if(e.targetName!==this.sourceName)return;if(e.stream)return void ur(Xu,this,$u).call(this,e);if(e.callback){const t=e.callbackId,n=this.callbackCapabilities[t];if(!n)throw new Error("Cannot resolve callback ".concat(t));if(delete this.callbackCapabilities[t],e.callback===Nu)n.resolve(e.data);else{if(e.callback!==Iu)throw new Error("Unexpected callback case");n.reject(Gu(e.reason))}return}const n=this.actionHandler[e.action];if(!n)throw new Error("Unknown action from worker: ".concat(e.action));if(e.callbackId){const t=this.sourceName,i=e.sourceName,r=this.comObj;return void Promise.try(n,e.data).then(function(n){r.postMessage({sourceName:t,targetName:i,callback:Nu,callbackId:e.callbackId,data:n})},function(n){r.postMessage({sourceName:t,targetName:i,callback:Iu,callbackId:e.callbackId,reason:Gu(n)})})}e.streamId?ur(Xu,this,Qu).call(this,e):n(e.data)}function Qu(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,s=this,a=this.actionHandler[t.action],o={enqueue(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=s,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:Wu,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Bu,streamId:e}),delete s.streamSinks[e])},error(t){ys(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:ju,streamId:e,reason:Gu(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[e]=o,Promise.try(a,t.data,o).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Hu,streamId:e,success:!0})},function(t){r.postMessage({sourceName:n,targetName:i,stream:Hu,streamId:e,reason:Gu(t)})})}function $u(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,s=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Hu:t.success?s.startCall.resolve():s.startCall.reject(Gu(t.reason));break;case zu:t.success?s.pullCall.resolve():s.pullCall.reject(Gu(t.reason));break;case Uu:if(!a){r.postMessage({sourceName:n,targetName:i,stream:zu,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||Vu).then(function(){r.postMessage({sourceName:n,targetName:i,stream:zu,streamId:e,success:!0})},function(t){r.postMessage({sourceName:n,targetName:i,stream:zu,streamId:e,reason:Gu(t)})});break;case Wu:if(ys(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(t.chunk);break;case Bu:if(ys(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),ur(Xu,this,Ju).call(this,s,e);break;case ju:ys(s,"error should have stream controller"),s.controller.error(Gu(t.reason)),ur(Xu,this,Ju).call(this,s,e);break;case Ou:t.success?s.cancelCall.resolve():s.cancelCall.reject(Gu(t.reason)),ur(Xu,this,Ju).call(this,s,e);break;case Fu:if(!a)break;const o=Gu(t.reason);Promise.try(a.onCancel||Vu,o).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Ou,streamId:e,success:!0})},function(t){r.postMessage({sourceName:n,targetName:i,stream:Ou,streamId:e,reason:Gu(t)})}),a.sinkCapability.reject(o),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async function Ju(t,e){var n,i,r;await Promise.allSettled([null===(n=t.startCall)||void 0===n?void 0:n.promise,null===(i=t.pullCall)||void 0===i?void 0:i.promise,null===(r=t.cancelCall)||void 0===r?void 0:r.promise]),delete this.streamControllers[e]}var Zu=new WeakMap;class th{constructor(t){let{enableHWA:e=!1}=t;cr(this,Zu,!1),pr(Zu,this,e)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!dr(Zu,this)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){vs("Abstract method `_createCanvas` called.")}}class eh extends th{constructor(t){let{ownerDocument:e=globalThis.document,enableHWA:n=!1}=t;super({enableHWA:n}),this._document=e}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class nh{constructor(t){let{baseUrl:e=null,isCompressed:n=!0}=t;this.baseUrl=e,this.isCompressed=n}async fetch(t){let{name:e}=t;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(t=>({cMapData:t,isCompressed:this.isCompressed})).catch(t=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))})}async _fetch(t){vs("Abstract method `_fetch` called.")}}class ih extends nh{async _fetch(t){const e=await qs(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Rs(e)}}class rh{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,r){return"none"}destroy(){}}var sh=new WeakMap,ah=new WeakMap,oh=new WeakMap,lh=new WeakMap,ch=new WeakMap,uh=new WeakMap,hh=new WeakMap,dh=new WeakSet;class ph extends rh{constructor(t){let{docId:e,ownerDocument:n=globalThis.document}=t;super(),lr(this,dh),cr(this,sh,void 0),cr(this,ah,void 0),cr(this,oh,void 0),cr(this,lh,void 0),cr(this,ch,void 0),cr(this,uh,void 0),cr(this,hh,0),pr(lh,this,e),pr(ch,this,n)}addFilter(t){var e,n;if(!t)return"none";let i=hr(dh,this,fh).get(t);if(i)return i;const[r,s,a]=ur(dh,this,vh).call(this,t),o=1===t.length?r:"".concat(r).concat(s).concat(a);if(i=hr(dh,this,fh).get(o),i)return hr(dh,this,fh).set(t,i),i;const l="g_".concat(dr(lh,this),"_transfer_map_").concat((pr(hh,this,(e=dr(hh,this),n=e++,e)),n)),c=ur(dh,this,yh).call(this,l);hr(dh,this,fh).set(t,c),hr(dh,this,fh).set(o,c);const u=ur(dh,this,xh).call(this,l);return ur(dh,this,kh).call(this,r,s,a,u),c}addHCMFilter(t,e){var n;const i="".concat(t,"-").concat(e),r="base";let s=hr(dh,this,gh).get(r);if((null===(n=s)||void 0===n?void 0:n.key)===i)return s.url;var a;s?(null===(a=s.filter)||void 0===a||a.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},hr(dh,this,gh).set(r,s));if(!t||!e)return s.url;const o=ur(dh,this,Sh).call(this,t);t=Ls.makeHexColor(...o);const l=ur(dh,this,Sh).call(this,e);if(e=Ls.makeHexColor(...l),hr(dh,this,mh).style.color="","#000000"===t&&"#ffffff"===e||t===e)return s.url;const c=new Array(256);for(let f=0;f<=255;f++){const t=f/255;c[f]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}const u=c.join(","),h="g_".concat(dr(lh,this),"_hcm_filter"),d=s.filter=ur(dh,this,xh).call(this,h);ur(dh,this,kh).call(this,u,u,u,d),ur(dh,this,wh).call(this,d);const p=(t,e)=>{const n=o[t]/255,i=l[t]/255,r=new Array(e+1);for(let s=0;s<=e;s++)r[s]=n+s/e*(i-n);return r.join(",")};return ur(dh,this,kh).call(this,p(0,5),p(1,5),p(2,5),d),s.url=ur(dh,this,yh).call(this,h),s.url}addAlphaFilter(t){var e,n;let i=hr(dh,this,fh).get(t);if(i)return i;const[r]=ur(dh,this,vh).call(this,[t]),s="alpha_".concat(r);if(i=hr(dh,this,fh).get(s),i)return hr(dh,this,fh).set(t,i),i;const a="g_".concat(dr(lh,this),"_alpha_map_").concat((pr(hh,this,(e=dr(hh,this),n=e++,e)),n)),o=ur(dh,this,yh).call(this,a);hr(dh,this,fh).set(t,o),hr(dh,this,fh).set(s,o);const l=ur(dh,this,xh).call(this,a);return ur(dh,this,Ah).call(this,r,l),o}addLuminosityFilter(t){var e,n;let i,r,s=hr(dh,this,fh).get(t||"luminosity");if(s)return s;if(t?([i]=ur(dh,this,vh).call(this,[t]),r="luminosity_".concat(i)):r="luminosity",s=hr(dh,this,fh).get(r),s)return hr(dh,this,fh).set(t,s),s;const a="g_".concat(dr(lh,this),"_luminosity_map_").concat((pr(hh,this,(e=dr(hh,this),n=e++,e)),n)),o=ur(dh,this,yh).call(this,a);hr(dh,this,fh).set(t,o),hr(dh,this,fh).set(r,o);const l=ur(dh,this,xh).call(this,a);return ur(dh,this,bh).call(this,l),t&&ur(dh,this,Ah).call(this,i,l),o}addHighlightHCMFilter(t,e,n,i,r){var s;const a="".concat(e,"-").concat(n,"-").concat(i,"-").concat(r);let o=hr(dh,this,gh).get(t);if((null===(s=o)||void 0===s?void 0:s.key)===a)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},hr(dh,this,gh).set(t,o));if(!e||!n)return o.url;const[c,u]=[e,n].map(ur(dh,this,Sh).bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[p,f]=[i,r].map(ur(dh,this,Sh).bind(this));d<h&&([h,d,p,f]=[d,h,f,p]),hr(dh,this,mh).style.color="";const g=(t,e,n)=>{const i=new Array(256),r=(d-h)/n,s=t/255,a=(e-t)/(255*n);let o=0;for(let l=0;l<=n;l++){const t=Math.round(h+l*r),e=s+l*a;for(let n=o;n<=t;n++)i[n]=e;o=t+1}for(let l=o;l<256;l++)i[l]=i[o-1];return i.join(",")},m="g_".concat(dr(lh,this),"_hcm_").concat(t,"_filter"),v=o.filter=ur(dh,this,xh).call(this,m);return ur(dh,this,wh).call(this,v),ur(dh,this,kh).call(this,g(p[0],f[0],5),g(p[1],f[1],5),g(p[2],f[2],5),v),o.url=ur(dh,this,yh).call(this,m),o.url}destroy(){var t,e,n,i;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(t=dr(uh,this))&&void 0!==t&&t.size||(null===(e=dr(oh,this))||void 0===e||e.parentNode.parentNode.remove(),pr(oh,this,null),null===(n=dr(ah,this))||void 0===n||n.clear(),pr(ah,this,null),null===(i=dr(uh,this))||void 0===i||i.clear(),pr(uh,this,null),pr(hh,this,0))}}function fh(t){return dr(ah,t)||pr(ah,t,new Map)}function gh(t){return dr(uh,t)||pr(uh,t,new Map)}function mh(t){if(!dr(oh,t)){const e=dr(ch,t).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=dr(ch,t).createElementNS(Vs,"svg");i.setAttribute("width",0),i.setAttribute("height",0),pr(oh,t,dr(ch,t).createElementNS(Vs,"defs")),e.append(i),i.append(dr(oh,t)),dr(ch,t).body.append(e)}return dr(oh,t)}function vh(t){if(1===t.length){const e=t[0],n=new Array(256);for(let t=0;t<256;t++)n[t]=e[t]/255;const i=n.join(",");return[i,i,i]}const[e,n,i]=t,r=new Array(256),s=new Array(256),a=new Array(256);for(let o=0;o<256;o++)r[o]=e[o]/255,s[o]=n[o]/255,a[o]=i[o]/255;return[r.join(","),s.join(","),a.join(",")]}function yh(t){if(void 0===dr(sh,this)){pr(sh,this,"");const t=dr(ch,this).URL;t!==dr(ch,this).baseURI&&(Ys(t)?ms('#createUrl: ignore "data:"-URL for performance reasons.'):pr(sh,this,ws(t,"")))}return"url(".concat(dr(sh,this),"#").concat(t,")")}function bh(t){const e=dr(ch,this).createElementNS(Vs,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}function wh(t){const e=dr(ch,this).createElementNS(Vs,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}function xh(t){const e=dr(ch,this).createElementNS(Vs,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),hr(dh,this,mh).append(e),e}function _h(t,e,n){const i=dr(ch,this).createElementNS(Vs,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)}function kh(t,e,n,i){const r=dr(ch,this).createElementNS(Vs,"feComponentTransfer");i.append(r),ur(dh,this,_h).call(this,r,"feFuncR",t),ur(dh,this,_h).call(this,r,"feFuncG",e),ur(dh,this,_h).call(this,r,"feFuncB",n)}function Ah(t,e){const n=dr(ch,this).createElementNS(Vs,"feComponentTransfer");e.append(n),ur(dh,this,_h).call(this,n,"feFuncA",t)}function Sh(t){return hr(dh,this,mh).style.color=t,ia(getComputedStyle(hr(dh,this,mh)).getPropertyValue("color"))}class Eh{constructor(t){let{baseUrl:e=null}=t;this.baseUrl=e}async fetch(t){let{filename:e}=t;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(e);return this._fetch(n).catch(t=>{throw new Error("Unable to load font data at: ".concat(n))})}async _fetch(t){vs("Abstract method `_fetch` called.")}}class Ch extends Eh{async _fetch(t){const e=await qs(t,"arraybuffer");return new Uint8Array(e)}}class Mh{constructor(t){let{baseUrl:e=null}=t;this.baseUrl=e}async fetch(t){let{filename:e}=t;if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const n="".concat(this.baseUrl).concat(e);return this._fetch(n).catch(t=>{throw new Error("Unable to load wasm data at: ".concat(n))})}async _fetch(t){vs("Abstract method `_fetch` called.")}}class Th extends Mh{async _fetch(t){const e=await qs(t,"arraybuffer");return new Uint8Array(e)}}async function Rh(t){const e=process.getBuiltinModule("fs"),n=await e.promises.readFile(t);return new Uint8Array(n)}Dr&&ms("Please use the `legacy` build in Node.js environments.");class Ph extends rh{}class Dh extends th{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire("file:///C:/Users/Asus/Desktop/the-culture-read-cnx/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(t,e)}}class Lh extends nh{async _fetch(t){return Rh(t)}}class Nh extends Eh{async _fetch(t){return Rh(t)}}class Ih extends Mh{async _fetch(t){return Rh(t)}}const Fh="__forcedDependency",{floor:Oh,ceil:Bh}=Math;function Wh(t,e,n,i,r,s){t[4*e+0]=Math.min(t[4*e+0],n),t[4*e+1]=Math.min(t[4*e+1],i),t[4*e+2]=Math.max(t[4*e+2],r),t[4*e+3]=Math.max(t[4*e+3],s)}const jh=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Uh=new WeakMap,zh=new WeakMap;class Hh{constructor(t,e){cr(this,Uh,void 0),cr(this,zh,void 0),pr(Uh,this,t),pr(zh,this,e)}get length(){return dr(Uh,this).length}isEmpty(t){return dr(Uh,this)[t]===jh}minX(t){return dr(zh,this)[4*t+0]/256}minY(t){return dr(zh,this)[4*t+1]/256}maxX(t){return(dr(zh,this)[4*t+2]+1)/256}maxY(t){return(dr(zh,this)[4*t+3]+1)/256}}const Vh=(t,e)=>{if(!t)return;let n=t.get(e);return n||(n={dependencies:new Set,isRenderingOperation:!1},t.set(e,n)),n};var Gh=new WeakMap,qh=new WeakMap,Xh=new WeakMap,Kh=new WeakMap,Yh=new WeakMap,Qh=new WeakMap,$h=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,td=new WeakMap,ed=new WeakMap,nd=new WeakMap,id=new WeakMap,rd=new WeakMap,sd=new WeakMap,ad=new WeakMap,od=new WeakMap,ld=new WeakSet;class cd{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];lr(this,ld),cr(this,Gh,{__proto__:null}),cr(this,qh,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Fh]:[]}),cr(this,Xh,new Map),cr(this,Kh,[]),cr(this,Yh,[]),cr(this,Qh,[[1,0,0,1,0,0]]),cr(this,$h,[-1/0,-1/0,1/0,1/0]),cr(this,Jh,new Float64Array([1/0,1/0,-1/0,-1/0])),cr(this,Zh,-1),cr(this,td,new Set),cr(this,ed,new Map),cr(this,nd,new Map),cr(this,id,void 0),cr(this,rd,void 0),cr(this,sd,void 0),cr(this,ad,void 0),cr(this,od,void 0),pr(id,this,t.width),pr(rd,this,t.height),ur(ld,this,ud).call(this,e),n&&pr(od,this,new Map)}growOperationsCount(t){t>=dr(ad,this).length&&ur(ld,this,ud).call(this,t,dr(ad,this))}save(t){return pr(Gh,this,{__proto__:dr(Gh,this)}),pr(qh,this,{__proto__:dr(qh,this),transform:{__proto__:dr(qh,this).transform},moveText:{__proto__:dr(qh,this).moveText},sameLineText:{__proto__:dr(qh,this).sameLineText},[Fh]:{__proto__:dr(qh,this)[Fh]}}),pr($h,this,{__proto__:dr($h,this)}),dr(Kh,this).push(t),this}restore(t){const e=Object.getPrototypeOf(dr(Gh,this));if(null===e)return this;pr(Gh,this,e),pr(qh,this,Object.getPrototypeOf(dr(qh,this))),pr($h,this,Object.getPrototypeOf(dr($h,this)));const n=dr(Kh,this).pop();var i;void 0!==n&&(null===(i=Vh(dr(od,this),t))||void 0===i||i.dependencies.add(n),dr(ad,this)[t]=dr(ad,this)[n]);return this}recordOpenMarker(t){return dr(Kh,this).push(t),this}getOpenMarker(){return 0===dr(Kh,this).length?null:dr(Kh,this).at(-1)}recordCloseMarker(t){const e=dr(Kh,this).pop();var n;void 0!==e&&(null===(n=Vh(dr(od,this),t))||void 0===n||n.dependencies.add(e),dr(ad,this)[t]=dr(ad,this)[e]);return this}beginMarkedContent(t){return dr(Yh,this).push(t),this}endMarkedContent(t){const e=dr(Yh,this).pop();var n;void 0!==e&&(null===(n=Vh(dr(od,this),t))||void 0===n||n.dependencies.add(e),dr(ad,this)[t]=dr(ad,this)[e]);return this}pushBaseTransform(t){return dr(Qh,this).push(Ls.multiplyByDOMMatrix(dr(Qh,this).at(-1),t.getTransform())),this}popBaseTransform(){return dr(Qh,this).length>1&&dr(Qh,this).pop(),this}recordSimpleData(t,e){return dr(Gh,this)[t]=e,this}recordIncrementalData(t,e){return dr(qh,this)[t].push(e),this}resetIncrementalData(t,e){return dr(qh,this)[t].length=0,this}recordNamedData(t,e){return dr(Xh,this).set(t,e),this}recordSimpleDataFromNamed(t,e,n){var i;dr(Gh,this)[t]=null!==(i=dr(Xh,this).get(e))&&void 0!==i?i:n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Fh,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in dr(Gh,this)&&this.recordFutureForcedDependency(e,dr(Gh,this)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of dr(td,this))this.recordFutureForcedDependency(Fh,t);return this}resetBBox(t){return dr(Zh,this)!==t&&(pr(Zh,this,t),dr(Jh,this)[0]=1/0,dr(Jh,this)[1]=1/0,dr(Jh,this)[2]=-1/0,dr(Jh,this)[3]=-1/0),this}recordClipBox(t,e,n,i,r,s){const a=Ls.multiplyByDOMMatrix(dr(Qh,this).at(-1),e.getTransform()),o=[1/0,1/0,-1/0,-1/0];Ls.axialAlignedBoundingBox([n,r,i,s],a,o);const l=Ls.intersect(dr($h,this),o);return l?(dr($h,this)[0]=l[0],dr($h,this)[1]=l[1],dr($h,this)[2]=l[2],dr($h,this)[3]=l[3]):(dr($h,this)[0]=dr($h,this)[1]=1/0,dr($h,this)[2]=dr($h,this)[3]=-1/0),this}recordBBox(t,e,n,i,r,s){const a=dr($h,this);if(a[0]===1/0)return this;const o=Ls.multiplyByDOMMatrix(dr(Qh,this).at(-1),e.getTransform());if(a[0]===-1/0)return Ls.axialAlignedBoundingBox([n,r,i,s],o,dr(Jh,this)),this;const l=[1/0,1/0,-1/0,-1/0];return Ls.axialAlignedBoundingBox([n,r,i,s],o,l),dr(Jh,this)[0]=Math.min(dr(Jh,this)[0],Math.max(l[0],a[0])),dr(Jh,this)[1]=Math.min(dr(Jh,this)[1],Math.max(l[1],a[1])),dr(Jh,this)[2]=Math.max(dr(Jh,this)[2],Math.min(l[2],a[2])),dr(Jh,this)[3]=Math.max(dr(Jh,this)[3],Math.min(l[3],a[3])),this}recordCharacterBBox(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;const o=n.bbox;let l,c;if(o&&(l=o[2]!==o[0]&&o[3]!==o[1]&&dr(nd,this).get(n),!1!==l&&(c=[0,0,0,0],Ls.axialAlignedBoundingBox(o,n.fontMatrix,c),1===i&&0===r&&0===s||Ls.scaleMinMax([i,0,0,-i,r,s],c),l)))return this.recordBBox(t,e,c[0],c[2],c[1],c[3]);if(!a)return this.recordFullPageBBox(t);const u=a();return o&&c&&void 0===l&&(l=c[0]<=r-u.actualBoundingBoxLeft&&c[2]>=r+u.actualBoundingBoxRight&&c[1]<=s-u.actualBoundingBoxAscent&&c[3]>=s+u.actualBoundingBoxDescent,dr(nd,this).set(n,l),l)?this.recordBBox(t,e,c[0],c[2],c[1],c[3]):this.recordBBox(t,e,r-u.actualBoundingBoxLeft,r+u.actualBoundingBoxRight,s-u.actualBoundingBoxAscent,s+u.actualBoundingBoxDescent)}recordFullPageBBox(t){return dr(Jh,this)[0]=Math.max(0,dr($h,this)[0]),dr(Jh,this)[1]=Math.max(0,dr($h,this)[1]),dr(Jh,this)[2]=Math.min(dr(id,this),dr($h,this)[2]),dr(Jh,this)[3]=Math.min(dr(rd,this),dr($h,this)[3]),this}getSimpleIndex(t){return dr(Gh,this)[t]}recordDependencies(t,e){const n=dr(td,this),i=dr(Gh,this),r=dr(qh,this);for(const s of e)s in dr(Gh,this)?n.add(i[s]):s in r&&r[s].forEach(n.add,n);return this}recordNamedDependency(t,e){return dr(Xh,this).has(e)&&dr(td,this).add(dr(Xh,this).get(e)),this}recordOperation(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.recordDependencies(t,[Fh]),dr(od,this)){const e=Vh(dr(od,this),t),{dependencies:n}=e;dr(td,this).forEach(n.add,n),dr(Kh,this).forEach(n.add,n),dr(Yh,this).forEach(n.add,n),n.delete(t),e.isRenderingOperation=!0}if(dr(Zh,this)===t){const n=Oh(256*dr(Jh,this)[0]/dr(id,this)),i=Oh(256*dr(Jh,this)[1]/dr(rd,this)),r=Bh(256*dr(Jh,this)[2]/dr(id,this)),s=Bh(256*dr(Jh,this)[3]/dr(rd,this));Wh(dr(sd,this),t,n,i,r,s);for(const e of dr(td,this))e!==t&&Wh(dr(sd,this),e,n,i,r,s);for(const e of dr(Kh,this))e!==t&&Wh(dr(sd,this),e,n,i,r,s);for(const e of dr(Yh,this))e!==t&&Wh(dr(sd,this),e,n,i,r,s);e||(dr(td,this).clear(),pr(Zh,this,-1))}return this}recordShowTextOperation(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Array.from(dr(td,this));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return dr(Zh,this)===t&&(pr(Zh,this,-1),dr($h,this)[0]=Math.max(dr($h,this)[0],dr(Jh,this)[0]),dr($h,this)[1]=Math.max(dr($h,this)[1],dr(Jh,this)[1]),dr($h,this)[2]=Math.min(dr($h,this)[2],dr(Jh,this)[2]),dr($h,this)[3]=Math.min(dr($h,this)[3],dr(Jh,this)[3]),e||dr(td,this).clear()),this}_takePendingDependencies(){const t=dr(td,this);return pr(td,this,new Set),t}_extractOperation(t){const e=dr(ed,this).get(t);return dr(ed,this).delete(t),e}_pushPendingDependencies(t){for(const e of t)dr(td,this).add(e)}take(){return dr(nd,this).clear(),new Hh(dr(ad,this),dr(sd,this))}takeDebugMetadata(){return dr(od,this)}}function ud(t,e){const n=new ArrayBuffer(4*t);pr(sd,this,new Uint8ClampedArray(n)),pr(ad,this,new Uint32Array(n)),e&&e.length>0?(dr(ad,this).set(e),dr(ad,this).fill(jh,e.length)):dr(ad,this).fill(jh)}var hd=new WeakMap,dd=new WeakMap,pd=new WeakMap,fd=new WeakMap,gd=new WeakMap;class md{constructor(t,e,n){if(cr(this,hd,void 0),cr(this,dd,void 0),cr(this,pd,void 0),cr(this,fd,0),cr(this,gd,0),t instanceof md&&dr(pd,t)===!!n)return t;pr(hd,this,t),pr(dd,this,e),pr(pd,this,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){var e;return pr(gd,this,(e=dr(gd,this),e++,e)),dr(hd,this).save(dr(dd,this)),this}restore(t){var e;dr(gd,this)>0&&(dr(hd,this).restore(dr(dd,this)),pr(gd,this,(e=dr(gd,this),e--,e)));return this}recordOpenMarker(t){var e;return pr(fd,this,(e=dr(fd,this),e++,e)),this}getOpenMarker(){return dr(fd,this)>0?dr(dd,this):dr(hd,this).getOpenMarker()}recordCloseMarker(t){var e;return pr(fd,this,(e=dr(fd,this),e--,e)),this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return dr(hd,this).pushBaseTransform(t),this}popBaseTransform(){return dr(hd,this).popBaseTransform(),this}recordSimpleData(t,e){return dr(hd,this).recordSimpleData(t,dr(dd,this)),this}recordIncrementalData(t,e){return dr(hd,this).recordIncrementalData(t,dr(dd,this)),this}resetIncrementalData(t,e){return dr(hd,this).resetIncrementalData(t,dr(dd,this)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return dr(hd,this).recordSimpleDataFromNamed(t,e,dr(dd,this)),this}recordFutureForcedDependency(t,e){return dr(hd,this).recordFutureForcedDependency(t,dr(dd,this)),this}inheritSimpleDataAsFutureForcedDependencies(t){return dr(hd,this).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return dr(hd,this).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return dr(pd,this)||dr(hd,this).resetBBox(dr(dd,this)),this}recordClipBox(t,e,n,i,r,s){return dr(pd,this)||dr(hd,this).recordClipBox(dr(dd,this),e,n,i,r,s),this}recordBBox(t,e,n,i,r,s){return dr(pd,this)||dr(hd,this).recordBBox(dr(dd,this),e,n,i,r,s),this}recordCharacterBBox(t,e,n,i,r,s,a){return dr(pd,this)||dr(hd,this).recordCharacterBBox(dr(dd,this),e,n,i,r,s,a),this}recordFullPageBBox(t){return dr(pd,this)||dr(hd,this).recordFullPageBBox(dr(dd,this)),this}getSimpleIndex(t){return dr(hd,this).getSimpleIndex(t)}recordDependencies(t,e){return dr(hd,this).recordDependencies(dr(dd,this),e),this}recordNamedDependency(t,e){return dr(hd,this).recordNamedDependency(dr(dd,this),e),this}recordOperation(t){return dr(hd,this).recordOperation(dr(dd,this),!0),this}recordShowTextOperation(t){return dr(hd,this).recordShowTextOperation(dr(dd,this),!0),this}bboxToClipBoxDropOperation(t){return dr(pd,this)||dr(hd,this).bboxToClipBoxDropOperation(dr(dd,this),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const vd=["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],yd=["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],bd=["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],wd=["filter","fillColor","fillAlpha"],xd=["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],_d=["transform"],kd=["transform","fillColor"],Ad="Fill",Sd="Stroke",Ed="Shading";function Cd(t,e){if(!e)return;const n=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],n,i),t.clip(r)}class Md{isModifyingCurrentTransform(){return!1}getPattern(){vs("Abstract method `getPattern` called.")}}class Td extends Md{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let r;if(i===Sd||i===Ad){const s=e.current.getClippedPathBoundingBox(i,ra(t))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,o=Math.ceil(s[3]-s[1])||1,l=e.cachedCanvases.getCanvas("pattern",a,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-s[0],-s[1]),n=Ls.transform(n,[1,0,0,1,s[0],s[1]]),c.transform(...e.baseTransform),this.matrix&&c.transform(...this.matrix),Cd(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=t.createPattern(l.canvas,"no-repeat");const u=new DOMMatrix(n);r.setTransform(u)}else Cd(t,this._bbox),r=this._createGradient(t);return r}}function Rd(t,e,n,i,r,s,a,o){const l=e.coords,c=e.colors,u=t.data,h=4*t.width;let d;l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=s,s=a,a=d),l[i+1]>l[r+1]&&(d=i,i=r,r=d,d=a,a=o,o=d),l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=s,s=a,a=d);const p=(l[n]+e.offsetX)*e.scaleX,f=(l[n+1]+e.offsetY)*e.scaleY,g=(l[i]+e.offsetX)*e.scaleX,m=(l[i+1]+e.offsetY)*e.scaleY,v=(l[r]+e.offsetX)*e.scaleX,y=(l[r+1]+e.offsetY)*e.scaleY;if(f>=y)return;const b=c[s],w=c[s+1],x=c[s+2],_=c[a],k=c[a+1],A=c[a+2],S=c[o],E=c[o+1],C=c[o+2],M=Math.round(f),T=Math.round(y);let R,P,D,L,N,I,F,O;for(let B=M;B<=T;B++){if(B<m){const t=B<f?0:(f-B)/(f-m);R=p-(p-g)*t,P=b-(b-_)*t,D=w-(w-k)*t,L=x-(x-A)*t}else{let t;t=B>y?1:m===y?0:(m-B)/(m-y),R=g-(g-v)*t,P=_-(_-S)*t,D=k-(k-E)*t,L=A-(A-C)*t}let t;t=B<f?0:B>y?1:(f-B)/(f-y),N=p-(p-v)*t,I=b-(b-S)*t,F=w-(w-E)*t,O=x-(x-C)*t;const e=Math.round(Math.min(R,N)),n=Math.round(Math.max(R,N));let i=h*B+4*e;for(let r=e;r<=n;r++)t=(R-r)/(R-N),t<0?t=0:t>1&&(t=1),u[i++]=P-(P-I)*t|0,u[i++]=D-(D-F)*t|0,u[i++]=L-(L-O)*t|0,u[i++]=255}}function Pd(t,e,n){const i=e.coords,r=e.colors;let s,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(s=0;s<l;s++){let e=s*o;for(let s=0;s<c;s++,e++)Rd(t,n,i[e],i[e+1],i[e+o],r[e],r[e+1],r[e+o]),Rd(t,n,i[e+o+1],i[e+1],i[e+o],r[e+o+1],r[e+1],r[e+o])}break;case"triangles":for(s=0,a=i.length;s<a;s+=3)Rd(t,n,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class Dd extends Md{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const i=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-i,a=Math.ceil(this._bounds[3])-r,o=Math.min(Math.ceil(Math.abs(s*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3),c=s/o,u=a/l,h={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-r,scaleX:1/c,scaleY:1/u},d=o+4,p=l+4,f=n.getCanvas("mesh",d,p),g=f.context,m=g.createImageData(o,l);if(e){const t=m.data;for(let n=0,i=t.length;n<i;n+=4)t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=255}for(const v of this._figures)Pd(m,v,h);g.putImageData(m,2,2);return{canvas:f.canvas,offsetX:i-2*c,offsetY:r-2*u,scaleX:c,scaleY:u}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,i){Cd(t,this._bbox);const r=new Float32Array(2);if(i===Ed)Ls.singularValueDecompose2dScale(ra(t),r);else if(this.matrix){Ls.singularValueDecompose2dScale(this.matrix,r);const[t,n]=r;Ls.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=t,r[1]*=n}else Ls.singularValueDecompose2dScale(e.baseTransform,r);const s=this._createMeshCanvas(r,i===Ed?null:this._background,e.cachedCanvases);return i!==Ed&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(s.offsetX,s.offsetY),t.scale(s.scaleX,s.scaleY),t.createPattern(s.canvas,"no-repeat")}}class Ld extends Md{getPattern(){return"hotpink"}}const Nd=1,Id=2;class Fd{constructor(t,e,n,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(t,e){var n,i;const{bbox:r,operatorList:s,paintType:a,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),gs("TilingType: "+o);const d=r[0],p=r[1],f=r[2],g=r[3],m=f-d,v=g-p,y=new Float32Array(2);Ls.singularValueDecompose2dScale(this.matrix,y);const[b,w]=y;Ls.singularValueDecompose2dScale(this.baseTransform,y);const x=b*y[0],_=w*y[1];let k=m,A=v,S=!1,E=!1;const C=Math.ceil(u*x),M=Math.ceil(h*_);C>=Math.ceil(m*x)?k=u:S=!0,M>=Math.ceil(v*_)?A=h:E=!0;const T=this.getSizeAndScale(k,this.ctx.canvas.width,x),R=this.getSizeAndScale(A,this.ctx.canvas.height,_),P=t.cachedCanvases.getCanvas("pattern",T.size,R.size),D=P.context,L=c.createCanvasGraphics(D,e);if(L.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(L,a,l),D.translate(-T.scale*d,-R.scale*p),L.transform(0,T.scale,0,0,R.scale,0,0),D.save(),null===(n=L.dependencyTracker)||void 0===n||n.save(),this.clipBbox(L,d,p,f,g),L.baseTransform=ra(L.ctx),L.executeOperatorList(s),L.endDrawing(),null===(i=L.dependencyTracker)||void 0===i||i.restore(),D.restore(),S||E){const e=P.canvas;S&&(k=u),E&&(A=h);const n=this.getSizeAndScale(k,this.ctx.canvas.width,x),i=this.getSizeAndScale(A,this.ctx.canvas.height,_),r=n.size,s=i.size,a=t.cachedCanvases.getCanvas("pattern-workaround",r,s),o=a.context,l=S?Math.floor(m/u):0,c=E?Math.floor(v/h):0;for(let t=0;t<=l;t++)for(let n=0;n<=c;n++)o.drawImage(e,r*t,s*n,r,s,0,0,r,s);return{canvas:a.canvas,scaleX:n.scale,scaleY:i.scale,offsetX:d,offsetY:p}}return{canvas:P.canvas,scaleX:T.scale,scaleY:R.scale,offsetX:d,offsetY:p}}getSizeAndScale(t,e,n){const i=Math.max(Fd.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=i?r=i:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,i,r){const s=i-e,a=r-n;t.ctx.rect(e,n,s,a),Ls.axialAlignedBoundingBox([e,n,i,r],ra(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,r=t.current;switch(e){case Nd:const{fillStyle:t,strokeStyle:s}=this.ctx;i.fillStyle=r.fillColor=t,i.strokeStyle=r.strokeColor=s;break;case Id:i.fillStyle=i.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new Cs("Unsupported paint type: ".concat(e))}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,i,r){let s=n;i!==Ed&&(s=Ls.transform(s,e.baseTransform),this.matrix&&(s=Ls.transform(s,this.matrix)));const a=this.createPatternCanvas(e,r);let o=new DOMMatrix(s);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=t.createPattern(a.canvas,"repeat");return l.setTransform(o),l}}function Od(t){let{src:e,srcPos:n=0,dest:i,width:r,height:s,nonBlackColor:a=4294967295,inverseDecode:o=!1}=t;const l=Ps.isLittleEndian?4278190080:255,[c,u]=o?[a,l]:[l,a],h=r>>3,d=7&r,p=e.length;i=new Uint32Array(i.buffer);let f=0;for(let g=0;g<s;g++){for(const r=n+h;n<r;n++){const t=n<p?e[n]:255;i[f++]=128&t?u:c,i[f++]=64&t?u:c,i[f++]=32&t?u:c,i[f++]=16&t?u:c,i[f++]=8&t?u:c,i[f++]=4&t?u:c,i[f++]=2&t?u:c,i[f++]=1&t?u:c}if(0===d)continue;const t=n<p?e[n++]:255;for(let e=0;e<d;e++)i[f++]=t&1<<7-e?u:c}return{srcPos:n,destPos:f}}u(Fd,"MAX_PATTERN_SIZE",3e3);const Bd=16,Wd=new DOMMatrix,jd=new Float32Array(2),Ud=new Float32Array([1/0,1/0,-1/0,-1/0]);class zd{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return void 0!==this.cache[t]?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Hd(t,e,n,i,r,s,a,o,l,c){const[u,h,d,p,f,g]=ra(t);if(0===h&&0===d){const m=a*u+f,v=Math.round(m),y=o*p+g,b=Math.round(y),w=(a+l)*u+f,x=Math.abs(Math.round(w)-v)||1,_=(o+c)*p+g,k=Math.abs(Math.round(_)-b)||1;return t.setTransform(Math.sign(u),0,0,Math.sign(p),v,b),t.drawImage(e,n,i,r,s,0,0,x,k),t.setTransform(u,h,d,p,f,g),[x,k]}if(0===u&&0===p){const m=o*d+f,v=Math.round(m),y=a*h+g,b=Math.round(y),w=(o+c)*d+f,x=Math.abs(Math.round(w)-v)||1,_=(a+l)*h+g,k=Math.abs(Math.round(_)-b)||1;return t.setTransform(0,Math.sign(h),Math.sign(d),0,v,b),t.drawImage(e,n,i,r,s,0,0,k,x),t.setTransform(u,h,d,p,f,g),[k,x]}t.drawImage(e,n,i,r,s,a,o,l,c);return[Math.hypot(u,h)*l,Math.hypot(d,p)*c]}class Vd{constructor(t,e,n){u(this,"alphaIsShape",!1),u(this,"fontSize",0),u(this,"fontSizeScale",1),u(this,"textMatrix",null),u(this,"textMatrixScale",1),u(this,"fontMatrix",Lr),u(this,"leading",0),u(this,"x",0),u(this,"y",0),u(this,"lineX",0),u(this,"lineY",0),u(this,"charSpacing",0),u(this,"wordSpacing",0),u(this,"textHScale",1),u(this,"textRenderingMode",Xr),u(this,"textRise",0),u(this,"fillColor","#000000"),u(this,"strokeColor","#000000"),u(this,"patternFill",!1),u(this,"patternStroke",!1),u(this,"fillAlpha",1),u(this,"strokeAlpha",1),u(this,"lineWidth",1),u(this,"activeSMask",null),u(this,"transferMaps","none"),null===n||void 0===n||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Ud.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ad,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.minMax.slice();if(t===Sd){e||vs("Stroke bounding box must include transform."),Ls.singularValueDecompose2dScale(e,jd);const t=jd[0]*this.lineWidth/2,i=jd[1]*this.lineWidth/2;n[0]-=t,n[1]-=i,n[2]+=t,n[3]+=i}return n}updateClipFromPath(){const t=Ls.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Ud,0)}getClippedPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ad,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Ls.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Gd(t,e){if(e instanceof ImageData)return void t.putImageData(e,0,0);const n=e.height,i=e.width,r=n%Bd,s=(n-r)/Bd,a=0===r?s:s+1,o=t.createImageData(i,Bd);let l,c=0;const u=e.data,h=o.data;let d,p,f,g;if(e.kind===Zr.GRAYSCALE_1BPP){const e=u.byteLength,n=new Uint32Array(h.buffer,0,h.byteLength>>2),g=n.length,m=i+7>>3,v=4294967295,y=Ps.isLittleEndian?4278190080:255;for(d=0;d<a;d++){for(f=d<s?Bd:r,l=0,p=0;p<f;p++){const t=e-c;let r=0;const s=t>m?i:8*t-7,a=-8&s;let o=0,h=0;for(;r<a;r+=8)h=u[c++],n[l++]=128&h?v:y,n[l++]=64&h?v:y,n[l++]=32&h?v:y,n[l++]=16&h?v:y,n[l++]=8&h?v:y,n[l++]=4&h?v:y,n[l++]=2&h?v:y,n[l++]=1&h?v:y;for(;r<s;r++)0===o&&(h=u[c++],o=128),n[l++]=h&o?v:y,o>>=1}for(;l<g;)n[l++]=0;t.putImageData(o,0,d*Bd)}}else if(e.kind===Zr.RGBA_32BPP){for(p=0,g=i*Bd*4,d=0;d<s;d++)h.set(u.subarray(c,c+g)),c+=g,t.putImageData(o,0,p),p+=Bd;d<a&&(g=i*r*4,h.set(u.subarray(c,c+g)),t.putImageData(o,0,p))}else{if(e.kind!==Zr.RGB_24BPP)throw new Error("bad image kind: ".concat(e.kind));for(f=Bd,g=i*f,d=0;d<a;d++){for(d>=s&&(f=r,g=i*f),l=0,p=g;p--;)h[l++]=u[c++],h[l++]=u[c++],h[l++]=u[c++],h[l++]=255;t.putImageData(o,0,d*Bd)}}}function qd(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const n=e.height,i=e.width,r=n%Bd,s=(n-r)/Bd,a=0===r?s:s+1,o=t.createImageData(i,Bd);let l=0;const c=e.data,u=o.data;for(let h=0;h<a;h++){const e=h<s?Bd:r;({srcPos:l}=Od({src:c,srcPos:l,dest:u,width:i,height:e,nonBlackColor:0})),t.putImageData(o,0,h*Bd)}}function Xd(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==t[i]&&(e[i]=t[i]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function Kd(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;"none"!==e&&""!==e&&(t.filter="none")}function Yd(t,e){if(e)return!0;Ls.singularValueDecompose2dScale(t,jd);const n=Math.fround(oa.pixelRatio*Gs.PDF_TO_CSS_UNITS);return jd[0]<=n&&jd[1]<=n}const Qd=["butt","round","square"],$d=["miter","round","bevel"],Jd={},Zd={};var tp=new WeakSet;class ep{constructor(t,e,n,i,r,s,a,o,l){let{optionalContentConfig:c,markedContentStack:u=null}=s;lr(this,tp),this.ctx=t,this.current=new Vd(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new zd(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=null!==l&&void 0!==l?l:null}getObject(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var i;return"string"===typeof e?(null===(i=this.dependencyTracker)||void 0===i||i.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing(t){let{transform:e,viewport:n,transparency:i=!1,background:r=null}=t;const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){const t=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(...ra(this.compositeCtx))}this.ctx.save(),Kd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=ra(this.ctx)}executeOperatorList(t,e,n,i,r){const s=t.argsArray,a=t.fnArray;let o=e||0;const l=s.length;if(l===o)return o;const c=l-o>10&&"function"===typeof n,u=c?Date.now()+15:0;let h=0;const d=this.commonObjs,p=this.objs;let f,g;for(;;){if(void 0!==i&&o===i.nextBreakPoint)return i.breakIt(o,n),o;var m;if(!r||r(o))if(f=a[o],g=null!==(m=s[o])&&void 0!==m?m:null,f!==os.dependency)null===g?this[f](o):this[f](o,...g);else for(const t of g){var v;null===(v=this.dependencyTracker)||void 0===v||v.recordNamedData(t,o);const e=t.startsWith("g_")?d:p;if(!e.has(t))return e.get(t,n),o}if(o++,o===l)return o;if(c&&++h>10){if(Date.now()>u)return n(),o;h=0}}}endDrawing(){ur(tp,this,np).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),ur(tp,this,ip).call(this)}_scaleImage(t,e){var n,i;const r=null!==(n=t.width)&&void 0!==n?n:t.displayWidth,s=null!==(i=t.height)&&void 0!==i?i:t.displayHeight;let a,o,l=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),u=r,h=s,d="prescale1";for(;l>2&&u>1||c>2&&h>1;){let e=u,n=h;l>2&&u>1&&(e=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),l/=u/e),c>2&&h>1&&(n=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/n),a=this.cachedCanvases.getCanvas(d,e,n),o=a.context,o.clearRect(0,0,e,n),o.drawImage(t,0,0,u,h,0,0,e,n),t=a.canvas,u=e,h=n,d="prescale1"===d?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,e){var n;const i=this.ctx,{width:r,height:s}=e,a=this.current.fillColor,o=this.current.patternFill,l=ra(i);let c,u,h,d;if((e.bitmap||e.data)&&e.count>1){const n=e.bitmap||e.data.buffer;u=JSON.stringify(o?l:[l.slice(0,4),a]),c=this._cachedBitmapsMap.get(n),c||(c=new Map,this._cachedBitmapsMap.set(n,c));const i=c.get(u);if(i&&!o){var p;const e=Math.round(Math.min(l[0],l[2])+l[4]),n=Math.round(Math.min(l[1],l[3])+l[5]);return null===(p=this.dependencyTracker)||void 0===p||p.recordDependencies(t,kd),{canvas:i,offsetX:e,offsetY:n}}h=i}h||(d=this.cachedCanvases.getCanvas("maskCanvas",r,s),qd(d.context,e));let f=Ls.transform(l,[1/r,0,0,-1/s,0,0]);f=Ls.transform(f,[1,0,0,1,0,-s]);const g=Ud.slice();Ls.axialAlignedBoundingBox([0,0,r,s],f,g);const[m,v,y,b]=g,w=Math.round(y-m)||1,x=Math.round(b-v)||1,_=this.cachedCanvases.getCanvas("fillCanvas",w,x),k=_.context,A=m,S=v;k.translate(-A,-S),k.transform(...f),h||(h=this._scaleImage(d.canvas,sa(k)),h=h.img,c&&o&&c.set(u,h)),k.imageSmoothingEnabled=Yd(ra(k),e.interpolate),Hd(k,h,0,0,h.width,h.height,0,0,r,s),k.globalCompositeOperation="source-in";const E=Ls.transform(sa(k),[1,0,0,1,-A,-S]);return k.fillStyle=o?a.getPattern(i,this,E,Ad,t):a,k.fillRect(0,0,r,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,_.canvas)),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(t,kd),{canvas:_.canvas,offsetX:Math.round(A),offsetY:Math.round(S)}}setLineWidth(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineCap",t),this.ctx.lineCap=Qd[e]}setLineJoin(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=$d[e]}setMiterLimit(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("dash",t);const r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(e),r.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,i,r,s,a;for(const[o,l]of e)switch(o){case"LW":this.setLineWidth(t,l);break;case"LC":this.setLineCap(t,l);break;case"LJ":this.setLineJoin(t,l);break;case"ML":this.setMiterLimit(t,l);break;case"D":this.setDash(t,l[0],l[1]);break;case"RI":this.setRenderingIntent(t,l);break;case"FL":this.setFlatness(t,l);break;case"Font":this.setFont(t,l[0],l[1]);break;case"CA":null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=l;break;case"ca":null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=l;break;case"BM":null===(r=this.dependencyTracker)||void 0===r||r.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=l;break;case"SMask":null===(s=this.dependencyTracker)||void 0===s||s.recordSimpleData("SMask",t),this.current.activeSMask=l?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":null===(a=this.dependencyTracker)||void 0===a||a.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(l)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,n);this.suspendedCtx=this.ctx;const s=this.ctx=r.context;s.setTransform(this.suspendedCtx.getTransform()),Xd(this.suspendedCtx,s),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},t.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},t.transform=function(t,n,i,r,s,a){e.transform(t,n,i,r,s,a),this.__originalTransform(t,n,i,r,s,a)},t.setTransform=function(t,n,i,r,s,a){e.setTransform(t,n,i,r,s,a),this.__originalSetTransform(t,n,i,r,s,a)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},t.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},t.bezierCurveTo=function(t,n,i,r,s,a){e.bezierCurveTo(t,n,i,r,s,a),this.__originalBezierCurveTo(t,n,i,r,s,a)},t.rect=function(t,n,i,r){e.rect(t,n,i,r),this.__originalRect(t,n,i,r)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Xd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const r=i[0],s=i[1],a=i[2]-r,o=i[3]-s;0!==a&&0!==o&&(this.genericComposeSMask(e.context,n,a,o,e.subtype,e.backdrop,e.transferMap,r,s,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,r,s,a,o,l,c,u){let h=t.canvas,d=o-c,p=l-u;if(s)if(d<0||p<0||d+n>h.width||p+i>h.height){const t=this.cachedCanvases.getCanvas("maskExtension",n,i),e=t.context;e.drawImage(h,-d,-p),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(0,0,n,i),e.globalCompositeOperation="source-over",h=t.canvas,d=p=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const e=new Path2D;e.rect(d,p,n,i),t.clip(e),t.globalCompositeOperation="destination-atop",t.fillStyle=s,t.fillRect(d,p,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===r&&a?e.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===r&&(e.filter=this.filterFactory.addLuminosityFilter(a));const f=new Path2D;f.rect(o,l,n,i),e.clip(f),e.globalCompositeOperation="destination-in",e.drawImage(h,d,p,n,i,o,l,n,i),e.restore()}save(t){var e;this.inSMaskMode&&Xd(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),null===(e=this.dependencyTracker)||void 0===e||e.save(t)}restore(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.restore(t),0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Xd(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(t,e,n,i,r,s,a){var o;null===(o=this.dependencyTracker)||void 0===o||o.recordIncrementalData("transform",t),this.ctx.transform(e,n,i,r,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,i){let[r]=n;if(!i)return r||(r=n[0]=new Path2D),void this[e](t,r);if(null!==this.dependencyTracker){const n=e===os.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,i[0]-n,i[2]+n,i[1]-n,i[3]+n).recordDependencies(t,["transform"])}if(!(r instanceof Path2D)){const t=n[0]=new Path2D;for(let e=0,n=r.length;e<n;)switch(r[e++]){case ls:t.moveTo(r[e++],r[e++]);break;case cs:t.lineTo(r[e++],r[e++]);break;case us:t.bezierCurveTo(r[e++],r[e++],r[e++],r[e++],r[e++],r[e++]);break;case hs:t.closePath();break;default:ms("Unrecognized drawing path operator: ".concat(r[e-1]))}r=t}Ls.axialAlignedBoundingBox(i,ra(this.ctx),this.current.minMax),this[e](t,r),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e){var n;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===typeof s&&null!==s&&void 0!==s&&s.getPattern){const n=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,sa(r),Sd,t),n){const t=new Path2D;t.addPath(e,r.getTransform().invertSelf().multiplySelf(n)),e=t}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(t,vd),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Sd,ra(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e){var n;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this.ctx,s=this.current.fillColor;let a=!1;if(this.current.patternFill){var o;const n=s.isModifyingCurrentTransform()?r.getTransform():null;if(null===(o=this.dependencyTracker)||void 0===o||o.save(t),r.save(),r.fillStyle=s.getPattern(r,this,sa(r),Ad,t),n){const t=new Path2D;t.addPath(e,r.getTransform().invertSelf().multiplySelf(n)),e=t}a=!0}const l=this.current.getClippedPathBoundingBox();var c;(this.contentVisible&&null!==l&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(t,yd),a)&&(r.restore(),null===(c=this.dependencyTracker)||void 0===c||c.restore(t));i&&this.consumePath(t,e,l)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(t,wd).recordOperation(t)}clip(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=Jd}eoClip(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=Zd}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,null===(e=this.dependencyTracker)||void 0===e||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:n}=this;void 0!==e&&n.recordFutureForcedDependency("textClip",n.getOpenMarker()).recordFutureForcedDependency("textClip",t),n.recordCloseMarker(t)}if(void 0!==e){const t=new Path2D,i=n.getTransform().invertSelf();for(const{transform:n,x:r,y:s,fontSize:a,path:o}of e)o&&t.addPath(o,new DOMMatrix(n).preMultiplySelf(i).translate(r,s).scale(a,-a));n.clip(t)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var i,r;null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const s=this.commonObjs.get(e),a=this.current;if(!s)throw new Error("Can't find font for ".concat(e));if(a.fontMatrix=s.fontMatrix||Lr,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||ms("Invalid font matrix for font "+e),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const o=s.loadedName||"sans-serif",l=(null===(r=s.systemFontInfo)||void 0===r?void 0:r.css)||'"'.concat(o,'", ').concat(s.fallbackName);let c="normal";s.black?c="900":s.bold&&(c="bold");const u=s.italic?"italic":"normal";let h=n;n<16?h=16:n>100&&(h=100),this.current.fontSizeScale=n/h,this.ctx.font="".concat(u," ").concat(c," ").concat(h,"px ").concat(l)}setTextRenderingMode(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){var e,n;this.moveText(t,0,this.current.leading),null===(e=this.dependencyTracker)||void 0===e||e.recordIncrementalData("moveText",null!==(n=this.dependencyTracker.getSimpleIndex("leading"))&&void 0!==n?n:t)}paintChar(t,e,n,i,r,s){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=c&$r,d=!!(c&Jr),p=o.patternFill&&!l.missingFile,f=o.patternStroke&&!l.missingFile;let g;if((l.disableFontFace||d||p||f)&&!l.missingFile&&(g=l.getPathGenerator(this.commonObjs,e)),g&&(l.disableFontFace||p||f)){var m;let e;if(a.save(),a.translate(n,i),a.scale(u,-u),null===(m=this.dependencyTracker)||void 0===m||m.recordCharacterBBox(t,a,l),h===Xr||h===Yr)if(r){e=a.getTransform(),a.setTransform(...r);const t=ur(tp,this,rp).call(this,g,e,r);a.fill(t)}else a.fill(g);if(h===Kr||h===Yr)if(s){e||(e=a.getTransform()),a.setTransform(...s);const{a:t,b:n,c:i,d:r}=e,o=Ls.inverseTransform(s),l=Ls.transform([t,n,i,r,0,0],o);Ls.singularValueDecompose2dScale(l,jd),a.lineWidth*=Math.max(jd[0],jd[1])/u,a.stroke(ur(tp,this,rp).call(this,g,e,s))}else a.lineWidth/=u,a.stroke(g);a.restore()}else{var v;if(h===Xr||h===Yr)a.fillText(e,n,i),null===(v=this.dependencyTracker)||void 0===v||v.recordCharacterBBox(t,a,l,u,n,i,()=>a.measureText(e));if(h===Kr||h===Yr){var y;if(this.dependencyTracker)null===(y=this.dependencyTracker)||void 0===y||y.recordCharacterBBox(t,a,l,u,n,i,()=>a.measureText(e)).recordDependencies(t,vd);a.strokeText(e,n,i)}}if(d){var b;(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ra(a),x:n,y:i,fontSize:u,path:g}),null===(b=this.dependencyTracker)||void 0===b||b.recordCharacterBBox(t,a,l,u,n,i)}}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return xs(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var n;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,xd).resetBBox(t),this.current.textRenderingMode&Jr&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,r=i.font;var s;if(r.isType3Font)return this.showType3Text(t,e),void(null===(s=this.dependencyTracker)||void 0===s||s.recordShowTextOperation(t));const a=i.fontSize;var o;if(0===a)return void(null===(o=this.dependencyTracker)||void 0===o||o.recordOperation(t));const l=this.ctx,c=i.fontSizeScale,u=i.charSpacing,h=i.wordSpacing,d=i.fontDirection,p=i.textHScale*d,f=e.length,g=r.vertical,m=g?1:-1,v=r.defaultVMetrics,y=a*i.fontMatrix[0],b=i.textRenderingMode===Xr&&!r.disableFontFace&&!i.patternFill;let w,x;if(l.save(),i.textMatrix&&l.transform(...i.textMatrix),l.translate(i.x,i.y+i.textRise),d>0?l.scale(p,-1):l.scale(p,1),i.patternFill){l.save();const e=i.fillColor.getPattern(l,this,sa(l),Ad,t);w=ra(l),l.restore(),l.fillStyle=e}if(i.patternStroke){l.save();const e=i.strokeColor.getPattern(l,this,sa(l),Sd,t);x=ra(l),l.restore(),l.strokeStyle=e}let _=i.lineWidth;const k=i.textMatrixScale;if(0===k||0===_){const t=i.textRenderingMode&$r;t!==Kr&&t!==Yr||(_=this.getSinglePixelWidth())}else _/=k;if(1!==c&&(l.scale(c,c),_/=c),l.lineWidth=_,r.isInvalidPDFjsFont){const n=[];let r=0;for(const t of e)n.push(t.unicode),r+=t.width;const s=n.join("");if(l.fillText(s,0,0),null!==this.dependencyTracker){const e=l.measureText(s);this.dependencyTracker.recordBBox(t,this.ctx,-e.actualBoundingBoxLeft,e.actualBoundingBoxRight,-e.actualBoundingBoxAscent,e.actualBoundingBoxDescent).recordShowTextOperation(t)}return i.x+=r*y*p,l.restore(),void this.compose()}let A,S=0;for(A=0;A<f;++A){const n=e[A];if("number"===typeof n){S+=m*n*a/1e3;continue}let i=!1;const s=(n.isSpace?h:0)+u,o=n.fontChar,p=n.accent;let f,_,k,C=n.width;if(g){const t=n.vmetric||v,e=-(n.vmetric?t[1]:.5*C)*y,i=t[2]*y;C=t?-t[0]:C,f=e/c,_=(S+i)/c}else f=S/c,_=0;if(r.remeasure&&C>0){k=l.measureText(o);const t=1e3*k.width/a*c;if(C<t&&this.isFontSubpixelAAEnabled){const e=C/t;i=!0,l.save(),l.scale(e,1),f/=e}else C!==t&&(f+=(C-t)/2e3*a/c)}var E;if(this.contentVisible&&(n.isInFont||r.missingFile))if(b&&!p)l.fillText(o,f,_),null===(E=this.dependencyTracker)||void 0===E||E.recordCharacterBBox(t,l,k?{bbox:null}:r,a/c,f,_,()=>null!==k&&void 0!==k?k:l.measureText(o));else if(this.paintChar(t,o,f,_,w,x),p){const e=f+a*p.offset.x/c,n=_-a*p.offset.y/c;this.paintChar(t,p.fontChar,e,n,w,x)}S+=g?C*y-s*d:C*y+s*d,i&&l.restore()}g?i.y-=S:i.x+=S*p,l.restore(),this.compose(),null===(n=this.dependencyTracker)||void 0===n||n.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,i=this.current,r=i.font,s=i.fontSize,a=i.fontDirection,o=r.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,u=i.textHScale*a,h=i.fontMatrix||Lr,d=e.length;let p,f,g,m;if(i.textRenderingMode===Qr||0===s)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(u,a);const v=this.dependencyTracker;for(this.dependencyTracker=v?new md(v,t):null,p=0;p<d;++p){if(f=e[p],"number"===typeof f){m=o*f*s/1e3,this.ctx.translate(m,0),i.x+=m*u;continue}const t=(f.isSpace?c:0)+l,a=r.charProcOperatorList[f.operatorListId];a?this.contentVisible&&(this.save(),n.scale(s,s),n.transform(...h),this.executeOperatorList(a),this.restore()):ms('Type3 character "'.concat(f.operatorListId,'" is not available.'));const d=[f.width,0];Ls.applyTransform(d,h),g=d[0]*s+t,n.translate(g,0),i.x+=g*u}n.restore(),v&&(this.dependencyTracker=v)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,i,r,s,a){var o;const l=new Path2D;l.rect(i,r,s-i,a-r),this.ctx.clip(l),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(t,this.ctx,i,s,r,a).recordClipBox(t,this.ctx,i,s,r,a),this.endPath(t)}getColorN_Pattern(t,e){let n;if("TilingPattern"===e[0]){const t=this.baseTransform||ra(this.ctx),i={createCanvasGraphics:(t,e)=>new ep(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new md(this.dependencyTracker,e,!0):null)};n=new Fd(e,this.ctx,i,t)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.recordSimpleData("strokeColor",t);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.current.strokeColor=this.getColorN_Pattern(t,i),this.current.patternStroke=!0}setFillColorN(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.recordSimpleData("fillColor",t);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.current.fillColor=this.getColorN_Pattern(t,i),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=function(t){switch(t[0]){case"RadialAxial":return new Td(t);case"Mesh":return new Dd(t);case"Dummy":return new Ld}throw new Error("Unknown IR type: ".concat(t[0]))}(this.getObject(t,e)),this.cachedPatterns.set(e,n)),i&&(n.matrix=i),n}shadingFill(t,e){var n;if(!this.contentVisible)return;const i=this.ctx;this.save(t);const r=this._getPattern(t,e);i.fillStyle=r.getPattern(i,this,sa(i),Ed,t);const s=sa(i);if(s){const{width:t,height:e}=i.canvas,n=Ud.slice();Ls.axialAlignedBoundingBox([0,0,t,e],s,n);const[r,a,o,l]=n;this.ctx.fillRect(r,a,o-r,l-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,_d).recordDependencies(t,yd).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){vs("Should not call beginInlineImage")}beginImageData(){vs("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=ra(this.ctx),n)){var i;Ls.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[e,r,s,a]=n,o=new Path2D;o.rect(e,r,s-e,a-r),this.ctx.clip(o),null===(i=this.dependencyTracker)||void 0===i||i.recordClipBox(t,this.ctx,e,s,r,a),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var n;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||gs("TODO: Support non-isolated groups."),e.knockout&&ms("Knockout groups not supported.");const r=ra(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=Ud.slice();Ls.axialAlignedBoundingBox(e.bbox,ra(i),s);const a=[0,0,i.canvas.width,i.canvas.height];s=Ls.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),u=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),p=d.context;p.translate(-o,-l),p.transform(...r);let f=new Path2D;const[g,m,v,y]=e.bbox;if(f.rect(g,m,v-g,y-m),e.matrix){const t=new Path2D;t.addPath(f,new DOMMatrix(e.matrix)),f=t}p.clip(f),e.smask&&this.smaskStack.push({canvas:d.canvas,context:p,offsetX:o,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),e.smask&&!this.dependencyTracker||(i.setTransform(1,0,0,1,0,0),i.translate(o,l),i.save()),Xd(i,p),this.ctx=p,null===(n=this.dependencyTracker)||void 0===n||n.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){var n;if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,null===(n=this.dependencyTracker)||void 0===n||n.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const e=ra(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...e);const n=Ud.slice();Ls.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],e,n),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(t,e,n,i,r,s){if(ur(tp,this,np).call(this),Kd(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const r=n[2]-n[0],a=n[3]-n[1];if(s&&this.annotationCanvasMap){(i=i.slice())[4]-=n[0],i[5]-=n[1],(n=n.slice())[0]=n[1]=0,n[2]=r,n[3]=a,Ls.singularValueDecompose2dScale(ra(this.ctx),jd);const{viewportScale:t}=this,s=Math.ceil(r*this.outputScaleX*t),o=Math.ceil(a*this.outputScaleY*t);this.annotationCanvas=this.canvasFactory.create(s,o);const{canvas:l,context:c}=this.annotationCanvas;this.annotationCanvasMap.set(e,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(jd[0],0,0,-jd[1],0,a*jd[1]),Kd(this.ctx)}else{Kd(this.ctx),this.endPath(t);const e=new Path2D;e.rect(n[0],n[1],r,a),this.ctx.clip(e)}}this.current=new Vd(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...i),this.transform(t,...r)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),ur(tp,this,ip).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var n;if(!this.contentVisible)return;const i=e.count;(e=this.getObject(t,e.data,e)).count=i;const r=this.ctx,s=this._createMaskCanvas(t,e),a=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,s.offsetX,s.offsetY),null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(t).recordBBox(t,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n){var i,r;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const c=this.ctx;c.save();const u=ra(c);c.transform(n,s,a,o,0,0);const h=this._createMaskCanvas(t,e);c.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),null===(i=this.dependencyTracker)||void 0===i||i.resetBBox(t);for(let p=0,f=l.length;p<f;p+=2){var d;const e=Ls.transform(u,[n,s,a,o,l[p],l[p+1]]);c.drawImage(h.canvas,e[4],e[5]),null===(d=this.dependencyTracker)||void 0===d||d.recordBBox(t,this.ctx,e[4],e[4]+h.canvas.width,e[5],e[5]+h.canvas.height)}c.restore(),this.compose(),null===(r=this.dependencyTracker)||void 0===r||r.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var n,i;if(!this.contentVisible)return;const r=this.ctx,s=this.current.fillColor,a=this.current.patternFill;null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(t).recordDependencies(t,kd);for(const l of e){var o;const{data:e,width:n,height:i,transform:c}=l,u=this.cachedCanvases.getCanvas("maskCanvas",n,i),h=u.context;h.save();qd(h,this.getObject(t,e,l)),h.globalCompositeOperation="source-in",h.fillStyle=a?s.getPattern(h,this,sa(r),Ad,t):s,h.fillRect(0,0,n,i),h.restore(),r.save(),r.transform(...c),r.scale(1,-1),Hd(r,u.canvas,0,0,n,i,0,-1,1,1),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(t,r,0,n,0,i),r.restore()}this.compose(),null===(i=this.dependencyTracker)||void 0===i||i.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);n?this.paintInlineImageXObject(t,n):ms("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,n,i,r){if(!this.contentVisible)return;const s=this.getObject(t,e);if(!s)return void ms("Dependent image isn't ready yet");const a=s.width,o=s.height,l=[];for(let c=0,u=r.length;c<u;c+=2)l.push({transform:[n,0,0,i,r[c],r[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(t,s,l)}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;const{bitmap:e,width:n,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,i),s=r.context;return s.filter=this.current.transferMaps,s.drawImage(e,0,0),s.filter="none",r.canvas}paintInlineImageXObject(t,e){var n;if(!this.contentVisible)return;const i=e.width,r=e.height,s=this.ctx;this.save(t);const{filter:a}=s;let o;if("none"!==a&&""!==a&&(s.filter="none"),s.scale(1/i,-1/r),e.bitmap)o=this.applyTransferMapsToBitmap(e);else if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)o=e;else{const t=this.cachedCanvases.getCanvas("inlineImage",i,r).context;Gd(t,e),o=this.applyTransferMapsToCanvas(t)}const l=this._scaleImage(o,sa(s));s.imageSmoothingEnabled=Yd(ra(s),e.interpolate),null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(t).recordBBox(t,s,0,i,-r,0).recordDependencies(t,bd).recordOperation(t),Hd(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-r,i,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var i,r;if(!this.contentVisible)return;const s=this.ctx;let a;if(e.bitmap)a=e.bitmap;else{const t=e.width,n=e.height,i=this.cachedCanvases.getCanvas("inlineImage",t,n).context;Gd(i,e),a=this.applyTransferMapsToCanvas(i)}null===(i=this.dependencyTracker)||void 0===i||i.resetBBox(t);for(const l of n){var o;s.save(),s.transform(...l.transform),s.scale(1,-1),Hd(s,a,l.x,l.y,l.w,l.h,0,-1,1,1),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(t,s,0,1,-1,0),s.restore()}null===(r=this.dependencyTracker)||void 0===r||r.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&(null===(e=this.dependencyTracker)||void 0===e||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,yd).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;null===(n=this.dependencyTracker)||void 0===n||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.beginMarkedContent(t),"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;null===(e=this.dependencyTracker)||void 0===e||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;var s,a;this.pendingClip?(i||(this.pendingClip===Zd?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null,null===(s=this.dependencyTracker)||void 0===s||s.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):null===(a=this.dependencyTracker)||void 0===a||a.recordOperation(t);this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ra(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:r}=this.ctx.getTransform();let s,a;if(0===n&&0===i){const n=Math.abs(e),i=Math.abs(r);if(n===i)if(0===t)s=a=1/n;else{const e=n*t;s=a=e<1?1/e:1}else if(0===t)s=1/n,a=1/i;else{const e=n*t,r=i*t;s=e<1?1/e:1,a=r<1?1/r:1}}else{const o=Math.abs(e*r-n*i),l=Math.hypot(e,n),c=Math.hypot(i,r);if(0===t)s=c/o,a=l/o;else{const e=t*o;s=c>e?c/e:1,a=l>e?l/e:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:i}}=this,[r,s]=this.getScaleForStroking();if(r===s)return n.lineWidth=(i||1)*r,void n.stroke(t);const a=n.getLineDash();e&&n.save(),n.scale(r,s),Wd.a=1/r,Wd.d=1/s;const o=new Path2D;if(o.addPath(t,Wd),a.length>0){const t=Math.max(r,s);n.setLineDash(a.map(e=>e/t)),n.lineDashOffset/=t}n.lineWidth=i||1,n.stroke(o),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}function np(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function ip(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}function rp(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i}for(const Vk in os)void 0!==ep.prototype[Vk]&&(ep.prototype[os[Vk]]=ep.prototype[Vk]);var sp=new WeakMap,ap=new WeakMap,op=new WeakMap,lp=new WeakSet;class cp{static write(t){const e=new TextEncoder,n={};let i=0;for(const l of cp.strings){const r=e.encode(t[l]);n[l]=r,i+=4+r.length}const r=new ArrayBuffer(i),s=new Uint8Array(r),a=new DataView(r);let o=0;for(const l of cp.strings){const t=n[l],e=t.length;a.setUint32(o,e),s.set(t,o+4),o+=4+e}return ys(o===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}constructor(t){lr(this,lp),cr(this,sp,void 0),cr(this,ap,void 0),cr(this,op,void 0),pr(sp,this,t),pr(ap,this,new DataView(dr(sp,this))),pr(op,this,new TextDecoder)}get fontFamily(){return ur(lp,this,up).call(this,0)}get fontWeight(){return ur(lp,this,up).call(this,1)}get italicAngle(){return ur(lp,this,up).call(this,2)}}function up(t){ys(t<br.strings.length,"Invalid string index");let e=0;for(let i=0;i<t;i++)e+=dr(ap,this).getUint32(e)+4;const n=dr(ap,this).getUint32(e);return dr(op,this).decode(new Uint8Array(dr(sp,this),e+4,n))}br=cp,u(cp,"strings",["fontFamily","fontWeight","italicAngle"]);var hp=new WeakMap,dp=new WeakMap,pp=new WeakMap,fp=new WeakSet;class gp{static write(t){const e=new TextEncoder,n={};let i=0;for(const h of gp.strings){const r=e.encode(t[h]);n[h]=r,i+=4+r.length}i+=4;let r,s,a=1+i;t.style&&(r=e.encode(t.style.style),s=e.encode(t.style.weight),a+=4+r.length+4+s.length);const o=new ArrayBuffer(a),l=new Uint8Array(o),c=new DataView(o);let u=0;c.setUint8(u++,t.guessFallback?1:0),c.setUint32(u,0),u+=4,i=0;for(const h of gp.strings){const t=n[h],e=t.length;i+=4+e,c.setUint32(u,e),l.set(t,u+4),u+=4+e}return c.setUint32(u-i-4,i),t.style&&(c.setUint32(u,r.length),l.set(r,u+4),u+=4+r.length,c.setUint32(u,s.length),l.set(s,u+4),u+=4+s.length),ys(u<=o.byteLength,"SubstitionInfo.write: Buffer overflow"),o.transferToFixedLength(u)}constructor(t){lr(this,fp),cr(this,hp,void 0),cr(this,dp,void 0),cr(this,pp,void 0),pr(hp,this,t),pr(dp,this,new DataView(dr(hp,this))),pr(pp,this,new TextDecoder)}get guessFallback(){return 0!==dr(dp,this).getUint8(0)}get css(){return ur(fp,this,mp).call(this,0)}get loadedName(){return ur(fp,this,mp).call(this,1)}get baseFontName(){return ur(fp,this,mp).call(this,2)}get src(){return ur(fp,this,mp).call(this,3)}get style(){let t=1;t+=4+dr(dp,this).getUint32(t);const e=dr(dp,this).getUint32(t),n=dr(pp,this).decode(new Uint8Array(dr(hp,this),t+4,e));t+=4+e;const i=dr(dp,this).getUint32(t);return{style:n,weight:dr(pp,this).decode(new Uint8Array(dr(hp,this),t+4,i))}}}function mp(t){ys(t<wr.strings.length,"Invalid string index");let e=5;for(let i=0;i<t;i++)e+=dr(dp,this).getUint32(e)+4;const n=dr(dp,this).getUint32(e);return dr(pp,this).decode(new Uint8Array(dr(hp,this),e+4,n))}wr=gp,u(gp,"strings",["css","loadedName","baseFontName","src"]);var vp=new WeakMap,yp=new WeakMap,bp=new WeakMap,wp=new WeakSet;class xp{constructor(t){let{data:e,extra:n}=t;lr(this,wp),cr(this,vp,void 0),cr(this,yp,void 0),cr(this,bp,void 0),pr(vp,this,e),pr(yp,this,new TextDecoder),pr(bp,this,new DataView(dr(vp,this))),n&&Object.assign(this,n)}get black(){return ur(wp,this,_p).call(this,0)}get bold(){return ur(wp,this,_p).call(this,1)}get disableFontFace(){return ur(wp,this,_p).call(this,2)}get fontExtraProperties(){return ur(wp,this,_p).call(this,3)}get isInvalidPDFjsFont(){return ur(wp,this,_p).call(this,4)}get isType3Font(){return ur(wp,this,_p).call(this,5)}get italic(){return ur(wp,this,_p).call(this,6)}get missingFile(){return ur(wp,this,_p).call(this,7)}get remeasure(){return ur(wp,this,_p).call(this,8)}get vertical(){return ur(wp,this,_p).call(this,9)}get ascent(){return ur(wp,this,kp).call(this,0)}get defaultWidth(){return ur(wp,this,kp).call(this,1)}get descent(){return ur(wp,this,kp).call(this,2)}get bbox(){let t=Ep._;if(0===dr(bp,this).getUint8(t))return;t+=1;const e=[];for(let n=0;n<4;n++)e.push(dr(bp,this).getInt16(t,!0)),t+=2;return e}get fontMatrix(){let t=Cp._;if(0===dr(bp,this).getUint8(t))return;t+=1;const e=[];for(let n=0;n<6;n++)e.push(dr(bp,this).getFloat64(t,!0)),t+=8;return e}get defaultVMetrics(){let t=Mp._;if(0===dr(bp,this).getUint8(t))return;t+=1;const e=[];for(let n=0;n<3;n++)e.push(dr(bp,this).getInt16(t,!0)),t+=2;return e}get fallbackName(){return ur(wp,this,Ap).call(this,0)}get loadedName(){return ur(wp,this,Ap).call(this,1)}get mimetype(){return ur(wp,this,Ap).call(this,2)}get name(){return ur(wp,this,Ap).call(this,3)}get data(){let t=Tp._;t+=4+dr(bp,this).getUint32(t);t+=4+dr(bp,this).getUint32(t);t+=4+dr(bp,this).getUint32(t);const e=dr(bp,this).getUint32(t);if(0!==e)return new Uint8Array(dr(vp,this),t+4,e)}clearData(){let t=Tp._;t+=4+dr(bp,this).getUint32(t);t+=4+dr(bp,this).getUint32(t);t+=4+dr(bp,this).getUint32(t);const e=dr(bp,this).getUint32(t);new Uint8Array(dr(vp,this),t+4,e).fill(0),dr(bp,this).setUint32(t,0)}get cssFontInfo(){let t=Tp._;t+=4+dr(bp,this).getUint32(t);t+=4+dr(bp,this).getUint32(t);const e=dr(bp,this).getUint32(t);if(0===e)return null;const n=new Uint8Array(e);return n.set(new Uint8Array(dr(vp,this),t+4,e)),new cp(n.buffer)}get systemFontInfo(){let t=Tp._;t+=4+dr(bp,this).getUint32(t);const e=dr(bp,this).getUint32(t);if(0===e)return null;const n=new Uint8Array(e);return n.set(new Uint8Array(dr(vp,this),t+4,e)),new gp(n.buffer)}static write(t){const e=t.systemFontInfo?gp.write(t.systemFontInfo):null,n=t.cssFontInfo?cp.write(t.cssFontInfo):null,i=new TextEncoder,r={};let s=0;for(const f of xp.strings)r[f]=i.encode(t[f]),s+=4+r[f].length;const a=Tp._+4+s+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),o=new ArrayBuffer(a),l=new Uint8Array(o),c=new DataView(o);let u=0;const h=xp.bools.length;let d=0,p=0;for(let f=0;f<h;f++){const e=t[xp.bools[f]];d|=(void 0===e?0:e?2:1)<<p,p+=2,8!==p&&f!==h-1||(c.setUint8(u++,d),d=0,p=0)}ys(u===Sp._,"FontInfo.write: Boolean properties offset mismatch");for(const f of xp.numbers)c.setFloat64(u,t[f]),u+=8;if(ys(u===Ep._,"FontInfo.write: Number properties offset mismatch"),t.bbox){c.setUint8(u++,4);for(const e of t.bbox)c.setInt16(u,e,!0),u+=2}else c.setUint8(u++,0),u+=8;if(ys(u===Cp._,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){c.setUint8(u++,6);for(const e of t.fontMatrix)c.setFloat64(u,e,!0),u+=8}else c.setUint8(u++,0),u+=48;if(ys(u===Mp._,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){c.setUint8(u++,1);for(const e of t.defaultVMetrics)c.setInt16(u,e,!0),u+=2}else c.setUint8(u++,0),u+=6;ys(u===Tp._,"FontInfo.write: DefaultVMetrics properties offset mismatch"),c.setUint32(Tp._,0),u+=4;for(const f of xp.strings){const t=r[f],e=t.length;c.setUint32(u,e),l.set(t,u+4),u+=4+e}if(c.setUint32(Tp._,u-Tp._-4),e){const t=e.byteLength;c.setUint32(u,t),ys(u+4+t<=o.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),l.set(new Uint8Array(e),u+4),u+=4+t}else c.setUint32(u,0),u+=4;if(n){const t=n.byteLength;c.setUint32(u,t),ys(u+4+t<=o.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),l.set(new Uint8Array(n),u+4),u+=4+t}else c.setUint32(u,0),u+=4;return void 0===t.data?(c.setUint32(u,0),u+=4):(c.setUint32(u,t.data.length),l.set(t.data,u+4),u+=4+t.data.length),ys(u<=o.byteLength,"FontInfo.write: Buffer overflow"),o.transferToFixedLength(u)}}function _p(t){ys(t<xr.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=2*t%8,i=dr(bp,this).getUint8(e)>>n&3;return 0===i?void 0:2===i}function kp(t){return ys(t<xr.numbers.length,"Invalid number index"),dr(bp,this).getFloat64(Sp._+8*t)}function Ap(t){ys(t<xr.strings.length,"Invalid string index");let e=Tp._+4;for(let r=0;r<t;r++)e+=dr(bp,this).getUint32(e)+4;const n=dr(bp,this).getUint32(e),i=new Uint8Array(n);return i.set(new Uint8Array(dr(vp,this),e+4,n)),dr(yp,this).decode(i)}xr=xp,u(xp,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),u(xp,"numbers",["ascent","defaultWidth","descent"]),u(xp,"strings",["fallbackName","loadedName","mimetype","name"]);var Sp={_:Math.ceil(2*xr.bools.length/8)},Ep={_:ur(xr,xr,Sp)._+8*xr.numbers.length},Cp={_:ur(xr,xr,Ep)._+1+8},Mp={_:ur(xr,xr,Cp)._+1+48},Tp={_:ur(xr,xr,Mp)._+1+6};class Rp{static get workerPort(){return ur(Rp,this,Pp)._}static set workerPort(t){if(!("undefined"!==typeof Worker&&t instanceof Worker)&&null!==t)throw new Error("Invalid `workerPort` type.");Pp._=ur(Rp,this,t)}static get workerSrc(){return ur(Rp,this,Dp)._}static set workerSrc(t){if("string"!==typeof t)throw new Error("Invalid `workerSrc` type.");Dp._=ur(Rp,this,t)}}var Pp={_:null},Dp={_:""},Lp=new WeakMap,Np=new WeakMap;class Ip{constructor(t){let{parsedData:e,rawData:n}=t;cr(this,Lp,void 0),cr(this,Np,void 0),pr(Lp,this,e),pr(Np,this,n)}getRaw(){return dr(Np,this)}get(t){var e;return null!==(e=dr(Lp,this).get(t))&&void 0!==e?e:null}[Symbol.iterator](){return dr(Lp,this).entries()}}const Fp=Symbol("INTERNAL");var Op=new WeakMap,Bp=new WeakMap,Wp=new WeakMap,jp=new WeakMap;class Up{constructor(t,e){let{name:n,intent:i,usage:r,rbGroups:s}=e;cr(this,Op,!1),cr(this,Bp,!1),cr(this,Wp,!1),cr(this,jp,!0),pr(Op,this,!!(t&Fr)),pr(Bp,this,!!(t&Or)),this.name=n,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(dr(Wp,this))return dr(jp,this);if(!dr(jp,this))return!1;const{print:t,view:e}=this.usage;return dr(Op,this)?"OFF"!==(null===e||void 0===e?void 0:e.viewState):!dr(Bp,this)||"OFF"!==(null===t||void 0===t?void 0:t.printState)}_setVisible(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t!==Fp&&vs("Internal method `_setVisible` called."),pr(Wp,this,n),pr(jp,this,e)}}var zp=new WeakMap,Hp=new WeakMap,Vp=new WeakMap,Gp=new WeakMap,qp=new WeakSet;class Xp{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fr;if(lr(this,qp),cr(this,zp,null),cr(this,Hp,new Map),cr(this,Vp,null),cr(this,Gp,null),this.renderingIntent=e,this.name=null,this.creator=null,null!==t){this.name=t.name,this.creator=t.creator,pr(Gp,this,t.order);for(const n of t.groups)dr(Hp,this).set(n.id,new Up(e,n));if("OFF"===t.baseState)for(const t of dr(Hp,this).values())t._setVisible(Fp,!1);for(const e of t.on)dr(Hp,this).get(e)._setVisible(Fp,!0);for(const e of t.off)dr(Hp,this).get(e)._setVisible(Fp,!1);pr(Vp,this,this.getHash())}}isVisible(t){if(0===dr(Hp,this).size)return!0;if(!t)return gs("Optional content group not defined."),!0;if("OCG"===t.type)return dr(Hp,this).has(t.id)?dr(Hp,this).get(t.id).visible:(ms("Optional content group not found: ".concat(t.id)),!0);if("OCMD"===t.type){if(t.expression)return ur(qp,this,Kp).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!dr(Hp,this).has(e))return ms("Optional content group not found: ".concat(e)),!0;if(dr(Hp,this).get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!dr(Hp,this).has(e))return ms("Optional content group not found: ".concat(e)),!0;if(!dr(Hp,this).get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!dr(Hp,this).has(e))return ms("Optional content group not found: ".concat(e)),!0;if(!dr(Hp,this).get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!dr(Hp,this).has(e))return ms("Optional content group not found: ".concat(e)),!0;if(dr(Hp,this).get(e).visible)return!1}return!0}return ms("Unknown optional content policy ".concat(t.policy,".")),!0}return ms("Unknown group type ".concat(t.type,".")),!0}setVisibility(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=dr(Hp,this).get(t);if(i){if(n&&e&&i.rbGroups.length)for(const e of i.rbGroups)for(const n of e){var r;if(n!==t)null===(r=dr(Hp,this).get(n))||void 0===r||r._setVisible(Fp,!1,!0)}i._setVisible(Fp,!!e,!0),pr(zp,this,null)}else ms("Optional content group not found: ".concat(t))}setOCGState(t){let e,{state:n,preserveRB:i}=t;for(const r of n){switch(r){case"ON":case"OFF":case"Toggle":e=r;continue}const t=dr(Hp,this).get(r);if(t)switch(e){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!t.visible,i)}}pr(zp,this,null)}get hasInitialVisibility(){return null===dr(Vp,this)||this.getHash()===dr(Vp,this)}getOrder(){return dr(Hp,this).size?dr(Gp,this)?dr(Gp,this).slice():[...dr(Hp,this).keys()]:null}getGroup(t){return dr(Hp,this).get(t)||null}getHash(){if(null!==dr(zp,this))return dr(zp,this);const t=new pu;for(const[e,n]of dr(Hp,this))t.update("".concat(e,":").concat(n.visible));return pr(zp,this,t.hexdigest())}[Symbol.iterator](){return dr(Hp,this).entries()}}function Kp(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const e=t[i];let r;if(Array.isArray(e))r=ur(qp,this,Kp).call(this,e);else{if(!dr(Hp,this).has(e))return ms("Optional content group not found: ".concat(e)),!0;r=dr(Hp,this).get(e).visible}switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===n}class Yp{constructor(t,e){let{disableRange:n=!1,disableStream:i=!1}=e;ys(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null===s||void 0===s?void 0:s.length)>0){const t=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((t,e)=>{this._onReceiveData({begin:t,chunk:e})}),t.addProgressListener((t,e)=>{this._onProgress({loaded:t,total:e})}),t.addProgressiveReadListener(t=>{this._onReceiveData({chunk:t})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData(t){let{begin:e,chunk:n}=t;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===e)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{ys(this._rangeReaders.some(function(t){return t._begin===e&&(t._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}_onProgress(t){var e,n,i,r;void 0===t.total?null===(e=this._rangeReaders[0])||void 0===e||null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(r=i.onProgress)||void 0===r||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;null===(t=this._fullRequestReader)||void 0===t||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ys(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Qp(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new $p(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class Qp{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=t,this._done=n||!1,this._filename=Qs(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class $p{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Jp(t,e){const n=new Headers;if(!t||!e||"object"!==typeof e)return n;for(const i in e){const t=e[i];void 0!==t&&n.append(i,t)}return n}function Zp(t){var e,n;return null!==(e=null===(n=URL.parse(t))||void 0===n?void 0:n.origin)&&void 0!==e?e:null}function tf(t){let{responseHeaders:e,isHttp:n,rangeChunkSize:i,disableRange:r}=t;const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(e.get("Content-Length"),10);if(!Number.isInteger(a))return s;if(s.suggestedLength=a,a<=2*i)return s;if(r||!n)return s;if("bytes"!==e.get("Accept-Ranges"))return s;return"identity"!==(e.get("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s}function ef(t){const e=t.get("Content-Disposition");if(e){let t=function(t){let e=!0,n=i("filename\\*","i").exec(t);if(n){n=n[1];let t=a(n);return t=unescape(t),t=o(t),t=l(t),s(t)}if(n=function(t){const e=[];let n;const r=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=r.exec(t));){let[,t,i,r]=n;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[i,r]}const s=[];for(let i=0;i<e.length&&i in e;++i){let[t,n]=e[i];n=a(n),t&&(n=unescape(n),0===i&&(n=o(n))),s.push(n)}return s.join("")}(t),n)return s(l(n));if(n=i("filename","i").exec(t),n){n=n[1];let t=a(n);return t=l(t),s(t)}function i(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function r(t,n){if(t){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(t,{fatal:!0}),r=Rs(n);n=i.decode(r),e=!1}catch(i){}}return n}function s(t){return e&&/[\x80-\xff]/.test(t)&&(t=r("utf-8",t),e&&(t=r("iso-8859-1",t))),t}function a(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const n=e[t].indexOf('"');-1!==n&&(e[t]=e[t].slice(0,n),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function o(t){const e=t.indexOf("'");return-1===e?t:r(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function l(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(t,e,n,i){if("q"===n||"Q"===n)return r(e,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}));try{i=atob(i)}catch(s){}return r(e,i)})}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch(n){}if(Qs(t))return t}return null}function nf(t,e){return new Es("Unexpected server response (".concat(t,') while retrieving PDF "').concat(e,'".'),t,404===t||0===t&&e.startsWith("file:"))}function rf(t){return 200===t||206===t}function sf(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function af(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(ms("getArrayBuffer - unexpected data format: ".concat(t)),new Uint8Array(t).buffer)}class of{constructor(t){u(this,"_responseOrigin",null),this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Jp(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}getFullReader(){return ys(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new lf(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new cf(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class lf{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,sf(n,this._withCredentials,this._abortController)).then(e=>{if(t._responseOrigin=Zp(e.url),!rf(e.status))throw nf(e.status,i);this._reader=e.body.getReader(),this._headersCapability.resolve();const n=e.headers,{allowRangeRequests:r,suggestedLength:s}=tf({responseHeaders:n,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=s||this._contentLength,this._filename=ef(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ms("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:af(e),done:!1})}cancel(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}class cf{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range","bytes=".concat(e,"-").concat(n-1));const s=i.url;fetch(s,sf(r,this._withCredentials,this._abortController)).then(e=>{const n=Zp(e.url);if(n!==t._responseOrigin)throw new Error('Expected range response-origin "'.concat(n,'" to match "').concat(t._responseOrigin,'".'));if(!rf(e.status))throw nf(e.status,s);this._readCapability.resolve(),this._reader=e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded}),{value:af(e),done:!1})}cancel(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}class uf{constructor(t){let{url:e,httpHeaders:n,withCredentials:i}=t;u(this,"_responseOrigin",null),this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Jp(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,s]of this.headers)e.setRequestHeader(r,s);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1)),i.expectedStatus=206):i.expectedStatus=200,e.responseType="arraybuffer",ys(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var n;const i=this.pendingRequests[t];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===i.status&&this.isHttp)return void n.onError(i.status);const r=i.status||200;if(!(200===r&&206===n.expectedStatus)&&r!==n.expectedStatus)return void n.onError(i.status);const s=function(t){const e=t.response;return"string"!==typeof e?e:Rs(e).buffer}(i);if(206===r){const t=i.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);e?n.onDone({begin:parseInt(e[1],10),chunk:s}):(ms('Missing or invalid "Content-Range" header.'),n.onError(0))}else s?n.onDone({begin:0,chunk:s}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class hf{constructor(t){this._source=t,this._manager=new uf(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ys(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new df(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new pf(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class df{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Zp(e.responseURL);const n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(t=>{const[e,...n]=t.split(": ");return[e,n.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:s}=tf({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=ef(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t)if(this._requests.length>0){this._requests.shift().resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=nf(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class pf{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Zp(null===(t=this._manager.getRequestXhr(this._requestId))||void 0===t?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error('Expected range response-origin "'.concat(e,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var t;null===(t=this.onClosed)||void 0===t||t.call(this,this)}_onDone(t){const e=t.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunk=e;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){var e;null!==(e=this._storedError)&&void 0!==e||(this._storedError=nf(t,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ff=/^[a-z][a-z0-9\-+.]+:/i;class gf{constructor(t){this.source=t,this.url=function(t){if(ff.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}(t.url),ys("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return null!==(t=null===(e=this._fullRequestReader)||void 0===e?void 0:e._loaded)&&void 0!==t?t:0}getFullReader(){return ys(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new mf(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new vf(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class mf{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(t=>{this._contentLength=t.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},t=>{"ENOENT"===t.code&&(t=nf(0,this._url.href)),this._storedError=t,this._headersCapability.reject(t)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=e.length,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(e).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ms("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class vf{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=e.length,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded});return{value:new Uint8Array(e).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const yf=Symbol("INITIAL_DATA");var bf=new WeakMap,wf=new WeakSet;class xf{constructor(){lr(this,wf),cr(this,bf,Object.create(null))}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){const n=ur(wf,this,_f).call(this,t);return n.promise.then(()=>e(n.data)),null}const n=dr(bf,this)[t];if(!n||n.data===yf)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return n.data}has(t){const e=dr(bf,this)[t];return!!e&&e.data!==yf}delete(t){const e=dr(bf,this)[t];return!(!e||e.data===yf)&&(delete dr(bf,this)[t],!0)}resolve(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=ur(wf,this,_f).call(this,t);n.data=e,n.resolve()}clear(){for(const e in dr(bf,this)){var t;const{data:n}=dr(bf,this)[e];null===n||void 0===n||null===(t=n.bitmap)||void 0===t||t.close()}pr(bf,this,Object.create(null))}*[Symbol.iterator](){for(const t in dr(bf,this)){const{data:e}=dr(bf,this)[t];e!==yf&&(yield[t,e])}}}function _f(t){var e;return(e=dr(bf,this))[t]||(e[t]=d(d({},Promise.withResolvers()),{},{data:yf}))}var kf=new WeakMap,Af=new WeakMap,Sf=new WeakMap,Ef=new WeakMap,Cf=new WeakMap,Mf=new WeakMap,Tf=new WeakMap,Rf=new WeakMap,Pf=new WeakMap,Df=new WeakMap,Lf=new WeakMap,Nf=new WeakMap,If=new WeakMap,Ff=new WeakMap,Of=new WeakMap,Bf=new WeakMap,Wf=new WeakMap,jf=new WeakMap,Uf=new WeakSet;class zf{constructor(t){var e;let{textContentSource:n,container:i,viewport:r}=t;if(lr(this,Uf),cr(this,kf,Promise.withResolvers()),cr(this,Af,null),cr(this,Sf,!1),cr(this,Ef,!(null===(e=globalThis.FontInspector)||void 0===e||!e.enabled)),cr(this,Cf,null),cr(this,Mf,null),cr(this,Tf,0),cr(this,Rf,0),cr(this,Pf,null),cr(this,Df,null),cr(this,Lf,0),cr(this,Nf,0),cr(this,If,Object.create(null)),cr(this,Ff,[]),cr(this,Of,null),cr(this,Bf,[]),cr(this,Wf,new WeakMap),cr(this,jf,null),n instanceof ReadableStream)pr(Of,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');pr(Of,this,new ReadableStream({start(t){t.enqueue(n),t.close()}}))}pr(Af,this,pr(Df,this,i)),pr(Nf,this,r.scale*oa.pixelRatio),pr(Lf,this,r.rotation),pr(Mf,this,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:a,pageX:o,pageY:l}=r.rawDims;pr(jf,this,[1,0,0,-1,-o,l+a]),pr(Rf,this,s),pr(Tf,this,a),Kf.call(zf),aa(i,r),dr(kf,this).promise.finally(()=>{tg._.delete(this),pr(Mf,this,null),pr(If,this,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ps.platform;return xs(this,"fontFamilyMap",new Map([["sans-serif","".concat(t&&e?"Calibri, ":"","sans-serif")],["monospace","".concat(t&&e?"Lucida Console, ":"","monospace")]]))}render(){const t=()=>{dr(Pf,this).read().then(e=>{var n;let{value:i,done:r}=e;r?dr(kf,this).resolve():(null!==(n=dr(Cf,this))&&void 0!==n||pr(Cf,this,i.lang),Object.assign(dr(If,this),i.styles),ur(Uf,this,Hf).call(this,i.items),t())},dr(kf,this).reject)};return pr(Pf,this,dr(Of,this).getReader()),tg._.add(this),t(),dr(kf,this).promise}update(t){let{viewport:e,onBefore:n=null}=t;const i=e.scale*oa.pixelRatio,r=e.rotation;if(r!==dr(Lf,this)&&(null===n||void 0===n||n(),pr(Lf,this,r),aa(dr(Df,this),{rotation:r})),i!==dr(Nf,this)){null===n||void 0===n||n(),pr(Nf,this,i);const t={div:null,properties:null,ctx:qf.call(zf,dr(Cf,this))};for(const e of dr(Bf,this))t.properties=dr(Wf,this).get(e),t.div=e,ur(Uf,this,Gf).call(this,t)}}cancel(){var t;const e=new Ms("TextLayer task cancelled.");null===(t=dr(Pf,this))||void 0===t||t.cancel(e).catch(()=>{}),pr(Pf,this,null),dr(kf,this).reject(e)}get textDivs(){return dr(Bf,this)}get textContentItemsStr(){return dr(Ff,this)}static cleanup(){if(!(ur(zf,this,tg)._.size>0)){ur(zf,this,Qf)._.clear();for(const{canvas:t}of ur(zf,this,$f)._.values())t.remove();ur(zf,this,$f)._.clear()}}}function Hf(t){var e,n;if(dr(Sf,this))return;null!==(n=(e=dr(Mf,this)).ctx)&&void 0!==n||(e.ctx=qf.call(_r,dr(Cf,this)));const i=dr(Bf,this),r=dr(Ff,this);for(const s of t){if(i.length>1e5)return ms("Ignoring additional textDivs for performance reasons."),void pr(Sf,this,!0);if(void 0!==s.str)r.push(s.str),ur(Uf,this,Vf).call(this,s);else if("beginMarkedContentProps"===s.type||"beginMarkedContent"===s.type){const t=dr(Af,this);pr(Af,this,document.createElement("span")),dr(Af,this).classList.add("markedContent"),s.id&&dr(Af,this).setAttribute("id","".concat(s.id)),t.append(dr(Af,this))}else"endMarkedContent"===s.type&&pr(Af,this,dr(Af,this).parentNode)}}function Vf(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};dr(Bf,this).push(e);const i=Ls.transform(dr(jf,this),t.transform);let r=Math.atan2(i[1],i[0]);const s=dr(If,this)[t.fontName];s.vertical&&(r+=Math.PI/2);let a=dr(Ef,this)&&s.fontSubstitution||s.fontFamily;a=_r.fontFamilyMap.get(a)||a;const o=Math.hypot(i[2],i[3]),l=o*Yf.call(_r,a,s,dr(Cf,this));let c,u;0===r?(c=i[4],u=i[5]-l):(c=i[4]+l*Math.sin(r),u=i[5]-l*Math.cos(r));const h="calc(var(--total-scale-factor) *",d=e.style;dr(Af,this)===dr(Df,this)?(d.left="".concat((100*c/dr(Rf,this)).toFixed(2),"%"),d.top="".concat((100*u/dr(Tf,this)).toFixed(2),"%")):(d.left="".concat(h).concat(c.toFixed(2),"px)"),d.top="".concat(h).concat(u.toFixed(2),"px)")),d.fontSize="".concat(h).concat((Zf._*o).toFixed(2),"px)"),d.fontFamily=a,n.fontSize=o,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,dr(Ef,this)&&(e.dataset.fontName=s.fontSubstitutionLoadedName||t.fontName),0!==r&&(n.angle=r*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),n=Math.abs(t.transform[3]);e!==n&&Math.max(e,n)/Math.min(e,n)>1.5&&(p=!0)}if(p&&(n.canvasWidth=s.vertical?t.height:t.width),dr(Wf,this).set(e,n),dr(Mf,this).div=e,dr(Mf,this).properties=n,ur(Uf,this,Gf).call(this,dr(Mf,this)),n.hasText&&dr(Af,this).append(e),n.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),dr(Af,this).append(t)}}function Gf(t){const{div:e,properties:n,ctx:i}=t,{style:r}=e;let s="";if(Zf._>1&&(s="scale(".concat(1/Zf._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:t}=r,{canvasWidth:a,fontSize:o}=n;Xf.call(_r,i,o*dr(Nf,this),t);const{width:l}=i.measureText(e.textContent);l>0&&(s="scaleX(".concat(a*dr(Nf,this)/l,") ").concat(s))}0!==n.angle&&(s="rotate(".concat(n.angle,"deg) ").concat(s)),s.length>0&&(r.transform=s)}function qf(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=ur(_r,this,$f)._.get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),ur(_r,this,$f)._.set(t,e),ur(_r,this,Jf)._.set(e,{size:0,family:""})}return e}function Xf(t,e,n){const i=ur(_r,this,Jf)._.get(t);e===i.size&&n===i.family||(t.font="".concat(e,"px ").concat(n),i.size=e,i.family=n)}function Kf(){if(null!==ur(_r,this,Zf)._)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),Zf._=ur(_r,this,t.getBoundingClientRect().height),t.remove()}function Yf(t,e,n){const i=ur(_r,this,Qf)._.get(t);if(i)return i;const r=ur(_r,this,qf).call(this,n);r.canvas.width=r.canvas.height=30,ur(_r,this,Xf).call(this,r,30,t);const s=r.measureText(""),a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let l=.8;return a?l=a/(a+o):(Ps.platform.isFirefox&&ms("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?l=e.ascent:e.descent&&(l=1+e.descent)),ur(_r,this,Qf)._.set(t,l),l}_r=zf;var Qf={_:new Map},$f={_:new Map},Jf={_:new WeakMap},Zf={_:null},tg={_:new Set};function eg(){var t,e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const i=new ng,{docId:r}=i,s=n.url?function(t){if(t instanceof URL)return t.href;if("string"===typeof t){if(Dr)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,a=n.data?function(t){if(Dr&&"undefined"!==typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"===typeof t)return Rs(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"===typeof t&&!isNaN(null===t||void 0===t?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,o=n.httpHeaders||null,l=!0===n.withCredentials,c=null!==(t=n.password)&&void 0!==t?t:null,u=n.range instanceof cg?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:65536;let d=n.worker instanceof wg?n.worker:null;const p=n.verbosity,f="string"!==typeof n.docBaseUrl||Ys(n.docBaseUrl)?null:n.docBaseUrl,g=Mu(n.cMapUrl),m=!1!==n.cMapPacked,v=n.CMapReaderFactory||(Dr?Lh:ih),y=Mu(n.iccUrl),b=Mu(n.standardFontDataUrl),w=n.StandardFontDataFactory||(Dr?Nh:Ch),x=Mu(n.wasmUrl),_=n.WasmFactory||(Dr?Ih:Th),k=!0!==n.stopAtErrors,A=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,S=!1!==n.isEvalSupported,E="boolean"===typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!Dr,C="boolean"===typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!Dr&&(Ps.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,T="boolean"===typeof n.disableFontFace?n.disableFontFace:Dr,R=!0===n.fontExtraProperties,P=!0===n.enableXfa,D=n.ownerDocument||globalThis.document,L=!0===n.disableRange,N=!0===n.disableStream,I=!0===n.disableAutoFetch,F=!0===n.pdfBug,O=n.CanvasFactory||(Dr?Dh:eh),B=n.FilterFactory||(Dr?Ph:ph),W=!0===n.enableHWA,j=!1!==n.useWasm,U=u?u.length:null!==(e=n.length)&&void 0!==e?e:NaN,z="boolean"===typeof n.useSystemFonts?n.useSystemFonts:!Dr&&!T,H="boolean"===typeof n.useWorkerFetch?n.useWorkerFetch:!!(v===ih&&w===Ch&&_===Th&&g&&b&&x&&Js(g,document.baseURI)&&Js(b,document.baseURI)&&Js(x,document.baseURI));ps(p);const V={canvasFactory:new O({ownerDocument:D,enableHWA:W}),filterFactory:new B({docId:r,ownerDocument:D}),cMapReaderFactory:H?null:new v({baseUrl:g,isCompressed:m}),standardFontDataFactory:H?null:new w({baseUrl:b}),wasmFactory:H?null:new _({baseUrl:x})};d||(d=wg.create({verbosity:p,port:Rp.workerPort}),i._worker=d);const G={docId:r,apiVersion:"5.4.296",data:a,password:c,disableAutoFetch:I,rangeChunkSize:h,length:U,docBaseUrl:f,enableXfa:P,evaluatorOptions:{maxImageSize:A,disableFontFace:T,ignoreErrors:k,isEvalSupported:S,isOffscreenCanvasSupported:E,isImageDecoderSupported:C,canvasMaxAreaInBytes:M,fontExtraProperties:R,useSystemFonts:z,useWasm:j,useWorkerFetch:H,cMapUrl:g,iccUrl:y,standardFontDataUrl:b,wasmUrl:x}},q={ownerDocument:D,pdfBug:F,styleElement:null,loadingParams:{disableAutoFetch:I,enableXfa:P}};return d.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const t=d.messageHandler.sendWithPromise("GetDocRequest",G,a?[a.buffer]:null);let e;if(u)e=new Yp(u,{disableRange:L,disableStream:N});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const t=Js(s)?of:Dr?gf:hf;e=new t({url:s,length:U,httpHeaders:o,withCredentials:l,rangeChunkSize:h,disableRange:L,disableStream:N})}return t.then(t=>{if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const n=new Ku(r,t,d.port),s=new Ig(n,i,e,q,V,W);i._transport=s,n.send("Ready",null)})}).catch(i._capability.reject),i}class ng{constructor(){u(this,"_capability",Promise.withResolvers()),u(this,"_transport",null),u(this,"_worker",null),u(this,"docId","d".concat((ig._=(kr=ig._,Ar=kr++,kr),Ar))),u(this,"destroyed",!1),u(this,"onPassword",null),u(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t;this.destroyed=!0;try{var e,n;null!==(e=this._worker)&&void 0!==e&&e.port&&(this._worker._pendingDestroy=!0),await(null===(n=this._transport)||void 0===n?void 0:n.destroy())}catch(r){var i;throw null!==(i=this._worker)&&void 0!==i&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,null===(t=this._worker)||void 0===t||t.destroy(),this._worker=null}async getData(){return this._transport.getData()}}var ig={_:0},rg=new WeakMap,sg=new WeakMap,ag=new WeakMap,og=new WeakMap,lg=new WeakMap;class cg{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;cr(this,rg,Promise.withResolvers()),cr(this,sg,[]),cr(this,ag,[]),cr(this,og,[]),cr(this,lg,[]),this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(t){dr(lg,this).push(t)}addProgressListener(t){dr(og,this).push(t)}addProgressiveReadListener(t){dr(ag,this).push(t)}addProgressiveDoneListener(t){dr(sg,this).push(t)}onDataRange(t,e){for(const n of dr(lg,this))n(t,e)}onDataProgress(t,e){dr(rg,this).promise.then(()=>{for(const n of dr(og,this))n(t,e)})}onDataProgressiveRead(t){dr(rg,this).promise.then(()=>{for(const e of dr(ag,this))e(t)})}onDataProgressiveDone(){dr(rg,this).promise.then(()=>{for(const t of dr(sg,this))t()})}transportReady(){dr(rg,this).resolve()}requestDataRange(t,e){vs("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class ug{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return xs(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:t="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var hg=new WeakMap,dg=new WeakSet;class pg{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];lr(this,dg),cr(this,hg,!1),this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new $s:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new xf,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Xs({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations(){let{intent:t="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return xs(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return(null===(t=this._transport._htmlForXfa)||void 0===t?void 0:t.children[this._pageIndex])||null}render(t){var e,n,i;let{canvasContext:r,canvas:s=r.canvas,viewport:a,intent:o="display",annotationMode:l=Hr.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:f=null,isEditing:g=!1,recordOperations:m=!1,operationsFilter:v=null}=t;null===(e=this._stats)||void 0===e||e.time("Overall");const y=this._transport.getRenderingIntent(o,l,f,g),{renderingIntent:b,cacheKey:w}=y;pr(hg,this,!1),h||(h=this._transport.getOptionalContentConfig(b));let x=this._intentStates.get(w);x||(x=Object.create(null),this._intentStates.set(w,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const _=!!(b&Or);var k;x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(k=this._stats)||void 0===k||k.time("Page Request"),this._pumpOperatorList(y));const A=Boolean(this._pdfBug&&(null===(n=globalThis.StepperManager)||void 0===n?void 0:n.enabled)),S=!this.recordedBBoxes&&(m||A),E=t=>{if(x.renderTasks.delete(C),S){var e;const t=null===(e=C.gfx)||void 0===e?void 0:e.dependencyTracker.take();t&&(C.stepper&&C.stepper.setOperatorBBoxes(t,C.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=t))}var n;(_&&pr(hg,this,!0),ur(dg,this,fg).call(this),t?(C.capability.reject(t),this._abortOperatorList({intentState:x,reason:t instanceof Error?t:new Error(t)})):C.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(n=globalThis.Stats)&&void 0!==n&&n.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new jg({callback:E,params:{canvas:s,canvasContext:r,dependencyTracker:S?new cd(s,x.operatorList.length,A):null,viewport:a,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:v});((i=x).renderTasks||(i.renderTasks=new Set)).add(C);const M=C.task;return Promise.all([x.displayReadyCapability.promise,h]).then(t=>{var e;let[n,i]=t;if(this.destroyed)E();else{if(null===(e=this._stats)||void 0===e||e.time("Rendering"),!(i.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:n,optionalContentConfig:i}),C.operatorListChanged()}}).catch(E),M}getOperatorList(){let{intent:t="display",annotationMode:e=Hr.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this._transport.getRenderingIntent(t,e,n,i,!0);let s,a=this._intentStates.get(r.cacheKey);var o,l;(a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a)),a.opListReadCapability)||(s=Object.create(null),s.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(s))},a.opListReadCapability=Promise.withResolvers(),((o=a).renderTasks||(o.renderTasks=new Set)).add(s),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(r));return a.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:t=!1,disableNormalization:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(t=>zs.textContent(t));const e=this.streamTextContent(t);return new Promise(function(t,n){const i=e.getReader(),r={items:[],styles:Object.create(null),lang:null};!function e(){i.read().then(function(n){var i;let{value:s,done:a}=n;a?t(r):(null!==(i=r.lang)&&void 0!==i||(r.lang=s.lang),Object.assign(r.styles,s.styles),r.items.push(...s.items),e())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),pr(hg,this,!1),Promise.all(t)}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];pr(hg,this,!0);const e=ur(dg,this,fg).call(this);return t&&e&&this._stats&&(this._stats=new $s),e}_startRenderPage(t,e){var n,i;const r=this._intentStates.get(e);r&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=r.displayReadyCapability)||void 0===i||i.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&ur(dg,this,fg).call(this)}_pumpOperatorList(t){let{renderingIntent:e,cacheKey:n,annotationStorageSerializable:i,modifiedIds:r}=t;const{map:s,transfer:a}=i,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:s,modifiedIds:r},a).getReader(),l=this._intentStates.get(n);l.streamReader=o;const c=()=>{o.read().then(t=>{let{value:e,done:n}=t;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,l),c())},t=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const t of l.renderTasks)t.operatorListChanged();ur(dg,this,fg).call(this)}if(l.displayReadyCapability)l.displayReadyCapability.reject(t);else{if(!l.opListReadCapability)throw t;l.opListReadCapability.reject(t)}}})};c()}_abortOperatorList(t){let{intentState:e,reason:n,force:i=!1}=t;if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(n instanceof Ks){let t=100;return n.extraDelay>0&&n.extraDelay<1e3&&(t+=n.extraDelay),void(e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},t))}}if(e.streamReader.cancel(new Ms(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[t,n]of this._intentStates)if(n===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}}function fg(){if(!dr(hg,this)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),pr(hg,this,!1),!0}var gg=new WeakMap,mg=new WeakMap,vg=new WeakMap,yg=new WeakMap,bg=new WeakSet;class wg{constructor(){let{name:t=null,port:e=null,verbosity:n=fs()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(lr(this,bg),cr(this,gg,Promise.withResolvers()),cr(this,mg,null),cr(this,vg,null),cr(this,yg,null),this.name=t,this.destroyed=!1,this.verbosity=n,e){if(Mg._.has(e))throw new Error("Cannot use more than one PDFWorker per port.");Mg._.set(e,this),ur(bg,this,_g).call(this,e)}else ur(bg,this,kg).call(this)}get promise(){return dr(gg,this).promise}get port(){return dr(vg,this)}get messageHandler(){return dr(mg,this)}destroy(){var t,e;this.destroyed=!0,null===(t=dr(yg,this))||void 0===t||t.terminate(),pr(yg,this,null),Mg._.delete(dr(vg,this)),pr(vg,this,null),null===(e=dr(mg,this))||void 0===e||e.destroy(),pr(mg,this,null)}static create(t){const e=ur(wg,this,Mg)._.get(null===t||void 0===t?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new wg(t)}static get workerSrc(){if(Rp.workerSrc)return Rp.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return xs(this,"_setupFakeWorkerGlobal",(async()=>{if(hr(wg,this,Sg))return hr(wg,this,Sg);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function xg(){dr(gg,this).resolve(),dr(mg,this).send("configure",{verbosity:this.verbosity})}function _g(t){pr(vg,this,t),pr(mg,this,new Ku("main","worker",t)),dr(mg,this).on("ready",()=>{}),ur(bg,this,xg).call(this)}function kg(){if(Cg._||Sg(Sr))return void ur(bg,this,Ag).call(this);let{workerSrc:t}=Sr;try{Sr._isSameOrigin(window.location,t)||(t=Sr._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Ku("main","worker",e),i=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?dr(gg,this).reject(new Error("Worker was destroyed")):ur(bg,this,Ag).call(this)},r=new AbortController;e.addEventListener("error",()=>{dr(yg,this)||i()},{signal:r.signal}),n.on("test",t=>{r.abort(),!this.destroyed&&t?(pr(mg,this,n),pr(vg,this,e),pr(yg,this,e),ur(bg,this,xg).call(this)):i()}),n.on("ready",t=>{if(r.abort(),this.destroyed)i();else try{s()}catch(e){ur(bg,this,Ag).call(this)}});const s=()=>{const t=new Uint8Array;n.send("test",t,[t.buffer])};return void s()}catch(e){gs("The worker has been disabled.")}ur(bg,this,Ag).call(this)}function Ag(){Cg._||(ms("Setting up fake worker."),Cg._=!0),Sr._setupFakeWorkerGlobal.then(t=>{var e,n;if(this.destroyed)return void dr(gg,this).reject(new Error("Worker was destroyed"));const i=new Lu;pr(vg,this,i);const r="fake".concat((Eg._=(e=Eg._,n=e++,e),n)),s=new Ku(r+"_worker",r,i);t.setup(s,i),pr(mg,this,new Ku(r,r+"_worker",i)),ur(bg,this,xg).call(this)}).catch(t=>{dr(gg,this).reject(new Error('Setting up fake worker failed: "'.concat(t.message,'".')))})}function Sg(t){try{var e;return(null===(e=globalThis.pdfjsWorker)||void 0===e?void 0:e.WorkerMessageHandler)||null}catch(n){return null}}Sr=wg;var Eg={_:0},Cg={_:!1},Mg={_:new WeakMap};Dr&&(Cg._=ur(Sr,Sr,!0),Rp.workerSrc||(Rp.workerSrc="./pdf.worker.mjs")),Sr._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(null===n||void 0===n||!n.origin||"null"===n.origin)return!1;const i=new URL(e,n);return n.origin===i.origin},Sr._createCDNWrapper=t=>{const e='await import("'.concat(t,'");');return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Sr.fromPort=t=>{var e;if(e="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+e),null===t||void 0===t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Sr.create(t)};var Tg=new WeakMap,Rg=new WeakMap,Pg=new WeakMap,Dg=new WeakMap,Lg=new WeakMap,Ng=new WeakSet;class Ig{constructor(t,e,n,i,r,s){lr(this,Ng),cr(this,Tg,new Map),cr(this,Rg,new Map),cr(this,Pg,new Map),cr(this,Dg,new Map),cr(this,Lg,null),this.messageHandler=t,this.loadingTask=e,this.commonObjs=new xf,this.fontLoader=new Su({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return xs(this,"annotationStorage",new wu)}getRenderingIntent(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hr.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=Fr,a=fu;switch(t){case"any":s=Ir;break;case"display":break;case"print":s=Or;break;default:ms("getRenderingIntent - invalid intent: ".concat(t))}const o=s&Or&&n instanceof ku?n:this.annotationStorage;switch(e){case Hr.DISABLE:s+=jr;break;case Hr.ENABLE:break;case Hr.ENABLE_FORMS:s+=Br;break;case Hr.ENABLE_STORAGE:s+=Wr,a=o.serializable;break;default:ms("getRenderingIntent - invalid annotationMode: ".concat(e))}i&&(s+=Ur),r&&(s+=zr);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:s,cacheKey:[s,a.hash,c].join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){var t;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(t=dr(Lg,this))||void 0===t||t.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of dr(Rg,this).values())e.push(i._destroy());dr(Rg,this).clear(),dr(Pg,this).clear(),dr(Dg,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{var t,e;this.commonObjs.clear(),this.fontLoader.clear(),dr(Tg,this).clear(),this.filterFactory.destroy(),zf.cleanup(),null===(t=this._networkStream)||void 0===t||t.cancelAllRequests(new Ms("Worker was terminated.")),null===(e=this.messageHandler)||void 0===e||e.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(t,e)=>{ys(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then(function(t){let{value:n,done:i}=t;i?e.close():(ys(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(n),1,[n]))}).catch(t=>{e.error(t)})},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch(t=>{if(!this.destroyed)throw t})}}),t.on("ReaderHeadersReady",async t=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:r}=this._fullReader;if(!n||!i){var s;if(this._lastProgress)null===(s=e.onProgress)||void 0===s||s.call(e,this._lastProgress);this._fullReader.onProgress=t=>{var n;null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded,total:t.total})}}return{isStreamingSupported:n,isRangeSupported:i,contentLength:r}}),t.on("GetRangeReader",(t,e)=>{ys(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(t.begin,t.end);n?(e.onPull=()=>{n.read().then(function(t){let{value:n,done:i}=t;i?e.close():(ys(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(n),1,[n]))}).catch(t=>{e.error(t)})},e.onCancel=t=>{n.cancel(t),e.ready.catch(t=>{if(!this.destroyed)throw t})}):e.close()}),t.on("GetDoc",t=>{let{pdfInfo:n}=t;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new ug(n,this))}),t.on("DocException",t=>{e._capability.reject(Gu(t))}),t.on("PasswordRequest",t=>{pr(Lg,this,Promise.withResolvers());try{if(!e.onPassword)throw Gu(t);const n=t=>{t instanceof Error?dr(Lg,this).reject(t):dr(Lg,this).resolve({password:t})};e.onPassword(n,t.code)}catch(n){dr(Lg,this).reject(n)}return dr(Lg,this).promise}),t.on("DataLoaded",t=>{var n;null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),t.on("StartRenderPage",t=>{if(this.destroyed)return;dr(Rg,this).get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)}),t.on("commonobj",e=>{var n;let[i,r,s]=e;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in s){const t=s.error;ms("Error during font loading: ".concat(t)),this.commonObjs.resolve(i,t);break}const e=new xp(s),a=this._params.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null,o=new Cu(e,a,s.extra,s.charProcOperatorList);this.fontLoader.bind(o).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!o.fontExtraProperties&&o.data&&o.clearData(),this.commonObjs.resolve(i,o)});break;case"CopyLocalImage":const{imageRef:l}=s;ys(l,"The imageRef must be defined.");for(const t of dr(Rg,this).values())for(const[,e]of t.objs)if((null===e||void 0===e?void 0:e.ref)===l)return e.dataLen?(this.commonObjs.resolve(i,structuredClone(e)),e.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error("Got unknown common object type ".concat(r))}return null}),t.on("obj",t=>{let[e,n,i,r]=t;if(this.destroyed)return;const s=dr(Rg,this).get(n);var a;if(!s.objs.has(e))if(0!==s._intentStates.size)switch(i){case"Image":case"Pattern":s.objs.resolve(e,r);break;default:throw new Error("Got unknown object type ".concat(i))}else null===r||void 0===r||null===(a=r.bitmap)||void 0===a||a.close()}),t.on("DocProgress",t=>{var n;this.destroyed||null===(n=e.onProgress)||void 0===n||n.call(e,{loaded:t.loaded,total:t.total})}),t.on("FetchBinaryData",async t=>{if(this.destroyed)throw new Error("Worker was destroyed.");const e=this[t.type];if(!e)throw new Error("".concat(t.type," not initialized, see the `useWorkerFetch` parameter."));return e.fetch(t)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var t,e;this.annotationStorage.size<=0&&ms("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(t=null===(e=this._fullReader)||void 0===e?void 0:e.filename)&&void 0!==t?t:null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=dr(Pg,this).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&dr(Dg,this).set(n.refStr,t);const i=new pg(e,n,this,this._params.pdfBug);return dr(Rg,this).set(e,i),i});return dr(Pg,this).set(e,i),i}getPageIndex(t){return Tu(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return ur(Ng,this,Fg).call(this,"GetFieldObjects")}hasJSActions(){return ur(Ng,this,Fg).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!==typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return ur(Ng,this,Fg).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return ur(Ng,this,Fg).call(this,"GetOptionalContentConfig").then(e=>new Xp(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=dr(Tg,this).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(t=>{var e,n,i,r;return{info:t[0],metadata:t[1]?new Ip(t[1]):null,contentDispositionFilename:null!==(e=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==e?e:null,contentLength:null!==(i=null===(r=this._fullReader)||void 0===r?void 0:r.contentLength)&&void 0!==i?i:null}});return dr(Tg,this).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of dr(Rg,this).values()){if(!t.cleanup())throw new Error("startCleanup: Page ".concat(t.pageNumber," is currently rendering."))}this.commonObjs.clear(),t||this.fontLoader.clear(),dr(Tg,this).clear(),this.filterFactory.destroy(!0),zf.cleanup()}}cachedPageNumber(t){var e;if(!Tu(t))return null;const n=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);return null!==(e=dr(Dg,this).get(n))&&void 0!==e?e:null}}function Fg(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=dr(Tg,this).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return dr(Tg,this).set(t,i),i}var Og=new WeakMap;class Bg{constructor(t){cr(this,Og,null),u(this,"onContinue",null),u(this,"onError",null),pr(Og,this,t)}get promise(){return dr(Og,this).capability.promise}cancel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;dr(Og,this).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=dr(Og,this).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=dr(Og,this);return t.form||t.canvas&&(null===e||void 0===e?void 0:e.size)>0}}var Wg=new WeakMap;class jg{constructor(t){let{callback:e,params:n,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:d=null,enableHWA:p=!1,operationsFilter:f=null}=t;cr(this,Wg,null),this.callback=e,this.params=n,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===u&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Bg(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=p,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=f}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(t){var e,n;let{transparency:i=!1,optionalContentConfig:r}=t;if(this.cancelled)return;if(this._canvas){if(Ug._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ug._.add(this._canvas)}this._pdfBug&&null!==(e=globalThis.StepperManager)&&void 0!==e&&e.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ep(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:s,transparency:i,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var t,e,n;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(t=this.gfx)||void 0===t||t.endDrawing(),dr(Wg,this)&&(window.cancelAnimationFrame(dr(Wg,this)),pr(Wg,this,null)),Ug._.delete(this._canvas),i||(i=new Ks("Rendering cancelled, page ".concat(this._pageIndex+1),r)),this.callback(i),null===(e=(n=this.task).onError)||void 0===e||e.call(n,i)}operatorListChanged(){var t,e;this.graphicsReady?(null===(t=this.gfx.dependencyTracker)||void 0===t||t.growOperationsCount(this.operatorList.fnArray.length),null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?pr(Wg,this,window.requestAnimationFrame(()=>{pr(Wg,this,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ug._.delete(this._canvas),this.callback())))}}var Ug={_:new WeakSet};const zg="5.4.296";var Hg=new WeakMap,Vg=new WeakMap,Gg=new WeakMap,qg=new WeakMap,Xg=new WeakMap,Kg=new WeakMap,Yg=new WeakMap,Qg=new WeakMap,$g=new WeakMap,Jg=new WeakMap,Zg=new WeakSet;class tm{static get _keyboardManager(){return xs(this,"_keyboardManager",new eo([[["Escape","mac+Escape"],tm.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],tm.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],tm.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],tm.prototype._moveToPrevious],[["Home","mac+Home"],tm.prototype._moveToBeginning],[["End","mac+End"],tm.prototype._moveToEnd]]))}constructor(t){var e,n;let{editor:i=null,uiManager:r=null}=t;lr(this,Zg),cr(this,Hg,null),cr(this,Vg,null),cr(this,Gg,void 0),cr(this,qg,null),cr(this,Xg,!1),cr(this,Kg,!1),cr(this,Yg,null),cr(this,Qg,void 0),cr(this,$g,null),cr(this,Jg,null),i?(pr(Kg,this,!1),pr(Yg,this,i)):pr(Kg,this,!0),pr(Jg,this,(null===i||void 0===i?void 0:i._uiManager)||r),pr(Qg,this,dr(Jg,this)._eventBus),pr(Gg,this,(null===i||void 0===i||null===(e=i.color)||void 0===e?void 0:e.toUpperCase())||(null===(n=dr(Jg,this))||void 0===n?void 0:n.highlightColors.values().next().value)||"#FFFF98"),om._||(om._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const t=pr(Hg,this,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",dr(Yg,this)&&(t.ariaControls="".concat(dr(Yg,this).id,"_colorpicker_dropdown"));const e=dr(Jg,this)._signal;t.addEventListener("click",ur(Zg,this,rm).bind(this),{signal:e}),t.addEventListener("keydown",ur(Zg,this,im).bind(this),{signal:e});const n=pr(Vg,this,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=dr(Gg,this),t.append(n),t}renderMainDropdown(){const t=pr(qg,this,ur(Zg,this,em).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===dr(Hg,this))return void ur(Zg,this,rm).call(this,t);const e=t.target.getAttribute("data-color");e&&ur(Zg,this,nm).call(this,e,t)}_moveToNext(t){var e,n;hr(Zg,this,am)?t.target!==dr(Hg,this)?null===(e=t.target.nextSibling)||void 0===e||e.focus():null===(n=dr(qg,this).firstChild)||void 0===n||n.focus():ur(Zg,this,rm).call(this,t)}_moveToPrevious(t){var e,n;t.target!==(null===(e=dr(qg,this))||void 0===e?void 0:e.firstChild)&&t.target!==dr(Hg,this)?(hr(Zg,this,am)||ur(Zg,this,rm).call(this,t),null===(n=t.target.previousSibling)||void 0===n||n.focus()):hr(Zg,this,am)&&this._hideDropdownFromKeyboard()}_moveToBeginning(t){var e;hr(Zg,this,am)?null===(e=dr(qg,this).firstChild)||void 0===e||e.focus():ur(Zg,this,rm).call(this,t)}_moveToEnd(t){var e;hr(Zg,this,am)?null===(e=dr(qg,this).lastChild)||void 0===e||e.focus():ur(Zg,this,rm).call(this,t)}hideDropdown(){var t,e;null===(t=dr(qg,this))||void 0===t||t.classList.add("hidden"),dr(Hg,this).ariaExpanded="false",null===(e=dr($g,this))||void 0===e||e.abort(),pr($g,this,null)}_hideDropdownFromKeyboard(){var t;dr(Kg,this)||(hr(Zg,this,am)?(this.hideDropdown(),dr(Hg,this).focus({preventScroll:!0,focusVisible:dr(Xg,this)})):null===(t=dr(Yg,this))||void 0===t||t.unselect())}updateColor(t){if(dr(Vg,this)&&(dr(Vg,this).style.backgroundColor=t),!dr(qg,this))return;const e=dr(Jg,this).highlightColors.values();for(const n of dr(qg,this).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;null===(t=dr(Hg,this))||void 0===t||t.remove(),pr(Hg,this,null),pr(Vg,this,null),null===(e=dr(qg,this))||void 0===e||e.remove(),pr(qg,this,null)}}function em(){const t=document.createElement("div"),e=dr(Jg,this)._signal;t.addEventListener("contextmenu",Zs,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),dr(Yg,this)&&(t.id="".concat(dr(Yg,this).id,"_colorpicker_dropdown"));for(const[n,i]of dr(Jg,this).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",om._[n]);const s=document.createElement("span");r.append(s),s.className="swatch",s.style.backgroundColor=i,r.ariaSelected=i===dr(Gg,this),r.addEventListener("click",ur(Zg,this,nm).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",ur(Zg,this,im).bind(this),{signal:e}),t}function nm(t,e){e.stopPropagation(),dr(Qg,this).dispatch("switchannotationeditorparams",{source:this,type:qr.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}function im(t){Er._keyboardManager.exec(this,t)}function rm(t){if(hr(Zg,this,am))return void this.hideDropdown();if(pr(Xg,this,0===t.detail),dr($g,this)||(pr($g,this,new AbortController),window.addEventListener("pointerdown",ur(Zg,this,sm).bind(this),{signal:dr(Jg,this).combinedSignal(dr($g,this))})),dr(Hg,this).ariaExpanded="true",dr(qg,this))return void dr(qg,this).classList.remove("hidden");const e=pr(qg,this,ur(Zg,this,em).call(this));dr(Hg,this).append(e)}function sm(t){var e;null!==(e=dr(qg,this))&&void 0!==e&&e.contains(t.target)||this.hideDropdown()}function am(t){return dr(qg,t)&&!dr(qg,t).classList.contains("hidden")}Er=tm;var om={_:null},lm=new WeakMap,cm=new WeakMap,um=new WeakMap;class hm{constructor(t){cr(this,lm,null),cr(this,cm,null),cr(this,um,null),pr(cm,this,t),pr(um,this,t._uiManager),dm._||(dm._=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(dr(lm,this))return dr(lm,this);const{editorType:t,colorType:e,colorValue:n}=dr(cm,this),i=pr(lm,this,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",dm._[t]),i.addEventListener("input",()=>{dr(um,this).updateParams(e,i.value)},{signal:dr(um,this)._signal}),i}update(t){dr(lm,this)&&(dr(lm,this).value=t)}destroy(){var t;null===(t=dr(lm,this))||void 0===t||t.remove(),pr(lm,this,null)}hideDropdown(){}}var dm={_:null};function pm(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function fm(t){return Math.max(0,Math.min(255,255*t))}class gm{static CMYK_G(t){let[e,n,i,r]=t;return["G",1-Math.min(1,.3*e+.59*i+.11*n+r)]}static G_CMYK(t){let[e]=t;return["CMYK",0,0,0,1-e]}static G_RGB(t){let[e]=t;return["RGB",e,e,e]}static G_rgb(t){let[e]=t;return e=fm(e),[e,e,e]}static G_HTML(t){let[e]=t;const n=pm(e);return"#".concat(n).concat(n).concat(n)}static RGB_G(t){let[e,n,i]=t;return["G",.3*e+.59*n+.11*i]}static RGB_rgb(t){return t.map(fm)}static RGB_HTML(t){return"#".concat(t.map(pm).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(t){let[e,n,i,r]=t;return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,n+r)]}static CMYK_rgb(t){let[e,n,i,r]=t;return[fm(1-Math.min(1,e+r)),fm(1-Math.min(1,i+r)),fm(1-Math.min(1,n+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK(t){let[e,n,i]=t;const r=1-e,s=1-n,a=1-i;return["CMYK",r,s,a,Math.min(r,s,a)]}}class mm{create(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(t,"px")),i.setAttribute("height","".concat(e,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(t," ").concat(e)),i}createElement(t){if("string"!==typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){vs("Abstract method `_createSVG` called.")}}class vm extends mm{_createSVG(t){return document.createElementNS(Vs,t)}}const ym=new WeakSet,bm=60*(new Date).getTimezoneOffset()*1e3;class wm{static create(t){switch(t.data.annotationType){case ts.LINK:return new Tm(t);case ts.TEXT:return new Lm(t);case ts.WIDGET:switch(t.data.fieldType){case"Tx":return new Im(t);case"Btn":return t.data.radioButton?new Bm(t):t.data.checkBox?new Om(t):new Wm(t);case"Ch":return new jm(t);case"Sig":return new Fm(t)}return new Nm(t);case ts.POPUP:return new zm(t);case ts.FREETEXT:return new Pv(t);case ts.LINE:return new Lv(t);case ts.SQUARE:return new Iv(t);case ts.CIRCLE:return new Ov(t);case ts.POLYLINE:return new Wv(t);case ts.CARET:return new Uv(t);case ts.INK:return new Gv(t);case ts.POLYGON:return new jv(t);case ts.HIGHLIGHT:return new Xv(t);case ts.UNDERLINE:return new Kv(t);case ts.SQUIGGLY:return new Yv(t);case ts.STRIKEOUT:return new Qv(t);case ts.STAMP:return new $v(t);case ts.FILEATTACHMENT:return new ty(t);default:return new Sm(t)}}}var xm=new WeakMap,_m=new WeakMap,km=new WeakMap,Am=new WeakSet;class Sm{constructor(t){let{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};lr(this,Am),cr(this,xm,null),cr(this,_m,!1),cr(this,km,null),this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData(t){let{contentsObj:e,richText:n}=t;return!!(null!==e&&void 0!==e&&e.str||null!==n&&void 0!==n&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Sm._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var t;const{data:e}=this,n=null===(t=this.annotationStorage)||void 0===t?void 0:t.getEditor(e.id);return n?n.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var t;const e=null===(t=this.annotationStorage)||void 0===t?void 0:t.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:n,inkLists:i,rect:r}=this.data;let s=-1/0,a=-1/0;if((null===n||void 0===n?void 0:n.length)>=8){for(let t=0;t<n.length;t+=8)n[t+1]>a?(a=n[t+1],s=n[t+2]):n[t+1]===a&&(s=Math.max(s,n[t+2]));return[s,a]}if((null===i||void 0===i?void 0:i.length)>=1){for(const t of i)for(let e=0,n=t.length;e<n;e+=2)t[e+1]>a?(a=t[e+1],s=t[e]):t[e+1]===a&&(s=Math.max(s,t[e]));if(s!==1/0)return[s,a]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-r)/n,t[1]=100*(t[1]-s)/i,t}get commentText(){var t,e;const{data:n}=this;return(null===(t=this.annotationStorage.getRawValue("".concat(Vr).concat(n.id)))||void 0===t||null===(t=t.popup)||void 0===t?void 0:t.contents)||(null===(e=n.contentsObj)||void 0===e?void 0:e.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue("".concat(Vr).concat(e.id),{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;null===(t=(null===(e=dr(km,this))||void 0===e?void 0:e.popup)||this.popup)||void 0===t||t.remove(),pr(km,this,this.popup=null)}updateEdited(t){var e;if(!this.container)return;t.rect&&(dr(xm,this)||pr(xm,this,{rect:this.data.rect.slice(0)}));const{rect:n,popup:i}=t;n&&ur(Am,this,Em).call(this,n);let r=(null===(e=dr(km,this))||void 0===e?void 0:e.popup)||this.popup;!r&&null!==i&&void 0!==i&&i.text&&(this._createPopup(i),r=dr(km,this).popup),r&&(r.updateEdited(t),null!==i&&void 0!==i&&i.deleted&&(r.remove(),pr(km,this,null),this.popup=null))}resetEdited(){var t;dr(xm,this)&&(ur(Am,this,Em).call(this,dr(xm,this).rect),null===(t=dr(km,this))||void 0===t||t.popup.resetEdited(),pr(xm,this,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Nm||this instanceof Tm||(r.tabIndex=0);const{style:s}=r;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof zm){const{rotation:t}=e;return e.hasOwnCanvas||0===t||this.setRotation(t,r),r}const{width:a,height:o}=this;if(!t&&e.borderStyle.width>0){s.borderWidth="".concat(e.borderStyle.width,"px");const t=e.borderStyle.horizontalCornerRadius,n=e.borderStyle.verticalCornerRadius;if(t>0||n>0){const e="calc(".concat(t,"px * var(--total-scale-factor)) / calc(").concat(n,"px * var(--total-scale-factor))");s.borderRadius=e}else if(this instanceof Bm){const t="calc(".concat(a,"px * var(--total-scale-factor)) / calc(").concat(o,"px * var(--total-scale-factor))");s.borderRadius=t}switch(e.borderStyle.style){case es:s.borderStyle="solid";break;case ns:s.borderStyle="dashed";break;case is:ms("Unimplemented border style: beveled");break;case rs:ms("Unimplemented border style: inset");break;case ss:s.borderBottomStyle="solid"}const i=e.borderColor||null;i?(pr(_m,this,!0),s.borderColor=Ls.makeHexColor(0|i[0],0|i[1],0|i[2])):s.borderWidth=0}const l=Ls.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:u,pageX:h,pageY:d}=i.rawDims;s.left="".concat(100*(l[0]-h)/c,"%"),s.top="".concat(100*(l[1]-d)/u,"%");const{rotation:p}=e;return e.hasOwnCanvas||0===p?(s.width="".concat(100*a/c,"%"),s.height="".concat(100*o/u,"%")):this.setRotation(p,r),r}setRotation(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:s}=this;t%180!==0&&([r,s]=[s,r]),e.style.width="".concat(100*r/n,"%"),e.style.height="".concat(100*s/i,"%"),e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(t,e,n)=>{const i=n.detail[t],r=i[0],s=i.slice(1);n.target.style[e]=gm["".concat(r,"_HTML")](s),this.annotationStorage.setValue(this.data.id,{[e]:gm["".concat(r,"_rgb")](s)})};return xs(this,"_commonActions",{display:t=>{const{display:e}=t.detail,n=e%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===e||2===e})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:e}=t.detail;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:e,noView:e})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||n[i];null===r||void 0===r||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,r]of Object.entries(e)){const s=n[i];if(s){s({detail:{[i]:r},target:t}),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,r]=this.data.rect.map(t=>Math.fround(t));if(8===t.length){const[s,a,o,l]=t.subarray(2,6);if(i===s&&r===a&&e===o&&n===l)return}const{style:s}=this.container;let a;if(dr(_m,this)){const{borderColor:t,borderWidth:e}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(t,'" stroke-width="').concat(e,'">')],this.container.classList.add("hasBorder")}const o=i-e,l=r-n,{svgFactory:c}=this,u=c.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0),u.role="none";const h=c.createElement("defs");u.append(h);const d=c.createElement("clipPath"),p="clippath_".concat(this.data.id);d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),h.append(d);for(let g=2,m=t.length;g<m;g+=8){var f;const n=t[g],i=t[g+1],s=t[g+2],u=t[g+3],h=c.createElement("rect"),p=(s-e)/o,m=(r-i)/l,v=(n-s)/o,y=(i-u)/l;h.setAttribute("x",p),h.setAttribute("y",m),h.setAttribute("width",v),h.setAttribute("height",y),d.append(h),null===(f=a)||void 0===f||f.push('<rect vector-effect="non-scaling-stroke" x="'.concat(p,'" y="').concat(m,'" width="').concat(v,'" height="').concat(y,'"/>'))}dr(_m,this)&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(u),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{data:e}=this;let n,i;t?(n={str:t.text},i=t.date):(n=e.contentsObj,i=e.modificationDate);const r=pr(km,this,new zm({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(r.render())}get hasPopupElement(){return!!(dr(km,this)||this.popup||this.data.popupRef)}get extraPopupElement(){return dr(km,this)}render(){vs("Abstract method `AnnotationElement.render` called")}_getElementsByName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:t,id:r,exportValues:s}of i){if(-1===t)continue;if(r===e)continue;const i="string"===typeof s?s:null,a=document.querySelector('[data-element-id="'.concat(r,'"]'));!a||ym.has(a)?n.push({id:r,exportValue:i,domElement:a}):ms("_getElementsByName - element not allowed: ".concat(r))}return n}for(const i of document.getElementsByName(t)){const{exportValue:t}=i,r=i.getAttribute("data-element-id");r!==e&&(ym.has(i)&&n.push({id:r,exportValue:t,domElement:i}))}return n}show(){var t;this.container&&(this.container.hidden=!1),null===(t=this.popup)||void 0===t||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),null===(t=this.popup)||void 0===t||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}function Em(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:a,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...t),e.left="".concat(100*(t[0]-a)/r,"%"),e.top="".concat(100*(s-t[3]+o)/s,"%"),0===i?(e.width="".concat(100*(t[2]-t[0])/r,"%"),e.height="".concat(100*(t[3]-t[1])/s,"%")):this.setRotation(i)}class Cm extends Sm{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Mm=new WeakSet;class Tm extends Sm{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(t,{isRenderable:!0,ignoreBorder:!(null===e||void 0===e||!e.ignoreBorder),createQuadrilaterals:!0}),lr(this,Mm),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),i=!0):t.attachment?(ur(Mm,this,Pm).call(this,n,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(ur(Mm,this,Dm).call(this,n,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&ur(Mm,this,Rm).call(this),n&&(t.title=n)}_bindNamedAction(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),ur(Mm,this,Rm).call(this)}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(e.actions)){const r=n.get(i);r&&(t[r]=()=>{var t;return null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1})}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),ur(Mm,this,Rm).call(this)}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),ur(Mm,this,Rm).call(this),!this._fieldObjects)return ms('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(t.onclick=()=>!1));t.onclick=()=>{null===n||void 0===n||n();const{fields:t,refs:i,include:r}=e,s=[];if(0!==t.length||0!==i.length){const e=new Set(i);for(const n of t){const t=this._fieldObjects[n]||[];for(const{id:n}of t)e.add(n)}for(const t of Object.values(this._fieldObjects))for(const n of t)e.has(n.id)===r&&s.push(n)}else for(const e of Object.values(this._fieldObjects))s.push(...e);const a=this.annotationStorage,o=[];for(const e of s){const{id:t}=e;switch(o.push(t),e.type){case"text":{const n=e.defaultValue||"";a.setValue(t,{value:n});break}case"checkbox":case"radiobutton":{const n=e.defaultValue===e.exportValues;a.setValue(t,{value:n});break}case"combobox":case"listbox":{const n=e.defaultValue||"";a.setValue(t,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(t,'"]'));n&&(ym.has(n)?n.dispatchEvent(new Event("resetform")):ms("_bindResetFormAction - element not allowed: ".concat(t)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function Rm(){this.container.setAttribute("data-internal-link","")}function Pm(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>{var t;return null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(e.content,e.filename,i),!1},ur(Mm,this,Rm).call(this)}function Dm(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),ur(Mm,this,Rm).call(this)}class Lm extends Sm{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Nm extends Sm{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&("CANVAS"===(null===(e=t.previousSibling)||void 0===e?void 0:e.nodeName)&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ps.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,r){n.includes("mouse")?t.addEventListener(n,t=>{var e;null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})}):t.addEventListener(n,t=>{var s;if("blur"===n){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===n){if(e.focused)return;e.focused=!0}r&&(null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(t)}}))})}_setEventListeners(t,e,n,i){for(const[o,l]of n){var r,s,a;if("Action"===l||null!==(r=this.data.actions)&&void 0!==r&&r[l])"Focus"!==l&&"Blur"!==l||e||(e={focused:!1}),this._setEventListener(t,e,o,l,i),"Focus"!==l||null!==(s=this.data.actions)&&void 0!==s&&s.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null)}}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":Ls.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,r=t.style;let s;const a=t=>Math.round(10*t)/10;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2),e=t/(Math.round(t/(Nr*i))||1);s=Math.min(i,a(e/Nr))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(i,a(t/Nr))}r.fontSize="calc(".concat(s,"px * var(--total-scale-factor))"),r.color=Ls.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Im extends Nm{constructor(t){super(t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,n,i){const r=this.annotationStorage;for(const s of this._getElementsByName(t.name,t.id))s.domElement&&(s.domElement[e]=n),r.setValue(s.id,{[i]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var i;const s=t.getValue(e,{value:this.data.fieldValue});let a=s.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=s.formattedValue||(null===(i=this.data.textContent)||void 0===i?void 0:i.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",null!==l&&void 0!==l?l:a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),ym.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:u,datetimeType:h,timeStep:d}=this.data,p=!!h&&this.enableScripting;u&&(n.title=u),this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",i=>{t.setValue(e,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",t=>{var e;const i=null!==(e=this.data.defaultFieldValue)&&void 0!==e?e:"";n.value=c.userValue=i,c.formattedValue=null});let f=t=>{const{formattedValue:e}=c;null!==e&&void 0!==e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var r;n.addEventListener("focus",t=>{var e;if(c.focused)return;const{target:n}=t;if(p&&(n.type=h,d&&(n.step=d)),c.userValue){const t=c.userValue;if(p)if("time"===h){const e=new Date(t),i=[e.getHours(),e.getMinutes(),e.getSeconds()];n.value=i.map(t=>t.toString().padStart(2,"0")).join(":")}else n.value=new Date(t-bm).toISOString().split("date"===h?"T":".",1)[0];else n.value=t}c.lastCommittedValue=n.value,c.commitKey=1,null!==(e=this.data.actions)&&void 0!==e&&e.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target);const i={value(n){var i;c.userValue=null!==(i=n.detail.value)&&void 0!==i?i:"",p||t.setValue(e,{value:c.userValue.toString()}),n.target.value=c.userValue},formattedValue(n){const{formattedValue:i}=n.detail;c.formattedValue=i,null!==i&&void 0!==i&&n.target!==document.activeElement&&(n.target.value=i);const r={formattedValue:i};p&&(r.value=i),t.setValue(e,r)},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:n=>{var i;const{charLimit:r}=n.detail,{target:s}=n;if(0===r)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",r);let a=c.userValue;!a||a.length<=r||(a=a.slice(0,r),s.value=c.userValue=a,t.setValue(e,{value:a}),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)}),n.addEventListener("keydown",t=>{var n;c.commitKey=1;let i=-1;if("Escape"===t.key?i=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(c.commitKey=3):i=2,-1===i)return;const{value:r}=t.target;c.lastCommittedValue!==r&&(c.lastCommittedValue=r,c.userValue=r,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,willCommit:!0,commitKey:i,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))});const i=f;f=null,n.addEventListener("blur",t=>{var n;if(!c.focused||!t.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(c.focused=!1);const{target:r}=t;let{value:s}=r;if(p){if(s&&"time"===h){const t=s.split(":").map(t=>parseInt(t,10));s=new Date(2e3,0,1,t[0],t[1],t[2]||0).valueOf(),r.step=""}else s.includes("T")||(s="".concat(s,"T00:00")),s=new Date(s).valueOf();r.type="text"}var a;(c.userValue=s,c.lastCommittedValue!==s)&&(null===(a=this.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,willCommit:!0,commitKey:c.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}));i(t)}),null!==(r=this.data.actions)&&void 0!==r&&r.Keystroke&&n.addEventListener("beforeinput",t=>{var n;c.lastCommittedValue=null;const{data:i,target:r}=t,{value:s,selectionStart:a,selectionEnd:o}=r;let l=a,u=o;switch(t.inputType){case"deleteWordBackward":{const t=s.substring(0,a).match(/\w*[^\w]*$/);t&&(l-=t[0].length);break}case"deleteWordForward":{const t=s.substring(a).match(/^[^\w]*\w*/);t&&(u+=t[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(u+=1)}t.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,change:i||"",willCommit:!1,selStart:l,selEnd:u}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.value)}if(f&&n.addEventListener("blur",f),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(t,"px * var(--total-scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Fm extends Nm{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Om extends Nm{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;"string"===typeof i&&(i="Off"!==i,t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return ym.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",i=>{const{name:r,checked:s}=i.target;for(const a of this._getElementsByName(r,n)){const n=s&&a.exportValue===e.exportValue;a.domElement&&(a.domElement.checked=n),t.setValue(a.id,{value:n})}t.setValue(n,{value:s})}),r.addEventListener("resetform",t=>{const n=e.defaultFieldValue||"Off";t.target.checked=n===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",e=>{const i={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(n,{value:e.target.checked})}};this._dispatchEventFromSandbox(i,e)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Bm extends Nm{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if("string"===typeof i&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const s of this._getElementsByName(e.fieldName,n))t.setValue(s.id,{value:!1});const r=document.createElement("input");if(ym.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",e=>{const{name:i,checked:r}=e.target;for(const s of this._getElementsByName(i,n))t.setValue(s.id,{value:!1});t.setValue(n,{value:r})}),r.addEventListener("resetform",t=>{const n=e.defaultFieldValue;t.target.checked=null!==n&&void 0!==n&&n===e.buttonValue}),this.enableScripting&&this.hasJSActions){const i=e.buttonValue;r.addEventListener("updatefromsandbox",e=>{const r={value:e=>{const r=i===e.detail.value;for(const i of this._getElementsByName(e.target.name)){const e=r&&i.id===n;i.domElement&&(i.domElement.checked=e),t.setValue(i.id,{value:e})}}};this._dispatchEventFromSandbox(r,e)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Wm extends Tm{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({},t)})),t}}class jm extends Nm{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");ym.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",t=>{const e=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===e});for(const c of this.data.options){const t=document.createElement("option");t.textContent=c.displayValue,t.value=c.exportValue,n.value.includes(c.exportValue)&&(t.setAttribute("selected",!0),r=!1),i.append(t)}let s=null;if(r){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),i.prepend(t),s=()=>{t.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const a=t=>{const e=t?"value":"textContent",{options:n,multiple:r}=i;return r?Array.prototype.filter.call(n,t=>t.selected).map(t=>t[e]):-1===n.selectedIndex?null:n[n.selectedIndex][e]};let o=a(!1);const l=t=>{const e=t.target.options;return Array.prototype.map.call(e,t=>({displayValue:t.textContent,exportValue:t.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",n=>{const r={value(n){var r;null===(r=s)||void 0===r||r();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const t of i.options)t.selected=c.has(t.value);t.setValue(e,{value:a(!0)}),o=a(!1)},multipleSelection(t){i.multiple=!0},remove(n){const r=i.options,s=n.detail.remove;if(r[s].selected=!1,i.remove(s),r.length>0){-1===Array.prototype.findIndex.call(r,t=>t.selected)&&(r[0].selected=!0)}t.setValue(e,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==i.length;)i.remove(0);t.setValue(e,{value:null,items:[]}),o=a(!1)},insert(n){const{index:r,displayValue:s,exportValue:c}=n.detail.insert,u=i.children[r],h=document.createElement("option");h.textContent=s,h.value=c,u?u.before(h):i.append(h),t.setValue(e,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:r}=n.detail;for(;0!==i.length;)i.remove(0);for(const t of r){const{displayValue:e,exportValue:n}=t,r=document.createElement("option");r.textContent=e,r.value=n,i.append(r)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const i=new Set(n.detail.indices);for(const t of n.target.options)t.selected=i.has(t.index);t.setValue(e,{value:a(!0)}),o=a(!1)},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(r,n)}),i.addEventListener("input",n=>{var i;const r=a(!0),s=a(!1);t.setValue(e,{value:r}),n.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:o,change:s,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],t=>t.target.value)):i.addEventListener("input",function(n){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var Um=new WeakSet;class zm extends Sm{constructor(t){const{data:e,elements:n,parent:i}=t,r=!!i._commentManager;if(super(t,{isRenderable:!r&&Sm._hasPopupData(e)}),lr(this,Um),this.elements=n,r&&Sm._hasPopupData(e)){const t=this.popup=ur(Um,this,Hm).call(this);for(const e of n)e.popup=t}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=ur(Um,this,Hm).call(this),n=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(t=>"".concat(Ws).concat(t)).join(",")),this.container}}function Hm(){return new vv({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}var Vm=new WeakMap,Gm=new WeakMap,qm=new WeakMap,Xm=new WeakMap,Km=new WeakMap,Ym=new WeakMap,Qm=new WeakMap,$m=new WeakMap,Jm=new WeakMap,Zm=new WeakMap,tv=new WeakMap,ev=new WeakMap,nv=new WeakMap,iv=new WeakMap,rv=new WeakMap,sv=new WeakMap,av=new WeakMap,ov=new WeakMap,lv=new WeakMap,cv=new WeakMap,uv=new WeakMap,hv=new WeakMap,dv=new WeakMap,pv=new WeakMap,fv=new WeakMap,gv=new WeakMap,mv=new WeakSet;class vv{constructor(t){let{container:e,color:n,elements:i,titleObj:r,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:u,open:h,commentManager:d=null}=t;lr(this,mv),cr(this,Vm,null),cr(this,Gm,ur(mv,this,Ev).bind(this)),cr(this,qm,ur(mv,this,Rv).bind(this)),cr(this,Xm,ur(mv,this,Tv).bind(this)),cr(this,Km,ur(mv,this,Mv).bind(this)),cr(this,Ym,null),cr(this,Qm,null),cr(this,$m,null),cr(this,Jm,null),cr(this,Zm,null),cr(this,tv,null),cr(this,ev,null),cr(this,nv,!1),cr(this,iv,null),cr(this,rv,null),cr(this,sv,null),cr(this,av,null),cr(this,ov,null),cr(this,lv,null),cr(this,cv,null),cr(this,uv,null),cr(this,hv,null),cr(this,dv,null),cr(this,pv,!1),cr(this,fv,null),cr(this,gv,null),pr(Qm,this,e),pr(hv,this,r),pr($m,this,a),pr(uv,this,o),pr(tv,this,l),pr(Ym,this,n),pr(cv,this,c),pr(ev,this,u),pr(Zm,this,i),pr(Vm,this,d),pr(fv,this,i[0]),pr(Jm,this,ea.toDateObject(s)),this.trigger=i.flatMap(t=>t.getElementsToTriggerPopup()),d?this.renderCommentButton():(ur(mv,this,yv).call(this),dr(Qm,this).hidden=!0,h&&ur(mv,this,Mv).call(this))}renderCommentButton(){if(dr(av,this))return;if(dr(ov,this)||ur(mv,this,bv).call(this),!dr(ov,this))return;const{signal:t}=pr(rv,this,new AbortController),e=!!dr(fv,this).extraPopupElement,n=()=>{dr(Vm,this).toggleCommentPopup(this,!0,void 0,!e)},i=()=>{dr(Vm,this).toggleCommentPopup(this,!1,!0,!e)},r=()=>{dr(Vm,this).toggleCommentPopup(this,!1,!1)};if(e){pr(av,this,dr(fv,this).container);for(const e of this.trigger)e.ariaHasPopup="dialog",e.ariaControls="commentPopup",e.addEventListener("keydown",dr(Gm,this),{signal:t}),e.addEventListener("click",n,{signal:t}),e.addEventListener("pointerenter",i,{signal:t}),e.addEventListener("pointerleave",r,{signal:t}),e.classList.add("popupTriggerArea")}else{const e=pr(av,this,document.createElement("button"));e.className="annotationCommentButton";const s=dr(fv,this).container;e.style.zIndex=s.style.zIndex+1,e.tabIndex=0,e.ariaHasPopup="dialog",e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button"),ur(mv,this,xv).call(this),ur(mv,this,wv).call(this),e.addEventListener("keydown",dr(Gm,this),{signal:t}),e.addEventListener("click",n,{signal:t}),e.addEventListener("pointerenter",i,{signal:t}),e.addEventListener("pointerleave",r,{signal:t}),s.after(e)}}get commentButtonColor(){const{color:t,opacity:e}=dr(fv,this).commentData;return t?dr(tv,this)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;null===(t=dr(av,this))||void 0===t||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:i,modificationDate:r}=dr(fv,this).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:i,modificationDate:r}}get elementBeforePopup(){return dr(av,this)}get comment(){return dr(gv,this)||pr(gv,this,dr(fv,this).commentText),dr(gv,this)}set comment(t){t!==this.comment&&(dr(fv,this).commentText=pr(gv,this,t))}get parentBoundingClientRect(){return dr(fv,this).layer.getBoundingClientRect()}setCommentButtonStates(t){let{selected:e,hasPopup:n}=t;dr(av,this)&&(dr(av,this).classList.toggle("selected",e),dr(av,this).ariaExpanded=n)}setSelectedCommentButton(t){dr(av,this).classList.toggle("selected",t)}get commentPopupPosition(){if(dr(lv,this))return dr(lv,this);const{x:t,y:e,height:n}=dr(av,this).getBoundingClientRect(),{x:i,y:r,width:s,height:a}=dr(fv,this).layer.getBoundingClientRect();return[(t-i)/s,(e+n-r)/a]}set commentPopupPosition(t){pr(lv,this,t)}hasDefaultPopupPosition(){return null===dr(lv,this)}get commentButtonPosition(){return dr(ov,this)}get commentButtonWidth(){return dr(av,this).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=dr(lv,this)||this.commentButtonPosition.map(t=>t/100),i=this.parentBoundingClientRect,{x:r,y:s,width:a,height:o}=i;dr(Vm,this).showDialog(null,this,r+e*a,s+n*o,d(d({},t),{},{parentDimensions:i}))}render(){var t,e;if(dr(iv,this))return;const n=pr(iv,this,document.createElement("div"));if(n.className="popup",dr(Ym,this)){const t=n.style.outlineColor=Ls.makeHexColor(...dr(Ym,this));n.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)")}const i=document.createElement("span");if(i.className="header",null!==(t=dr(hv,this))&&void 0!==t&&t.str){const t=document.createElement("span");t.className="title",i.append(t),({dir:t.dir,str:t.textContent}=dr(hv,this))}if(n.append(i),dr(Jm,this)){const t=document.createElement("time");t.className="popupDate",t.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),t.setAttribute("data-l10n-args",JSON.stringify({dateObj:dr(Jm,this).valueOf()})),t.dateTime=dr(Jm,this).toISOString(),i.append(t)}ga({html:hr(mv,this,_v)||dr($m,this).str,dir:null===(e=dr($m,this))||void 0===e?void 0:e.dir,className:"popupContent"},n),dr(Qm,this).append(n)}updateEdited(t){var e;let{rect:n,popup:i,deleted:r}=t;if(dr(Vm,this))return r?(this.remove(),pr(gv,this,null)):i&&(i.deleted?this.remove():(ur(mv,this,xv).call(this),pr(gv,this,i.text))),void(n&&(pr(ov,this,null),ur(mv,this,bv).call(this),ur(mv,this,wv).call(this)));r||null!==i&&void 0!==i&&i.deleted?this.remove():(ur(mv,this,yv).call(this),dr(dv,this)||pr(dv,this,{contentsObj:dr($m,this),richText:dr(uv,this)}),n&&pr(sv,this,null),i&&i.text&&(pr(uv,this,ur(mv,this,Sv).call(this,i.text)),pr(Jm,this,ea.toDateObject(i.date)),pr($m,this,null)),null===(e=dr(iv,this))||void 0===e||e.remove(),pr(iv,this,null))}resetEdited(){var t;dr(dv,this)&&(({contentsObj:ar(pr,[$m,this])._,richText:ar(pr,[uv,this])._}=dr(dv,this)),pr(dv,this,null),null===(t=dr(iv,this))||void 0===t||t.remove(),pr(iv,this,null),pr(sv,this,null))}remove(){var t,e,n;if(null===(t=dr(rv,this))||void 0===t||t.abort(),pr(rv,this,null),null===(e=dr(iv,this))||void 0===e||e.remove(),pr(iv,this,null),pr(pv,this,!1),pr(nv,this,!1),null===(n=dr(av,this))||void 0===n||n.remove(),pr(av,this,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){pr(pv,this,this.isVisible),dr(pv,this)&&(dr(Qm,this).hidden=!0)}maybeShow(){dr(Vm,this)||(ur(mv,this,yv).call(this),dr(pv,this)&&(dr(iv,this)||ur(mv,this,Tv).call(this),pr(pv,this,!1),dr(Qm,this).hidden=!1))}get isVisible(){return!dr(Vm,this)&&!1===dr(Qm,this).hidden}}function yv(){if(dr(rv,this))return;pr(rv,this,new AbortController);const{signal:t}=dr(rv,this);for(const n of this.trigger)n.addEventListener("click",dr(Km,this),{signal:t}),n.addEventListener("pointerenter",dr(Xm,this),{signal:t}),n.addEventListener("pointerleave",dr(qm,this),{signal:t}),n.classList.add("popupTriggerArea");for(const n of dr(Zm,this)){var e;null===(e=n.container)||void 0===e||e.addEventListener("keydown",dr(Gm,this),{signal:t})}}function bv(){const t=dr(Zm,this).find(t=>t.hasCommentButton);t&&pr(ov,this,t._normalizePoint(t.commentButtonPosition))}function wv(){if(dr(fv,this).extraPopupElement&&!dr(fv,this).editor)return;this.renderCommentButton();const[t,e]=dr(ov,this),{style:n}=dr(av,this);n.left="calc(".concat(t,"%)"),n.top="calc(".concat(e,"% - var(--comment-button-dim))")}function xv(){dr(fv,this).extraPopupElement||(this.renderCommentButton(),dr(av,this).style.backgroundColor=this.commentButtonColor||"")}function _v(t){const e=dr(uv,t),n=dr($m,t);return null===e||void 0===e||!e.str||null!==n&&void 0!==n&&n.str&&n.str!==e.str?null:dr(uv,t).html||null}function kv(t){var e;return(null===(e=hr(mv,t,_v))||void 0===e||null===(e=e.attributes)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.fontSize)||0}function Av(t){var e;return(null===(e=hr(mv,t,_v))||void 0===e||null===(e=e.attributes)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.color)||null}function Sv(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:hr(mv,this,Av),fontSize:hr(mv,this,kv)?"calc(".concat(hr(mv,this,kv),"px * var(--total-scale-factor))"):""}};for(const r of t.split("\n"))e.push({name:"span",value:r,attributes:i});return n}function Ev(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&dr(nv,this))&&ur(mv,this,Mv).call(this)}function Cv(){if(null!==dr(sv,this))return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:r}}}=dr(tv,this);let s=!!dr(ev,this),a=dr(s?ev:cv,this);for(const d of dr(Zm,this))if(!a||null!==Ls.intersect(d.data.rect,a)){a=d.data.rect,s=!0;break}const o=Ls.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),l=s?a[2]-a[0]+5:0,c=o[0]+l,u=o[1];pr(sv,this,[100*(c-i)/e,100*(u-r)/n]);const{style:h}=dr(Qm,this);h.left="".concat(dr(sv,this)[0],"%"),h.top="".concat(dr(sv,this)[1],"%")}function Mv(){dr(Vm,this)?dr(Vm,this).toggleCommentPopup(this,!1):(pr(nv,this,!dr(nv,this)),dr(nv,this)?(ur(mv,this,Tv).call(this),dr(Qm,this).addEventListener("click",dr(Km,this)),dr(Qm,this).addEventListener("keydown",dr(Gm,this))):(ur(mv,this,Rv).call(this),dr(Qm,this).removeEventListener("click",dr(Km,this)),dr(Qm,this).removeEventListener("keydown",dr(Gm,this))))}function Tv(){dr(iv,this)||this.render(),this.isVisible?dr(nv,this)&&dr(Qm,this).classList.add("focused"):(ur(mv,this,Cv).call(this),dr(Qm,this).hidden=!1,dr(Qm,this).style.zIndex=parseInt(dr(Qm,this).style.zIndex)+1e3)}function Rv(){dr(Qm,this).classList.remove("focused"),!dr(nv,this)&&this.isVisible&&(dr(Qm,this).hidden=!0,dr(Qm,this).style.zIndex=parseInt(dr(Qm,this).style.zIndex)-1e3)}class Pv extends Sm{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Gr.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Dv=new WeakMap;class Lv extends Sm{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),cr(this,Dv,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),r=pr(Dv,this,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return dr(Dv,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Nv=new WeakMap;class Iv extends Sm{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),cr(this,Nv,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,s=pr(Nv,this,this.svgFactory.createElement("svg:rect"));return s.setAttribute("x",r/2),s.setAttribute("y",r/2),s.setAttribute("width",e-r),s.setAttribute("height",n-r),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return dr(Nv,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Fv=new WeakMap;class Ov extends Sm{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),cr(this,Fv,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,s=pr(Fv,this,this.svgFactory.createElement("svg:ellipse"));return s.setAttribute("cx",e/2),s.setAttribute("cy",n/2),s.setAttribute("rx",e/2-r/2),s.setAttribute("ry",n/2-r/2),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return dr(Fv,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Bv=new WeakMap;class Wv extends Sm{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),cr(this,Bv,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:i},width:r,height:s}=this;if(!e)return this.container;const a=this.svgFactory.create(r,s,!0);let o=[];for(let c=0,u=e.length;c<u;c+=2){const n=e[c]-t[0],i=t[3]-e[c+1];o.push("".concat(n,",").concat(i))}o=o.join(" ");const l=pr(Bv,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return dr(Bv,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class jv extends Wv{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Uv extends Sm{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var zv=new WeakMap,Hv=new WeakMap,Vv=new WeakSet;class Gv extends Sm{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),lr(this,Vv),cr(this,zv,null),cr(this,Hv,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?Gr.HIGHLIGHT:Gr.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:i,popupRef:r}}=this,{transform:s,width:a,height:o}=ur(Vv,this,qv).call(this,e,t),l=this.svgFactory.create(a,o,!0),c=pr(zv,this,this.svgFactory.createElement("svg:g"));l.append(c),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",s);for(let u=0,h=n.length;u<h;u++){const t=this.svgFactory.createElement(this.svgElementName);dr(Hv,this).push(t),t.setAttribute("points",n[u].join(",")),c.append(t)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:i}=t,r=dr(zv,this);if(e>=0&&r.setAttribute("stroke-width",e||1),n)for(let s=0,a=dr(Hv,this).length;s<a;s++)dr(Hv,this)[s].setAttribute("points",n[s].join(","));if(i){const{transform:t,width:e,height:n}=ur(Vv,this,qv).call(this,this.data.rotation,i);r.parentElement.setAttribute("viewBox","0 0 ".concat(e," ").concat(n)),r.setAttribute("transform",t)}}getElementsToTriggerPopup(){return dr(Hv,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function qv(t,e){switch(t){case 90:return{transform:"rotate(90) translate(".concat(-e[0],",").concat(e[1],") scale(1,-1)"),width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:"rotate(180) translate(".concat(-e[2],",").concat(e[1],") scale(1,-1)"),width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:"rotate(270) translate(".concat(-e[2],",").concat(e[3],") scale(1,-1)"),width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:"translate(".concat(-e[0],",").concat(e[3],") scale(1,-1)"),width:e[2]-e[0],height:e[3]-e[1]}}}class Xv extends Sm{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Gr.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const e=document.createElement("mark");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class Kv extends Sm{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const e=document.createElement("u");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class Yv extends Sm{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const e=document.createElement("u");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class Qv extends Sm{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const e=document.createElement("s");e.classList.add("overlaidText"),e.textContent=t,this.container.append(e)}return this.container}}class $v extends Sm{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Gr.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Jv=new WeakMap,Zv=new WeakSet;class ty extends Sm{constructor(t){var e;super(t,{isRenderable:!0}),lr(this,Zv),cr(this,Jv,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("fileattachmentannotation",d({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||0===e.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(e.name)?"paperclip":"pushpin",".svg"),e.fillAlpha&&e.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*e.fillAlpha),"%);"))),n.addEventListener("dblclick",ur(Zv,this,ey).bind(this)),pr(Jv,this,n);const{isMac:i}=Ps.platform;return t.addEventListener("keydown",t=>{"Enter"===t.key&&(i?t.metaKey:t.ctrlKey)&&ur(Zv,this,ey).call(this)}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return dr(Jv,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function ey(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.content,this.filename)}var ny=new WeakMap,iy=new WeakMap,ry=new WeakMap,sy=new WeakMap,ay=new WeakMap,oy=new WeakMap,ly=new WeakSet;class cy{constructor(t){let{div:e,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:o,commentManager:l,linkService:c,annotationStorage:u}=t;lr(this,ly),cr(this,ny,null),cr(this,iy,null),cr(this,ry,null),cr(this,sy,new Map),cr(this,ay,null),cr(this,oy,null),this.div=e,pr(ny,this,n),pr(iy,this,i),pr(ay,this,o||null),pr(oy,this,c||null),pr(ry,this,u||new wu),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=l||null}hasEditableAnnotations(){return dr(sy,this).size>0}async render(t){const{annotations:e}=t,n=this.div;aa(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:dr(oy,this),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new vm,annotationStorage:dr(ry,this),enableComment:!0===t.enableComment,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){var s;if(o.noHTML)continue;const t=o.annotationType===ts.POPUP;if(t){const t=i.get(o.id);if(!t)continue;r.elements=t}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;r.data=o;const e=wm.create(r);if(!e.isRenderable)continue;if(!t&&o.popupRef){const t=i.get(o.popupRef);t?t.push(e):i.set(o.popupRef,[e])}const n=e.render();var a;if(o.hidden&&(n.style.visibility="hidden"),await ur(ly,this,uy).call(this,n,o.id,r.elements),null===(s=e.extraPopupElement)||void 0===s||null===(s=s.popup)||void 0===s||s.renderCommentButton(),e._isEditable)dr(sy,this).set(e.data.id,e),null===(a=this._annotationEditorUIManager)||void 0===a||a.renderAnnotationElement(e)}ur(ly,this,hy).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:dr(oy,this),svgFactory:new vm,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=cy._defaultBorderStyle),e.data=n;const t=wm.create(e);if(!t.isRenderable)continue;const i=t.render();await ur(ly,this,uy).call(this,i,n.id,null)}}update(t){let{viewport:e}=t;const n=this.div;this.viewport=e,aa(n,{rotation:e.rotation}),ur(ly,this,hy).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(dr(sy,this).values())}getEditableAnnotation(t){return dr(sy,this).get(t)}addFakeAnnotation(t){var e;const{div:n}=this,{id:i,rotation:r}=t,s=new Cm({data:{id:i,rect:t.getPDFRect(),rotation:r},editor:t,layer:n,parent:this,enableComment:!!this._commentManager,linkService:dr(oy,this),annotationStorage:dr(ry,this)}),a=s.render();return n.append(a),null===(e=dr(ny,this))||void 0===e||e.moveElementInDOM(n,a,a,!1),s.createOrUpdatePopup(),s}static get _defaultBorderStyle(){return xs(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:es,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}async function uy(t,e,n){var i;const r=t.firstChild||t,s=r.id="".concat(Ws).concat(e),a=await(null===(i=dr(ay,this))||void 0===i?void 0:i.getAriaAttributes(s));if(a)for(const[l,c]of a)r.setAttribute(l,c);var o;n?n.at(-1).container.after(t):(this.div.append(t),null===(o=dr(ny,this))||void 0===o||o.moveElementInDOM(this.div,t,r,!1))}function hy(){if(!dr(iy,this))return;const t=this.div;for(const[n,i]of dr(iy,this)){const r=t.querySelector('[data-annotation-id="'.concat(n,'"]'));if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?"CANVAS"===s.nodeName?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i);const a=dr(sy,this).get(n);var e;if(a)if(a._hasNoCanvas)null===(e=this._annotationEditorUIManager)||void 0===e||e.setMissingCanvas(n,r.id,i),a._hasNoCanvas=!1;else a.canvas=i}dr(iy,this).clear()}const dy=/\r\n?|\n/g;var py=new WeakMap,fy=new WeakMap,gy=new WeakMap,my=new WeakMap,vy=new WeakSet;class yy extends Hc{static get _keyboardManager(){const t=yy.prototype,e=t=>t.isEmpty(),n=el.TRANSLATE_SMALL,i=el.TRANSLATE_BIG;return xs(this,"_keyboardManager",new eo([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}]]))}constructor(t){super(d(d({},t),{},{name:"freeTextEditor"})),lr(this,vy),cr(this,py,""),cr(this,fy,"".concat(this.id,"-editor")),cr(this,gy,null),cr(this,my,void 0),u(this,"_colorPicker",null),this.color=t.color||yy._defaultColor||Hc._defaultLineColor,pr(my,this,t.fontSize||yy._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){Hc.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case qr.FREETEXT_SIZE:yy._defaultFontSize=e;break;case qr.FREETEXT_COLOR:yy._defaultColor=e}}updateParams(t,e){switch(t){case qr.FREETEXT_SIZE:ur(vy,this,by).call(this,e);break;case qr.FREETEXT_COLOR:ur(vy,this,wy).call(this,e)}}static get defaultPropertiesToUpdate(){return[[qr.FREETEXT_SIZE,yy._defaultFontSize],[qr.FREETEXT_COLOR,yy._defaultColor||Hc._defaultLineColor]]}get propertiesToUpdate(){return[[qr.FREETEXT_SIZE,dr(my,this)],[qr.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new hm(this)),[["colorPicker",this._colorPicker]]}get colorType(){return qr.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,null===(t=this._colorPicker)||void 0===t||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-yy._internalPadding*t,-(yy._internalPadding+dr(my,this))*t]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),pr(gy,this,new AbortController);const t=this._uiManager.combinedSignal(dr(gy,this));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",dr(fy,this)),this._isDraggable=!0,null===(t=dr(gy,this))||void 0===t||t.abort(),pr(gy,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var e;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=dr(py,this),e=pr(py,this,ur(vy,this,xy).call(this).trimEnd());if(t===e)return;const n=t=>{pr(py,this,t),t?(ur(vy,this,Ay).call(this),this._uiManager.rebuild(this),ur(vy,this,_y).call(this)):this.remove()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),ur(vy,this,_y).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){yy._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",dr(fy,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(dr(my,this),"px * var(--total-scale-factor))"),n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:r}=this._initialData;let[s,a]=this.getInitialTranslation();[s,a]=this.pageTranslationToScreen(s,a);const[o,l]=this.pageDimensions,[c,u]=this.pageTranslation;let h,d;switch(this.rotation){case 0:h=t+(r[0]-c)/o,d=e+this.height-(r[1]-u)/l;break;case 90:h=t+(r[0]-c)/o,d=e-(r[1]-u)/l,[s,a]=[a,-s];break;case 180:h=t-this.width+(r[0]-c)/o,d=e-(r[1]-u)/l,[s,a]=[-s,-a];break;case 270:h=t+(r[0]-c-this.height*l)/o,d=e+(r[1]-u-this.width*o)/l,[s,a]=[-a,s]}this.setAt(h*n,d*i,s,a)}else this._moveAfterPaste(t,e);ur(vy,this,Ay).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(1===n.length&&"text/plain"===n[0])return;t.preventDefault();const i=Ey.call(yy,e.getData("text")||"").replaceAll(dy,"\n");if(!i)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const s=r.getRangeAt(0);if(!i.includes("\n"))return s.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void r.collapseToStart();const{startContainer:a,startOffset:o}=s,l=[],c=[];if(a.nodeType===Node.TEXT_NODE){const t=a.parentElement;if(c.push(a.nodeValue.slice(o).replaceAll(dy,"")),t!==this.editorDiv){let e=l;for(const n of this.editorDiv.childNodes)n!==t?e.push(ky.call(yy,n)):e=c}l.push(a.nodeValue.slice(0,o).replaceAll(dy,""))}else if(a===this.editorDiv){let t=l,e=0;for(const n of this.editorDiv.childNodes)e++===o&&(t=c),t.push(ky.call(yy,n))}pr(py,this,"".concat(l.join("\n")).concat(i).concat(c.join("\n"))),ur(vy,this,Ay).call(this);const u=new Range;let h=Math.sumPrecise(l.map(t=>t.length));for(const{firstChild:d}of this.editorDiv.childNodes)if(d.nodeType===Node.TEXT_NODE){const t=d.nodeValue.length;if(h<=t){u.setStart(d,h),u.setEnd(d,h);break}h-=t}r.removeAllRanges(),r.addRange(u)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=yy._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,n){let i=null;if(t instanceof Pv){const{data:{defaultAppearanceData:{fontSize:e,fontColor:n},rect:r,rotation:s,id:a,popupRef:o,richText:l,contentsObj:c,creationDate:u,modificationDate:h},textContent:d,textPosition:p,parent:{page:{pageNumber:f}}}=t;if(!d||0===d.length)return null;i=t={annotationType:Gr.FREETEXT,color:Array.from(n),fontSize:e,value:d.join("\n"),position:p,pageIndex:f-1,rect:r.slice(0),rotation:s,annotationElementId:a,id:a,deleted:!1,popupRef:o,comment:(null===c||void 0===c?void 0:c.str)||null,richText:l,creationDate:u,modificationDate:h}}const r=await super.deserialize(t,e,n);return pr(my,r,t.fontSize),r.color=Ls.makeHexColor(...t.color),pr(py,r,Ey.call(yy,t.value)),r._initialData=i,t.comment&&r.setCommentData(t),r}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=Hc._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(t),{color:e,fontSize:dr(my,this),value:ur(vy,this,Sy).call(this)});return this.addComment(n),t?(n.isCopy=!0,n):this.annotationElementId&&!ur(vy,this,Cy).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:n}=e;n.fontSize="calc(".concat(dr(my,this),"px * var(--total-scale-factor))"),n.color=this.color,e.replaceChildren();for(const i of dr(py,this).split("\n")){const t=document.createElement("div");t.append(i?document.createTextNode(i):document.createElement("br")),e.append(t)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:dr(py,this)}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}function by(t){const e=t=>{this.editorDiv.style.fontSize="calc(".concat(t,"px * var(--total-scale-factor))"),this.translate(0,-(t-dr(my,this))*this.parentScale),pr(my,this,t),ur(vy,this,_y).call(this)},n=dr(my,this);this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qr.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function wy(t){const e=t=>{this.color=t,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qr.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function xy(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes){var n;(null===(n=e)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===i.nodeName||(t.push(ky.call(Cr,i)),e=i)}return t.join("\n")}function _y(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:t,div:e}=this,i=e.style.display,r=e.classList.contains("hidden");e.classList.remove("hidden"),e.style.display="hidden",t.div.append(this.div),n=e.getBoundingClientRect(),e.remove(),e.style.display=i,e.classList.toggle("hidden",r)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}function ky(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(dy,"")}function Ay(){if(this.editorDiv.replaceChildren(),dr(py,this))for(const t of dr(py,this).split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}function Sy(){return dr(py,this).replaceAll("\xa0"," ")}function Ey(t){return t.replaceAll(" ","\xa0")}function Cy(t){const{value:e,fontSize:n,color:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((t,e)=>t!==i[e])||t.pageIndex!==r}Cr=yy,u(yy,"_freeTextDefaultContent",""),u(yy,"_internalPadding",0),u(yy,"_defaultColor",null),u(yy,"_defaultFontSize",10),u(yy,"_type","freetext"),u(yy,"_editorType",Gr.FREETEXT);class My{toSVGPath(){vs("Abstract method `toSVGPath` must be implemented.")}get box(){vs("Abstract getter `box` must be implemented.")}serialize(t,e){vs("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,r,s){s||(s=new Float32Array(t.length));for(let a=0,o=t.length;a<o;a+=2)s[a]=e+t[a]*i,s[a+1]=n+t[a+1]*r;return s}static _rescaleAndSwap(t,e,n,i,r,s){s||(s=new Float32Array(t.length));for(let a=0,o=t.length;a<o;a+=2)s[a]=e+t[a+1]*i,s[a+1]=n+t[a]*r;return s}static _translate(t,e,n,i){i||(i=new Float32Array(t.length));for(let r=0,s=t.length;r<s;r+=2)i[r]=e+t[r],i[r+1]=n+t[r+1];return i}static svgRound(t){return Math.round(1e4*t)}static _normalizePoint(t,e,n,i,r){switch(r){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,r,s){return[(t+5*n)/6,(e+5*i)/6,(5*n+r)/6,(5*i+s)/6,(n+r)/2,(i+s)/2]}}u(My,"PRECISION",1e-4);var Ty=new WeakMap,Ry=new WeakMap,Py=new WeakMap,Dy=new WeakMap,Ly=new WeakMap,Ny=new WeakMap,Iy=new WeakMap,Fy=new WeakMap,Oy=new WeakMap,By=new WeakMap,Wy=new WeakMap,jy=new WeakMap,Uy=new WeakMap,zy=new WeakSet;class Hy{constructor(t,e,n,i,r){let{x:s,y:a}=t,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;lr(this,zy),cr(this,Ty,void 0),cr(this,Ry,[]),cr(this,Py,void 0),cr(this,Dy,void 0),cr(this,Ly,[]),cr(this,Ny,new Float32Array(18)),cr(this,Iy,void 0),cr(this,Fy,void 0),cr(this,Oy,void 0),cr(this,By,void 0),cr(this,Wy,void 0),cr(this,jy,void 0),cr(this,Uy,[]),pr(Ty,this,e),pr(jy,this,i*n),pr(Dy,this,r),dr(Ny,this).set([NaN,NaN,NaN,NaN,s,a],6),pr(Py,this,o),pr(By,this,$y._*n),pr(Oy,this,Jy._*n),pr(Wy,this,n),dr(Uy,this).push(s,a)}isEmpty(){return isNaN(dr(Ny,this)[8])}add(t){var e;let{x:n,y:i}=t;pr(Iy,this,n),pr(Fy,this,i);const[r,s,a,o]=dr(Ty,this);let[l,c,u,h]=dr(Ny,this).subarray(8,12);const d=n-u,p=i-h,f=Math.hypot(d,p);if(f<dr(Oy,this))return!1;const g=f-dr(By,this),m=g/f,v=m*d,y=m*p;let b=l,w=c;l=u,c=h,u+=v,h+=y,null===(e=dr(Uy,this))||void 0===e||e.push(n,i);const x=v/g,_=-y/g*dr(jy,this),k=x*dr(jy,this);if(dr(Ny,this).set(dr(Ny,this).subarray(2,8),0),dr(Ny,this).set([u+_,h+k],4),dr(Ny,this).set(dr(Ny,this).subarray(14,18),12),dr(Ny,this).set([u-_,h-k],16),isNaN(dr(Ny,this)[6]))return 0===dr(Ly,this).length&&(dr(Ny,this).set([l+_,c+k],2),dr(Ly,this).push(NaN,NaN,NaN,NaN,(l+_-r)/a,(c+k-s)/o),dr(Ny,this).set([l-_,c-k],14),dr(Ry,this).push(NaN,NaN,NaN,NaN,(l-_-r)/a,(c-k-s)/o)),dr(Ny,this).set([b,w,l,c,u,h],6),!this.isEmpty();dr(Ny,this).set([b,w,l,c,u,h],6);return Math.abs(Math.atan2(w-c,b-l)-Math.atan2(y,v))<Math.PI/2?([l,c,u,h]=dr(Ny,this).subarray(2,6),dr(Ly,this).push(NaN,NaN,NaN,NaN,((l+u)/2-r)/a,((c+h)/2-s)/o),[l,c,b,w]=dr(Ny,this).subarray(14,18),dr(Ry,this).push(NaN,NaN,NaN,NaN,((b+l)/2-r)/a,((w+c)/2-s)/o),!0):([b,w,l,c,u,h]=dr(Ny,this).subarray(0,6),dr(Ly,this).push(((b+5*l)/6-r)/a,((w+5*c)/6-s)/o,((5*l+u)/6-r)/a,((5*c+h)/6-s)/o,((l+u)/2-r)/a,((c+h)/2-s)/o),[u,h,l,c,b,w]=dr(Ny,this).subarray(12,18),dr(Ry,this).push(((b+5*l)/6-r)/a,((w+5*c)/6-s)/o,((5*l+u)/6-r)/a,((5*c+h)/6-s)/o,((l+u)/2-r)/a,((c+h)/2-s)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const t=dr(Ly,this),e=dr(Ry,this);if(isNaN(dr(Ny,this)[6])&&!this.isEmpty())return ur(zy,this,Gy).call(this);const n=[];n.push("M".concat(t[4]," ").concat(t[5]));for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push("L".concat(t[i+4]," ").concat(t[i+5])):n.push("C".concat(t[i]," ").concat(t[i+1]," ").concat(t[i+2]," ").concat(t[i+3]," ").concat(t[i+4]," ").concat(t[i+5]));ur(zy,this,Xy).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push("L".concat(e[i+4]," ").concat(e[i+5])):n.push("C".concat(e[i]," ").concat(e[i+1]," ").concat(e[i+2]," ").concat(e[i+3]," ").concat(e[i+4]," ").concat(e[i+5]));return ur(zy,this,qy).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,r,s){return new ob(t,e,n,i,r,s)}getOutlines(){var t,e;const n=dr(Ly,this),i=dr(Ry,this),r=dr(Ny,this),[s,a,o,l]=dr(Ty,this),c=new Float32Array((null!==(t=null===(e=dr(Uy,this))||void 0===e?void 0:e.length)&&void 0!==t?t:0)+2);for(let d=0,p=c.length-2;d<p;d+=2)c[d]=(dr(Uy,this)[d]-s)/o,c[d+1]=(dr(Uy,this)[d+1]-a)/l;if(c[c.length-2]=(dr(Iy,this)-s)/o,c[c.length-1]=(dr(Fy,this)-a)/l,isNaN(r[6])&&!this.isEmpty())return ur(zy,this,Ky).call(this,c);const u=new Float32Array(dr(Ly,this).length+24+dr(Ry,this).length);let h=n.length;for(let d=0;d<h;d+=2)isNaN(n[d])?u[d]=u[d+1]=NaN:(u[d]=n[d],u[d+1]=n[d+1]);h=ur(zy,this,Qy).call(this,u,h);for(let d=i.length-6;d>=6;d-=6)for(let t=0;t<6;t+=2)isNaN(i[d+t])?(u[h]=u[h+1]=NaN,h+=2):(u[h]=i[d+t],u[h+1]=i[d+t+1],h+=2);return ur(zy,this,Yy).call(this,u,h),this.newFreeDrawOutline(u,c,dr(Ty,this),dr(Wy,this),dr(Py,this),dr(Dy,this))}}function Vy(){const t=dr(Ny,this).subarray(4,6),e=dr(Ny,this).subarray(16,18),[n,i,r,s]=dr(Ty,this);return[(dr(Iy,this)+(t[0]-e[0])/2-n)/r,(dr(Fy,this)+(t[1]-e[1])/2-i)/s,(dr(Iy,this)+(e[0]-t[0])/2-n)/r,(dr(Fy,this)+(e[1]-t[1])/2-i)/s]}function Gy(){const[t,e,n,i]=dr(Ty,this),[r,s,a,o]=ur(zy,this,Vy).call(this);return"M".concat((dr(Ny,this)[2]-t)/n," ").concat((dr(Ny,this)[3]-e)/i," L").concat((dr(Ny,this)[4]-t)/n," ").concat((dr(Ny,this)[5]-e)/i," L").concat(r," ").concat(s," L").concat(a," ").concat(o," L").concat((dr(Ny,this)[16]-t)/n," ").concat((dr(Ny,this)[17]-e)/i," L").concat((dr(Ny,this)[14]-t)/n," ").concat((dr(Ny,this)[15]-e)/i," Z")}function qy(t){const e=dr(Ry,this);t.push("L".concat(e[4]," ").concat(e[5]," Z"))}function Xy(t){const[e,n,i,r]=dr(Ty,this),s=dr(Ny,this).subarray(4,6),a=dr(Ny,this).subarray(16,18),[o,l,c,u]=ur(zy,this,Vy).call(this);t.push("L".concat((s[0]-e)/i," ").concat((s[1]-n)/r," L").concat(o," ").concat(l," L").concat(c," ").concat(u," L").concat((a[0]-e)/i," ").concat((a[1]-n)/r))}function Ky(t){const e=dr(Ny,this),[n,i,r,s]=dr(Ty,this),[a,o,l,c]=ur(zy,this,Vy).call(this),u=new Float32Array(36);return u.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-i)/s,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-i)/s,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-i)/s,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-i)/s],0),this.newFreeDrawOutline(u,t,dr(Ty,this),dr(Wy,this),dr(Py,this),dr(Dy,this))}function Yy(t,e){const n=dr(Ry,this);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+6}function Qy(t,e){const n=dr(Ny,this).subarray(4,6),i=dr(Ny,this).subarray(16,18),[r,s,a,o]=dr(Ty,this),[l,c,u,h]=ur(zy,this,Vy).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-s)/o],e),e+24}var $y={_:8},Jy={_:$y._+2},Zy=new WeakMap,tb=new WeakMap,eb=new WeakMap,nb=new WeakMap,ib=new WeakMap,rb=new WeakMap,sb=new WeakMap,ab=new WeakSet;class ob extends My{constructor(t,e,n,i,r,s){super(),lr(this,ab),cr(this,Zy,void 0),cr(this,tb,new Float32Array(4)),cr(this,eb,void 0),cr(this,nb,void 0),cr(this,ib,void 0),cr(this,rb,void 0),cr(this,sb,void 0),pr(sb,this,t),pr(ib,this,e),pr(Zy,this,n),pr(rb,this,i),pr(eb,this,r),pr(nb,this,s),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],ur(ab,this,lb).call(this,s);const[a,o,l,c]=dr(tb,this);for(let u=0,h=t.length;u<h;u+=2)t[u]=(t[u]-a)/l,t[u+1]=(t[u+1]-o)/c;for(let u=0,h=e.length;u<h;u+=2)e[u]=(e[u]-a)/l,e[u+1]=(e[u+1]-o)/c}toSVGPath(){const t=["M".concat(dr(sb,this)[4]," ").concat(dr(sb,this)[5])];for(let e=6,n=dr(sb,this).length;e<n;e+=6)isNaN(dr(sb,this)[e])?t.push("L".concat(dr(sb,this)[e+4]," ").concat(dr(sb,this)[e+5])):t.push("C".concat(dr(sb,this)[e]," ").concat(dr(sb,this)[e+1]," ").concat(dr(sb,this)[e+2]," ").concat(dr(sb,this)[e+3]," ").concat(dr(sb,this)[e+4]," ").concat(dr(sb,this)[e+5]));return t.push("Z"),t.join(" ")}serialize(t,e){let[n,i,r,s]=t;const a=r-n,o=s-i;let l,c;switch(e){case 0:l=My._rescale(dr(sb,this),n,s,a,-o),c=My._rescale(dr(ib,this),n,s,a,-o);break;case 90:l=My._rescaleAndSwap(dr(sb,this),n,i,a,o),c=My._rescaleAndSwap(dr(ib,this),n,i,a,o);break;case 180:l=My._rescale(dr(sb,this),r,i,-a,o),c=My._rescale(dr(ib,this),r,i,-a,o);break;case 270:l=My._rescaleAndSwap(dr(sb,this),r,s,-a,-o),c=My._rescaleAndSwap(dr(ib,this),r,s,-a,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return dr(tb,this)}newOutliner(t,e,n,i,r){return new Hy(t,e,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(t,e){const[n,i,r,s]=dr(tb,this),[a,o,l,c]=dr(Zy,this),u=r*l,h=s*c,d=n*l+a,p=i*c+o,f=this.newOutliner({x:dr(ib,this)[0]*u+d,y:dr(ib,this)[1]*h+p},dr(Zy,this),dr(rb,this),t,dr(nb,this),null!==e&&void 0!==e?e:dr(eb,this));for(let g=2;g<dr(ib,this).length;g+=2)f.add({x:dr(ib,this)[g]*u+d,y:dr(ib,this)[g+1]*h+p});return f.getOutlines()}}function lb(t){const e=dr(sb,this);let n=e[4],i=e[5];const r=[n,i,n,i];let s=n,a=i,o=n,l=i;const c=t?Math.max:Math.min,u=new Float32Array(4);for(let d=6,p=e.length;d<p;d+=6){const t=e[d+4],h=e[d+5];isNaN(e[d])?(Ls.pointBoundingBox(t,h,r),a>h?(s=t,a=h):a===h&&(s=c(s,t)),l<h?(o=t,l=h):l===h&&(o=c(o,t))):(u[0]=u[1]=1/0,u[2]=u[3]=-1/0,Ls.bezierBoundingBox(n,i,...e.slice(d,d+6),u),Ls.rectBoundingBox(u[0],u[1],u[2],u[3],r),a>u[1]?(s=u[0],a=u[1]):a===u[1]&&(s=c(s,u[0])),l<u[3]?(o=u[2],l=u[3]):l===u[3]&&(o=c(o,u[2]))),n=t,i=h}const h=dr(tb,this);h[0]=r[0]-dr(eb,this),h[1]=r[1]-dr(eb,this),h[2]=r[2]-r[0]+2*dr(eb,this),h[3]=r[3]-r[1]+2*dr(eb,this),this.firstPoint=[s,a],this.lastPoint=[o,l]}var cb=new WeakMap,ub=new WeakMap,hb=new WeakMap,db=new WeakMap,pb=new WeakMap,fb=new WeakSet;class gb{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];lr(this,fb),cr(this,cb,void 0),cr(this,ub,void 0),cr(this,hb,void 0),cr(this,db,[]),cr(this,pb,[]);const r=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:f,y:g,width:m,height:v}of t){const t=Math.floor((f-e)/s)*s,n=Math.ceil((f+m+e)/s)*s,i=Math.floor((g-e)/s)*s,a=Math.ceil((g+v+e)/s)*s,o=[t,i,a,!0],l=[n,i,a,!1];dr(db,this).push(o,l),Ls.rectBoundingBox(t,i,n,a,r)}const a=r[2]-r[0]+2*n,o=r[3]-r[1]+2*n,l=r[0]-n,c=r[1]-n;let u=i?-1/0:1/0,h=1/0;const d=dr(db,this).at(i?-1:-2),p=[d[0],d[2]];for(const f of dr(db,this)){const[t,e,n,r]=f;!r&&i?e<h?(h=e,u=t):e===h&&(u=Math.max(u,t)):r&&!i&&(e<h?(h=e,u=t):e===h&&(u=Math.min(u,t))),f[0]=(t-l)/a,f[1]=(e-c)/o,f[2]=(n-c)/o}pr(cb,this,new Float32Array([l,c,a,o])),pr(ub,this,[u,h]),pr(hb,this,p)}getOutlines(){dr(db,this).sort((t,e)=>t[0]-e[0]||t[1]-e[1]||t[2]-e[2]);const t=[];for(const e of dr(db,this))e[3]?(t.push(...ur(fb,this,wb).call(this,e)),ur(fb,this,yb).call(this,e)):(ur(fb,this,bb).call(this,e),t.push(...ur(fb,this,wb).call(this,e)));return ur(fb,this,mb).call(this,t)}}function mb(t){const e=[],n=new Set;for(const s of t){const[t,n,i]=s;e.push([t,n,s],[t,i,s])}e.sort((t,e)=>t[1]-e[1]||t[0]-e[0]);for(let s=0,a=e.length;s<a;s+=2){const t=e[s][2],i=e[s+1][2];t.push(i),i.push(t),n.add(t),n.add(i)}const i=[];let r;for(;n.size>0;){const t=n.values().next().value;let[e,s,a,o,l]=t;n.delete(t);let c=e,u=s;for(r=[e,a],i.push(r);;){let t;if(n.has(o))t=o;else{if(!n.has(l))break;t=l}n.delete(t),[e,s,a,o,l]=t,c!==e&&(r.push(c,u,e,u===s?s:a),c=e),u=u===s?a:s}r.push(c,u)}return new kb(i,dr(cb,this),dr(ub,this),dr(hb,this))}function vb(t){const e=dr(pb,this);let n=0,i=e.length-1;for(;n<=i;){const r=n+i>>1,s=e[r][0];if(s===t)return r;s<t?n=r+1:i=r-1}return i+1}function yb(t){let[,e,n]=t;const i=ur(fb,this,vb).call(this,e);dr(pb,this).splice(i,0,[e,n])}function bb(t){let[,e,n]=t;const i=ur(fb,this,vb).call(this,e);for(let r=i;r<dr(pb,this).length;r++){const[t,i]=dr(pb,this)[r];if(t!==e)break;if(t===e&&i===n)return void dr(pb,this).splice(r,1)}for(let r=i-1;r>=0;r--){const[t,i]=dr(pb,this)[r];if(t!==e)break;if(t===e&&i===n)return void dr(pb,this).splice(r,1)}}function wb(t){const[e,n,i]=t,r=[[e,n,i]],s=ur(fb,this,vb).call(this,i);for(let a=0;a<s;a++){const[t,n]=dr(pb,this)[a];for(let i=0,s=r.length;i<s;i++){const[,a,o]=r[i];if(!(n<=a||o<=t))if(a>=t)if(o>n)r[i][1]=n;else{if(1===s)return[];r.splice(i,1),i--,s--}else r[i][2]=t,o>n&&r.push([e,n,o])}}return r}var xb=new WeakMap,_b=new WeakMap;class kb extends My{constructor(t,e,n,i){super(),cr(this,xb,void 0),cr(this,_b,void 0),pr(_b,this,t),pr(xb,this,e),this.firstPoint=n,this.lastPoint=i}toSVGPath(){const t=[];for(const e of dr(_b,this)){let[n,i]=e;t.push("M".concat(n," ").concat(i));for(let r=2;r<e.length;r+=2){const s=e[r],a=e[r+1];s===n?(t.push("V".concat(a)),i=a):a===i&&(t.push("H".concat(s)),n=s)}t.push("Z")}return t.join(" ")}serialize(t,e){let[n,i,r,s]=t;const a=[],o=r-n,l=s-i;for(const c of dr(_b,this)){const t=new Array(c.length);for(let e=0;e<c.length;e+=2)t[e]=n+c[e]*o,t[e+1]=s-c[e+1]*l;a.push(t)}return a}get box(){return dr(xb,this)}get classNamesForOutlining(){return["highlightOutline"]}}class Ab extends Hy{newFreeDrawOutline(t,e,n,i,r,s){return new Sb(t,e,n,i,r,s)}}class Sb extends ob{newOutliner(t,e,n,i,r){return new Ab(t,e,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var Eb=new WeakMap,Cb=new WeakMap,Mb=new WeakMap,Tb=new WeakMap,Rb=new WeakMap,Pb=new WeakMap,Db=new WeakMap,Lb=new WeakMap,Nb=new WeakMap,Ib=new WeakMap,Fb=new WeakMap,Ob=new WeakMap,Bb=new WeakMap,Wb=new WeakMap,jb=new WeakMap,Ub=new WeakMap,zb=new WeakMap,Hb=new WeakMap,Vb=new WeakSet;class Gb extends Hc{static get _keyboardManager(){const t=Gb.prototype;return xs(this,"_keyboardManager",new eo([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super(d(d({},t),{},{name:"highlightEditor"})),lr(this,Vb),cr(this,Eb,null),cr(this,Cb,0),cr(this,Mb,void 0),cr(this,Tb,null),cr(this,Rb,null),cr(this,Pb,null),cr(this,Db,null),cr(this,Lb,0),cr(this,Nb,null),cr(this,Ib,null),cr(this,Fb,null),cr(this,Ob,!1),cr(this,Bb,null),cr(this,Wb,null),cr(this,jb,null),cr(this,Ub,""),cr(this,zb,void 0),cr(this,Hb,""),this.color=t.color||Gb._defaultColor,pr(zb,this,t.thickness||Gb._defaultThickness),this.opacity=t.opacity||Gb._defaultOpacity,pr(Mb,this,t.boxes||null),pr(Hb,this,t.methodOfCreation||""),pr(Ub,this,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(pr(Ob,this,!0),ur(Vb,this,Xb).call(this,t),ur(Vb,this,Jb).call(this)):dr(Mb,this)&&(pr(Eb,this,t.anchorNode),pr(Cb,this,t.anchorOffset),pr(Db,this,t.focusNode),pr(Lb,this,t.focusOffset),ur(Vb,this,qb).call(this),ur(Vb,this,Jb).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:dr(Ob,this)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:dr(zb,this),methodOfCreation:dr(Hb,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,e){var n;Hc.initialize(t,e),Gb._defaultColor||(Gb._defaultColor=(null===(n=e.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(t,e){switch(t){case qr.HIGHLIGHT_COLOR:Gb._defaultColor=e;break;case qr.HIGHLIGHT_THICKNESS:Gb._defaultThickness=e}}translateInPage(t,e){}get toolbarPosition(){return dr(Wb,this)}get commentButtonPosition(){return dr(Bb,this)}updateParams(t,e){switch(t){case qr.HIGHLIGHT_COLOR:ur(Vb,this,Kb).call(this,e);break;case qr.HIGHLIGHT_THICKNESS:ur(Vb,this,Yb).call(this,e)}}static get defaultPropertiesToUpdate(){return[[qr.HIGHLIGHT_COLOR,Gb._defaultColor],[qr.HIGHLIGHT_THICKNESS,Gb._defaultThickness]]}get propertiesToUpdate(){return[[qr.HIGHLIGHT_COLOR,this.color||Gb._defaultColor],[qr.HIGHLIGHT_THICKNESS,dr(zb,this)||Gb._defaultThickness],[qr.HIGHLIGHT_FREE,dr(Ob,this)]]}onUpdatedColor(){var t,e;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(dr(Fb,this),{root:{fill:this.color,"fill-opacity":this.opacity}}),null===(e=dr(Rb,this))||void 0===e||e.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){if(this._uiManager.highlightColors){return[["colorPicker",pr(Rb,this,new tm({editor:this}))]]}return super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(ur(Vb,this,nw).call(this))}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,ur(Vb,this,nw).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){ur(Vb,this,$b).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(ur(Vb,this,Jb).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;if(this.parent&&!t)ur(Vb,this,$b).call(this);else if(t){var n;ur(Vb,this,Jb).call(this,t),e=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(t),this.show(this._isVisible),e&&this.select()}rotate(t){const{drawLayer:e}=this.parent;let n;dr(Ob,this)?(t=(t-this.rotation+360)%360,n=Zb.call(Gb,dr(Ib,this).box,t)):n=Zb.call(Gb,[this.x,this.y,this.width,this.height],t),e.updateProperties(dr(Fb,this),{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(dr(jb,this),{bbox:Zb.call(Gb,dr(Pb,this).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();dr(Ub,this)&&(t.setAttribute("aria-label",dr(Ub,this)),t.setAttribute("role","mark")),dr(Ob,this)?t.classList.add("free"):this.div.addEventListener("keydown",ur(Vb,this,tw).bind(this),{signal:this._uiManager._signal});const e=pr(Nb,this,document.createElement("div"));return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=dr(Tb,this),this.setDims(this.width,this.height),ja(this,dr(Nb,this),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(dr(jb,this),{rootClass:{hovered:!0}}))}pointerleave(){var t;this.isSelected||(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(dr(jb,this),{rootClass:{hovered:!1}}))}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:ur(Vb,this,ew).call(this,!0);break;case 1:case 3:ur(Vb,this,ew).call(this,!1)}}select(){var t;super.select(),dr(jb,this)&&(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(dr(jb,this),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),dr(jb,this)&&(null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(dr(jb,this),{rootClass:{selected:!1}}),dr(Ob,this)||ur(Vb,this,ew).call(this,!1))}get _mustFixPosition(){return!dr(Ob,this)}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(dr(Fb,this),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(dr(jb,this),{rootClass:{hidden:!t}}))}static startHighlighting(t,e,n){let{target:i,x:r,y:s}=n;const{x:a,y:o,width:l,height:c}=i.getBoundingClientRect(),u=new AbortController,h=t.combinedSignal(u),d=e=>{u.abort(),ur(Gb,this,aw).call(this,t,e)};window.addEventListener("blur",d,{signal:h}),window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("pointerdown",ta,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",Zs,{signal:h}),i.addEventListener("pointermove",ur(Gb,this,sw).bind(this,t),{signal:h}),this._freeHighlight=new Ab({x:r,y:s},[a,o,l,c],t.scale,this._defaultThickness/2,e,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(t,e,n){let i=null;if(t instanceof Xv){const{data:{quadPoints:e,rect:n,rotation:r,id:s,color:a,opacity:o,popupRef:l,richText:c,contentsObj:u,creationDate:h,modificationDate:d},parent:{page:{pageNumber:p}}}=t;i=t={annotationType:Gr.HIGHLIGHT,color:Array.from(a),opacity:o,quadPoints:e,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:l,richText:c,comment:(null===u||void 0===u?void 0:u.str)||null,creationDate:h,modificationDate:d}}else if(t instanceof Gv){const{data:{inkLists:e,rect:n,rotation:r,id:s,color:a,borderStyle:{rawWidth:o},popupRef:l,richText:c,contentsObj:u,creationDate:h,modificationDate:d},parent:{page:{pageNumber:p}}}=t;i=t={annotationType:Gr.HIGHLIGHT,color:Array.from(a),thickness:o,inkLists:e,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:l,richText:c,comment:(null===u||void 0===u?void 0:u.str)||null,creationDate:h,modificationDate:d}}const{color:r,quadPoints:s,inkLists:a,opacity:o}=t,l=await super.deserialize(t,e,n);l.color=Ls.makeHexColor(...r),l.opacity=o||1,a&&pr(zb,l,t.thickness),l._initialData=i,t.comment&&l.setCommentData(t);const[c,u]=l.pageDimensions,[h,d]=l.pageTranslation;if(s){const t=pr(Mb,l,[]);for(let e=0;e<s.length;e+=8)t.push({x:(s[e]-h)/c,y:1-(s[e+1]-d)/u,width:(s[e+2]-s[e])/c,height:(s[e+1]-s[e+5])/u});ur(Vb,l,qb).call(l),ur(Vb,l,Jb).call(l),l.rotate(l.rotation)}else if(a){pr(Ob,l,!0);const t=a[0],n={x:t[0]-h,y:u-(t[1]-d)},i=new Ab(n,[0,0,c,u],1,dr(zb,l)/2,!0,.001);for(let e=0,a=t.length;e<a;e+=2)n.x=t[e]-h,n.y=u-(t[e+1]-d),i.add(n);const{id:r,clipPathId:s}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:l.color,"fill-opacity":l._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:i.toSVGPath()}},!0,!0);ur(Vb,l,Xb).call(l,{highlightOutlines:i.getOutlines(),highlightId:r,clipPathId:s}),ur(Vb,l,Jb).call(l),l.rotate(l.parentRotation)}return l}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=Hc._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(t);return Object.assign(n,{color:e,opacity:this.opacity,thickness:dr(zb,this),quadPoints:ur(Vb,this,iw).call(this),outlines:ur(Vb,this,rw).call(this,n.rect)}),this.addComment(n),this.annotationElementId&&!ur(Vb,this,ow).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}function qb(){const t=new gb(dr(Mb,this),.001);pr(Ib,this,t.getOutlines()),[this.x,this.y,this.width,this.height]=dr(Ib,this).box;const e=new gb(dr(Mb,this),.0025,.001,"ltr"===this._uiManager.direction);pr(Pb,this,e.getOutlines());const{firstPoint:n}=dr(Ib,this);pr(Bb,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]);const{lastPoint:i}=dr(Pb,this);pr(Wb,this,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])}function Xb(t){let{highlightOutlines:e,highlightId:n,clipPathId:i}=t;pr(Ib,this,e);if(pr(Pb,this,e.getNewOutline(dr(zb,this)/2+1.5,.0025)),n>=0)pr(Fb,this,n),pr(Tb,this,i),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),pr(jb,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:dr(Pb,this).box,path:{d:dr(Pb,this).toSVGPath()}},!0));else if(this.parent){const t=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(dr(Fb,this),{bbox:Zb.call(Mr,dr(Ib,this).box,(t-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(dr(jb,this),{bbox:Zb.call(Mr,dr(Pb,this).box,t),path:{d:dr(Pb,this).toSVGPath()}})}const[r,s,a,o]=e.box;switch(this.rotation){case 0:this.x=r,this.y=s,this.width=a,this.height=o;break;case 90:{const[t,e]=this.parentDimensions;this.x=s,this.y=1-r,this.width=a*e/t,this.height=o*t/e;break}case 180:this.x=1-r,this.y=1-s,this.width=a,this.height=o;break;case 270:{const[t,e]=this.parentDimensions;this.x=1-s,this.y=r,this.width=a*e/t,this.height=o*t/e;break}}const{firstPoint:l}=e;pr(Bb,this,[(l[0]-r)/a,(l[1]-s)/o]);const{lastPoint:c}=dr(Pb,this);pr(Wb,this,[(c[0]-r)/a,(c[1]-s)/o])}function Kb(t){const e=(t,e)=>{this.color=t,this.opacity=e,this.onUpdatedColor()},n=this.color,i=this.opacity;this.addCommands({cmd:e.bind(this,t,Mr._defaultOpacity),undo:e.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qr.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}function Yb(t){const e=dr(zb,this),n=t=>{pr(zb,this,t),ur(Vb,this,Qb).call(this,t)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qr.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}function Qb(t){dr(Ob,this)&&(ur(Vb,this,Xb).call(this,{highlightOutlines:dr(Ib,this).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}function $b(){null!==dr(Fb,this)&&this.parent&&(this.parent.drawLayer.remove(dr(Fb,this)),pr(Fb,this,null),this.parent.drawLayer.remove(dr(jb,this)),pr(jb,this,null))}function Jb(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===dr(Fb,this)&&(({id:ar(pr,[Fb,this])._,clipPathId:ar(pr,[Tb,this])._}=t.drawLayer.draw({bbox:dr(Ib,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:dr(Ob,this)},path:{d:dr(Ib,this).toSVGPath()}},!1,!0)),pr(jb,this,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:dr(Ob,this)},bbox:dr(Pb,this).box,path:{d:dr(Pb,this).toSVGPath()}},dr(Ob,this))),dr(Nb,this)&&(dr(Nb,this).style.clipPath=dr(Tb,this)))}function Zb(t,e){let[n,i,r,s]=t;switch(e){case 90:return[1-i-s,n,s,r];case 180:return[1-n-r,1-i-s,r,s];case 270:return[i,1-n-r,s,r]}return[n,i,r,s]}function tw(t){Mr._keyboardManager.exec(this,t)}function ew(t){if(!dr(Eb,this))return;const e=window.getSelection();t?e.setPosition(dr(Eb,this),dr(Cb,this)):e.setPosition(dr(Db,this),dr(Lb,this))}function nw(){return dr(Ob,this)?this.rotation:0}function iw(){if(dr(Ob,this))return null;const[t,e]=this.pageDimensions,[n,i]=this.pageTranslation,r=dr(Mb,this),s=new Float32Array(8*r.length);let a=0;for(const{x:o,y:l,width:c,height:u}of r){const r=o*t+n,h=(1-l)*e+i;s[a]=s[a+4]=r,s[a+1]=s[a+3]=h,s[a+2]=s[a+6]=r+c*t,s[a+5]=s[a+7]=h-u*e,a+=8}return s}function rw(t){return dr(Ib,this).serialize(t,ur(Vb,this,nw).call(this))}function sw(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function aw(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function ow(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((t,n)=>t!==e[n])}Mr=Gb,u(Gb,"_defaultColor",null),u(Gb,"_defaultOpacity",1),u(Gb,"_defaultThickness",12),u(Gb,"_type","highlight"),u(Gb,"_editorType",Gr.HIGHLIGHT),u(Gb,"_freeHighlightId",-1),u(Gb,"_freeHighlight",null),u(Gb,"_freeHighlightClipId","");var lw=new WeakMap;class cw{constructor(){cr(this,lw,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){dr(lw,this)[t]=e}toSVGProperties(){const t=dr(lw,this);return pr(lw,this,Object.create(null)),{root:t}}reset(){pr(lw,this,Object.create(null))}updateAll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(t)}clone(){vs("Not implemented")}}var uw=new WeakMap,hw=new WeakMap,dw=new WeakSet;class pw extends Hc{constructor(t){super(t),lr(this,dw),cr(this,uw,null),cr(this,hw,void 0),u(this,"_colorPicker",null),u(this,"_drawId",null),pr(hw,this,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;null===(t=this._colorPicker)||void 0===t||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(ur(dw,this,fw).call(this,t),ur(dw,this,vw).call(this))}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[i,r]of Object.entries(e))n.has(i)?Object.assign(t[i],r):t[i]=r;return t}static getDefaultDrawingOptions(t){vs("Not implemented")}static get typesMap(){vs("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(_w._.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)t.push([n,e[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,i]of this.constructor.typesMap)t.push([n,e[i]]);return t}_updateProperty(t,e,n){const i=this._drawingOptions,r=i[e],s=n=>{var r;i.updateProperty(e,n);const s=dr(uw,this).updateProperty(e,n);s&&ur(dw,this,ww).call(this,s),null===(r=this.parent)||void 0===r||r.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:s.bind(this,n),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,pw._mergeSVGProperties(dr(uw,this).getPathResizingSVGProperties(ur(dw,this,bw).call(this)),{bbox:ur(dw,this,xw).call(this)}))}_onResized(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,pw._mergeSVGProperties(dr(uw,this).getPathResizedSVGProperties(ur(dw,this,bw).call(this)),{bbox:ur(dw,this,xw).call(this)}))}_onTranslating(t,e){var n;null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,{bbox:ur(dw,this,xw).call(this)})}_onTranslated(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,pw._mergeSVGProperties(dr(uw,this).getPathTranslatedSVGProperties(ur(dw,this,bw).call(this),this.parentDimensions),{bbox:ur(dw,this,xw).call(this)}))}_onStartDragging(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;null===(t=this.parent)||void 0===t||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,dr(hw,this)&&(pr(hw,this,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){ur(dw,this,mw).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(ur(dw,this,vw).call(this),ur(dw,this,ww).call(this,dr(uw,this).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;if(this.parent&&!t)this._uiManager.removeShouldRescale(this),ur(dw,this,mw).call(this);else if(t){var n;this._uiManager.addShouldRescale(this),ur(dw,this,vw).call(this,t),e=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(t),e&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,pw._mergeSVGProperties({bbox:ur(dw,this,xw).call(this)},dr(uw,this).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&ur(dw,this,ww).call(this,dr(uw,this).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");return n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,i,r){vs("Not implemented")}static startDrawing(t,e,n,i){var r,s;const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:u}=i;if(Ew._&&Ew._!==u)return;const{viewport:{rotation:h}}=t,{width:d,height:p}=a.getBoundingClientRect(),f=kw._=new AbortController,g=t.combinedSignal(f);Sw._||(Sw._=c),null!==(r=Ew._)&&void 0!==r||(Ew._=u),window.addEventListener("pointerup",t=>{var e;Sw._===t.pointerId?this._endDraw(t):null===(e=Cw._)||void 0===e||e.delete(t.pointerId)},{signal:g}),window.addEventListener("pointercancel",t=>{var e;Sw._===t.pointerId?this._currentParent.endDrawingSession():null===(e=Cw._)||void 0===e||e.delete(t.pointerId)},{signal:g}),window.addEventListener("pointerdown",t=>{Ew._===t.pointerType&&((Cw._||(Cw._=new Set)).add(t.pointerId),_w._.isCancellable()&&(_w._.removeLastElement(),_w._.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Zs,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",t=>{t.timeStamp===Mw._&&ta(t)},{signal:g}),t.toggleDrawing(),null===(s=e._editorUndoBar)||void 0===s||s.hide(),_w._?t.drawLayer.updateProperties(this._currentDrawId,_w._.startNew(o,l,d,p,h)):(e.updateUIForDefaultProperties(this),_w._=this.createDrawerInstance(o,l,d,p,h),Aw._=this.getDefaultDrawingOptions(),this._currentParent=t,({id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Aw._.toSVGProperties(),_w._.defaultSVGProperties),!0,!1)))}static _drawMove(t){var e;if(Mw._=-1,!_w._)return;const{offsetX:n,offsetY:i,pointerId:r}=t;Sw._===r&&((null===(e=Cw._)||void 0===e?void 0:e.size)>=1?this._endDraw(t):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,_w._.add(n,i)),Mw._=t.timeStamp,ta(t)))}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,_w._=null,Aw._=null,Ew._=null,Mw._=NaN),kw._&&(kw._.abort(),kw._=null,Sw._=NaN,Cw._=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),(null===t||void 0===t?void 0:t.target)===e.div&&e.drawLayer.updateProperties(this._currentDrawId,_w._.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const t=_w._,n=this._currentDrawId,i=t.getLastElement();return void e.addCommands({cmd:()=>{e.drawLayer.updateProperties(n,t.setLastElement(i))},undo:()=>{e.drawLayer.updateProperties(n,t.removeLastElement())},mustExec:!1,type:qr.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(qr.DRAW_STEP),!_w._.isEmpty()){const{pageDimensions:[n,i],scale:r}=e,s=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:_w._.getOutlines(n*r,i*r,r,this._INNER_MARGIN),drawingOptions:Aw._,mustBeCommitted:!t});return this._cleanup(!0),s}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,i,r,s){vs("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}=e.viewport,o=this.deserializeDraw(s,a,i,r,this._INNER_MARGIN,t),l=await super.deserialize(t,e,n);return l.createDrawingOptions(t),ur(dw,l,fw).call(l,{drawOutlines:o}),ur(dw,l,vw).call(l),l.onScaleChanging(),l.rotate(),l}serializeDraw(t){const[e,n]=this.pageTranslation,[i,r]=this.pageDimensions;return dr(uw,this).serialize([e,n,i,r],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}function fw(t){let{drawOutlines:e,drawId:n,drawingOptions:i}=t;pr(uw,this,e),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-".concat(this.editorType,"-added-alert")),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=ur(dw,this,gw).call(this,e,this.parent),ur(dw,this,ww).call(this,e.box)}function gw(t,e){const{id:n}=e.drawLayer.draw(Tr._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}function mw(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function vw(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null!==this._drawId&&this.parent===t||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=ur(dw,this,gw).call(this,dr(uw,this),t)):this.parent.drawLayer.updateParent(this._drawId,t.drawLayer))}function yw(t){let[e,n,i,r]=t;const{parentDimensions:[s,a],rotation:o}=this;switch(o){case 90:return[n,1-e,i*(a/s),r*(s/a)];case 180:return[1-e,1-n,i,r];case 270:return[1-n,e,i*(a/s),r*(s/a)];default:return[e,n,i,r]}}function bw(){const{x:t,y:e,width:n,height:i,parentDimensions:[r,s],rotation:a}=this;switch(a){case 90:return[1-e,t,n*(r/s),i*(s/r)];case 180:return[1-t,1-e,n,i];case 270:return[e,1-t,n*(r/s),i*(s/r)];default:return[t,e,n,i]}}function ww(t){[this.x,this.y,this.width,this.height]=ur(dw,this,yw).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}function xw(){const{x:t,y:e,width:n,height:i,rotation:r,parentRotation:s,parentDimensions:[a,o]}=this;switch((4*r+s)/90){case 1:return[1-e-i,t,i,n];case 2:return[1-t-n,1-e-i,n,i];case 3:return[e,1-t-n,i,n];case 4:return[t,e-n*(a/o),i*(o/a),n*(a/o)];case 5:return[1-e,t,n*(a/o),i*(o/a)];case 6:return[1-t-i*(o/a),1-e,i*(o/a),n*(a/o)];case 7:return[e-n*(a/o),1-t-i*(o/a),n*(a/o),i*(o/a)];case 8:return[t-n,e-i,n,i];case 9:return[1-e,t-n,i,n];case 10:return[1-t,1-e,n,i];case 11:return[e-i,1-t,i,n];case 12:return[t-i*(o/a),e,i*(o/a),n*(a/o)];case 13:return[1-e-n*(a/o),t-i*(o/a),n*(a/o),i*(o/a)];case 14:return[1-t,1-e-n*(a/o),i*(o/a),n*(a/o)];case 15:return[e,1-t,n*(a/o),i*(o/a)];default:return[t,e,n,i]}}Tr=pw,u(pw,"_currentDrawId",-1),u(pw,"_currentParent",null);var _w={_:null},kw={_:null},Aw={_:null},Sw={_:NaN},Ew={_:null},Cw={_:null},Mw={_:NaN};u(pw,"_INNER_MARGIN",3);var Tw=new WeakMap,Rw=new WeakMap,Pw=new WeakMap,Dw=new WeakMap,Lw=new WeakMap,Nw=new WeakMap,Iw=new WeakMap,Fw=new WeakMap,Ow=new WeakMap,Bw=new WeakMap,Ww=new WeakMap,jw=new WeakSet;class Uw{constructor(t,e,n,i,r,s){lr(this,jw),cr(this,Tw,new Float64Array(6)),cr(this,Rw,void 0),cr(this,Pw,void 0),cr(this,Dw,void 0),cr(this,Lw,void 0),cr(this,Nw,void 0),cr(this,Iw,""),cr(this,Fw,0),cr(this,Ow,new Zw),cr(this,Bw,void 0),cr(this,Ww,void 0),pr(Bw,this,n),pr(Ww,this,i),pr(Dw,this,r),pr(Lw,this,s),[t,e]=ur(jw,this,zw).call(this,t,e);const a=pr(Rw,this,[NaN,NaN,NaN,NaN,t,e]);pr(Nw,this,[t,e]),pr(Pw,this,[{line:a,points:dr(Nw,this)}]),dr(Tw,this).set(a,0)}updateProperty(t,e){"stroke-width"===t&&pr(Lw,this,e)}isEmpty(){return!dr(Pw,this)||0===dr(Pw,this).length}isCancellable(){return dr(Nw,this).length<=10}add(t,e){[t,e]=ur(jw,this,zw).call(this,t,e);const[n,i,r,s]=dr(Tw,this).subarray(2,6),a=t-r,o=e-s;return Math.hypot(dr(Bw,this)*a,dr(Ww,this)*o)<=2?null:(dr(Nw,this).push(t,e),isNaN(n)?(dr(Tw,this).set([r,s,t,e],2),dr(Rw,this).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(dr(Tw,this)[0])&&dr(Rw,this).splice(6,6),dr(Tw,this).set([n,i,r,s,t,e],0),dr(Rw,this).push(...My.createBezierPoints(n,i,r,s,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(2===dr(Nw,this).length?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,r){pr(Bw,this,n),pr(Ww,this,i),pr(Dw,this,r),[t,e]=ur(jw,this,zw).call(this,t,e);const s=pr(Rw,this,[NaN,NaN,NaN,NaN,t,e]);pr(Nw,this,[t,e]);const a=dr(Pw,this).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),dr(Pw,this).push({line:s,points:dr(Nw,this)}),dr(Tw,this).set(s,0),pr(Fw,this,0),this.toSVGPath(),null}getLastElement(){return dr(Pw,this).at(-1)}setLastElement(t){return dr(Pw,this)?(dr(Pw,this).push(t),pr(Rw,this,t.line),pr(Nw,this,t.points),pr(Fw,this,0),{path:{d:this.toSVGPath()}}):dr(Ow,this).setLastElement(t)}removeLastElement(){if(!dr(Pw,this))return dr(Ow,this).removeLastElement();dr(Pw,this).pop(),pr(Iw,this,"");for(let t=0,e=dr(Pw,this).length;t<e;t++){const{line:e,points:n}=dr(Pw,this)[t];pr(Rw,this,e),pr(Nw,this,n),pr(Fw,this,0),this.toSVGPath()}return{path:{d:dr(Iw,this)}}}toSVGPath(){const t=My.svgRound(dr(Rw,this)[4]),e=My.svgRound(dr(Rw,this)[5]);if(2===dr(Nw,this).length)return pr(Iw,this,"".concat(dr(Iw,this)," M ").concat(t," ").concat(e," Z")),dr(Iw,this);if(dr(Nw,this).length<=6){const n=dr(Iw,this).lastIndexOf("M");pr(Iw,this,"".concat(dr(Iw,this).slice(0,n)," M ").concat(t," ").concat(e)),pr(Fw,this,6)}if(4===dr(Nw,this).length){const t=My.svgRound(dr(Rw,this)[10]),e=My.svgRound(dr(Rw,this)[11]);return pr(Iw,this,"".concat(dr(Iw,this)," L ").concat(t," ").concat(e)),pr(Fw,this,12),dr(Iw,this)}const n=[];0===dr(Fw,this)&&(n.push("M ".concat(t," ").concat(e)),pr(Fw,this,6));for(let i=dr(Fw,this),r=dr(Rw,this).length;i<r;i+=6){const[t,e,r,s,a,o]=dr(Rw,this).slice(i,i+6).map(My.svgRound);n.push("C".concat(t," ").concat(e," ").concat(r," ").concat(s," ").concat(a," ").concat(o))}return pr(Iw,this,dr(Iw,this)+n.join(" ")),pr(Fw,this,dr(Rw,this).length),dr(Iw,this)}getOutlines(t,e,n,i){const r=dr(Pw,this).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),dr(Ow,this).build(dr(Pw,this),t,e,n,dr(Dw,this),dr(Lw,this),i),pr(Tw,this,null),pr(Rw,this,null),pr(Pw,this,null),pr(Iw,this,null),dr(Ow,this)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}function zw(t,e){return My._normalizePoint(t,e,dr(Bw,this),dr(Ww,this),dr(Dw,this))}var Hw=new WeakMap,Vw=new WeakMap,Gw=new WeakMap,qw=new WeakMap,Xw=new WeakMap,Kw=new WeakMap,Yw=new WeakMap,Qw=new WeakMap,$w=new WeakMap,Jw=new WeakSet;class Zw extends My{constructor(){super(...arguments),lr(this,Jw),cr(this,Hw,void 0),cr(this,Vw,0),cr(this,Gw,void 0),cr(this,qw,void 0),cr(this,Xw,void 0),cr(this,Kw,void 0),cr(this,Yw,void 0),cr(this,Qw,void 0),cr(this,$w,void 0)}build(t,e,n,i,r,s,a){pr(Xw,this,e),pr(Kw,this,n),pr(Yw,this,i),pr(Qw,this,r),pr($w,this,s),pr(Gw,this,null!==a&&void 0!==a?a:0),pr(qw,this,t),ur(Jw,this,nx).call(this)}get thickness(){return dr($w,this)}setLastElement(t){return dr(qw,this).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return dr(qw,this).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of dr(qw,this))if(t.push("M".concat(My.svgRound(e[4])," ").concat(My.svgRound(e[5]))),6!==e.length)if(12===e.length&&isNaN(e[6]))t.push("L".concat(My.svgRound(e[10])," ").concat(My.svgRound(e[11])));else for(let n=6,i=e.length;n<i;n+=6){const[i,r,s,a,o,l]=e.subarray(n,n+6).map(My.svgRound);t.push("C".concat(i," ").concat(r," ").concat(s," ").concat(a," ").concat(o," ").concat(l))}else t.push("Z");return t.join("")}serialize(t,e){let[n,i,r,s]=t;const a=[],o=[],[l,c,u,h]=ur(Jw,this,ex).call(this);let d,p,f,g,m,v,y,b,w;switch(dr(Qw,this)){case 0:w=My._rescale,d=n,p=i+s,f=r,g=-s,m=n+l*r,v=i+(1-c-h)*s,y=n+(l+u)*r,b=i+(1-c)*s;break;case 90:w=My._rescaleAndSwap,d=n,p=i,f=r,g=s,m=n+c*r,v=i+l*s,y=n+(c+h)*r,b=i+(l+u)*s;break;case 180:w=My._rescale,d=n+r,p=i,f=-r,g=s,m=n+(1-l-u)*r,v=i+c*s,y=n+(1-l)*r,b=i+(c+h)*s;break;case 270:w=My._rescaleAndSwap,d=n+r,p=i+s,f=-r,g=-s,m=n+(1-c-h)*r,v=i+(1-l-u)*s,y=n+(1-c)*r,b=i+(1-l)*s}for(const{line:x,points:_}of dr(qw,this))a.push(w(x,d,p,f,g,e?new Array(x.length):null)),o.push(w(_,d,p,f,g,e?new Array(_.length):null));return{lines:a,points:o,rect:[m,v,y,b]}}static deserialize(t,e,n,i,r,s){let{paths:{lines:a,points:o},rotation:l,thickness:c}=s;const u=[];let h,d,p,f,g;switch(l){case 0:g=My._rescale,h=-t/n,d=e/i+1,p=1/n,f=-1/i;break;case 90:g=My._rescaleAndSwap,h=-e/i,d=-t/n,p=1/i,f=1/n;break;case 180:g=My._rescale,h=t/n+1,d=-e/i,p=-1/n,f=1/i;break;case 270:g=My._rescaleAndSwap,h=e/i+1,d=t/n+1,p=-1/i,f=-1/n}if(!a){a=[];for(const t of o){const e=t.length;if(2===e){a.push(new Float32Array([NaN,NaN,NaN,NaN,t[0],t[1]]));continue}if(4===e){a.push(new Float32Array([NaN,NaN,NaN,NaN,t[0],t[1],NaN,NaN,NaN,NaN,t[2],t[3]]));continue}const n=new Float32Array(3*(e-2));a.push(n);let[i,r,s,o]=t.subarray(0,4);n.set([NaN,NaN,NaN,NaN,i,r],0);for(let a=4;a<e;a+=2){const e=t[a],l=t[a+1];n.set(My.createBezierPoints(i,r,s,o,e,l),3*(a-2)),[i,r,s,o]=[s,o,e,l]}}}for(let v=0,y=a.length;v<y;v++)u.push({line:g(a[v].map(t=>null!==t&&void 0!==t?t:NaN),h,d,p,f),points:g(o[v].map(t=>null!==t&&void 0!==t?t:NaN),h,d,p,f)});const m=new this.prototype.constructor;return m.build(u,n,i,1,l,c,r),m}get box(){return dr(Hw,this)}updateProperty(t,e){return"stroke-width"===t?ur(Jw,this,ix).call(this,e):null}updateParentDimensions(t,e){let[n,i]=t;const[r,s]=ur(Jw,this,tx).call(this);pr(Xw,this,n),pr(Kw,this,i),pr(Yw,this,e);const[a,o]=ur(Jw,this,tx).call(this),l=a-r,c=o-s,u=dr(Hw,this);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateRotation(t){return pr(Vw,this,t),{path:{transform:this.rotationTransform}}}get viewBox(){return dr(Hw,this).map(My.svgRound).join(" ")}get defaultProperties(){const[t,e]=dr(Hw,this);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(My.svgRound(t)," ").concat(My.svgRound(e))}}}get rotationTransform(){const[,,t,e]=dr(Hw,this);let n=0,i=0,r=0,s=0,a=0,o=0;switch(dr(Vw,this)){case 90:i=e/t,r=-t/e,a=t;break;case 180:n=-1,s=-1,a=t,o=e;break;case 270:i=-e/t,r=t/e,o=e;break;default:return""}return"matrix(".concat(n," ").concat(i," ").concat(r," ").concat(s," ").concat(My.svgRound(a)," ").concat(My.svgRound(o),")")}getPathResizingSVGProperties(t){let[e,n,i,r]=t;const[s,a]=ur(Jw,this,tx).call(this),[o,l,c,u]=dr(Hw,this);if(Math.abs(c-s)<=My.PRECISION||Math.abs(u-a)<=My.PRECISION){const t=e+i/2-(o+c/2),s=n+r/2-(l+u/2);return{path:{"transform-origin":"".concat(My.svgRound(e)," ").concat(My.svgRound(n)),transform:"".concat(this.rotationTransform," translate(").concat(t," ").concat(s,")")}}}const h=(i-2*s)/(c-2*s),d=(r-2*a)/(u-2*a),p=c/i,f=u/r;return{path:{"transform-origin":"".concat(My.svgRound(o)," ").concat(My.svgRound(l)),transform:"".concat(this.rotationTransform," scale(").concat(p," ").concat(f,") ")+"translate(".concat(My.svgRound(s)," ").concat(My.svgRound(a),") scale(").concat(h," ").concat(d,") ")+"translate(".concat(My.svgRound(-s)," ").concat(My.svgRound(-a),")")}}}getPathResizedSVGProperties(t){let[e,n,i,r]=t;const[s,a]=ur(Jw,this,tx).call(this),o=dr(Hw,this),[l,c,u,h]=o;if(o[0]=e,o[1]=n,o[2]=i,o[3]=r,Math.abs(u-s)<=My.PRECISION||Math.abs(h-a)<=My.PRECISION){const t=e+i/2-(l+u/2),s=n+r/2-(c+h/2);for(const{line:e,points:n}of dr(qw,this))My._translate(e,t,s,e),My._translate(n,t,s,n);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(My.svgRound(e)," ").concat(My.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}const d=(i-2*s)/(u-2*s),p=(r-2*a)/(h-2*a),f=-d*(l+s)+e+s,g=-p*(c+a)+n+a;if(1!==d||1!==p||0!==f||0!==g)for(const{line:m,points:v}of dr(qw,this))My._rescale(m,f,g,d,p,m),My._rescale(v,f,g,d,p,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(My.svgRound(e)," ").concat(My.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(t,e){let[n,i]=t;const[r,s]=e,a=dr(Hw,this),o=n-a[0],l=i-a[1];if(dr(Xw,this)===r&&dr(Kw,this)===s)for(const{line:c,points:u}of dr(qw,this))My._translate(c,o,l,c),My._translate(u,o,l,u);else{const t=dr(Xw,this)/r,e=dr(Kw,this)/s;pr(Xw,this,r),pr(Kw,this,s);for(const{line:n,points:i}of dr(qw,this))My._rescale(n,o,l,t,e,n),My._rescale(i,o,l,t,e,i);a[2]*=t,a[3]*=e}return a[0]=n,a[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(My.svgRound(n)," ").concat(My.svgRound(i))}}}get defaultSVGProperties(){const t=dr(Hw,this);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(My.svgRound(t[0])," ").concat(My.svgRound(t[1])),transform:this.rotationTransform||null},bbox:t}}}function tx(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr($w,this);const e=dr(Gw,this)+t/2*dr(Yw,this);return dr(Qw,this)%180===0?[e/dr(Xw,this),e/dr(Kw,this)]:[e/dr(Kw,this),e/dr(Xw,this)]}function ex(){const[t,e,n,i]=dr(Hw,this),[r,s]=ur(Jw,this,tx).call(this,0);return[t+r,e+s,n-2*r,i-2*s]}function nx(){const t=pr(Hw,this,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of dr(qw,this)){if(i.length<=12){for(let e=4,n=i.length;e<n;e+=6)Ls.pointBoundingBox(i[e],i[e+1],t);continue}let e=i[4],n=i[5];for(let r=6,s=i.length;r<s;r+=6){const[s,a,o,l,c,u]=i.subarray(r,r+6);Ls.bezierBoundingBox(e,n,s,a,o,l,c,u,t),e=c,n=u}}const[e,n]=ur(Jw,this,tx).call(this);t[0]=js(t[0]-e,0,1),t[1]=js(t[1]-n,0,1),t[2]=js(t[2]+e,0,1),t[3]=js(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}function ix(t){const[e,n]=ur(Jw,this,tx).call(this);pr($w,this,t);const[i,r]=ur(Jw,this,tx).call(this),[s,a]=[i-e,r-n],o=dr(Hw,this);return o[0]-=s,o[1]-=a,o[2]+=2*s,o[3]+=2*a,o}class rx extends cw{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Hc._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){"stroke-width"===t&&(null!==e&&void 0!==e||(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new rx(this._viewParameters);return t.updateAll(this),t}}var sx=new WeakSet;class ax extends pw{constructor(t){super(d(d({},t),{},{name:"inkEditor"})),lr(this,sx),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){Hc.initialize(t,e),this._defaultDrawingOptions=new rx(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return xs(this,"typesMap",new Map([[qr.INK_THICKNESS,"stroke-width"],[qr.INK_COLOR,"stroke"],[qr.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,i,r){return new Uw(t,e,n,i,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,i,r,s){return Zw.deserialize(t,e,n,i,r,s)}static async deserialize(t,e,n){let i=null;if(t instanceof Gv){const{data:{inkLists:e,rect:n,rotation:r,id:s,color:a,opacity:o,borderStyle:{rawWidth:l},popupRef:c,richText:u,contentsObj:h,creationDate:d,modificationDate:p},parent:{page:{pageNumber:f}}}=t;i=t={annotationType:Gr.INK,color:Array.from(a),thickness:l,opacity:o,paths:{points:e},boxes:null,pageIndex:f-1,rect:n.slice(0),rotation:r,annotationElementId:s,id:s,deleted:!1,popupRef:c,richText:u,comment:(null===h||void 0===h?void 0:h.str)||null,creationDate:d,modificationDate:p}}const r=await super.deserialize(t,e,n);return r._initialData=i,t.comment&&r.setCommentData(t),r}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new hm(this)),[["colorPicker",this._colorPicker]]}get colorType(){return qr.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(t){let{color:e,thickness:n,opacity:i}=t;this._drawingOptions=ax.getDefaultDrawingOptions({stroke:Ls.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":r,"stroke-width":s}}=this,a=Object.assign(super.serialize(t),{color:Hc._colorManager.convert(i),opacity:r,thickness:s,paths:{lines:e,points:n}});return this.addComment(a),t?(a.isCopy=!0,a):this.annotationElementId&&!ur(sx,this,ox).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}function ox(t){const{color:e,thickness:n,opacity:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((t,n)=>t!==e[n])||t.thickness!==n||t.opacity!==i||t.pageIndex!==r}u(ax,"_type","ink"),u(ax,"_editorType",Gr.INK),u(ax,"_defaultDrawingOptions",null);class lx extends Zw{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}class cx{static extractContoursFromText(t,e,n,i,r,s){let{fontFamily:a,fontStyle:o,fontWeight:l}=e,c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const h=u.font="".concat(o," ").concat(l," ").concat(200,"px ").concat(a),{actualBoundingBoxLeft:d,actualBoundingBoxRight:p,actualBoundingBoxAscent:f,actualBoundingBoxDescent:g,fontBoundingBoxAscent:m,fontBoundingBoxDescent:v,width:y}=u.measureText(t),b=1.5,w=Math.ceil(Math.max(Math.abs(d)+Math.abs(p)||0,y)*b),x=Math.ceil(Math.max(Math.abs(f)+Math.abs(g)||200,Math.abs(m)+Math.abs(v)||200)*b);c=new OffscreenCanvas(w,x),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=h,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,w,x),u.fillStyle="black",u.fillText(t,.5*w/2,1.5*x/2);const _=ur(cx,this,yx).call(this,u.getImageData(0,0,w,x).data),k=ur(cx,this,vx).call(this,_),A=ur(cx,this,bx).call(this,k),S=ur(cx,this,px).call(this,_,w,x,A);return this.processDrawnLines({lines:{curves:S,width:w,height:x},pageWidth:n,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static process(t,e,n,i,r){const[s,a,o]=ur(cx,this,wx).call(this,t),[l,c]=ur(cx,this,mx).call(this,s,a,o,Math.hypot(a,o)*ur(cx,this,xx)._.sigmaSFactor,ur(cx,this,xx)._.sigmaR,ur(cx,this,xx)._.kernelSize),u=ur(cx,this,bx).call(this,c),h=ur(cx,this,px).call(this,l,a,o,u);return this.processDrawnLines({lines:{curves:h,width:a,height:o},pageWidth:e,pageHeight:n,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines(t){var e;let{lines:n,pageWidth:i,pageHeight:r,rotation:s,innerMargin:a,mustSmooth:o,areContours:l}=t;s%180!==0&&([i,r]=[r,i]);const{curves:c,width:u,height:h}=n,d=null!==(e=n.thickness)&&void 0!==e?e:0,p=[],f=Math.min(i/u,r/h),g=f/i,m=f/r,v=[];for(const{points:b}of c){const t=o?ur(cx,this,gx).call(this,b):b;if(!t)continue;v.push(t);const e=t.length,n=new Float32Array(e),i=new Float32Array(3*(2===e?2:e-2));if(p.push({line:i,points:n}),2===e){n[0]=t[0]*g,n[1]=t[1]*m,i.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[r,s,a,l]=t;r*=g,s*=m,a*=g,l*=m,n.set([r,s,a,l],0),i.set([NaN,NaN,NaN,NaN,r,s],0);for(let o=4;o<e;o+=2){const e=n[o]=t[o]*g,c=n[o+1]=t[o+1]*m;i.set(My.createBezierPoints(r,s,a,l,e,c),3*(o-2)),[r,s,a,l]=[a,l,e,c]}}if(0===p.length)return null;const y=l?new lx:new Zw;return y.build(p,i,r,1,s,l?0:d,a),{outline:y,newCurves:v,areContours:l,thickness:d,width:u,height:h}}static async compressSignature(t){let e,{outlines:n,areContours:i,thickness:r,width:s,height:a}=t,o=1/0,l=-1/0,c=0;for(const y of n){c+=y.length;for(let t=2,e=y.length;t<e;t++){const e=y[t]-y[t-2];o=Math.min(o,e),l=Math.max(l,e)}}e=o>=-128&&l<=127?Int8Array:o>=-32768&&l<=32767?Int16Array:Int32Array;const u=n.length,h=8+3*u,d=new Uint32Array(h);let p=0;d[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*u)*e.BYTES_PER_ELEMENT,d[p++]=0,d[p++]=s,d[p++]=a,d[p++]=i?0:1,d[p++]=Math.max(0,Math.floor(null!==r&&void 0!==r?r:0)),d[p++]=u,d[p++]=e.BYTES_PER_ELEMENT;for(const y of n)d[p++]=y.length-2,d[p++]=y[0],d[p++]=y[1];const f=new CompressionStream("deflate-raw"),g=f.writable.getWriter();await g.ready,g.write(d);const m=e.prototype.constructor;for(const y of n){const t=new m(y.length-2);for(let e=2,n=y.length;e<n;e++)t[e-2]=y[e]-y[e-2];g.write(t)}g.close();const v=await new Response(f.readable).arrayBuffer();return Us(new Uint8Array(v))}static async decompressSignature(t){try{const l=(a=t,Uint8Array.fromBase64?Uint8Array.fromBase64(a):Rs(atob(a))),{readable:c,writable:u}=new DecompressionStream("deflate-raw"),h=u.getWriter();await h.ready,h.write(l).then(async()=>{await h.ready,await h.close()}).catch(()=>{});let d=null,p=0;var e,n=!1,i=!1;try{for(var r,s=_i(c);n=!(r=await s.next()).done;n=!1){const t=r.value;d||(d=new Uint8Array(new Uint32Array(t.buffer,0,4)[0])),d.set(t,p),p+=t.length}}catch(o){i=!0,e=o}finally{try{n&&null!=s.return&&await s.return()}finally{if(i)throw e}}const f=new Uint32Array(d.buffer,0,d.length>>2),g=f[1];if(0!==g)throw new Error("Invalid version: ".concat(g));const m=f[2],v=f[3],y=0===f[4],b=f[5],w=f[6],x=f[7],_=[],k=(8+3*w)*Uint32Array.BYTES_PER_ELEMENT;let A;switch(x){case Int8Array.BYTES_PER_ELEMENT:A=new Int8Array(d.buffer,k);break;case Int16Array.BYTES_PER_ELEMENT:A=new Int16Array(d.buffer,k);break;case Int32Array.BYTES_PER_ELEMENT:A=new Int32Array(d.buffer,k)}p=0;for(let t=0;t<w;t++){const e=f[3*t+8],n=new Float32Array(e+2);_.push(n);for(let i=0;i<2;i++)n[i]=f[3*t+8+i+1];for(let t=0;t<e;t++)n[t+2]=n[t]+A[p++]}return{areContours:y,thickness:b,outlines:_,width:m,height:v}}catch(Hk){return ms("decompressSignature: ".concat(Hk)),null}var a}}function ux(t,e,n,i){return i-=e,0===(n-=t)?i>0?0:4:1===n?i+6:2-i}function hx(t,e,n,i,r,s,a){const o=ur(Rr,this,ux).call(this,n,i,r,s);for(let l=0;l<8;l++){const r=(-l+o-a+16)%8;if(0!==t[(n+ur(Rr,this,_x)._[2*r])*e+(i+ur(Rr,this,_x)._[2*r+1])])return r}return-1}function dx(t,e,n,i,r,s,a){const o=ur(Rr,this,ux).call(this,n,i,r,s);for(let l=0;l<8;l++){const r=(l+o+a+16)%8;if(0!==t[(n+ur(Rr,this,_x)._[2*r])*e+(i+ur(Rr,this,_x)._[2*r+1])])return r}return-1}function px(t,e,n,i){const r=t.length,s=new Int32Array(r);for(let c=0;c<r;c++)s[c]=t[c]<=i?1:0;for(let c=1;c<n-1;c++)s[c*e]=s[c*e+e-1]=0;for(let c=0;c<e;c++)s[c]=s[e*n-1-c]=0;let a,o=1;const l=[];for(let c=1;c<n-1;c++){a=1;for(let t=1;t<e-1;t++){const n=c*e+t,i=s[n];if(0===i)continue;let r=c,u=t;if(1===i&&0===s[n-1])o+=1,u-=1;else{if(!(i>=1&&0===s[n+1])){1!==i&&(a=Math.abs(i));continue}o+=1,u+=1,i>1&&(a=i)}const h=[t,c],d=u===t+1,p={isHole:d,points:h,id:o,parent:0};let f;l.push(p);for(const t of l)if(t.id===a){f=t;break}f?f.isHole?p.parent=d?f.parent:a:p.parent=d?a:f.parent:p.parent=d?a:0;const g=ur(Rr,this,hx).call(this,s,e,c,t,r,u,0);if(-1===g){s[n]=-o,1!==s[n]&&(a=Math.abs(s[n]));continue}let m=ur(Rr,this,_x)._[2*g],v=ur(Rr,this,_x)._[2*g+1];const y=c+m,b=t+v;r=y,u=b;let w=c,x=t;for(;;){const i=ur(Rr,this,dx).call(this,s,e,w,x,r,u,1);m=ur(Rr,this,_x)._[2*i],v=ur(Rr,this,_x)._[2*i+1];const l=w+m,d=x+v;h.push(d,l);const p=w*e+x;if(0===s[p+1]?s[p]=-o:1===s[p]&&(s[p]=o),l===c&&d===t&&w===y&&x===b){1!==s[n]&&(a=Math.abs(s[n]));break}r=w,u=x,w=l,x=d}}}return l}function fx(t,e,n,i){if(n-e<=4){for(let r=e;r<n-2;r+=2)i.push(t[r],t[r+1]);return}const r=t[e],s=t[e+1],a=t[n-4]-r,o=t[n-3]-s,l=Math.hypot(a,o),c=a/l,u=o/l,h=c*s-u*r,d=o/a,p=1/l,f=Math.atan(d),g=Math.cos(f),m=Math.sin(f),v=p*(Math.abs(g)+Math.abs(m)),y=p*(1-v+v**2),b=Math.max(Math.atan(Math.abs(m+g)*y),Math.atan(Math.abs(m-g)*y));let w=0,x=e;for(let _=e+2;_<n-2;_+=2){const e=Math.abs(h-c*t[_+1]+u*t[_]);e>w&&(x=_,w=e)}w>(l*b)**2?(ur(Rr,this,fx).call(this,t,e,x+2,i),ur(Rr,this,fx).call(this,t,x,n,i)):i.push(r,s)}function gx(t){const e=[],n=t.length;return ur(Rr,this,fx).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}function mx(t,e,n,i,r,s){const a=new Float32Array(s**2),o=-2*i**2,l=s>>1;for(let f=0;f<s;f++){const t=(f-l)**2;for(let e=0;e<s;e++)a[f*s+e]=Math.exp((t+(e-l)**2)/o)}const c=new Float32Array(256),u=-2*r**2;for(let f=0;f<256;f++)c[f]=Math.exp(f**2/u);const h=t.length,d=new Uint8Array(h),p=new Uint32Array(256);for(let f=0;f<n;f++)for(let i=0;i<e;i++){const r=f*e+i,o=t[r];let u=0,h=0;for(let d=0;d<s;d++){const r=f+d-l;if(!(r<0||r>=n))for(let n=0;n<s;n++){const p=i+n-l;if(p<0||p>=e)continue;const f=t[r*e+p],g=a[d*s+n]*c[Math.abs(f-o)];u+=f*g,h+=g}}p[d[r]=Math.round(u/h)]++}return[d,p]}function vx(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}function yx(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let i=-1/0,r=1/0;for(let a=0,o=n.length;a<o;a++){const e=n[a]=t[a<<2];i=Math.max(i,e),r=Math.min(r,e)}const s=255/(i-r);for(let a=0,o=n.length;a<o;a++)n[a]=(n[a]-r)*s;return n}function bx(t){let e,n=-1/0,i=-1/0;const r=t.findIndex(t=>0!==t);let s=r,a=r;for(e=r;e<256;e++){const r=t[e];r>n&&(e-s>i&&(i=e-s,a=e-1),n=r,s=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e}function wx(t){const e=t,{width:n,height:i}=t,{maxDim:r}=ur(Rr,this,xx)._;let s=n,a=i;if(n>r||i>r){let o=n,l=i,c=Math.log2(Math.max(n,i)/r);const u=Math.floor(c);c=c===u?u-1:u;for(let n=0;n<c;n++){s=Math.ceil(o/2),a=Math.ceil(l/2);const n=new OffscreenCanvas(s,a);n.getContext("2d").drawImage(t,0,0,o,l,0,0,s,a),o=s,l=a,t!==e&&t.close(),t=n.transferToImageBitmap()}const h=Math.min(r/s,r/a);s=Math.round(s*h),a=Math.round(a*h)}const o=new OffscreenCanvas(s,a).getContext("2d",{willReadFrequently:!0});o.fillStyle="white",o.fillRect(0,0,s,a),o.filter="grayscale(1)",o.drawImage(t,0,0,t.width,t.height,0,0,s,a);const l=o.getImageData(0,0,s,a).data;return[ur(Rr,this,yx).call(this,l),s,a]}Rr=cx;var xx={_:{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}},_x={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])};class kx extends cw{constructor(){super(),super.updateProperties({fill:Hc._defaultLineColor,"stroke-width":0})}clone(){const t=new kx;return t.updateAll(this),t}}class Ax extends rx{constructor(t){super(t),super.updateProperties({stroke:Hc._defaultLineColor,"stroke-width":1})}clone(){const t=new Ax(this._viewParameters);return t.updateAll(this),t}}var Sx=new WeakMap,Ex=new WeakMap,Cx=new WeakMap,Mx=new WeakMap;class Tx extends pw{constructor(t){super(d(d({},t),{},{mustBeCommitted:!0,name:"signatureEditor"})),cr(this,Sx,!1),cr(this,Ex,null),cr(this,Cx,null),cr(this,Mx,null),this._willKeepAspectRatio=!0,pr(Cx,this,t.signatureData||null),pr(Ex,this,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){Hc.initialize(t,e),this._defaultDrawingOptions=new kx,this._defaultDrawnSignatureOptions=new Ax(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return xs(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!dr(Ex,this)}}static computeTelemetryFinalData(t){var e,n;const i=t.get("hasDescription");return{hasAltText:null!==(e=i.get(!0))&&void 0!==e?e:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),null===this._drawId)if(dr(Cx,this)){const{lines:t,mustSmooth:e,areContours:n,description:i,uuid:r,heightInPage:s}=dr(Cx,this),{rawDims:{pageWidth:a,pageHeight:o},rotation:l}=this.parent.viewport,c=cx.processDrawnLines({lines:t,pageWidth:a,pageHeight:o,rotation:l,innerMargin:Tx._INNER_MARGIN,mustSmooth:e,areContours:n});this.addSignature(c,s,i,r)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:dr(Ex,this)||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){pr(Mx,this,t),this.addEditToolbar()}getUuid(){return dr(Mx,this)}get description(){return dr(Ex,this)}set description(t){pr(Ex,this,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{null===e||void 0===e||e.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:i,height:r}=dr(Cx,this),s=Math.max(i,r);return{areContours:e,outline:cx.processDrawnLines({lines:{curves:t.map(t=>({points:t})),thickness:n,width:i,height:r},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e}).outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,i){const{x:r,y:s}=this,{outline:a}=pr(Cx,this,t);let o;pr(Sx,this,a instanceof lx),this.description=n,dr(Sx,this)?o=Tx.getDefaultDrawingOptions():(o=Tx._defaultDrawnSignatureOptions.clone(),o.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:o});const[,l]=this.pageDimensions;let c=e/l;c=c>=1?.5:c,this.width*=c/this.height,this.width>=1&&(c*=.9/this.width,this.width=.9),this.height=c,this.setDims(),this.x=r,this.y=s,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:i}=this.parent.viewport;return cx.process(t,e,n,i,Tx._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return cx.extractContoursFromText(t,e,n,i,r,Tx._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:i}=this.parent.viewport;return cx.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:Tx._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions(t){let{areContours:e,thickness:n}=t;e?this._drawingOptions=Tx.getDefaultDrawingOptions():(this._drawingOptions=Tx._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,r=Object.assign(super.serialize(t),{isSignature:!0,areContours:dr(Sx,this),color:[0,0,0],thickness:dr(Sx,this)?0:i});return this.addComment(r),t?(r.paths={lines:e,points:n},r.uuid=dr(Mx,this),r.isCopy=!0):r.lines=e,dr(Ex,this)&&(r.accessibilityData={type:"Figure",alt:dr(Ex,this)}),r}static deserializeDraw(t,e,n,i,r,s){return s.areContours?lx.deserialize(t,e,n,i,r,s):Zw.deserialize(t,e,n,i,r,s)}static async deserialize(t,e,n){var i;const r=await super.deserialize(t,e,n);return pr(Sx,r,t.areContours),r.description=(null===(i=t.accessibilityData)||void 0===i?void 0:i.alt)||"",pr(Mx,r,t.uuid),r}}u(Tx,"_type","signature"),u(Tx,"_editorType",Gr.SIGNATURE),u(Tx,"_defaultDrawingOptions",null);var Rx=new WeakMap,Px=new WeakMap,Dx=new WeakMap,Lx=new WeakMap,Nx=new WeakMap,Ix=new WeakMap,Fx=new WeakMap,Ox=new WeakMap,Bx=new WeakMap,Wx=new WeakMap,jx=new WeakMap,Ux=new WeakSet;class zx extends Hc{constructor(t){super(d(d({},t),{},{name:"stampEditor"})),lr(this,Ux),cr(this,Rx,null),cr(this,Px,null),cr(this,Dx,null),cr(this,Lx,null),cr(this,Nx,null),cr(this,Ix,""),cr(this,Fx,null),cr(this,Ox,!1),cr(this,Bx,null),cr(this,Wx,!1),cr(this,jx,!1),pr(Lx,this,t.bitmapUrl),pr(Nx,this,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){Hc.initialize(t,e)}static isHandlingMimeForPasting(t){return la.includes(t)}static paste(t,e){e.pasteEditor({mode:Gr.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!(null===(t=this.altTextData)||void 0===t||!t.altText)}}static computeTelemetryFinalData(t){var e,n;const i=t.get("hasAltText");return{hasAltText:null!==(e=i.get(!0))&&void 0!==e?e:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:r,height:s}=t||this.copyCanvas(null,null,!0).imageData,a=await n.guess({name:"altText",request:{data:i,width:r,height:s,channels:i.length/(r*s)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),e&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var t;dr(Px,this)&&(pr(Rx,this,null),this._uiManager.imageManager.deleteId(dr(Px,this)),null===(t=dr(Fx,this))||void 0===t||t.remove(),pr(Fx,this,null),dr(Bx,this)&&(clearTimeout(dr(Bx,this)),pr(Bx,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(dr(Px,this)&&null===dr(Fx,this)&&ur(Ux,this,Gx).call(this),this.isAttachedToDOM||this.parent.add(this))):dr(Px,this)&&ur(Ux,this,Gx).call(this)}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(dr(Dx,this)||dr(Rx,this)||dr(Lx,this)||dr(Nx,this)||dr(Px,this)||dr(Ox,this))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),dr(Ox,this)||(dr(Rx,this)?ur(Ux,this,qx).call(this):ur(Ux,this,Gx).call(this)),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(pr(Px,this,n),i&&pr(Rx,this,i),pr(Ox,this,!1),ur(Ux,this,qx).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==dr(Bx,this)&&clearTimeout(dr(Bx,this));pr(Bx,this,setTimeout(()=>{pr(Bx,this,null),ur(Ux,this,Kx).call(this)},200))}copyCanvas(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t||(t=224);const{width:i,height:r}=dr(Rx,this),s=new oa;let a=dr(Rx,this),o=i,l=r,c=null;if(e){if(i>e||r>e){const t=Math.min(e/i,e/r);o=Math.floor(i*t),l=Math.floor(r*t)}c=document.createElement("canvas");const t=c.width=Math.ceil(o*s.sx),n=c.height=Math.ceil(l*s.sy);dr(Wx,this)||(a=ur(Ux,this,Xx).call(this,t,n));const u=c.getContext("2d");u.filter=this._uiManager.hcmFilter;let h="white",d="#cfcfd8";"none"!==this._uiManager.hcmFilter?d="black":ca.isDarkMode&&(h="#8f8f9d",d="#42414d");const p=15,f=p*s.sx,g=p*s.sy,m=new OffscreenCanvas(2*f,2*g),v=m.getContext("2d");v.fillStyle=h,v.fillRect(0,0,2*f,2*g),v.fillStyle=d,v.fillRect(0,0,f,g),v.fillRect(f,g,f,g),u.fillStyle=u.createPattern(m,"repeat"),u.fillRect(0,0,t,n),u.drawImage(a,0,0,a.width,a.height,0,0,t,n)}let u=null;if(n){let e,n;if(s.symmetric&&a.width<t&&a.height<t)e=a.width,n=a.height;else if(a=dr(Rx,this),i>t||r>t){const s=Math.min(t/i,t/r);e=Math.floor(i*s),n=Math.floor(r*s),dr(Wx,this)||(a=ur(Ux,this,Xx).call(this,e,n))}const o=new OffscreenCanvas(e,n).getContext("2d",{willReadFrequently:!0});o.drawImage(a,0,0,a.width,a.height,0,0,e,n),u={width:e,height:n,data:o.getImageData(0,0,e,n).data}}return{canvas:c,width:o,height:l,imageData:u}}static async deserialize(t,e,n){let i=null,r=!1;if(t instanceof $v){var s;const{data:{rect:a,rotation:o,id:l,structParent:c,popupRef:u,richText:h,contentsObj:d,creationDate:p,modificationDate:f},container:g,parent:{page:{pageNumber:m}},canvas:v}=t;let y,b;v?(delete t.canvas,({id:y,bitmap:b}=n.imageManager.getFromCanvas(g.id,v)),v.remove()):(r=!0,t._hasNoCanvas=!0);const w=(null===(s=await e._structTree.getAriaAttributes("".concat(Ws).concat(l)))||void 0===s?void 0:s.get("aria-label"))||"";i=t={annotationType:Gr.STAMP,bitmapId:y,bitmap:b,pageIndex:m-1,rect:a.slice(0),rotation:o,annotationElementId:l,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:w},isSvg:!1,structParent:c,popupRef:u,richText:h,comment:(null===d||void 0===d?void 0:d.str)||null,creationDate:p,modificationDate:f}}const a=await super.deserialize(t,e,n),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:u,isSvg:h,accessibilityData:d}=t;r?(n.addMissingCanvas(t.id,a),pr(Ox,a,!0)):u&&n.imageManager.isValidId(u)?(pr(Px,a,u),l&&pr(Rx,a,l)):pr(Lx,a,c),pr(Wx,a,h);const[p,f]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/f,d&&(a.altTextData=d),a._initialData=i,t.comment&&a.setCommentData(t),pr(jx,a,!!i),a}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(t),{bitmapId:dr(Px,this),isSvg:dr(Wx,this)});if(this.addComment(n),t)return n.bitmapUrl=ur(Ux,this,Yx).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:r}=this.serializeAltText(!1);if(!i&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const t=ur(Ux,this,Qx).call(this,n);if(t.isSame)return null;var s;if(t.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(s=this._initialData.structParent)&&void 0!==s?s:-1;return n.id=this.annotationElementId,delete n.bitmapId,n}if(null===e)return n;e.stamps||(e.stamps=new Map);const a=dr(Wx,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(e.stamps.has(dr(Px,this))){if(dr(Wx,this)){const t=e.stamps.get(dr(Px,this));a>t.area&&(t.area=a,t.serialized.bitmap.close(),t.serialized.bitmap=ur(Ux,this,Yx).call(this,!1))}}else e.stamps.set(dr(Px,this),{area:a,serialized:n}),n.bitmap=ur(Ux,this,Yx).call(this,!1);return n}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}function Hx(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(pr(Rx,this,t.bitmap),e||(pr(Px,this,t.id),pr(Wx,this,t.isSvg)),t.file&&pr(Ix,this,t.file.name),ur(Ux,this,qx).call(this)):this.remove()}function Vx(){if(pr(Dx,this,null),this._uiManager.enableWaiting(!1),dr(Fx,this))if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&dr(Rx,this))this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});else{if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&dr(Rx,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(t){}}this.div.focus()}}function Gx(){if(dr(Px,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(dr(Px,this)).then(t=>ur(Ux,this,Hx).call(this,t,!0)).finally(()=>ur(Ux,this,Vx).call(this));if(dr(Lx,this)){const t=dr(Lx,this);return pr(Lx,this,null),this._uiManager.enableWaiting(!0),void pr(Dx,this,this._uiManager.imageManager.getFromUrl(t).then(t=>ur(Ux,this,Hx).call(this,t)).finally(()=>ur(Ux,this,Vx).call(this)))}if(dr(Nx,this)){const t=dr(Nx,this);return pr(Nx,this,null),this._uiManager.enableWaiting(!0),void pr(Dx,this,this._uiManager.imageManager.getFromFile(t).then(t=>ur(Ux,this,Hx).call(this,t)).finally(()=>ur(Ux,this,Vx).call(this)))}const t=document.createElement("input");t.type="file",t.accept=la.join(",");const e=this._uiManager._signal;pr(Dx,this,new Promise(n=>{t.addEventListener("change",async()=>{if(t.files&&0!==t.files.length){this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),ur(Ux,this,Hx).call(this,e)}else this.remove();n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>ur(Ux,this,Vx).call(this))),t.click()}function qx(){var t;const{div:e}=this;let{width:n,height:i}=dr(Rx,this);const[r,s]=this.pageDimensions,a=.75;if(this.width)n=this.width*r,i=this.height*s;else if(n>a*r||i>a*s){const t=Math.min(a*r/n,a*s/i);n*=t,i*=t}this._uiManager.enableWaiting(!1);const o=pr(Fx,this,document.createElement("canvas"));o.setAttribute("role","img"),this.addContainer(o),this.width=n/r,this.height=i/s,this.setDims(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(e.hidden=!1),ur(Ux,this,Kx).call(this),dr(jx,this)||(this.parent.addUndoableEditor(this),pr(jx,this,!0)),this._reportTelemetry({action:"inserted_image"}),dr(Ix,this)&&this.div.setAttribute("aria-description",dr(Ix,this)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}function Xx(t,e){const{width:n,height:i}=dr(Rx,this);let r=n,s=i,a=dr(Rx,this);for(;r>2*t||s>2*e;){const n=r,i=s;r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const o=new OffscreenCanvas(r,s);o.getContext("2d").drawImage(a,0,0,n,i,0,0,r,s),a=o.transferToImageBitmap()}return a}function Kx(){const[t,e]=this.parentDimensions,{width:n,height:i}=this,r=new oa,s=Math.ceil(n*t*r.sx),a=Math.ceil(i*e*r.sy),o=dr(Fx,this);if(!o||o.width===s&&o.height===a)return;o.width=s,o.height=a;const l=dr(Wx,this)?dr(Rx,this):ur(Ux,this,Xx).call(this,s,a),c=o.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,s,a)}function Yx(t){if(t){if(dr(Wx,this)){const t=this._uiManager.imageManager.getSvgUrl(dr(Px,this));if(t)return t}const t=document.createElement("canvas");({width:t.width,height:t.height}=dr(Rx,this));return t.getContext("2d").drawImage(dr(Rx,this),0,0),t.toDataURL()}if(dr(Wx,this)){const[t,e]=this.pageDimensions,n=Math.round(this.width*t*Gs.PDF_TO_CSS_UNITS),i=Math.round(this.height*e*Gs.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(n,i);return r.getContext("2d").drawImage(dr(Rx,this),0,0,dr(Rx,this).width,dr(Rx,this).height,0,0,n,i),r.transferToImageBitmap()}return structuredClone(dr(Rx,this))}function Qx(t){var e;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===n,s=((null===(e=t.accessibilityData)||void 0===e?void 0:e.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&s,isSameAltText:s}}u(zx,"_type","stamp"),u(zx,"_editorType",Gr.STAMP);var $x=new WeakMap,Jx=new WeakMap,Zx=new WeakMap,t_=new WeakMap,e_=new WeakMap,n_=new WeakMap,i_=new WeakMap,r_=new WeakMap,s_=new WeakMap,a_=new WeakMap,o_=new WeakMap,l_=new WeakMap,c_=new WeakMap,u_=new WeakMap,h_=new WeakMap,d_=new WeakMap,p_=new WeakSet;class f_{constructor(t){let{uiManager:e,pageIndex:n,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:u}=t;lr(this,p_),cr(this,$x,void 0),cr(this,Jx,!1),cr(this,Zx,null),cr(this,t_,null),cr(this,e_,null),cr(this,n_,new Map),cr(this,i_,!1),cr(this,r_,!1),cr(this,s_,!1),cr(this,a_,null),cr(this,o_,null),cr(this,l_,null),cr(this,c_,null),cr(this,u_,null),cr(this,h_,-1),cr(this,d_,void 0);const h=[...x_._.values()];if(!f_._initialized){f_._initialized=!0;for(const t of h)t.initialize(u,e)}e.registerEditorTypes(h),pr(d_,this,e),this.pageIndex=n,this.div=i,pr($x,this,s),pr(Zx,this,a),this.viewport=c,pr(l_,this,l),this.drawLayer=o,this._structTree=r,dr(d_,this).addLayer(this)}get isEmpty(){return 0===dr(n_,this).size}get isInvisible(){return this.isEmpty&&dr(d_,this).getMode()===Gr.NONE}updateToolbar(t){dr(d_,this).updateToolbar(t)}updateMode(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr(d_,this).getMode();switch(ur(p_,this,w_).call(this),t){case Gr.NONE:return this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case Gr.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Gr.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Gr.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of x_._.values())e.toggle("".concat(n._type,"Editing"),t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===(null===(e=dr(l_,this))||void 0===e?void 0:e.div)}setEditingState(t){dr(d_,this).setEditingState(t)}addCommands(t){dr(d_,this).addCommands(t)}cleanUndoStack(t){dr(d_,this).cleanUndoStack(t)}toggleDrawing(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!t)}togglePointerEvents(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(t=dr(Zx,this))||void 0===t||t.div.classList.toggle("disabled",!e)}async enable(){var t;pr(s_,this,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),null===(t=dr(u_,this))||void 0===t||t.abort(),pr(u_,this,null);const e=new Set;for(const i of hr(p_,this,g_))i.enableEditing(),i.show(!0),i.annotationElementId&&(dr(d_,this).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const n=dr(Zx,this);if(n)for(const i of n.getEditableAnnotations()){if(i.hide(),dr(d_,this).isDeletedAnnotationElement(i.data.id))continue;if(e.has(i.data.id))continue;const t=await this.deserialize(i);t&&(this.addOrRebuild(t),t.enableEditing())}pr(s_,this,!1),dr(d_,this)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(pr(r_,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),dr(l_,this)&&!dr(u_,this)){pr(u_,this,new AbortController);const t=dr(d_,this).combinedSignal(dr(u_,this));dr(l_,this).div.addEventListener("pointerdown",t=>{const{clientX:e,clientY:n,timeStamp:i}=t;if(i-dr(h_,this)>500)return void pr(h_,this,i);pr(h_,this,-1);const{classList:r}=this.div;r.toggle("getElements",!0);const s=document.elementsFromPoint(e,n);if(r.toggle("getElements",!1),!this.div.contains(s[0]))return;let a;const o=new RegExp("^".concat(Vr,"[0-9]+$"));for(const c of s)if(o.test(c.id)){a=c.id;break}if(!a)return;const l=dr(n_,this).get(a);null===(null===l||void 0===l?void 0:l.annotationElementId)&&(t.stopPropagation(),t.preventDefault(),l.dblclick(t))},{signal:t,capture:!0})}const t=dr(Zx,this);if(t){const n=new Map,i=new Map;for(const s of hr(p_,this,g_)){var e;s.disableEditing(),s.annotationElementId?null===s.serialize()?(i.set(s.annotationElementId,s),null===(e=this.getEditableAnnotation(s.annotationElementId))||void 0===e||e.show(),s.remove()):n.set(s.annotationElementId,s):s.updateFakeAnnotationElement(t)}const r=t.getEditableAnnotations();for(const t of r){const{id:e}=t.data;if(dr(d_,this).isDeletedAnnotationElement(e)){t.updateEdited({deleted:!0});continue}let r=i.get(e);r?(r.resetAnnotationElement(t),r.show(!1),t.show()):(r=n.get(e),r&&(dr(d_,this).addChangedExistingAnnotation(r),r.renderAnnotationElement(t)&&r.show(!1)),t.show())}}ur(p_,this,w_).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of x_._.values())n.remove("".concat(i._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),pr(r_,this,!1)}getEditableAnnotation(t){var e;return(null===(e=dr(Zx,this))||void 0===e?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){dr(d_,this).getActive()!==t&&dr(d_,this).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,null!==(t=dr(l_,this))&&void 0!==t&&t.div&&!dr(c_,this)){pr(c_,this,new AbortController);const t=dr(d_,this).combinedSignal(dr(c_,this));dr(l_,this).div.addEventListener("pointerdown",ur(p_,this,m_).bind(this),{signal:t}),dr(l_,this).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,null!==(t=dr(l_,this))&&void 0!==t&&t.div&&dr(c_,this)&&(dr(c_,this).abort(),pr(c_,this,null),dr(l_,this).div.classList.remove("highlighting"))}enableClick(){if(dr(t_,this))return;pr(t_,this,new AbortController);const t=dr(d_,this).combinedSignal(dr(t_,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;null===(t=dr(t_,this))||void 0===t||t.abort(),pr(t_,this,null)}attach(t){dr(n_,this).set(t.id,t);const{annotationElementId:e}=t;e&&dr(d_,this).isDeletedAnnotationElement(e)&&dr(d_,this).removeDeletedAnnotationElement(t)}detach(t){var e;dr(n_,this).delete(t.id),null===(e=dr($x,this))||void 0===e||e.removePointerInTextLayer(t.contentDiv),!dr(r_,this)&&t.annotationElementId&&dr(d_,this).addDeletedAnnotationElement(t)}remove(t){this.detach(t),dr(d_,this).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(dr(d_,this).addDeletedAnnotationElement(t.annotationElementId),Hc.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),null===(e=t.parent)||void 0===e||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),dr(d_,this).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!dr(s_,this)),dr(d_,this).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var e;if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!dr(e_,this)&&(t._focusEventsAllowed=!1,pr(e_,this,setTimeout(()=>{pr(e_,this,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:dr(d_,this)._signal}),n.focus())},0))),t._structTreeParentId=null===(e=dr($x,this))||void 0===e?void 0:e.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getEditorByUID(t){for(const e of dr(n_,this).values())if(e.uid===t)return e;return null}getNextId(){return dr(d_,this).getId()}combinedSignal(t){return dr(d_,this).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return null===(t=hr(p_,this,v_))||void 0===t?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await dr(d_,this).updateMode(t.mode);const{offsetX:n,offsetY:i}=ur(p_,this,b_).call(this),r=this.getNextId(),s=ur(p_,this,y_).call(this,d({parent:this,id:r,x:n,y:i,uiManager:dr(d_,this),isCentered:!0},e));s&&this.add(s)}async deserialize(t){var e,n;return await(null===(e=x_._.get(null!==(n=t.annotationType)&&void 0!==n?n:t.annotationEditorType))||void 0===e?void 0:e.deserialize(t,this,dr(d_,this)))||null}createAndAddNewEditor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getNextId(),r=ur(p_,this,y_).call(this,d({parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:dr(d_,this),isCentered:e},n));return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createAndAddNewEditor(ur(p_,this,b_).call(this),!0,t)}setSelected(t){dr(d_,this).setSelected(t)}toggleSelected(t){dr(d_,this).toggleSelected(t)}unselect(t){dr(d_,this).unselect(t)}pointerup(t){var e;const{isMac:n}=Ps.platform;if(0!==t.button||t.ctrlKey&&n)return;if(t.target!==this.div)return;if(!dr(i_,this))return;if(pr(i_,this,!1),null!==(e=hr(p_,this,v_))&&void 0!==e&&e.isDrawer&&hr(p_,this,v_).supportMultipleDrawings)return;if(!dr(Jx,this))return void pr(Jx,this,!0);const i=dr(d_,this).getMode();i!==Gr.STAMP&&i!==Gr.SIGNATURE?this.createAndAddNewEditor(t,!1):dr(d_,this).unselectAll()}pointerdown(t){var e;if(dr(d_,this).getMode()===Gr.HIGHLIGHT&&this.enableTextSelection(),dr(i_,this))return void pr(i_,this,!1);const{isMac:n}=Ps.platform;if(0!==t.button||t.ctrlKey&&n)return;if(t.target!==this.div)return;if(pr(i_,this,!0),null!==(e=hr(p_,this,v_))&&void 0!==e&&e.isDrawer)return void this.startDrawingSession(t);const i=dr(d_,this).getActive();pr(Jx,this,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),dr(a_,this))return void hr(p_,this,v_).startDrawing(this,dr(d_,this),!1,t);dr(d_,this).setCurrentDrawingSession(this),pr(a_,this,new AbortController);const e=dr(d_,this).combinedSignal(dr(a_,this));this.div.addEventListener("blur",t=>{let{relatedTarget:e}=t;e&&!this.div.contains(e)&&(pr(o_,this,null),this.commitOrRemove())},{signal:e}),hr(p_,this,v_).startDrawing(this,dr(d_,this),!1,t)}pause(t){if(t){const{activeElement:t}=document;return void(this.div.contains(t)&&pr(o_,this,t))}dr(o_,this)&&setTimeout(()=>{var t;null===(t=dr(o_,this))||void 0===t||t.focus(),pr(o_,this,null)},0)}endDrawingSession(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return dr(a_,this)?(dr(d_,this).setCurrentDrawingSession(null),dr(a_,this).abort(),pr(a_,this,null),pr(o_,this,null),hr(p_,this,v_).endDrawing(t)):null}findNewParent(t,e,n){const i=dr(d_,this).findParent(e,n);return null!==i&&i!==this&&(i.changeParent(t),!0)}commitOrRemove(){return!!dr(a_,this)&&(this.endDrawingSession(),!0)}onScaleChanging(){dr(a_,this)&&hr(p_,this,v_).onScaleChangingWhenDrawing(this)}destroy(){var t;this.commitOrRemove(),(null===(t=dr(d_,this).getActive())||void 0===t?void 0:t.parent)===this&&(dr(d_,this).commitOrRemove(),dr(d_,this).setActiveEditor(null)),dr(e_,this)&&(clearTimeout(dr(e_,this)),pr(e_,this,null));for(const n of dr(n_,this).values()){var e;null===(e=dr($x,this))||void 0===e||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,dr(n_,this).clear(),dr(d_,this).removeLayer(this)}render(t){let{viewport:e}=t;this.viewport=e,aa(this.div,e);for(const n of dr(d_,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(t){let{viewport:e}=t;dr(d_,this).commitOrRemove(),ur(p_,this,w_).call(this);const n=this.viewport.rotation,i=e.rotation;if(this.viewport=e,aa(this.div,{rotation:i}),n!==i)for(const r of dr(n_,this).values())r.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return dr(d_,this).viewParameters.realScale}}function g_(t){return 0!==dr(n_,t).size?dr(n_,t).values():dr(d_,t).getEditors(t.pageIndex)}function m_(t){dr(d_,this).unselectAll();const{target:e}=t;if(e===dr(l_,this).div||("img"===e.getAttribute("role")||e.classList.contains("endOfContent"))&&dr(l_,this).div.contains(e)){const{isMac:e}=Ps.platform;if(0!==t.button||t.ctrlKey&&e)return;dr(d_,this).showAllEditors("highlight",!0,!0),dr(l_,this).div.classList.add("free"),this.toggleDrawing(),Gb.startHighlighting(this,"ltr"===dr(d_,this).direction,{target:dr(l_,this).div,x:t.x,y:t.y}),dr(l_,this).div.addEventListener("pointerup",()=>{dr(l_,this).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:dr(d_,this)._signal}),t.preventDefault()}}function v_(t){return x_._.get(dr(d_,t).getMode())}function y_(t){const e=hr(p_,this,v_);return e?new e.prototype.constructor(t):null}function b_(){const{x:t,y:e,width:n,height:i}=this.boundingClientRect,r=Math.max(0,t),s=Math.max(0,e),a=(r+Math.min(window.innerWidth,t+n))/2-t,o=(s+Math.min(window.innerHeight,e+i))/2-e,[l,c]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}function w_(){for(const t of dr(n_,this).values())t.isEmpty()&&t.remove()}u(f_,"_initialized",!1);var x_={_:new Map([yy,ax,zx,Gb,Tx].map(t=>[t._editorType,t]))},__=new WeakMap,k_=new WeakMap,A_=new WeakMap,S_=new WeakSet;class E_{constructor(t){let{pageIndex:e}=t;lr(this,S_),cr(this,__,null),cr(this,k_,new Map),cr(this,A_,new Map),this.pageIndex=e}setParent(t){if(dr(__,this)){if(dr(__,this)!==t){if(dr(k_,this).size>0)for(const e of dr(k_,this).values())e.remove(),t.append(e);pr(__,this,t)}}else pr(__,this,t)}static get _svgFactory(){return xs(this,"_svgFactory",new vm)}draw(t){var e,n;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=(P_._=(e=P_._,n=e++,e),n),a=ur(S_,this,M_).call(this),o=E_._svgFactory.createElement("defs");a.append(o);const l=E_._svgFactory.createElement("path");o.append(l);const c="path_p".concat(this.pageIndex,"_").concat(s);l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),i&&dr(A_,this).set(s,l);const u=r?ur(S_,this,T_).call(this,o,c):null,h=E_._svgFactory.createElement("use");return a.append(h),h.setAttribute("href","#".concat(c)),this.updateProperties(a,t),dr(k_,this).set(s,a),{id:s,clipPathId:"url(#".concat(u,")")}}drawOutline(t,e){var n,i;const r=(P_._=(n=P_._,i=n++,n),i),s=ur(S_,this,M_).call(this),a=E_._svgFactory.createElement("defs");s.append(a);const o=E_._svgFactory.createElement("path");a.append(o);const l="path_p".concat(this.pageIndex,"_").concat(r);let c;if(o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),e){const t=E_._svgFactory.createElement("mask");a.append(t),c="mask_p".concat(this.pageIndex,"_").concat(r),t.setAttribute("id",c),t.setAttribute("maskUnits","objectBoundingBox");const e=E_._svgFactory.createElement("rect");t.append(e),e.setAttribute("width","1"),e.setAttribute("height","1"),e.setAttribute("fill","white");const n=E_._svgFactory.createElement("use");t.append(n),n.setAttribute("href","#".concat(l)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const u=E_._svgFactory.createElement("use");s.append(u),u.setAttribute("href","#".concat(l)),c&&u.setAttribute("mask","url(#".concat(c,")"));const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,t),dr(k_,this).set(r,s),r}finalizeDraw(t,e){dr(A_,this).delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:i,rootClass:r,path:s}=e,a="number"===typeof t?dr(k_,this).get(t):t;if(a){if(n&&ur(S_,this,R_).call(this,a,n),i&&C_.call(E_,a,i),r){const{classList:t}=a;for(const[e,n]of Object.entries(r))t.toggle(e,n)}if(s){const t=a.firstChild.firstChild;ur(S_,this,R_).call(this,t,s)}}}updateParent(t,e){if(e===this)return;const n=dr(k_,this).get(t);n&&(dr(__,e).append(n),dr(k_,this).delete(t),dr(k_,e).set(t,n))}remove(t){dr(A_,this).delete(t),null!==dr(__,this)&&(dr(k_,this).get(t).remove(),dr(k_,this).delete(t))}destroy(){pr(__,this,null);for(const t of dr(k_,this).values())t.remove();dr(k_,this).clear(),dr(A_,this).clear()}}function C_(t,e){let[n,i,r,s]=e;const{style:a}=t;a.top="".concat(100*i,"%"),a.left="".concat(100*n,"%"),a.width="".concat(100*r,"%"),a.height="".concat(100*s,"%")}function M_(){const t=Pr._svgFactory.create(1,1,!0);return dr(__,this).append(t),t.setAttribute("aria-hidden",!0),t}function T_(t,e){const n=Pr._svgFactory.createElement("clipPath");t.append(n);const i="clip_".concat(e);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Pr._svgFactory.createElement("use");return n.append(r),r.setAttribute("href","#".concat(e)),r.classList.add("clip"),i}function R_(t,e){for(const[n,i]of Object.entries(e))null===i?t.removeAttribute(n):t.setAttribute(n,i)}Pr=E_;var P_={_:0};function D_(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=D_(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}globalThis._pdfjsTestingUtils={HighlightOutliner:gb},globalThis.pdfjsLib={AbortException:Ms,AnnotationEditorLayer:f_,AnnotationEditorParamsType:qr,AnnotationEditorType:Gr,AnnotationEditorUIManager:el,AnnotationLayer:cy,AnnotationMode:Hr,AnnotationType:ts,applyOpacity:function(t,e,n,i){const r=255*(1-(i=Math.min(Math.max(null!==i&&void 0!==i?i:1,0),1)));return[t=Math.round(t*i+r),e=Math.round(e*i+r),n=Math.round(n*i+r)]},build:"f56dc8601",ColorPicker:tm,createValidAbsoluteUrl:bs,CSSConstants:class{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),xs(this,"commentForegroundColor",ia(n))}},DOMSVGFactory:vm,DrawLayer:E_,FeatureTest:Ps,fetchData:qs,findContrastColor:function(t,e){const n=t[0]+256*t[1]+65536*t[2]+16777216*e[0]+4294967296*e[1]+1099511627776*e[2];let i=fa.get(n);if(i)return i;const r=new Float32Array(9),s=r.subarray(0,3),a=r.subarray(3,6);ua(t,a);const o=r.subarray(6,9);ua(e,o);const l=o[2]<.5,c=l?12:4.5;if(a[2]=l?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),pa(a,o,s)<c){let t,e;l?(t=a[2],e=1):(t=0,e=a[2]);const n=.005;for(;e-t>n;){const n=a[2]=(t+e)/2;l===pa(a,o,s)<c?t=n:e=n}a[2]=l?e:t}return ha(a,s),i=Ls.makeHexColor(Math.round(255*s[0]),Math.round(255*s[1]),Math.round(255*s[2])),fa.set(n,i),i},getDocument:eg,getFilenameFromUrl:function(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof t)return e;if(Ys(t))return ms('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(t=>{try{return new URL(t)}catch(e){try{return new URL(decodeURIComponent(t))}catch(n){try{return new URL(t,"https://foo.bar")}catch(i){try{return new URL(decodeURIComponent(t),"https://foo.bar")}catch(r){return null}}}}})(t);if(!n)return e;const i=t=>{try{let e=decodeURIComponent(t);return e.includes("/")?(e=e.split("/").at(-1),e.test(/^\.pdf$/i)?e:t):e}catch(e){return t}},r=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(r.test(s))return i(s);if(n.searchParams.size>0){const t=Array.from(n.searchParams.values()).reverse();for(const n of t)if(r.test(n))return i(n);const e=Array.from(n.searchParams.keys()).reverse();for(const n of e)if(r.test(n))return i(n)}if(n.hash){const t=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(t)return i(t[0])}return e},getRGB:ia,getUuid:Bs,getXfaPageViewport:function(t,e){let{scale:n=1,rotation:i=0}=e;const{width:r,height:s}=t.attributes.style,a=[0,0,parseInt(r),parseInt(s)];return new Xs({viewBox:a,userUnit:1,scale:n,rotation:i})},GlobalWorkerOptions:Rp,ImageKind:Zr,InvalidPDFException:Ss,isDataScheme:Ys,isPdfFile:Qs,isValidExplicitDest:Ru,MathClamp:js,noContextMenu:Zs,normalizeUnicode:function(t){return Fs||(Fs=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,Os=new Map([["\ufb05","\u017ft"]])),t.replaceAll(Fs,(t,e,n)=>e?e.normalize("NFKC"):Os.get(n))},OPS:os,OutputScale:oa,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:cg,PDFDateString:ea,PDFWorker:wg,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:Gs,RenderingCancelledException:Ks,renderRichText:ga,ResponseException:Es,setLayerDimensions:aa,shadow:xs,SignatureExtractor:cx,stopEvent:ta,SupportedImageMimeTypes:la,TextLayer:zf,TouchManager:dc,updateUrlHash:ws,Util:Ls,VerbosityLevel:as,version:zg,XfaLayer:Hs};const L_=function(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=D_(t))&&(i&&(i+=" "),i+=e);return i};var N_=Object.prototype.hasOwnProperty;function I_(t,e,n){for(n of t.keys())if(F_(n,e))return n}function F_(t,e){var n,i,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((i=t.length)===e.length)for(;i--&&F_(t[i],e[i]););return-1===i}if(n===Set){if(t.size!==e.size)return!1;for(i of t){if((r=i)&&"object"===typeof r&&!(r=I_(e,r)))return!1;if(!e.has(r))return!1}return!0}if(n===Map){if(t.size!==e.size)return!1;for(i of t){if((r=i[0])&&"object"===typeof r&&!(r=I_(e,r)))return!1;if(!F_(i[1],e.get(r)))return!1}return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((i=t.byteLength)===e.byteLength)for(;i--&&t.getInt8(i)===e.getInt8(i););return-1===i}if(ArrayBuffer.isView(t)){if((i=t.byteLength)===e.byteLength)for(;i--&&t[i]===e[i];);return-1===i}if(!n||"object"===typeof t){for(n in i=0,t){if(N_.call(t,n)&&++i&&!N_.call(e,n))return!1;if(!(n in e)||!F_(t[n],e[n]))return!1}return Object.keys(e).length===i}}return t!==t&&e!==e}function O_(t){let e=!1;return{promise:new Promise((n,i)=>{t.then(t=>!e&&n(t)).catch(t=>!e&&i(t))}),cancel(){e=!0}}}const B_=["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onBlur","onInput","onInvalid","onReset","onSubmit","onLoad","onError","onKeyDown","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onScroll","onWheel","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd","onChange","onToggle"];function W_(t,e){const n={};for(const i of B_){const r=t[i];r&&(n[i]=e?t=>r(t,e(i)):r)}return n}var j_="Invariant failed";function U_(t,e){if(!t)throw new Error(j_)}var z_=n(440);const H_=(0,s.createContext)(null);class V_{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return U_(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){U_(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||"noopener noreferrer nofollow",t.target=n?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{U_(this.pdfDocument),U_(t),"string"===typeof t?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(t=>{U_(Array.isArray(t),'"'.concat(t,'" is not a valid destination array.'));const e=t[0];new Promise(t=>{U_(this.pdfDocument),e instanceof Object?this.pdfDocument.getPageIndex(e).then(e=>{t(e)}).catch(()=>{U_(!1,'"'.concat(e,'" is not a valid page reference.'))}):"number"===typeof e?t(e):U_(!1,'"'.concat(e,'" is not a valid destination reference.'))}).then(e=>{const n=e+1;U_(this.pdfViewer),U_(n>=1&&n<=this.pagesCount,'"'.concat(n,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:e,pageNumber:n})})})}goToPage(t){const e=t-1;U_(this.pdfViewer),U_(t>=1&&t<=this.pagesCount,'"'.concat(t,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function G_(t){let{children:e,type:n}=t;return(0,Se.jsx)("div",{className:"react-pdf__message react-pdf__message--".concat(n),children:e})}const q_={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function X_(t,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return t}}function K_(){return(0,s.useReducer)(X_,{value:void 0,error:void 0})}const Y_="undefined"!==typeof window,Q_=Y_&&"file:"===window.location.protocol;function $_(t){return function(t){return"undefined"!==typeof t}(t)&&null!==t}function J_(t){return function(t){return"string"===typeof t}(t)&&/^data:/.test(t)}function Z_(t){U_(J_(t));const[e="",n=""]=t.split(",");return-1!==e.split(";").indexOf("base64")?atob(n):unescape(n)}function tk(){return Y_&&window.devicePixelRatio||1}const ek="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function nk(){z_(!Q_,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(ek))}function ik(t){(null===t||void 0===t?void 0:t.cancel)&&t.cancel()}function rk(t,e){return Object.defineProperty(t,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.view[3]},configurable:!0}),t}const sk=["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate","scale"],ak=["url"],{Tm:ok}=r,lk=(t,e)=>{switch(e){case q_.NEED_PASSWORD:t(prompt("Enter the password to open this PDF file."));break;case q_.INCORRECT_PASSWORD:t(prompt("Invalid password. Please try again."));break}};function ck(t){return"object"===typeof t&&null!==t&&("data"in t||"range"in t||"url"in t)}const uk=(0,s.forwardRef)(function(t,e){let{children:n,className:i,error:r="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:l,file:c,inputRef:u,imageResourcesPath:h,loading:p="Loading PDF\u2026",noData:f="No PDF file specified.",onItemClick:g,onLoadError:m,onLoadProgress:v,onLoadSuccess:y,onPassword:b=lk,onSourceError:w,onSourceSuccess:x,options:_,renderMode:k,rotate:A,scale:S}=t,E=o(t,sk);const[C,M]=K_(),{value:T,error:R}=C,[P,D]=K_(),{value:L,error:N}=P,I=(0,s.useRef)(new V_),F=(0,s.useRef)([]),O=(0,s.useRef)(void 0),B=(0,s.useRef)(void 0);c&&c!==O.current&&ck(c)&&(z_(!F_(c,O.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),O.current=c),_&&_!==B.current&&(z_(!F_(_,B.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),B.current=_);const W=(0,s.useRef)({scrollPageIntoView:t=>{const{dest:e,pageNumber:n,pageIndex:i=n-1}=t;if(g)return void g({dest:e,pageIndex:i,pageNumber:n});const r=F.current[i];r?r.scrollIntoView():z_(!1,"An internal link leading to page ".concat(n," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}});(0,s.useImperativeHandle)(e,()=>({linkService:I,pages:F,viewer:W}),[]),(0,s.useEffect)(function(){M({type:"RESET"})},[c,M]);const j=(0,s.useCallback)(async()=>{if(!c)return null;if("string"===typeof c){if(J_(c)){return{data:Z_(c)}}return nk(),{url:c}}if(c instanceof ok)return{range:c};if(c instanceof ArrayBuffer)return{data:c};if(Y_&&function(t){return U_(Y_),t instanceof Blob}(c)){const t=await function(t){return new Promise((e,n)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return n(new Error("Error while reading a file."));e(i.result)},i.onerror=t=>{if(!t.target)return n(new Error("Error while reading a file."));const{error:e}=t.target;if(!e)return n(new Error("Error while reading a file."));switch(e.code){case e.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case e.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case e.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},i.readAsArrayBuffer(t)})}(c);return{data:t}}if(U_("object"===typeof c),U_(ck(c)),"url"in c&&"string"===typeof c.url){if(J_(c.url)){const{url:t}=c,e=o(c,ak);return d({data:Z_(t)},e)}nk()}return c},[c]);(0,s.useEffect)(()=>{const t=O_(j());return t.promise.then(t=>{M({type:"RESOLVE",value:t})}).catch(t=>{M({type:"REJECT",error:t})}),()=>{ik(t)}},[j,M]),(0,s.useEffect)(()=>{"undefined"!==typeof T&&(!1!==T?x&&x():R&&(z_(!1,R.toString()),w&&w(R)))},[T]),(0,s.useEffect)(function(){D({type:"RESET"})},[D,T]),(0,s.useEffect)(function(){if(!T)return;const t=eg(_?d(d({},T),_):T);v&&(t.onProgress=v),b&&(t.onPassword=b);const e=t,n=e.promise.then(t=>{D({type:"RESOLVE",value:t})}).catch(t=>{e.destroyed||D({type:"REJECT",error:t})});return()=>{n.finally(()=>e.destroy())}},[_,D,T]),(0,s.useEffect)(()=>{"undefined"!==typeof L&&(!1!==L?L&&(y&&y(L),F.current=new Array(L.numPages),I.current.setDocument(L)):N&&(z_(!1,N.toString()),m&&m(N)))},[L]),(0,s.useEffect)(function(){I.current.setViewer(W.current),I.current.setExternalLinkRel(a),I.current.setExternalLinkTarget(l)},[a,l]);const U=(0,s.useCallback)((t,e)=>{F.current[t]=e},[]),z=(0,s.useCallback)(t=>{delete F.current[t]},[]),H=(0,s.useMemo)(()=>({imageResourcesPath:h,linkService:I.current,onItemClick:g,pdf:L,registerPage:U,renderMode:k,rotate:A,scale:S,unregisterPage:z}),[h,g,L,U,k,A,S,z]),V=(0,s.useMemo)(()=>W_(E,()=>L),[E,L]);return(0,Se.jsx)("div",d(d({className:L_("react-pdf__Document",i),ref:u},V),{},{children:c?void 0===L||null===L?(0,Se.jsx)(G_,{type:"loading",children:"function"===typeof p?p():p}):!1===L?(0,Se.jsx)(G_,{type:"error",children:"function"===typeof r?r():r}):function(){if(t=H,!Boolean(null===t||void 0===t?void 0:t.pdf))throw new Error("pdf is undefined");var t;const e="function"===typeof n?n(H):n;return(0,Se.jsx)(H_.Provider,{value:H,children:e})}():(0,Se.jsx)(G_,{type:"no-data",children:"function"===typeof f?f():f})}))}),hk=uk;function dk(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.filter(Boolean);return n.length<=1?n[0]||null:function(t){for(var e=0,i=n;e<i.length;e++){var r=i[e];"function"===typeof r?r(t):r&&(r.current=t)}}}function pk(){return(0,s.useContext)(H_)}const fk=(0,s.createContext)(null);function gk(){return(0,s.useContext)(fk)}function mk(){const t=pk(),e=gk();U_(e);const n=d(d({},t),e),{imageResourcesPath:i,linkService:r,onGetAnnotationsError:a,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:u,pdf:h,renderForms:p,rotate:f,scale:g=1}=n;U_(h),U_(u),U_(r);const[m,v]=K_(),{value:y,error:b}=m,w=(0,s.useRef)(null);z_(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,s.useEffect)(function(){v({type:"RESET"})},[v,u]),(0,s.useEffect)(function(){if(!u)return;const t=O_(u.getAnnotations()),e=t;return t.promise.then(t=>{v({type:"RESOLVE",value:t})}).catch(t=>{v({type:"REJECT",error:t})}),()=>{ik(e)}},[v,u]),(0,s.useEffect)(()=>{void 0!==y&&(!1!==y?y&&o&&o(y):b&&(z_(!1,b.toString()),a&&a(b)))},[y]);const x=(0,s.useMemo)(()=>u.getViewport({scale:g,rotation:f}),[u,f,g]);return(0,s.useEffect)(function(){if(!h||!u||!r||!y)return;const{current:t}=w;if(!t)return;const e=x.clone({dontFlip:!0}),n={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:h.annotationStorage,commentManager:null,div:t,l10n:null,linkService:r,page:u,structTreeLayer:null,viewport:e},s={annotations:y,annotationStorage:h.annotationStorage,div:t,imageResourcesPath:i,linkService:r,page:u,renderForms:p,viewport:e};t.innerHTML="";try{new cy(n).render(s),c&&c()}catch(a){!function(t){z_(!1,"".concat(t)),l&&l(t)}(a)}return()=>{}},[y,i,r,u,h,p,x]),(0,Se.jsx)("div",{className:L_("react-pdf__Page__annotations","annotationLayer"),ref:w})}const vk={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},yk=/^H(\d+)$/;function bk(t){return"children"in t}function wk(t){return!!bk(t)&&(1===t.children.length&&0 in t.children&&"id"in t.children[0])}function xk(t){const e={};if(bk(t)){const{role:n}=t,i=n.match(yk);if(i)e.role="heading",e["aria-level"]=Number(i[1]);else if(function(t){return t in vk}(n)){const t=vk[n];t&&(e.role=t)}}return e}function _k(t){const e={};if(bk(t)){if(void 0!==t.alt&&(e["aria-label"]=t.alt),void 0!==t.lang&&(e.lang=t.lang),wk(t)){const[n]=t.children;if(n){const t=_k(n);return d(d({},e),t)}}}else"id"in t&&(e["aria-owns"]=t.id);return e}function kk(t){return t?d(d({},xk(t)),_k(t)):null}function Ak(t){let{className:e,node:n}=t;const i=(0,s.useMemo)(()=>kk(n),[n]),r=(0,s.useMemo)(()=>bk(n)?wk(n)?null:n.children.map((t,e)=>(0,Se.jsx)(Ak,{node:t},e)):null,[n]);return(0,Se.jsx)("span",d(d({className:e},i),{},{children:r}))}function Sk(){const t=gk();U_(t);const{onGetStructTreeError:e,onGetStructTreeSuccess:n}=t,[i,r]=K_(),{value:a,error:o}=i,{customTextRenderer:l,page:c}=t;return(0,s.useEffect)(function(){r({type:"RESET"})},[r,c]),(0,s.useEffect)(function(){if(l)return;if(!c)return;const t=O_(c.getStructTree()),e=t;return t.promise.then(t=>{r({type:"RESOLVE",value:t})}).catch(t=>{r({type:"REJECT",error:t})}),()=>ik(e)},[l,c,r]),(0,s.useEffect)(()=>{void 0!==a&&(!1!==a?a&&n&&n(a):o&&(z_(!1,o.toString()),e&&e(o)))},[a]),a?(0,Se.jsx)(Ak,{className:"react-pdf__Page__structTree structTree",node:a}):null}const Ek=Hr;function Ck(t){const e=gk();U_(e);const n=d(d({},e),t),{_className:i,canvasBackground:r,devicePixelRatio:a=tk(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:u,renderTextLayer:h,rotate:p,scale:f}=n,{canvasRef:g}=t;U_(c);const m=(0,s.useRef)(null);function v(t){(function(t){return"RenderingCancelledException"===t.name})(t)||(z_(!1,t.toString()),o&&o(t))}const y=(0,s.useMemo)(()=>c.getViewport({scale:f*a,rotation:p}),[a,c,p,f]),b=(0,s.useMemo)(()=>c.getViewport({scale:f,rotation:p}),[c,p,f]);(0,s.useEffect)(function(){if(!c)return;c.cleanup();const{current:t}=m;if(!t)return;t.width=y.width,t.height=y.height,t.style.width="".concat(Math.floor(b.width),"px"),t.style.height="".concat(Math.floor(b.height),"px"),t.style.visibility="hidden";const e={annotationMode:u?Ek.ENABLE_FORMS:Ek.ENABLE,canvas:t,canvasContext:t.getContext("2d",{alpha:!1}),viewport:y};r&&(e.background=r);const n=c.render(e),i=n;return n.promise.then(()=>{t.style.visibility="",c&&l&&l(rk(c,f))}).catch(v),()=>ik(i)},[r,c,u,y,b]);const w=(0,s.useCallback)(()=>{const{current:t}=m;t&&(t.width=0,t.height=0)},[]);return(0,s.useEffect)(()=>w,[w]),(0,Se.jsx)("canvas",{className:"".concat(i,"__canvas"),dir:"ltr",ref:dk(g,m),style:{display:"block",userSelect:"none"},children:h?(0,Se.jsx)(Sk,{}):null})}function Mk(){const t=gk();U_(t);const{customTextRenderer:e,onGetTextError:n,onGetTextSuccess:i,onRenderTextLayerError:r,onRenderTextLayerSuccess:a,page:o,pageIndex:l,pageNumber:c,rotate:u,scale:h}=t;U_(o);const[p,f]=K_(),{value:g,error:m}=p,v=(0,s.useRef)(null);z_(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,s.useEffect)(function(){f({type:"RESET"})},[o,f]),(0,s.useEffect)(function(){if(!o)return;const t=O_(o.getTextContent()),e=t;return t.promise.then(t=>{f({type:"RESOLVE",value:t})}).catch(t=>{f({type:"REJECT",error:t})}),()=>ik(e)},[o,f]),(0,s.useEffect)(()=>{void 0!==g&&(!1!==g?g&&i&&i(g):m&&(z_(!1,m.toString()),n&&n(m)))},[g]);const y=(0,s.useCallback)(()=>{a&&a()},[a]),b=(0,s.useCallback)(t=>{z_(!1,t.toString()),r&&r(t)},[r]);const w=(0,s.useMemo)(()=>o.getViewport({scale:h,rotation:u}),[o,u,h]);return(0,s.useLayoutEffect)(function(){if(!o||!g)return;const{current:t}=v;if(!t)return;t.innerHTML="";const n=o.streamTextContent({includeMarkedContent:!0}),i=new zf({container:t,textContentSource:n,viewport:w}),r=i;return i.render().then(()=>{const n=document.createElement("div");n.className="endOfContent",t.append(n);const i=t.querySelectorAll('[role="presentation"]');if(e){let t=0;g.items.forEach((n,r)=>{if(!function(t){return"str"in t}(n))return;const s=i[t];if(!s)return;const a=e(d({pageIndex:l,pageNumber:c,itemIndex:r},n));s.innerHTML=a,t+=n.str&&n.hasEOL?2:1})}y()}).catch(b),()=>ik(r)},[e,b,y,o,l,c,g,w]),(0,Se.jsx)("div",{className:L_("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){const t=v.current;t&&t.classList.remove("selecting")},onMouseDown:function(){const t=v.current;t&&t.classList.add("selecting")},ref:v})}const Tk=["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"],Rk=1;function Pk(t){const e=d(d({},pk()),t),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:r,canvasRef:a,children:l,className:c,customRenderer:u,customTextRenderer:h,devicePixelRatio:p,error:f="Failed to load the page.",height:g,inputRef:m,loading:v="Loading page\u2026",noData:y="No page specified.",onGetAnnotationsError:b,onGetAnnotationsSuccess:w,onGetStructTreeError:x,onGetStructTreeSuccess:_,onGetTextError:k,onGetTextSuccess:A,onLoadError:S,onLoadSuccess:E,onRenderAnnotationLayerError:C,onRenderAnnotationLayerSuccess:M,onRenderError:T,onRenderSuccess:R,onRenderTextLayerError:P,onRenderTextLayerSuccess:D,pageIndex:L,pageNumber:N,pdf:I,registerPage:F,renderAnnotationLayer:O=!0,renderForms:B=!1,renderMode:W="canvas",renderTextLayer:j=!0,rotate:U,scale:z=Rk,unregisterPage:H,width:V}=e,G=o(e,Tk),[q,X]=K_(),{value:K,error:Y}=q,Q=(0,s.useRef)(null);U_(I);const $=$_(N)?N-1:null!==L&&void 0!==L?L:null,J=null!==N&&void 0!==N?N:$_(L)?L+1:null,Z=null!==U&&void 0!==U?U:K?K.rotate:null,tt=(0,s.useMemo)(()=>{if(!K)return null;let t=1;const e=null!==z&&void 0!==z?z:Rk;if(V||g){const e=K.getViewport({scale:1,rotation:Z});V?t=V/e.width:g&&(t=g/e.height)}return e*t},[g,K,Z,z,V]);(0,s.useEffect)(function(){return()=>{$_($)&&i&&H&&H($)}},[i,I,$,H]),(0,s.useEffect)(function(){X({type:"RESET"})},[X,I,$]),(0,s.useEffect)(function(){if(!I||!J)return;const t=O_(I.getPage(J)),e=t;return t.promise.then(t=>{X({type:"RESOLVE",value:t})}).catch(t=>{X({type:"REJECT",error:t})}),()=>ik(e)},[X,I,J]),(0,s.useEffect)(()=>{void 0!==K&&(!1!==K?function(){if(E){if(!K||!tt)return;E(rk(K,tt))}if(i&&F){if(!$_($)||!Q.current)return;F($,Q.current)}}():Y&&(z_(!1,Y.toString()),S&&S(Y)))},[K,tt]);const et=(0,s.useMemo)(()=>$_($)&&J&&$_(Z)&&$_(tt)?{_className:n,canvasBackground:r,customTextRenderer:h,devicePixelRatio:p,onGetAnnotationsError:b,onGetAnnotationsSuccess:w,onGetStructTreeError:x,onGetStructTreeSuccess:_,onGetTextError:k,onGetTextSuccess:A,onRenderAnnotationLayerError:C,onRenderAnnotationLayerSuccess:M,onRenderError:T,onRenderSuccess:R,onRenderTextLayerError:P,onRenderTextLayerSuccess:D,page:K,pageIndex:$,pageNumber:J,renderForms:B,renderTextLayer:j,rotate:Z,scale:tt}:null,[n,r,h,p,b,w,x,_,k,A,C,M,T,R,P,D,K,$,J,B,j,Z,tt]),nt=(0,s.useMemo)(()=>W_(G,()=>K?tt?rk(K,tt):void 0:K),[G,K,tt]),it="".concat($,"@").concat(tt,"/").concat(Z);function rt(){switch(W){case"custom":return U_(u),(0,Se.jsx)(u,{},"".concat(it,"_custom"));case"none":return null;default:return(0,Se.jsx)(Ck,{canvasRef:a},"".concat(it,"_canvas"))}}return(0,Se.jsx)("div",d(d({className:L_(n,c),"data-page-number":J,ref:dk(m,Q),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":"".concat(tt),"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},nt),{},{children:J?null===I||void 0===K||null===K?(0,Se.jsx)(G_,{type:"loading",children:"function"===typeof v?v():v}):!1===I||!1===K?(0,Se.jsx)(G_,{type:"error",children:"function"===typeof f?f():f}):function(){if(t=et,!Boolean(null===t||void 0===t?void 0:t.page))throw new Error("page is undefined");var t;const e="function"===typeof l?l(et):l;return(0,Se.jsxs)(fk.Provider,{value:et,children:[rt(),j?(0,Se.jsx)(Mk,{},"".concat(it,"_text")):null,O?(0,Se.jsx)(mk,{},"".concat(it,"_annotations")):null,e]})}():(0,Se.jsx)(G_,{type:"no-data",children:"function"===typeof y?y():y})}))}Rp.workerSrc=new URL(n(749),n.b).toString();const Dk="https://z277970-rr25o5.ps07.zwhhosting.com/omekas/api".replace(/\/+$/,""),Lk=t=>(t=>{const e=t.includes("?")?"&":"?";return"".concat(t).concat(e,"key_identity=").concat("6pW9FziPx0tOP5HtqHF6HOLT8i1OoR6e","&key_credential=").concat("QZqVwHqGUlpvJc13iuEuf2GpsG2Ak6pm")})("".concat(Dk).concat(t.startsWith("/")?t:"/".concat(t)));async function Nk(t){try{const e=await fetch("https://api.allorigins.win/get?url=".concat(encodeURIComponent(t)));if(e.ok)return JSON.parse((await e.json()).contents)}catch(n){}try{const e=await fetch("https://api.codetabs.com/v1/proxy?quest=".concat(encodeURIComponent(t)));if(e.ok)return await e.json()}catch(i){}const e=await fetch(t);if(!e.ok)throw new Error("fetch failed");return await e.json()}function Ik(t){let{id:e,onClose:n}=t;const[i,r]=(0,s.useState)(""),[a,o]=(0,s.useState)(""),[l,c]=(0,s.useState)(null),[u,h]=(0,s.useState)(window.innerWidth),[d,p]=(0,s.useState)(!0),[f,g]=(0,s.useState)("pdfjs"),[m,v]=(0,s.useState)(0),y=(0,s.useRef)(null);(0,s.useEffect)(()=>{const t=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=t}},[]),(0,s.useEffect)(()=>{const t=t=>"Escape"===t.key&&(null===n||void 0===n?void 0:n());return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[n]),(0,s.useEffect)(()=>{const t=()=>h(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);(0,s.useEffect)(()=>{(async()=>{try{p(!0),g("pdfjs"),v(0);let n="";try{n=await(async t=>{const e=await Nk(Lk("/media/".concat(t))),n=(null===e||void 0===e?void 0:e["o:original_url"])||"";if(!n)throw new Error("media \u0e44\u0e21\u0e48\u0e21\u0e35 o:original_url");return n})(e)}catch(t){n=await(async t=>{const e=await Nk(Lk("/items/".concat(t))),n=(null===e||void 0===e?void 0:e["o:media"])||[];for(const i of n){const t=null===i||void 0===i?void 0:i["o:id"];if(!t)continue;const e=await Nk(Lk("/media/".concat(t))),n=(null===e||void 0===e?void 0:e["o:original_url"])||"";if(n.toLowerCase().endsWith(".pdf"))return n}throw new Error("\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e44\u0e1f\u0e25\u0e4c PDF \u0e43\u0e19 item \u0e19\u0e35\u0e49")})(e)}r(n),o(n)}catch(Hk){console.error(Hk),alert("\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e42\u0e2b\u0e25\u0e14\u0e44\u0e1f\u0e25\u0e4c PDF \u0e44\u0e14\u0e49"),null===n||void 0===n||n()}finally{p(!1)}})()},[e,n]);const b=u>1024;return(0,Se.jsx)("div",{className:"fixed inset-0 z-[2000] bg-black/70 backdrop-blur-sm flex items-center justify-center",children:(0,Se.jsxs)("div",{className:"w-[98vw] h-[94vh] max-w-[1400px] bg-[#fbf6ed] rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[(0,Se.jsxs)("div",{className:"flex items-center justify-between px-4 sm:px-6 py-3 border-b border-[#eadfd2] bg-[#fffdf6]",children:[(0,Se.jsx)("div",{className:"font-semibold text-[#5b4a3e]",children:"\u0e2d\u0e48\u0e32\u0e19\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23"}),(0,Se.jsxs)("div",{className:"flex items-center gap-2",children:[i&&(0,Se.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",className:"px-3 py-1.5 rounded-md border border-[#e8dccc] text-[#5b4a3e] hover:bg-[#fff7ef]",children:"\u0e40\u0e1b\u0e34\u0e14\u0e43\u0e19\u0e41\u0e17\u0e47\u0e1a\u0e43\u0e2b\u0e21\u0e48"}),(0,Se.jsx)("button",{onClick:n,className:"px-4 py-1.5 rounded-md bg-[#d8653b] text-white hover:bg-[#c85a32]",children:"\u0e1b\u0e34\u0e14"})]})]}),(0,Se.jsx)("div",{ref:y,className:"flex-1 overflow-auto px-2 sm:px-4 py-4",children:d?(0,Se.jsxs)("div",{className:"h-full flex flex-col items-center justify-center",children:[(0,Se.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#d8653b]"}),(0,Se.jsx)("p",{className:"mt-3 text-[#a36a46]",children:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14\u0e2b\u0e19\u0e31\u0e07\u0e2a\u0e37\u0e2d..."})]}):"iframe"===f?(0,Se.jsx)("iframe",{title:"pdf",src:a,className:"w-full h-[80vh] rounded-lg bg-white"}):(0,Se.jsx)("div",{className:"flex flex-col items-center",children:(0,Se.jsx)(hk,{file:{url:a},onLoadSuccess:t=>{let{numPages:e}=t;return c(e)},onLoadError:()=>{0===m?(o("https://api.allorigins.win/raw?url=".concat(encodeURIComponent(i))),v(1)):1===m?(o((t=>"https://api.codetabs.com/v1/proxy?quest=".concat(encodeURIComponent(t)))(i)),v(2)):g("iframe")},loading:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23...",className:"bg-[#fffdf6]",children:Array.from(new Array(l),(t,e)=>b?e%2===0&&(0,Se.jsxs)("div",{className:"flex justify-center mb-4 gap-4",children:[(0,Se.jsx)(Pk,{pageNumber:e+1,width:Math.min(620,u/2.2),renderAnnotationLayer:!1,renderTextLayer:!0}),e+2<=l&&(0,Se.jsx)(Pk,{pageNumber:e+2,width:Math.min(620,u/2.2),renderAnnotationLayer:!1,renderTextLayer:!0})]},e):(0,Se.jsx)("div",{className:"flex justify-center mb-4",children:(0,Se.jsx)(Pk,{pageNumber:e+1,width:Math.min(820,u-32),renderAnnotationLayer:!1,renderTextLayer:!0})},e))})})})]})})}const Fk="https://z277970-rr25o5.ps07.zwhhosting.com/omekas/api".replace(/\/+$/,"");function Ok(){const[t,e]=(0,s.useState)([]),[n,i]=(0,s.useState)(!0),[r,a]=(0,s.useState)(""),[o,l]=(0,s.useState)(""),[c,u]=(0,s.useState)(1),[h,d]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{i(!0);const n=await(async t=>{try{const e="https://api.allorigins.win/get?url=".concat(encodeURIComponent(t)),n=await tr.get(e,{timeout:15e3});return JSON.parse(n.data.contents)}catch(e){}try{const e="https://api.codetabs.com/v1/proxy?quest=".concat(encodeURIComponent(t));return(await tr.get(e,{timeout:15e3})).data}catch(n){}return(await tr.get(t,{timeout:15e3})).data})((t="/items",(t=>{const e=t.includes("?")?"&":"?";return"".concat(t).concat(e,"key_identity=").concat("6pW9FziPx0tOP5HtqHF6HOLT8i1OoR6e","&key_credential=").concat("QZqVwHqGUlpvJc13iuEuf2GpsG2Ak6pm")})("".concat(Fk).concat(t.startsWith("/")?t:"/".concat(t)))));e(Array.isArray(n)?n:[]),a("")}catch(Hk){a((null===Hk||void 0===Hk?void 0:Hk.message)||"\u0e42\u0e2b\u0e25\u0e14\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08")}finally{i(!1)}var t})()},[]);const p=(0,s.useMemo)(()=>{const e=o.trim().toLowerCase();return t.filter(t=>{const n=(t=>{var e,n;return t["o:title"]||(null===(e=t["dcterms:title"])||void 0===e||null===(n=e[0])||void 0===n?void 0:n["@value"])||"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e0a\u0e37\u0e48\u0e2d\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23"})(t).toLowerCase(),i=(t=>{var e,n,i,r;return(null===(e=t["dcterms:abstract"])||void 0===e||null===(n=e[0])||void 0===n?void 0:n["@value"])||(null===(i=t["dcterms:description"])||void 0===i||null===(r=i[0])||void 0===r?void 0:r["@value"])||""})(t).toLowerCase();return!e||n.includes(e)||i.includes(e)})},[t,o]),f=(p.length,9*(c-1)),g=p.slice(f,f+9),m=t=>{var e,n,i;const r=(null===t||void 0===t||null===(e=t["o:primary_media"])||void 0===e?void 0:e["o:id"])||(null===t||void 0===t||null===(n=t["o:media"])||void 0===n||null===(i=n[0])||void 0===i?void 0:i["o:id"])||(null===t||void 0===t?void 0:t["o:id"]);if(!r)return alert("\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e44\u0e1f\u0e25\u0e4c\u0e02\u0e2d\u0e07\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e19\u0e35\u0e49");d(String(r))};return(0,Se.jsxs)("div",{className:"min-h-screen bg-[#fbf6ed] text-[#5b4a3e]",children:[(0,Se.jsx)(Ee,{}),(0,Se.jsx)("div",{className:"h-[88px]"}),(0,Se.jsxs)("section",{className:"relative w-full h-[360px] md:h-[420px] overflow-hidden",children:[(0,Se.jsx)("img",{src:"/assets/hero-books.jpg",alt:"banner",className:"absolute inset-0 w-full h-full object-cover"}),(0,Se.jsx)("div",{className:"absolute inset-0 bg-black/20"}),(0,Se.jsx)("div",{className:"relative z-10 h-full flex items-center justify-center",children:(0,Se.jsxs)("form",{className:"flex w-[90%] max-w-2xl",onSubmit:t=>{t.preventDefault(),u(1)},children:[(0,Se.jsx)("input",{value:o,onChange:t=>l(t.target.value),className:"flex-1 h-12 md:h-14 px-4 rounded-l-full bg-white/95 focus:outline-none",placeholder:"\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23\u0e15\u0e31\u0e27\u0e40\u0e02\u0e35\u0e22\u0e19\u2026"}),(0,Se.jsx)("button",{type:"submit",className:"px-5 md:px-6 rounded-r-full bg-[#f08a24] text-white font-bold",children:"\u0e04\u0e49\u0e19\u0e2b\u0e32"})]})})]}),(0,Se.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 mt-6",children:n?(0,Se.jsx)("div",{className:"py-20 text-center",children:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14\u2026"}):r?(0,Se.jsxs)("div",{className:"py-20 text-center text-red-600",children:["\u0e40\u0e01\u0e34\u0e14\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14: ",r]}):0===g.length?(0,Se.jsx)("div",{className:"py-20 text-center",children:"\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e17\u0e35\u0e48\u0e15\u0e23\u0e07\u0e01\u0e31\u0e1a\u0e40\u0e07\u0e37\u0e48\u0e2d\u0e19\u0e44\u0e02"}):(0,Se.jsx)(Se.Fragment,{children:(0,Se.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6",children:g.map(t=>(0,Se.jsx)(Te,{item:t,onOpen:m},t["o:id"]))})})}),h&&(0,Se.jsx)(Ik,{id:h,onClose:()=>d(null)}),(0,Se.jsx)(sr,{}),(0,Se.jsx)(Re,{})]})}Rp.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(zg,"/pdf.worker.min.js");const Bk="https://z277970-rr25o5.ps07.zwhhosting.com/omekas/api".replace(/\/+$/,""),Wk=t=>(t=>{const e=t.includes("?")?"&":"?";return"".concat(t).concat(e,"key_identity=").concat("6pW9FziPx0tOP5HtqHF6HOLT8i1OoR6e","&key_credential=").concat("QZqVwHqGUlpvJc13iuEuf2GpsG2Ak6pm")})("".concat(Bk).concat(t.startsWith("/")?t:"/".concat(t)));async function jk(t){try{const e=await fetch("https://api.allorigins.win/get?url=".concat(encodeURIComponent(t)));if(e.ok)return JSON.parse((await e.json()).contents)}catch(n){}try{const e=await fetch("https://api.codetabs.com/v1/proxy?quest=".concat(encodeURIComponent(t)));if(e.ok)return await e.json()}catch(i){}const e=await fetch(t);if(!e.ok)throw new Error("fetch failed");return await e.json()}function Uk(){const{id:t}=yt(),e=vt(),[n,i]=(0,s.useState)(""),[r,a]=(0,s.useState)(null),[o,l]=(0,s.useState)(window.innerWidth),[c,u]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{try{u(!0);let n="";try{n=await async function(t){const e=await jk(Wk("/media/".concat(t))),n=null===e||void 0===e?void 0:e["o:original_url"];if(!n)throw new Error("media \u0e44\u0e21\u0e48\u0e21\u0e35 o:original_url");return n}(t)}catch(e){n=await async function(t){const e=await jk(Wk("/items/".concat(t))),n=(null===e||void 0===e?void 0:e["o:media"])||[];for(const i of n){const t=null===i||void 0===i?void 0:i["o:id"];if(!t)continue;const e=await jk(Wk("/media/".concat(t))),n=(null===e||void 0===e?void 0:e["o:original_url"])||"";if(n.toLowerCase().endsWith(".pdf"))return n}throw new Error("\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e44\u0e1f\u0e25\u0e4c PDF \u0e43\u0e19 item \u0e19\u0e35\u0e49")}(t)}i(n)}catch(Hk){console.error(Hk),alert("\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e42\u0e2b\u0e25\u0e14\u0e44\u0e1f\u0e25\u0e4c PDF \u0e44\u0e14\u0e49")}finally{u(!1)}})()},[t]),(0,s.useEffect)(()=>{const t=()=>l(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const h=o>1024;return(0,Se.jsxs)("div",{className:"min-h-screen bg-[#fbf6ed] text-[#5b4a3e]",children:[(0,Se.jsx)(Ee,{}),(0,Se.jsx)("div",{className:"h-[88px]"}),(0,Se.jsxs)("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 py-6",children:[(0,Se.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,Se.jsx)("button",{onClick:()=>e("/books"),className:"px-4 py-2 bg-[#d8653b] text-white rounded hover:bg-[#c85a32]",children:"\u2190 \u0e01\u0e25\u0e31\u0e1a\u0e44\u0e1b\u0e2b\u0e19\u0e49\u0e32\u0e23\u0e27\u0e21\u0e2b\u0e19\u0e31\u0e07\u0e2a\u0e37\u0e2d"})}),c?(0,Se.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,Se.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#d8653b]"}),(0,Se.jsx)("p",{className:"mt-3 text-[#a36a46]",children:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14\u0e2b\u0e19\u0e31\u0e07\u0e2a\u0e37\u0e2d..."})]}):n?(0,Se.jsx)("div",{className:"flex flex-col items-center",children:(0,Se.jsx)(hk,{file:n,onLoadSuccess:t=>{let{numPages:e}=t;return a(e)},loading:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23...",className:"shadow-md bg-[#fffdf6] rounded-lg",children:Array.from(new Array(r),(t,e)=>h?e%2===0&&(0,Se.jsxs)("div",{className:"flex justify-center mb-4 gap-4",children:[(0,Se.jsx)(Pk,{pageNumber:e+1,width:o/2.5,renderAnnotationLayer:!1,renderTextLayer:!0}),e+2<=r&&(0,Se.jsx)(Pk,{pageNumber:e+2,width:o/2.5,renderAnnotationLayer:!1,renderTextLayer:!0})]},e):(0,Se.jsx)("div",{className:"flex justify-center mb-4",children:(0,Se.jsx)(Pk,{pageNumber:e+1,width:o-40,renderAnnotationLayer:!1,renderTextLayer:!0})},e))})}):(0,Se.jsx)("p",{className:"text-center text-red-600 mt-10",children:"\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e44\u0e1f\u0e25\u0e4c PDF"})]}),(0,Se.jsx)(Re,{})]})}function zk(){return(0,Se.jsx)(me,{children:(0,Se.jsxs)(Ot,{children:[(0,Se.jsx)(It,{path:"/",element:(0,Se.jsx)(rr,{})}),(0,Se.jsx)(It,{path:"/books",element:(0,Se.jsx)(Ok,{})}),(0,Se.jsx)(It,{path:"/read/:mediaId",element:(0,Se.jsx)(Uk,{})}),(0,Se.jsx)(It,{path:"/read/:id",element:(0,Se.jsx)(Uk,{})})]})})}a.createRoot(document.getElementById("root")).render((0,Se.jsx)(s.StrictMode,{children:(0,Se.jsx)(zk,{})}))})();
//# sourceMappingURL=main.7ce1442b.js.map